(this["webpackJsonpnimflow-portal"]=this["webpackJsonpnimflow-portal"]||[]).push([[12],{130:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(42),c=n(426),o=n.n(c),i=n(275);o.a.registerHelper("translate",(function(e,t){var n={ns:i.b};return"object"===typeof t&&"hash"in t&&(n=Object(r.a)(Object(r.a)({},n),t.hash)),a.a.t(e,n)}));var s=function(e,t,n,r){return function(e,t){return o.a.compile(e,t)}(e,n)(t,r)}},132:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return y}));var r=n(22),a=n(2473),c=(n(2351),n(2421),n(255),n(94),["MilestoneReached","MilestoneCleared"]),o=["TaskCreated","TaskUpdated","TaskArchived","ResponseSent"],i=["ActionDispatched","ContextsRecalculationCompleted","ContextRecalculationError"].concat(o,c);["RequestProcessed"].concat(Object(r.a)(i),["CustomEvent"]);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.settings;return!n&&t&&(e.settings=n={}),n}function u(e){var t,n=null===(t=s(e))||void 0===t?void 0:t.commandText;return Object(a.a)(n)?e.name:n}function l(e){var t,n=null===(t=s(e))||void 0===t?void 0:t.actionInProgressText;return n||e.name}var d={id:"string",typeName:"string",reference:"string",state:"record",dateCreated:"dateTime",dateModified:"dateTime",version:"string",contextTypeVersion:"number",milestones:"array",tags:"array",metrics:"array"},f={id:"string",contextId:"string",contextTypeName:"string",contextReference:"string",typeName:"string",title:"string",data:"record",labels:"array",dateCreated:"dateTime",dateUpdated:"dateTime",assignedTo:"string",status:"string",archived:"boolean",dueDate:"string",importance:"number",focused:"boolean"},b={event:"string",timestamp:"dateTime",requestTypeName:"string",contextTypeName:"string",sentBy:"string",reference:"string",subject:"string",contextIsNew:"boolean",action:"string",message:"string",dueDate:"dateTime",taskTypeName:"string",assignedTo:"string",importance:"number",responseTypeName:"string",oldImportance:"number",oldLabels:"array",oldDueDate:"dateTime",oldAssignedTo:"string",milestoneName:"string",value:"dateTime",tags:"array",metrics:"array"},j=function(e){var t=["string","number","boolean","dateTime"];return Object.keys(e).filter((function(n){return t.includes(e[n])})).sort()},v=function(e){return Object.keys(e).filter((function(t){return"array"===e[t]})).sort()},p=function(e){return Object.keys(e).filter((function(t){return"record"===e[t]})).sort()},O=j(d),h=v(d),m=p(d),g=([].concat(Object(r.a)(O),Object(r.a)(h),Object(r.a)(m)),j(f)),x=(v(f),p(f)),y=([].concat(Object(r.a)(g),Object(r.a)(x)),j(b)),k=v(b);[].concat(Object(r.a)(y),Object(r.a)(k))},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),a=n(6),c=n(9),o=n(10),i=n(1),s=n(910),u=n(2424),l=n(2425),d=n(2426),f=n(197),b=n.n(f),j=n(40),v=function(e){var t=e.error,n=e.stack;return Object(j.jsxs)(u.a,{children:[Object(j.jsx)(d.a,{expandIcon:Object(j.jsx)(b.a,{}),children:Object(j.jsx)(s.a,{variant:"h5",color:"error",children:t})}),Object(j.jsx)(l.a,{children:Object(j.jsx)("pre",{children:n})})]})},p=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,r=n.hasError,a=n.error,c=n.errorInfo;return r?Object(j.jsx)(v,{error:null!==(e=null===a||void 0===a?void 0:a.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(i.Component)},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(1),a=n(919),c=n(180),o=n(2471),i=n(149),s=n(257),u=n(304),l=n(40),d=function(){var e=Object(o.a)().t,t=Object(c.b)().enqueueSnackbar,n=Object(i.b)();return Object(r.useCallback)((function(r,c,o){var i,d,f=null!==(i=null===o||void 0===o?void 0:o.variant)&&void 0!==i?i:"error",b=null!==(d=null===o||void 0===o?void 0:o.dialogTitle)&&void 0!==d?d:e("Error");if(Object(u.b)(c)&&"string"===typeof r){var j,v=!1===(null===(j=window.navigator)||void 0===j?void 0:j.onLine);r=e(v?"BrowserOfflineMessage":"NetworkErrorMessage",{message:r})}t(r,{variant:f,action:Object(l.jsx)(a.a,{onClick:function(){n({title:b,description:Object(l.jsx)(s.a,{error:c})})},children:e("ShowDetails")})})}),[n,t,e])}},173:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j}));var r=n(432),a=n.n(r),c=n(546),o=n.n(c),i=n(290),s=n.n(i),u=n(42),l=s.a;function d(e){n(325)("./".concat(e,"/index")).then((function(e){"function"===typeof(null===e||void 0===e?void 0:e.default)&&(l=e.default)})).catch((function(){var t=e.indexOf("-");t>0&&d(e.substring(0,t))}))}u.a.language&&d(u.a.language),u.a.on("languageChanged",(function(e){d(e)}));var f=new a.a({allErrors:!0,addUsedSchema:!1});o()(f),f.addKeyword({keyword:"markdownDescription",schemaType:"string",valid:!0});var b=function(e){var t;return f.validateSchema(e)?{type:"success"}:(f.errors&&l&&l(f.errors),{type:"failure",errors:null!==(t=f.errors)&&void 0!==t?t:[]})},j=function(e){return l&&l(e),e}},193:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=o},223:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return o}));var r=["second","minute","hour","day","week","month","year"],a=["\u79d2","\u5206\u949f","\u5c0f\u65f6","\u5929","\u5468","\u4e2a\u6708","\u5e74"],c={},o=function(e,t){c[e]=t},i=function(e){return c[e]||c.en_US},s=[60,60,24,7,365/7/12,12];function u(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function l(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),a=0;e>=s[a]&&a<s.length;a++)e/=s[a];return(e=Math.floor(e))>(0===(a*=2)?9:1)&&(a+=1),t(e,a,r)[n].replace("%s",e.toString())}function d(e,t){return(+(t?u(t):new Date)-+u(e))/1e3}var f=function(e,t,n){return l(d(e,n&&n.relativeDate),i(t))},b="timeago-id";function j(e){return parseInt(e.getAttribute(b))}var v={},p=function(e){clearTimeout(e),delete v[e]};function O(e,t,n,r){p(j(e));var a=r.relativeDate,c=r.minInterval,o=d(t,a);e.innerText=l(o,n);var i=setTimeout((function(){O(e,t,n,r)}),Math.min(1e3*Math.max(function(e){for(var t=1,n=0,r=Math.abs(e);e>=s[n]&&n<s.length;n++)e/=s[n],t*=s[n];return r=(r%=t)?t-r:t,Math.ceil(r)}(o),c||1),2147483647));v[i]=0,function(e,t){e.setAttribute(b,t)}(e,i)}function h(e){e?p(j(e)):Object.keys(v).forEach(p)}function m(e,t,n){var r=e.length?e:[e];return r.forEach((function(e){O(e,function(e){return e.getAttribute("datetime")}(e),i(t),n||{})})),r}o("en_US",(function(e,t){if(0===t)return["just now","right now"];var n=r[Math.floor(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]})),o("zh_CN",(function(e,t){if(0===t)return["\u521a\u521a","\u7247\u523b\u540e"];var n=a[~~(t/2)];return[e+" "+n+"\u524d",e+" "+n+"\u540e"]}))},2420:function(e,t,n){"use strict";n.r(t),n.d(t,"TasksViewer",(function(){return l}));var r=n(1),a=n(476),c=n(128),o=n(40),i=[5,10,20,100],s=[{field:"title"},{field:"typeName"},{field:"contextTypeName",hidden:!0},{field:"contextReference"},{field:"dueDate"},{field:"status",hidden:!0},{field:"dateCreated"},{field:"focused",hidden:!0}],u={currentPage:0,pageSize:10},l=function(){var e=Object(c.c)().authenticatedUser,t=Object(r.useMemo)((function(){var t={archived:{type:"boolean",value:!1},assignedTo:{type:"textMatch",value:"*"}},n=null===e||void 0===e?void 0:e.email;return n&&(t.assignedTo={type:"or",filters:[t.assignedTo,{type:"prefixTextMatch",prefix:n}]}),t}),[e]);return Object(o.jsx)(a.a,{columns:s,initialState:u,pageSizeOptions:i,allowResponseCreation:!0,allowFocusing:!0,enforcedFilter:t})};t.default=l},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n(223);function a(e,t,n,r,a){var c=a%10,o=r;return 1===a?o=e:1===c&&a>20?o=t:c>1&&c<5&&(a>20||a<10)&&(o=n),o}var c=a.bind(null,"\u0441\u0435\u043a\u0443\u043d\u0434\u0443","%s \u0441\u0435\u043a\u0443\u043d\u0434\u0443","%s \u0441\u0435\u043a\u0443\u043d\u0434\u044b","%s \u0441\u0435\u043a\u0443\u043d\u0434"),o=a.bind(null,"\u043c\u0438\u043d\u0443\u0442\u0443","%s \u043c\u0438\u043d\u0443\u0442\u0443","%s \u043c\u0438\u043d\u0443\u0442\u044b","%s \u043c\u0438\u043d\u0443\u0442"),i=a.bind(null,"\u0447\u0430\u0441","%s \u0447\u0430\u0441","%s \u0447\u0430\u0441\u0430","%s \u0447\u0430\u0441\u043e\u0432"),s=a.bind(null,"\u0434\u0435\u043d\u044c","%s \u0434\u0435\u043d\u044c","%s \u0434\u043d\u044f","%s \u0434\u043d\u0435\u0439"),u=a.bind(null,"\u043d\u0435\u0434\u0435\u043b\u044e","%s \u043d\u0435\u0434\u0435\u043b\u044e","%s \u043d\u0435\u0434\u0435\u043b\u0438","%s \u043d\u0435\u0434\u0435\u043b\u044c"),l=a.bind(null,"\u043c\u0435\u0441\u044f\u0446","%s \u043c\u0435\u0441\u044f\u0446","%s \u043c\u0435\u0441\u044f\u0446\u0430","%s \u043c\u0435\u0441\u044f\u0446\u0435\u0432"),d=a.bind(null,"\u0433\u043e\u0434","%s \u0433\u043e\u0434","%s \u0433\u043e\u0434\u0430","%s \u043b\u0435\u0442"),f=n(42),b="en_US",j=["en_US","zh_CN"],v=function(e,t){Object(r.c)(e,t),j.push(e)};function p(e){if(j.includes(e))b=e;else{var t=e.indexOf("_");t>0?p(e.substring(0,t)):b="en_US"}}function O(e){"en"===e&&(e="en_US"),p(e=e.replace("-","_"))}v("de",(function(e,t){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][t]})),v("es",(function(e,t){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]})),v("fr",(function(e,t){return[["\xe0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][t]})),v("it",(function(e,t){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][t]})),v("pt_BR",(function(e,t){return[["agora mesmo","agora"],["h\xe1 %s segundos","em %s segundos"],["h\xe1 um minuto","em um minuto"],["h\xe1 %s minutos","em %s minutos"],["h\xe1 uma hora","em uma hora"],["h\xe1 %s horas","em %s horas"],["h\xe1 um dia","em um dia"],["h\xe1 %s dias","em %s dias"],["h\xe1 uma semana","em uma semana"],["h\xe1 %s semanas","em %s semanas"],["h\xe1 um m\xeas","em um m\xeas"],["h\xe1 %s meses","em %s meses"],["h\xe1 um ano","em um ano"],["h\xe1 %s anos","em %s anos"]][t]})),v("ru",(function(e,t){switch(t){case 0:return["\u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e","\u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434"];case 1:return[c(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+c(e)];case 2:case 3:return[o(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+o(e)];case 4:case 5:return[i(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+i(e)];case 6:return["\u0432\u0447\u0435\u0440\u0430","\u0437\u0430\u0432\u0442\u0440\u0430"];case 7:return[s(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+s(e)];case 8:case 9:return[u(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+u(e)];case 10:case 11:return[l(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+l(e)];case 12:case 13:return[d(e)+" \u043d\u0430\u0437\u0430\u0434","\u0447\u0435\u0440\u0435\u0437 "+d(e)];default:return["",""]}})),f.a.language&&O(f.a.language),f.a.on("languageChanged",(function(e){O(e)}));var h=function(e,t){return Object(r.b)(e,b,t)},m=function(e,t){return Object(r.d)(e,b,t)}},316:function(e,t,n){"use strict";n(0);var r=n(27),a=n(2),c=n(3),o=n(1),i=n(146),s=n(260),u=n.n(s),l=n(915),d=n(976),f=n(1282),b=n(918),j=n(975),v=n(215),p=n.n(v),O=n(319),h=n.n(O),m=n(361),g=n.n(m),x=n(419),y=n.n(x),k=n(420),C=n.n(k),w=n(285),I=n.n(w),T=n(164),P=n.n(T),S=n(263),M=n.n(S),R=n(318),N=n.n(R),A=n(264),D=n.n(A),z=n(265),E=n.n(z),L=n(320),F=n.n(L),_=n(317),U=n.n(_),$=n(413),B=n.n($),V=n(321),W=n.n(V),H=n(42),J=n(2464),q=n(40),G=["forwardedRef"],K={Add:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(p.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Check:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(g.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Clear:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(I.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Delete:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(P.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),DetailPanel:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(C.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Edit:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(M.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Export:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(U.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Filter:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(N.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),FirstPage:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(D.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),LastPage:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(E.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),NextPage:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(C.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),PreviousPage:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(y.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ResetSearch:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(I.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Search:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(B.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),SortArrow:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(h.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(F.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ViewColumn:Object(o.forwardRef)((function(e,t){return Object(q.jsx)(W.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))}))},Y=function e(t,n){for(var r={},c=0,o=Object.entries(t);c<o.length;c++){var i=Object(a.a)(o[c],2),s=i[0],u=i[1];"object"===typeof u?(n.push(s),r[s]=e(u,n),n.pop()):r[s]=H.a.t("".concat(n.join("."),".").concat(s))}return r}({body:{emptyDataSourceMessage:"",filterRow:{filterTooltip:""},editRow:{saveTooltip:"",cancelTooltip:"",deleteText:""},addTooltip:"",deleteTooltip:"",editTooltip:""},header:{actions:""},grouping:{groupedBy:"",placeholder:""},pagination:{firstTooltip:"",firstAriaLabel:"",previousTooltip:"",previousAriaLabel:"",nextTooltip:"",nextAriaLabel:"",labelDisplayedRows:"",labelRowsPerPage:"",lastTooltip:"",lastAriaLabel:"",labelRowsSelect:""},toolbar:{addRemoveColumns:"",nRowsSelected:function(e){return""},showColumnsTitle:"",showColumnsAriaLabel:"",exportTitle:"",exportAriaLabel:"",searchTooltip:"",searchPlaceholder:""}},["MaterialTable"]),X={padding:0,width:24,marginLeft:24},Z=function(e){var t=e.forwardedRef,n=Object(r.a)(e,G);return Object(q.jsxs)(l.a,{error:Boolean(n.error),ref:t,component:"fieldset",children:[Object(q.jsx)(d.a,{children:Object(q.jsx)(j.a,{label:"",control:Object(q.jsx)(f.a,Object(c.a)(Object(c.a)({},n),{},{value:String(n.value),checked:Boolean(n.value),onChange:function(e){return n.onChange(e.target.checked)},style:X,color:"default",inputProps:{"aria-label":n.columnDef.title}}))})}),Object(q.jsx)(b.a,{children:n.helperText})]})},Q=function(e){return"boolean"===e.columnDef.type?Object(q.jsx)(Z,Object(c.a)({},e)):Object(q.jsx)(s.MTableEditField,Object(c.a)({},e))},ee={EditField:function(e){return Object(q.jsx)(Q,Object(c.a)({},e))}};t.a=function(e){var t=Object(i.a)(),n=Object(o.useMemo)((function(){return e.icons?Object(c.a)(Object(c.a)({},K),e.icons):K}),[e.icons]),r=Object(o.useMemo)((function(){return e.localization?Object(c.a)(Object(c.a)({},Y),e.localization):Y}),[e.localization]),a=Object(o.useMemo)((function(){var n=function(e){return{actionsCellStyle:{color:e.palette.text.secondary},actionsColumnIndex:-1,padding:"dense"}}(t);return e.options&&(n=Object(J.a)(n,e.options)),n}),[t,e.options]),s=Object(o.useMemo)((function(){return e.components?Object(c.a)(Object(c.a)({},ee),e.components):ee}),[e.components]);return Object(q.jsx)(u.a,Object(c.a)(Object(c.a)({},e),{},{icons:n,options:a,components:s,localization:r}))}},317:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt");t.default=o},318:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");t.default=o},320:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=o},321:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"}),"ViewColumn");t.default=o},325:function(e,t,n){var r={"./ar/index":[625,22],"./ca/index":[626,23],"./cs/index":[627,24],"./de/index":[628,25],"./en/index":[290],"./es/index":[629,26],"./fi/index":[630,27],"./fr/index":[631,28],"./hu/index":[632,29],"./id/index":[633,30],"./it/index":[634,31],"./ja/index":[635,32],"./ko/index":[636,33],"./nb/index":[637,34],"./nl/index":[638,35],"./pl/index":[639,36],"./pt-BR/index":[640,37],"./ru/index":[641,38],"./sk/index":[642,39],"./sv/index":[643,40],"./th/index":[644,41],"./zh-TW/index":[646,42],"./zh/index":[645,43]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=325,e.exports=a},326:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(3),a=n(94),c=n(2438),o=function(e,t){var n,o=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(a.isPresent)(o))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof o)throw new Error("Invalid definition ".concat(t));var i=Object(c.a)(o);return delete i.definitions,e=Object(r.a)(Object(r.a)({},e),i)},i=function(e,t,n){if(e.jsonSchema){var r=JSON.parse(e.jsonSchema),a=e.tasks.find((function(e){return e.name===t})),c=null===a||void 0===a?void 0:a.validResponses.find((function(e){return e.name===n})),i=null===c||void 0===c?void 0:c.payloadSchemaDefinitionName;if(i)return o(r,i)}},s=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),r=e.actions.find((function(e){return e.name===t})),a=null===r||void 0===r?void 0:r.payloadSchemaDefinitionName;if(a)return o(n,a)}}},338:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://nimflow.com/schemas/recognized-image-batch.schema.json","type":"object","title":"Recognized image batch schema","allOf":[{"$ref":"#/definitions/RecognizedImageBatch"}],"definitions":{"RecognizedImageBatch":{"type":"object","properties":{"fileUrls":{"type":"array","items":{"type":"string"}},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}}},"required":["fileUrls"]},"Document":{"type":"object","properties":{"schemaId":{"type":"string"},"pages":{"type":"array","items":{"$ref":"#/definitions/PageImageLocation"}},"action":{"type":"string","enum":["saveAsDraft","send","dontSend"]},"data":true},"required":["schemaId","action"]},"PageImageLocation":{"type":"object","properties":{"fileIndex":{"type":"integer"},"filePageNumber":{"type":"integer"}},"required":["fileIndex","filePageNumber"]}}}')},339:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(223),c=n(252),o=n(40),i=function(e){var t=e.datetime,n=e.live,i=e.opts,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e,r=s.current;if(r)return!1!==n&&(r.setAttribute("datetime",""+((e=t)instanceof Date?e.getTime():e)),Object(c.b)(r,i)),function(){return Object(a.a)(r)}}),[t,n,i]),Object(o.jsx)("time",{ref:s,children:Object(c.a)(t,i)})}},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return ea})),n.d(t,"c",(function(){return ta})),n.d(t,"b",(function(){return na}));var r=n(22),a=n(190),c=n(575),o=n(1),i=n.n(o),s=n(1284),u=n(299),l=n(89),d=n(86),f=n(23),b=n(3),j=n(2),v=n(2417),p=n(40),O=function(){throw new Error("You forgot to wrap your component in <JsonFormsContextProvider>.")},h=Object(o.createContext)({context:{},bindContext:!0,uiSchemaLibrary:{},registerValidationProvider:O,unregisterValidationProvider:O,validationProviderUpdated:O}),m=function(e){var t=e.context,n=e.bindContext,r=e.uiSchemaLibrary,a=e.children,c=e.onErrorsChange,i=Object(o.useState)({}),s=Object(j.a)(i,2),u=s[0],l=s[1];Object(o.useEffect)((function(){var e=Object.values(u).flatMap((function(e){return e}));null===c||void 0===c||c(e)}),[u,c]);var d=Object(o.useCallback)((function(e){l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(f.a)({},e,[]))}))}),[]),O=Object(o.useCallback)((function(e){l((function(t){return Object(v.a)([e],t)}))}),[]),m=Object(o.useCallback)((function(e,t){l((function(n){return e in n?Object(b.a)(Object(b.a)({},n),{},Object(f.a)({},e,t)):n}))}),[]);return Object(p.jsx)(h.Provider,{value:{context:null!==t&&void 0!==t?t:{},bindContext:null===n||void 0===n||n,uiSchemaLibrary:null!==r&&void 0!==r?r:{},registerValidationProvider:d,unregisterValidationProvider:O,validationProviderUpdated:m},children:a})},g=function(){return Object(o.useContext)(h)},x=n(130),y=Object(d.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.visible,r=e.data,a=e.path,c=g(),i=c.bindContext,l=c.context,d=Object(o.useMemo)((function(){var e=t;if(e||"text"in e){var n={data:r,path:a};return i&&Object.assign(n,l),Object(x.a)(e.text,n)}}),[t,r,a,i,l]);return d?Object(p.jsx)(s.a,{xsUp:!n,children:Object(p.jsx)("div",{children:Object(p.jsx)(u.a,{children:d})})}):null})),k=Object(l.rankWith)(3,Object(l.uiTypeIs)("Markdown")),C=n(893),w=n(890),I=Object(C.a)((function(e){return Object(w.a)({viewer:{width:"100%",minHeight:"800px"}})})),T=Object(d.withJsonFormsLayoutProps)((function(e){var t=I(),n=e.uischema,r=e.visible,a=e.data,c=e.path,i=g(),u=i.bindContext,l=i.context,d=Object(o.useMemo)((function(){var e=n;if(e||"url"in e){var t={data:a,path:c};return u&&Object.assign(t,l),Object(x.a)(e.url,t)}}),[n,a,c,u,l]);return d?Object(p.jsx)(s.a,{xsUp:!r||!d,children:Object(p.jsx)("object",{data:d,type:"application/pdf",className:t.viewer,children:Object(p.jsx)("embed",{src:d,type:"application/pdf"})})}):null})),P=Object(l.rankWith)(3,Object(l.uiTypeIs)("Pdf")),S=n(27),M=n(0),R=n(94),N=["uischema","schema","path","renderers"],A=Object(d.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.schema,r=e.path,a=e.renderers,c=Object(S.a)(e,N),i=Object(d.useJsonForms)().core,s=g().uiSchemaLibrary,u="Use"===t.type?t:void 0,f=u?s[u.name]:void 0,j=u?l.Resolve.schema(n,u.scope):void 0,v=Object(o.useMemo)((function(){if(a&&f&&j)return function(e,t){var n,r=-1,a=void 0,c=Object(M.a)(e);try{for(c.s();!(n=c.n()).done;){var o=n.value,i=t(o);i>r&&(r=i,a=o)}}catch(s){c.e(s)}finally{c.f()}return a}(a,(function(e){return e.tester(f,j)}))}),[f,a,j]);if(!f||!u||!j)return null;var O=Object(l.composeWithUi)(u,r),h=l.Resolve.data(null===i||void 0===i?void 0:i.data,O);if(Object(R.isPresent)(v)&&-1!==v.tester(f,j)){var m=v.renderer;return Object(p.jsx)(m,Object(b.a)({uischema:f,schema:j,path:O,data:h,renderers:a},c))}return Object(p.jsx)(d.UnknownRenderer,{type:"renderer"})})),D=Object(l.rankWith)(3,Object(l.uiTypeIs)("Use")),z=n(12),E=n.n(z),L=n(41),F=n(114),_=n(233),U=n(307),$=Object(d.withJsonFormsControlProps)((function(e){var t=e.uischema.options.optionsSource,n=t.moduleName,r=t.functionName,c=Object(_.a)().call,i=Object(F.a)("function/".concat(n,"/").concat(r),Object(L.a)(E.a.mark((function e(){var t,a,o,i,s,u,l,d,f;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,c(n,r);case 3:if(a=e.sent,Array.isArray(a)){o=Object(M.a)(a);try{for(o.s();!(i=o.n()).done;)s=i.value,u=void 0,l=void 0,Object(U.a)(s)?(u=s.value,"string"===typeof s.label&&(l=s.label)):u=s,Object(R.isPresent)(u)&&(f={label:null!==(d=l)&&void 0!==d?d:"string"===typeof u?u:JSON.stringify(u),value:u},t.push(f))}catch(b){o.e(b)}finally{o.f()}}return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),{fallbackData:[],revalidateOnMount:!0,revalidateOnFocus:!1}).data,s=Object(o.useMemo)((function(){return Object(b.a)(Object(b.a)({},e),{},{options:i})}),[e,i]);return Object(p.jsx)(a.MaterialInputControl,Object(b.a)(Object(b.a)({},s),{},{input:a.MuiSelect}))})),B=Object(l.rankWith)(3,Object(l.and)(l.isControl,(function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.optionsSource;return!!n&&!!n.moduleName&&!!n.functionName}))),V=n(238),W=n(2471),H=n(1281),J=n(48),q=n(2463),G=n(2439),K=n(2406),Y=n(2407),X=n(577),Z=n.n(X),Q=n(295),ee=n.n(Q),te=n(230),ne=n.n(te),re=n(663),ae=n(596),ce=n.n(ae),oe=n(2473),ie=n(109),se=n(179),ue=["image/png","image/jpeg","image/webp"],le=function(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.src=e}))},de=function(){var e=Object(L.a)(E.a.mark((function e(t,n){var r,a,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([t.content],{type:t.mimeType}),a=URL.createObjectURL(r),e.prev=2,e.next=5,le(a);case 5:c=e.sent,t.pages.push({getImageData:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=c.naturalWidth,e.height=c.naturalHeight,t.drawImage(c,0,0),t.getImageData(0,0,c.naturalWidth,c.naturalHeight)},width:c.naturalWidth,height:c.naturalHeight,fileIndex:n,filePageNumber:0,pageIndex:0}),t.pageStates.push({rotate:0});case 8:return e.prev=8,URL.revokeObjectURL(a),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(L.a)(E.a.mark((function e(t,n){var r,a,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new ee.a({buffer:t.content}),a=function(e,a){r.setDirectory(e);var c={getImageData:function(){r.setDirectory(e);var t=r.readRGBAImage();return new ImageData(new Uint8ClampedArray(t),r.width(),r.height())},width:r.width(),height:r.height(),fileIndex:n,filePageNumber:e,pageIndex:0};t.pages.push(c),t.pageStates.push({rotate:0})},c=0,o=r.countDirectory();c<o;++c)a(c);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(L.a)(E.a.mark((function e(t,n){var r,a,c,o,i,s,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(t.content),e.next=3,re.a.getDocument(r).promise;case 3:for(a=e.sent,c=[],o=new Array(a.numPages),i=new Array(a.numPages),s=function(e){c.push(a.getPage(e+1).then(function(){var t=Object(L.a)(E.a.mark((function t(r){var a,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=2*window.devicePixelRatio,c=r.getViewport({scale:a}),o[e]={getImageData:function(){var e=Object(L.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("canvas")).style.width="".concat(c.width/a,"px"),t.style.height="".concat(c.height/a,"px"),t.height=c.height,t.width=c.width,n=t.getContext("2d"),e.next=8,r.render({canvasContext:n,viewport:c}).promise;case 8:return e.abrupt("return",n.getImageData(0,0,t.width,t.height));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),width:c.width,height:c.height,fileIndex:n,filePageNumber:e,pageIndex:0},i[e]={rotate:0};case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},u=0;u<a.numPages;u++)s(u);return e.next=11,Promise.all(c);case 11:t.pages=o;case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(L.a)(E.a.mark((function e(t,n,r){var a,c,o,i,s,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.lastIndexOf("/"),o=c>=0?t.substring(c+1):t,i={url:t,status:"loaded",name:o,mimeType:r.headers["content-type"],content:r.data,pages:[],pageStartIndex:0,pageStates:[]},s=null===(a=r.headers)||void 0===a?void 0:a["content-disposition"],(u=s?/filename="?([^"]*?)"?(;|$)/g.exec(s):void 0)&&u.length>1&&(i.name=u[1]),i.mimeType&&!ue.includes(i.mimeType)){e.next=11;break}return e.next=9,de(i,n);case 9:e.next=19;break;case 11:if("image/tiff"!==i.mimeType){e.next=16;break}return e.next=14,fe(i,n);case 14:e.next=19;break;case 16:if("application/pdf"!==i.mimeType){e.next=19;break}return e.next=19,be(i,n);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ve=function(e,t){return Object(J.a)(e,(function(e){null===t||void 0===t||t.forEach((function(t,n){t.pages.forEach((function(t,n){var r,a=e[t.fileIndex];"loaded"===(null===a||void 0===a?void 0:a.status)&&(a.pageStates[t.filePageNumber].rotate=null!==(r=t.rotate)&&void 0!==r?r:0)}))}));var n,r=0,a=Object(M.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;if("loaded"===c.status){c.pageStartIndex=r;var o,i=Object(M.a)(c.pages);try{for(i.s();!(o=i.n()).done;){o.value.pageIndex=r++}}catch(s){i.e(s)}finally{i.f()}}}}catch(s){a.e(s)}finally{a.f()}}))},pe={height:170,width:170},Oe=n(173),he=Symbol("marker"),me=Object(l.createAjv)({allErrors:!0,addUsedSchema:!1,useDefaults:!0});me.addFormat("image",(function(){return!0})),me.addKeyword("patternMask",{type:"string",valid:!0,errors:!1});var ge=function(e,t){var n=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),a=r.byteLength,c=a%3,o=a-c,i=0;i<o;i+=3){var s=r[i]<<16|r[i+1]<<8|r[i+2],u=(258048&s)>>12,l=(4032&s)>>6,d=63&s;t+=n[(16515072&s)>>18]+n[u]+n[l]+n[d]}if(1===c){var f=r[o],b=(3&f)<<4;t+=n[(252&f)>>2]+n[b]+"=="}else if(2===c){var j=r[o]<<8|r[o+1],v=(1008&j)>>4,p=(15&j)<<2;t+=n[(64512&j)>>10]+n[v]+n[p]+"="}return t}(e);return"data:".concat(t,";base64,").concat(n)};var xe=function(){throw new Error("You forgot to wrap your component in <BatchProcessorContextProvider>.")},ye={fileInfos:[],documents:[],documentInfos:[],unusedPages:[],loadingImages:!1,setCurrentDocumentLocation:xe,updateCurrentDocument:xe,updateBatch:xe,movePage:xe,findByPageIndex:xe,deleteDocument:xe,addDocument:xe,updateDocument:xe,getDocument:xe,setCurrentDocumentEditionState:xe,canModify:!0,getDisplayableDataUrl:xe,rotateImage:xe,rotateAllImages:xe,getPageLocation:xe,canOcr:!1,ocrImage:xe},ke=Object(o.createContext)(ye),Ce=function(e,t){var n,r=Object(M.a)(t);try{for(r.s();!(n=r.n()).done;){var a,c=n.value,o="loaded"===c.status?c.pages:[],i=Object(M.a)(o);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s.pageIndex===e)return s}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}},we=function(e,t,n){var r=e;return r&&(r+=","),r+=t.toString(),t!==n&&(r+="-".concat(n)),r},Ie=function(e){if(0===e.length)return"";for(var t=e.map((function(e){return e+1})),n=t[0],r=n,a="",c=1;c<t.length;c++){var o=t[c];o===r+1&&r>=n||o===r-1&&r<=n?r=o:(a=we(a,n,r),n=r=o)}return a=we(a,n,r)},Te=function(e,t){var n=new Array(e.length);return t.forEach((function(t,r){"loaded"===t.status&&t.pages.forEach((function(t,a){var c=e.indexOf(t.pageIndex);c>=0&&(n[c]={fileIndex:r,filePageNumber:a})}))})),n},Pe=function(e,t){return t&&!me.validate(t,e.data)&&me.errors?Object(Oe.a)(me.errors.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{instancePath:e.dataPath})}))):[]},Se=function(e,t){for(var n=e+t;n<0;)n+=360;for(;n>=360;)n-=360;return n},Me=function(e,t){var n,r=Se(null!==(n=e.rotate)&&void 0!==n?n:0,t);0===r?delete e.rotate:e.rotate=r},Re=function(e){var t=e.basePath,n=e.batch,a=e.documentSchemasSource,c=e.readonly,i=e.ocrFunction,s=e.children,u=!c,v=Object(o.useState)(n),O=Object(j.a)(v,1)[0],h=function(e){var t=e.moduleName,n=e.functionName,r=Object(_.a)().call,a=Object(F.a)("function/".concat(t,"/").concat(n),Object(L.a)(E.a.mark((function e(){var a,c,o,i,s,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,r(t,n);case 3:if(c=e.sent,Array.isArray(c)){o=Object(M.a)(c);try{for(o.s();!(i=o.n()).done;)s=i.value,"success"===(u=Object(Oe.b)(s)).type?a.push(s):console.error("Error validating schema ".concat(null===s||void 0===s?void 0:s.$id,". It will be ignored."),u.errors)}catch(l){o.e(l)}finally{o.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),c=a.data,i=a.isValidating,s=a.error;return{documentSchemas:Object(o.useMemo)((function(){return null!==c&&void 0!==c?c:[]}),[c]),loading:i,error:s}}(a).documentSchemas,m=Object(d.useJsonForms)().dispatch,x=function(e,t){var n=Object(se.c)().hubBaseUrl,r=Object(ie.c)(),a=r.getConfiguredAxiosInstance,c=r.blobStorage_GetThumbnails,i=Object(o.useState)((function(){return e.fileUrls.map((function(e){var t=ce()(e);return t.is("relative")&&n&&(t=ce.a.joinPaths("BlobStorage",t).absoluteTo(n)),{url:t.valueOf(),status:"loading",name:t.filename()}}))})),s=Object(j.a)(i,2),u=s[0],l=s[1],d=Object(o.useState)(t&&e.fileUrls.length>0),f=Object(j.a)(d,2),v=f[0],p=f[1];return Object(o.useEffect)((function(){if(t){var r=ne.a.CancelToken.source(),o=ne.a.create({responseType:"arraybuffer",cancelToken:r.token}),i=a({responseType:"arraybuffer",cancelToken:r.token});return e.fileUrls.forEach((function(t,r){var a=t,s=ce()(t),u=o;s.is("relative")&&n&&(s=ce.a.joinPaths("BlobStorage",s),u=i),t=s.valueOf(),u.get(t).then((function(n){return je(t,r,n).then((function(t){l((function(n){var a=Object(J.a)(n,(function(e){e[r]=t}));return a.every((function(e){return"loading"!==e.status}))&&(a=ve(a,e.documents),p(!1)),a})),c(Object(b.a)(Object(b.a)({path:a},pe),{},{format:"png"})).then((function(e){Object(oe.a)(e)||l((function(t){return Object(J.a)(t,(function(t){var n=t[r];"loaded"===n.status&&(n.thumbnails=e)}))}))}))}))})).catch((function(n){l((function(a){var c=Object(J.a)(a,(function(e){e[r]=function(e,t){var n=e.lastIndexOf("/"),r=n>=0?e.substring(n+1):e,a={url:e,status:"failed",name:r,error:t.message};return t.response&&(a.error="Code: ".concat(t.response.status,"\nData: ").concat(t.response.data)),a}(t,n)}));return c.every((function(e){return"loading"!==e.status}))&&(c=ve(c,e.documents),p(!1)),c}))}))})),function(){r.cancel(),p(!1)}}l((function(e){return e.map((function(e){return{name:e.name,status:"loaded",url:e.url,content:new ArrayBuffer(0),pages:[],pageStartIndex:0,pageStates:[]}}))}))}),[c,t,a,n,e.documents,e.fileUrls]),{loadingFileInfos:v,fileInfos:u,setFileInfos:l}}(O,u),y=x.fileInfos,k=x.loadingFileInfos,C=x.setFileInfos,w=Object(o.useState)({documentIndex:O.documents.length>0?0:void 0}),I=Object(j.a)(w,2),T=I[0],P=I[1],S=Object(o.useState)([]),N=Object(j.a)(S,2),A=N[0],D=N[1],z=function(e){var t=g(),n=t.registerValidationProvider,r=t.unregisterValidationProvider,a=t.validationProviderUpdated,c=Object(o.useState)(),i=Object(j.a)(c,2),s=i[0],u=i[1];Object(o.useEffect)((function(){return n(e),function(){return r(e)}}),[e,n,r]),Object(o.useEffect)((function(){var t=(null!==s&&void 0!==s?s:[]).map((function(t){var n="".concat(e,".").concat(t.dataPath);return Object(b.a)(Object(b.a)({},t),{},{dataPath:n,instancePath:n})}));a(e,t)}),[s,e,a]);var l=Object(o.useCallback)((function(e){u((function(t){return Object(H.a)(t,e)?t:e}))}),[]);return Object(o.useMemo)((function(){return{updateErrors:l}}),[l])}(t).updateErrors,U=function(e,t){var n=Object(o.useState)([]),r=Object(j.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){c((function(n){for(var r=[],a=0;a<t.length;a++){var c=t[a];if("loaded"===c.status)for(var o=0;o<c.pageStates.length;o++){var i={fileIndex:a,filePageNumber:o},s=c.pageStates[o];Object(R.isPresent)(s.rotate)&&(i.rotate=s.rotate),r.push(i)}}var u,l=Object(M.a)(e.documents.flatMap((function(e){return e.pages})));try{var d=function(){var e=u.value,t=r.findIndex((function(t){return!!t&&t.fileIndex===e.fileIndex&&t.filePageNumber===e.filePageNumber}));t>-1&&(r[t]=void 0)};for(l.s();!(u=l.n()).done;)d()}catch(b){l.e(b)}finally{l.f()}var f=r.filter(R.isPresent);return Object(H.a)(f,n)?n:f}))}),[e.documents,t]),a}(n,y),$=Object(_.a)().call,B=Object(o.useMemo)((function(){return n.documents.map((function(e,t){var n;return{schemaId:e.schemaId,action:e.action,errors:null!==(n=A[t])&&void 0!==n?n:[]}}))}),[n.documents,A]);Object(o.useEffect)((function(){if(h&&0!==O.documents.length){var e=O.documents.map((function(e){var t=h.find((function(t){return t.$id===e.schemaId}));return Pe(e,t)}));D((function(t){return e.map((function(e,n){return t[n]?t[n]:e}))}))}}),[O,h]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(o.useRef)(e),a=n.current;if(e!==a)if(a.length!==e.length)n.current=e;else if(t)for(var c=Object(r.a)(e),i=0;i<a.length;i++){var s=c.indexOf(a[i]);if(-1===s){n.current=e;break}c[s]=he}else for(var u=0;u<a.length;u++)if(a[u]!==e[u]){n.current=e;break}return n.current}(n.documents.reduce((function(e,t,n){return"send"===t.action&&e.push(n),e}),[]),!0);Object(o.useEffect)((function(){var e=W.flatMap((function(e){var t,n;return null!==(t=null===(n=A[e])||void 0===n?void 0:n.map((function(t){var n="documents[".concat(e,"].data.").concat(t.instancePath);return Object(b.a)(Object(b.a)({},t),{},{instancePath:n,dataPath:n})})))&&void 0!==t?t:[]}));u&&z(e)}),[u,A,W,z]);var X=Object(o.useCallback)((function(e,n){var r="function"===typeof n?n:function(){return n};null===m||void 0===m||m(Object(l.update)(Object(V.compose)(t,e),r))}),[m]),Z=Object(o.useMemo)((function(){return Object(R.isPresent)(T.documentIndex)?n.documents[T.documentIndex]:void 0}),[n.documents,T.documentIndex]),Q=Object(o.useCallback)((function(e){var t=null!==e&&void 0!==e?e:{};P((function(e){return e.documentIndex!==t.documentIndex||e.pageIndex!==t.pageIndex?t:e}))}),[]),te=Object(o.useCallback)((function(e){var t=null===T||void 0===T?void 0:T.documentIndex;Object(R.isPresent)(t)&&X("documents[".concat(t,"]"),e)}),[null===T||void 0===T?void 0:T.documentIndex,X]),re=Object(R.isPresent)(T.documentIndex)?A[T.documentIndex]:void 0,ae=Object(o.useMemo)((function(){if(Z&&re)return{document:Z,errors:re}}),[Z,re]),ue=Object(o.useCallback)((function(e){var t=T.documentIndex;D((function(n){var r,a=Z?{document:Z,errors:n[t]}:void 0,c="function"===typeof e?e(a):e,o=Object(H.a)(null===c||void 0===c?void 0:c.errors,null===a||void 0===a?void 0:a.errors),i=Object(H.a)(null===c||void 0===c?void 0:c.document,null===a||void 0===a?void 0:a.document);if(o&&i)return n;var s=null===c||void 0===c?void 0:c.document;return s&&!i&&te(s),Object(q.a)(t,null!==(r=null===c||void 0===c?void 0:c.errors)&&void 0!==r?r:[],n)}))}),[Z,T.documentIndex,te]),le=Object(o.useCallback)((function(e,t){for(var r=0;r<n.documents.length;r++)for(var a=n.documents[r],c=0;c<a.pages.length;c++){var o=a.pages[c];if(o.fileIndex===e&&o.filePageNumber===t)return{documentIndex:r,documentOrder:c}}}),[n.documents]),de=Object(o.useCallback)((function(e,t){var r=Ce(e,y),a=function(e,t){var n,r=Object(M.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("loaded"===a.status)for(var c=a.pages,o=0;o<c.length;o++)if(c[o].pageIndex===e)return a.pageStates[o]}}catch(i){r.e(i)}finally{r.f()}}(e,y);if(r&&a){var c=le(r.fileIndex,r.filePageNumber);if(c||t){var o=Object(J.a)(n.documents,(function(e){c&&e[c.documentIndex].pages.splice(c.documentOrder,1),t&&e[t.documentIndex].pages.splice(t.documentOrder,0,{fileIndex:r.fileIndex,filePageNumber:r.filePageNumber,rotate:a.rotate})}));X("documents",o)}}}),[n.documents,y,le,X]),fe=Object(o.useCallback)((function(e){return Ce(e,y)}),[y]),be=Object(o.useCallback)((function(e){if(Object(R.isPresent)(n.documents[e])){var t=Object(r.a)(n.documents);t.splice(e,1),setTimeout((function(){return X("documents",t)}),0),D((function(t){return Object(G.a)(e,1,t)})),P((function(t){return t.documentIndex===e?{}:t}))}}),[n.documents,X]),me=Object(o.useCallback)((function(e){var t=n.documents.length,a=Object(r.a)(n.documents);if(D((function(e){return[].concat(Object(r.a)(e),[[]])})),e.pages.length>0){var c=e.pages.map((function(e){return le(e.fileIndex,e.filePageNumber)})).filter(R.isPresent);c.length>0&&(c=Object(K.a)([Object(Y.a)((function(e){return e.documentIndex})),Object(Y.a)((function(e){return e.documentOrder}))],c),a=Object(J.a)(a,(function(e){var t,n=Object(M.a)(c);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.documentIndex].pages.splice(r.documentOrder,1)}}catch(a){n.e(a)}finally{n.f()}})))}return a.push(e),X("documents",a),t}),[n.documents,le,X]),ge=Object(o.useCallback)((function(e,t){var a=Object(r.a)(n.documents),c=a[e].schemaId;if(t.pages.length>0){var o=t.pages.map((function(e){return le(e.fileIndex,e.filePageNumber)})).filter(R.isPresent).filter((function(t){return t.documentIndex!==e}));o.length>0&&(o=Object(K.a)([Object(Y.a)((function(e){return e.documentIndex})),Object(Y.a)((function(e){return e.documentOrder}))],o),a=Object(J.a)(a,(function(e){var t,n=Object(M.a)(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.documentIndex].pages.splice(r.documentOrder,1)}}catch(a){n.e(a)}finally{n.f()}})))}if(a[e]=t,X("documents",a),c!==t.schemaId){var i=null===h||void 0===h?void 0:h.find((function(e){return e.$id===t.schemaId})),s=Pe(t,i);D((function(t){return Object(q.a)(e,s,t)}))}return e}),[n.documents,h,le,X]),xe=Object(o.useCallback)((function(e){return n.documents[e]}),[n.documents]),ye=Object(o.useState)({}),we=Object(j.a)(ye,2),Ie=we[0],Te=we[1],Re=Object(o.useCallback)((function(e){var t=Ie[e];if(!t){var n=e.indexOf(",");if(!e.startsWith("data:")||-1===n)return e;if("image/tiff"===e.substring(5,n).split(";")[0]){var r=function(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return n}(e),a=new ee.a({buffer:r});t=a.toDataURL()}else t=e;Te((function(n){return Object(b.a)(Object(b.a)({},n),{},Object(f.a)({},e,t))}))}return t}),[Ie]),Ne=Object(o.useCallback)((function(e,t){var r=-1,a=-1;C((function(n){return Object(J.a)(n,(function(n){for(var c=n.length-1;c>=0;c--){var o=n[c];if("loaded"===o.status&&o.pageStartIndex<=e){for(var i=0;i<o.pages.length;i++){var s=o.pages[i];if(e===s.pageIndex){var u=o.pageStates[i];u.rotate=Se(u.rotate,t),r=s.fileIndex,a=s.filePageNumber;break}}break}}}))})),r>-1&&a>-1&&X("documents",Object(J.a)(n.documents,(function(e){var n,c=null===(n=e[r])||void 0===n?void 0:n.pages[a];c&&Me(c,t)})))}),[n.documents,C,X]),Ae=Object(o.useCallback)((function(e){C((function(t){return Object(J.a)(t,(function(t){var n,r=Object(M.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("loaded"===a.status){var c,o=Object(M.a)(a.pageStates);try{for(o.s();!(c=o.n()).done;){var i=c.value;i.rotate=Se(i.rotate,e)}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){r.e(s)}finally{r.f()}}))})),X("documents",Object(J.a)(n.documents,(function(t){var n,r=Object(M.a)(t.flatMap((function(e){return e.pages})));try{for(r.s();!(n=r.n()).done;){var a=n.value;Me(a,e)}}catch(c){r.e(c)}finally{r.f()}})))}),[n.documents,C,X]),De=Object(o.useCallback)(function(){var e=Object(L.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw new Error("OcrFunction not defined");case 2:return e.next=4,$(i.moduleName,i.functionName,{image:t});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[$,i]),ze=Object(o.useMemo)((function(){return{fileInfos:y,documents:n.documents,documentSchemas:h,unusedPages:U,loadingImages:k,documentInfos:B,currentDocumentLocation:T,setCurrentDocumentLocation:Q,currentDocument:Z,updateCurrentDocument:te,updateBatch:X,movePage:de,findByPageIndex:fe,deleteDocument:be,addDocument:me,updateDocument:ge,getDocument:xe,currentDocumentEditionState:ae,setCurrentDocumentEditionState:ue,canModify:u,getDisplayableDataUrl:Re,rotateImage:Ne,rotateAllImages:Ae,getPageLocation:le,canOcr:!!i,ocrImage:De}}),[me,n.documents,u,Z,ae,T,be,B,h,y,Re,xe,le,fe,ue,Q,k,de,i,De,Ae,Ne,U,X,te,ge]);return Object(p.jsx)(ke.Provider,{value:ze,children:s})},Ne=function(){return Object(o.useContext)(ke)},Ae=n(122),De=n(81),ze=n(909),Ee=n(934),Le=n(954),Fe=n(2386),_e=n(910),Ue=n(164),$e=n.n(Ue),Be=n(215),Ve=n.n(Be),We=n(263),He=n.n(We),Je=n(601),qe=n.n(Je),Ge=n(602),Ke=n.n(Ge),Ye=n(42),Xe=n(2440),Ze=n(662),Qe=n(599),et=n.n(Qe),tt=n(459),nt=n.n(tt),rt=n(458),at=n.n(rt),ct=n(149),ot=n(2388),it=n(2404),st=n(2394),ut=n(2393),lt=n(919),dt=n(913),ft=n(944),bt=n(1895),jt=n(204),vt=n(665),pt=["saveAsDraft","send","dontSend"];Object.freeze(pt);var Ot,ht=n(147),mt=function e(t){var n={};if(t)for(var r=function(){var r=c[a];Array.isArray(t[r])?t[r].forEach((function(t,a){var c=n[r];Object(R.isPresent)(c)||(n[r]=c=[]),c[a]=e(t)})):"object"===typeof t[r]&&null!==t[r]?n[r]=e(t[r]):n[r]=!0},a=0,c=Object.keys(t);a<c.length;a++)r();return n},gt=["name","debounce","onChange","onBlur","helperText","error","disabled","controlValueAdapter"],xt=function(e){var t=e.name,n=e.debounce,r=e.onChange,a=e.onBlur,c=e.helperText,i=(e.error,e.disabled),s=e.controlValueAdapter,u=Object(S.a)(e,gt),l=Object(jt.d)().isSubmitting,d=Object(jt.c)({name:t}),f=Object(j.a)(d,3),v=f[0],O=f[1],h=f[2],m=O.error,g=O.touched&&!!m,x=Object(o.useState)(v.value),y=Object(j.a)(x,2),k=y[0],C=y[1],w=Object(o.useState)(),I=Object(j.a)(w,2),T=I[0],P=I[1];Object(o.useEffect)((function(){C(v.value)}),[v.value]);var M=Object(o.useCallback)((function(e){var t=e.target.value;h.setValue(s?s(t):t),null===r||void 0===r||r(e)}),[s,h,r]),N=Object(o.useCallback)((function(e){C((function(t){var n=e.target.value;return n||t})),Object(R.isPresent)(n)?(e.persist(),T&&clearTimeout(T),P(setTimeout((function(){return M(e)}),n))):M(e)}),[M,n,T]),A=Object(o.useCallback)((function(e){v.onBlur(e),null===a||void 0===a||a(e)}),[v,a]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(dt.a,Object(b.a)(Object(b.a)({},v),{},{value:null!==k&&void 0!==k?k:"",onChange:N,onBlur:A,error:g,helperText:g?m:c,disabled:null!==i&&void 0!==i?i:l},u))})},yt=n(1296),kt=["name","controlValueAdapter","onChange","onBlur","renderInput","multiple","loading","disabled"],Ct=function(e){var t,n=e.name,r=e.controlValueAdapter,a=e.onChange,c=e.onBlur,i=e.renderInput,s=e.multiple,u=e.loading,l=e.disabled,d=Object(S.a)(e,kt),f=Object(jt.d)(),v=f.isSubmitting,O=f.setFieldTouched,h=Object(jt.c)({name:n}),m=Object(j.a)(h,3),g=m[0],x=m[1],y=m[2],k=x.error,C=x.touched&&!!k,w=Object(o.useCallback)((function(e,t,n,c){var o=r?r(t):t;y.setValue(null!==o&&void 0!==o?o:void 0),null===a||void 0===a||a(e,t,n,c)}),[r,y,a]),I=Object(o.useCallback)((function(e){O(g.name),g.onBlur(e),null===c||void 0===c||c(e)}),[g,c,O]),T=Object(o.useCallback)((function(e){return i?i(Object(b.a)(Object(b.a)({},e),{},{error:C,helperText:C?k:void 0})):null}),[k,i,C]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(yt.a,Object(b.a)(Object(b.a)({},g),{},{value:null!==(t=g.value)&&void 0!==t?t:null,onChange:w,onBlur:I,renderInput:T,disabled:null!==l&&void 0!==l?l:v,loading:u||v,multiple:s},d))})},wt=Object(C.a)((function(e){return Object(w.a)({dialogPaper:{},dialogContent:{}})})),It=function(e){var t=Object(W.a)().t,n=Ne().documentSchemas,r=Object(o.useMemo)((function(){var e={};if(n){var t,r=Object(M.a)(n);try{for(r.s();!(t=r.n()).done;){var a,c=t.value;c.$id&&(e[c.$id]={label:null!==(a=c.title)&&void 0!==a?a:c.$id,description:c.description})}}catch(o){r.e(o)}finally{r.f()}}return e}),[n]),a=Object(o.useMemo)((function(){var e=Object.keys(r);return Object(bt.a)((function(e){return r[e].label}),e)}),[r]);return Object(p.jsxs)(Fe.a,{container:!0,spacing:3,children:[Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(Ct,{name:"schemaId",options:a,getOptionLabel:function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.label},renderInput:function(e){return Object(p.jsx)(dt.a,Object(b.a)(Object(b.a)({},e),{},{label:t("DocumentType"),InputLabelProps:{required:!0},required:!0,autoFocus:!0}))},fullWidth:!0})}),Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(xt,{name:"pages",label:t("Pages"),fullWidth:!0})}),Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(xt,{select:!0,name:"action",label:t("Action"),fullWidth:!0,children:pt.map((function(e){return Object(p.jsx)(ft.a,{value:e,children:t("RecognizedDocumentAction.".concat(e))},e)}))})})]})},Tt="(\\d+(\\s*-\\s*\\d+)?)",Pt="^\\s*".concat(Tt,"(\\s*,\\s*").concat(Tt,")*\\s*$"),St=new RegExp(Pt),Mt=function(e){var t=e.open,n=e.document,a=e.availablePageIndices,c=e.onChange,i=e.onClose,s=Object(W.a)().t,u=wt(),l=Ne(),d=l.documentSchemas,f=l.fileInfos,b=Object(o.useMemo)((function(){var e,t=n?function(e,t){return e.map((function(e){var n=t[e.fileIndex];return"loaded"===n.status?n.pages[e.filePageNumber].pageIndex:-1}))}(n.pages,f):a;return{schemaId:null===n||void 0===n?void 0:n.schemaId,pages:Ie(t),action:null!==(e=null===n||void 0===n?void 0:n.action)&&void 0!==e?e:"send"}}),[a,n,f]),j=Object(o.useRef)(),v=Object(o.useMemo)((function(){return function(e,t){return vt.a().shape({schemaId:vt.b().required().test({test:function(e){return!e||!("string"!==typeof e||!t.find((function(t){return t.$id===e})))||this.createError({path:this.path,message:Ye.a.t("UnknownDocumentSchema",{schemaId:e})})}}),pages:vt.b().test({test:function(e){return!e||!("string"!==typeof e||!St.test(e))||this.createError({path:this.path,message:Ye.a.t("InvalidPageRange",{range:e})})}}),action:vt.b().required().oneOf(Object(r.a)(pt))})}(0,null!==d&&void 0!==d?d:[])}),[a,d]),O=Object(o.useCallback)((function(){var e=j.current;e&&function(e){e.validateForm().then((function(t){Object.keys(t).length>0?e.setTouched(mt(t)):e.handleSubmit()}))}(e)}),[]),h=Object(o.useCallback)(function(){var e=Object(L.a)(E.a.mark((function e(t,r){var a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a={schemaId:t.schemaId,pages:[],data:null===n||void 0===n?void 0:n.data,action:t.action},t.pages&&(s=t.pages,o=Z()(s).map((function(e){return e-1})),a.pages=Te(o,f)),null===c||void 0===c||c(a),null===i||void 0===i||i()}finally{r.setSubmitting(!1)}case 1:case"end":return e.stop()}var s}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[null===n||void 0===n?void 0:n.data,f,c,i]),m=Object(o.useCallback)((function(){null===i||void 0===i||i()}),[i]),g=Object(o.useCallback)(function(){var e=Object(L.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===i||void 0===i||i());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]);return Object(p.jsxs)(ot.a,{open:t,onClose:g,maxWidth:"sm",fullWidth:!0,classes:{paper:u.dialogPaper},children:[Object(p.jsx)(ut.a,{children:s(n?"EditingDocument":"AddingDocument")}),Object(p.jsx)(st.a,{className:u.dialogContent,children:Object(p.jsx)(ht.a,{children:Object(p.jsx)(jt.b,{innerRef:function(e){return j.current=e},initialValues:b,onSubmit:h,validationSchema:v,validateOnChange:!0,validateOnBlur:!0,children:Object(p.jsx)(jt.a,{autoComplete:"off",children:Object(p.jsx)(It,{availablePageIndices:a})})})})}),Object(p.jsxs)(it.a,{children:[Object(p.jsx)(lt.a,{onClick:O,color:"primary",children:s("Accept")}),Object(p.jsx)(lt.a,{onClick:m,color:"primary",children:s("Cancel")})]})]})},Rt=n(2383),Nt=function(e){return Object(p.jsxs)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(p.jsx)("path",{d:"M808.3 950h-725C42.9 950 10 917.1 10 876.7V171.6c0-40.4 32.9-73.3 73.3-73.3h502.1c18.6 0 33.6 15.1 33.6 33.6 0 18.6-15.1 33.6-33.6 33.6H83.3c-3.4 0-6.1 2.7-6.1 6.1v705.1c0 3.4 2.7 6.1 6.1 6.1h724.9c3.4 0 6.1-2.7 6.1-6.1V492c0-18.6 15-33.6 33.6-33.6s33.6 15.1 33.6 33.6v384.7c.1 40.4-32.8 73.3-73.2 73.3z"}),Object(p.jsx)("path",{d:"M307.3 781.2c-16.1 0-31.1-8.1-40.1-21.7-8.9-13.5-10.5-30.4-4.1-45.3l83.4-196.8 431-431C801 62.9 832.3 50 865.5 50s64.5 13 88 36.5c48.5 48.6 48.5 127.5 0 176.1l-431 431-196.3 83.8c-6 2.5-12.4 3.8-18.9 3.8zm96-225.5-59.8 141.1 140.8-60.1L906 215c22.3-22.3 22.3-58.7 0-81-10.8-10.8-25.2-16.8-40.5-16.8s-29.7 6-40.5 16.8L403.3 555.7z"}),Object(p.jsx)("path",{d:"M398.4 502.3 530 633.8l-47.5 47.5-131.6-131.5 47.5-47.5zM800.2 100.5 931.8 232l-47.5 47.5L752.7 148l47.5-47.5z"})]}))},At=Object(C.a)((function(e){return Object(w.a)({toolbar:{minHeight:"48px",paddingLeft:0,borderBottom:"solid 2px ".concat(e.palette.divider)},tree:{"& .rstcustom__collapseButton":{color:"dark"===e.palette.type?"white":void 0,backgroundImage:void 0},"& .rstcustom__expandButton":{color:"dark"===e.palette.type?"white":void 0,backgroundImage:void 0},"& .rstcustom__collapseButton:focus, & .rst__expandButton:focus":{outline:"initial"},"& .rstcustom__highlight":{backgroundColor:"dark"===e.palette.type?at.a[700]:void 0}},node:{"& .rstcustom__rowContents":{cursor:"pointer",backgroundColor:e.palette.background.default,minWidth:Math.max(pe.height,pe.width,120)+30,justifyContent:"center",paddingLeft:30},"& .rstcustom__moveHandle":{backgroundColor:"dark"===e.palette.type?at.a[700]:void 0}},selectedNode:{"& .rstcustom__rowContents":{backgroundColor:e.palette.action.selected}},actionIcon:{marginLeft:5,verticalAlign:"bottom"},sendActionIcon:{marginLeft:5,color:nt.a[500],verticalAlign:"bottom"},document:{display:"block",wordWrap:"break-word",width:"175px",maxHeight:"40px",overflow:"hidden",whiteSpace:"normal"},documentWithErrors:{textDecoration:"underline wavy ".concat(e.palette.error.main)},documentTitle:{display:"flex"}})})),Dt=function(e){return!!e&&Object(R.isPresent)(e.documentIndex)&&!Object(R.isPresent)(e.pageIndex)},zt=function(e){return!!e&&!Object(R.isPresent)(e.documentIndex)&&!Object(R.isPresent)(e.pageIndex)},Et=function(e){return!!e&&Object(R.isPresent)(e.pageIndex)},Lt=function(e){var t=e.node;return Et(t)?"p-".concat(t.pageIndex):Dt(t)?"d-".concat(t.documentIndex):"o"},Ft=function(e){return!Et(e)},_t=function(e){return Et(e.node)},Ut=function(e){var t=e.node,n=e.nextParent,r=t;return!!n&&(!!Object(R.isPresent)(r.documentIndex)||!zt(n))},$t=function(){var e=Ne(),t=e.documentSchemas,n=e.fileInfos,a=e.documentInfos,c=e.canModify,i=e.setCurrentDocumentLocation,s=e.getPageLocation,u=Object(o.useMemo)((function(){return[]}),[]),l=Object(o.useState)(u),d=Object(j.a)(l,2),f=d[0],v=d[1];return Object(o.useEffect)((function(){v((function(e){var o=c?function(e,t,n,a){var c=[],o=[];e.forEach((function(e,n){"loaded"===e.status&&e.pages.forEach((function(r,a){var i=Ye.a.t("PageN",{index:r.pageIndex+1});if(e.thumbnails){var s=e.thumbnails[a],u=e.pageStates[a].rotate,l=Object(R.isPresent)(u)?{transform:"rotate(".concat(u,"deg)")}:void 0;i=Object(p.jsxs)("div",{style:{height:"100%"},children:[Object(p.jsx)("img",{src:s,alt:" ",style:Object(b.a)(Object(b.a)({},l),{},{top:"0px",left:"30px",position:"absolute",height:"100%"})}),Object(p.jsx)("div",{style:{position:"absolute",bottom:"8px",right:"8px"},children:i})]})}var d=t(n,a),f={title:i,pageIndex:r.pageIndex};if(Object(R.isPresent)(d)){f.documentIndex=d.documentIndex;var j=o[d.documentIndex];j||(o[d.documentIndex]=j=[]),j[d.documentOrder]=f}else c.push(f)}))}));var i=n.map((function(e,t){var n,r=null!==(n=o[t])&&void 0!==n?n:[],c=r.length,i=Ye.a.t("DocumentN",{index:t+1,count:c}),s=e.schemaId;if(s){var u=null===a||void 0===a?void 0:a.find((function(e){return e.$id===s}));if(u){var l=u.title;if(!l){var d=s.lastIndexOf("/");(l=s.substring(d+1)).toLocaleLowerCase().endsWith(".json")&&(l=l.substring(0,l.length-5))}i=Ye.a.t("NamedDocumentN",{title:l,index:t+1,count:c})}}return{documentIndex:t,title:i,action:e.action,errors:e.errors,children:r}}));return[].concat(Object(r.a)(i),[{title:Ye.a.t("OrphanPages",{count:c.length}),children:c}])}(n,s,a,t):function(e,t){return e.map((function(n,r){var a=Ye.a.t("DocumentN",{index:r+1}),c=e[r].schemaId;if(c){var o=null===t||void 0===t?void 0:t.find((function(e){return e.$id===c}));if(o){var i=o.title;if(!i){var s=c.lastIndexOf("/");(i=c.substring(s+1)).toLocaleLowerCase().endsWith(".json")&&(i=i.substring(0,i.length-5))}a="".concat(r+1," - ").concat(i)}}return{documentIndex:r,title:a,action:e[r].action,errors:e[r].errors,children:[]}}))}(a,t);if(e.length>0){for(var i=0;i<Math.min(o.length,e.length-1);i++)o[i].expanded=e[i].expanded;o[o.length-1].expanded=e[e.length-1].expanded}return u===e&&o.length>0&&(o[0].expanded=!0),o}))}),[c,a,t,n,s,u,i]),{treeData:f,setTreeData:v}},Bt=function(e){var t=e.node,n=Object(W.a)().t,r=At(),a="send"===t.action?Object(p.jsx)(qe.a,{className:r.sendActionIcon}):"dontSend"===t.action?Object(p.jsx)(Ke.a,{className:r.actionIcon,color:"error"}):Object(p.jsx)(Nt,{className:r.actionIcon});return Object(p.jsx)(Ee.a,{title:n("RecognizedDocumentAction.".concat(t.action)),children:Object(p.jsx)("span",{children:a})})},Vt=function(e){var t=e.node,n=e.canModify,r=At(),a="send"===t.action&&t.errors.length>0&&n?Object(De.default)(r.document,r.documentWithErrors):r.document;return Object(p.jsxs)(Fe.a,{className:r.documentTitle,alignItems:"center",justifyContent:"center",alignContent:"stretch",children:[Object(p.jsx)(_e.a,{noWrap:!1,variant:"body2",className:a,children:t.title}),Object(p.jsx)(Bt,{node:t})]})},Wt=function(e){var t=e.description,n=e.onClick,r=e.icon;return Object(p.jsx)(Ee.a,{title:t,children:Object(p.jsx)(ze.a,{size:"small",onClick:n,children:r})})},Ht=function(e){var t=e.node,n=e.unusedPageIndices,a=Object(W.a)().t,c=Object(o.useState)(),i=Object(j.a)(c,2),s=i[0],u=i[1],l=Ne(),d=l.updateDocument,f=l.getDocument,b=l.fileInfos,v=Object(o.useMemo)((function(){var e=n;if(Object(R.isPresent)(s)){var t=f(s).pages.map((function(e){var t=b[e.fileIndex];if("loaded"===t.status)return t.pages[e.filePageNumber].pageIndex})).filter(R.isPresent);t.push.apply(t,Object(r.a)(e)),e=t.sort()}return e}),[s,b,f,n]),O=Object(o.useCallback)((function(e,t){u(t)}),[]),h=Object(o.useCallback)((function(e){f(s).schemaId!==e.schemaId&&(e.data={}),d(s,e)}),[s,f,d]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Wt,{description:a("Edit"),icon:Object(p.jsx)(He.a,{}),onClick:function(e){return O(e,t.documentIndex)}}),Object(R.isPresent)(s)&&Object(p.jsx)(Mt,{open:Object(R.isPresent)(s),document:f(s),availablePageIndices:v,onChange:h,onClose:function(){return u(void 0)}})]})},Jt=function(e){var t=e.node,n=Object(W.a)().t,r=Object(ct.c)(),a=Ne().deleteDocument,c=Object(o.useCallback)(function(){var e=Object(L.a)(E.a.mark((function e(t,c,o){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,r({description:n("ConfirmDeleteBatchDocument",{name:o})});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:a(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[r,a,n]);return Object(p.jsx)(Wt,{description:n("Delete"),icon:Object(p.jsx)($e.a,{}),onClick:function(e){return c(e,t.documentIndex,t.title)}})},qt=function(e){var t=e.unusedPageIndices,n=Object(W.a)().t,r=Object(o.useState)(!1),a=Object(j.a)(r,2),c=a[0],i=a[1],s=Ne(),u=s.setCurrentDocumentLocation,l=s.addDocument,d=Object(o.useCallback)((function(){i(!0)}),[]),f=Object(o.useCallback)((function(e){e.data={};var t=l(e);u({documentIndex:t})}),[l,u]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ee.a,{title:n("AddDocument"),children:Object(p.jsx)(ze.a,{onClick:d,size:"small",children:Object(p.jsx)(Ve.a,{})})}),c&&Object(p.jsx)(Mt,{open:c,availablePageIndices:t,onChange:f,onClose:function(){return i(!1)}})]})},Gt=function(e){var t=e.node;return Et(t)&&"string"!==typeof t.title?Math.max(pe.height,pe.width)+62:62},Kt=function(e){var t=At(),n=Ne(),r=n.fileInfos,a=n.loadingImages,c=n.movePage,i=n.currentDocumentLocation,s=n.setCurrentDocumentLocation,u=n.canModify,l=n.unusedPages,d=$t(),j=d.treeData,v=d.setTreeData;Object(o.useEffect)((function(){if(!a&&u&&i&&Object(R.isPresent)(i.documentIndex)&&!Object(R.isPresent)(i.pageIndex)){var e,t=Object(M.a)(j);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(Dt(n)&&n.documentIndex===i.documentIndex&&Array.isArray(n.children)){var r=n.children[0];Et(r)&&s(Object(b.a)(Object(b.a)({},i),{},{pageIndex:r.pageIndex}))}}}catch(c){t.e(c)}finally{t.f()}}}),[u,i,a,s,j]);var O=Object(o.useMemo)((function(){return l.map((function(e){var t=r[e.fileIndex];if("loaded"===t.status)return t.pages[e.filePageNumber].pageIndex})).filter(R.isPresent)}),[r,l]),h=Object(o.useCallback)((function(e){!function(e){var t=e[e.length-1],n=t.children;zt(t)&&Array.isArray(n)&&n.sort(Object(Xe.a)((function(e,t){return e.pageIndex<t.pageIndex})))}(e),v(e)}),[v]),m=Object(o.useCallback)((function(e){var t=e.node,n=e.nextParentNode,r=e.prevTreeIndex,a=e.nextTreeIndex;if(n&&r!==a){var o=t,i=n;if(!zt(i)||Object(R.isPresent)(o.documentIndex))if(Dt(i)){var s=i.documentIndex,u=i.children.findIndex((function(e){return e.pageIndex===o.pageIndex}));c(o.pageIndex,{documentIndex:s,documentOrder:u})}else zt(i)&&c(o.pageIndex)}}),[c]),g=Object(o.useCallback)((function(e,t){var n,r,a=e.target;if(!0!==(null===(n=a.classList)||void 0===n?void 0:n.contains("rst__collapseButton"))&&!0!==(null===(r=a.classList)||void 0===r?void 0:r.contains("rst__expandButton"))){var c=t,o=c.pageIndex;Object(R.isPresent)(o)||!Array.isArray(c.children)||Object(oe.a)(c.children)||(o=c.children[0].pageIndex),s({documentIndex:c.documentIndex,pageIndex:o})}}),[s]),x=Object(o.useCallback)((function(e){var n=e.node,r=i&&n.documentIndex===i.documentIndex&&(Dt(n)||n.pageIndex===i.pageIndex),a={onClick:function(t){return g(t,e.node)},className:Object(De.default)(t.node,Object(f.a)({},t.selectedNode,r))};if(Dt(n)){if(u){var c=Object(p.jsx)(Ht,{node:n,unusedPageIndices:O}),o=Object(p.jsx)(Jt,{node:n});a.buttons=[c,o]}a.title=function(){return Object(p.jsx)(Vt,{node:n,canModify:u})}}return a}),[u,t.node,t.selectedNode,i,g,O]);return a?null:Object(p.jsxs)(p.Fragment,{children:[u&&Object(p.jsx)(Le.a,{className:t.toolbar,children:Object(p.jsx)(qt,{unusedPageIndices:O})}),Object(p.jsx)(Ze.a,{treeData:j,onChange:h,onMoveNode:m,getNodeKey:Lt,canDrag:_t,canDrop:Ut,canNodeHaveChildren:Ft,isVirtualized:!1,generateNodeProps:x,className:t.tree,rowHeight:Gt,theme:et.a})]})},Yt=n(915),Xt=n(918),Zt=n(2398),Qt=n(334),en=n(49),tn=function(e){return Object(p.jsx)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 512 512"},e),{},{children:Object(p.jsx)("path",{d:"M9.5 1.4C2.3 4.6 0 9.7 0 22.6V32h32V0h-9.7c-5.9.1-11 .6-12.8 1.4zM62 16v16h29V0H62v16zM121 16v16h29V0h-29v16zM180 16v16h29V0h-29v16zM239 16v16h29V0h-29v16zM298 16v16h29V0h-29v16zM357 16v16h29V0h-29v16zM416 15.9V32h32.2l-.4-10.9c-.2-9.2-.6-11.4-2.4-13.7-4.4-6-6.7-6.9-18.5-7.2L416-.2v16.1zM0 76.5V91h32V62H0v14.5zM416 76.5V91h32V62h-32v14.5zM0 135.5V150h32v-29H0v14.5zM416 135.5V150h32v-29h-32v14.5zM0 194.5V209h32v-29H0v14.5zM416 194.5V209h32v-29h-32v14.5zM297.5 225.4c-4.1 1.8-8.3 6.9-9 10.9-.3 1.8-.4 62.2-.3 134.4.3 130.7.3 131.2 2.4 133.9 4.9 6.7 13 9.1 19.5 6 1.9-.9 20.5-15.3 41.4-32.1l38-30.4 54.8-.1c59.9 0 58.9.1 64-5.9 3-3.7 4.2-8.5 3.2-13.9-.6-3.3-11.6-14.6-99.3-102.6-57.7-57.7-100-99.4-101.9-100.2-4-1.7-8.9-1.7-12.8 0zM417.7 416l-39.4.5-3.9 3c-2.1 1.6-15 11.8-28.6 22.7-13.6 10.9-25 19.8-25.3 19.8-.3 0-.5-41.3-.5-91.7v-91.8l68.5 68.5 68.5 68.5-39.3.5zM0 253.5V268h32v-29H0v14.5zM416 253.5V268h32v-29h-32v14.5zM0 312.5V327h32v-29H0v14.5zM0 371.5V386h32v-29H0v14.5zM.2 426.9c.3 11.8 1.2 14.1 7.2 18.5 2.3 1.8 4.5 2.2 13.7 2.4l10.9.4V416H-.2l.4 10.9zM62 432v16h29v-32H62v16zM121 432v16h29v-32h-29v16zM180 432v16h29v-32h-29v16z"})}))},nn=n(603),rn=n.n(nn),an=function(){throw new Error("You forgot to wrap your component in <ImageCaptureContextProvider>.")},cn={captureAvailable:!1,captureImage:an,setCurrentCropper:an},on=Object(o.createContext)(cn),sn=function(e){var t=e.outputImageFormat,n=e.children,r=Object(o.useState)(),a=Object(j.a)(r,2),c=a[0],i=a[1],s=Object(o.useCallback)((function(e){if(c){var n=function(e,t){if("image/tiff"===t){var n=e.getContext("2d").getImageData(0,0,e.width,e.height),r=new Uint8Array(n.data.buffer),a=rn.a.encodeImage(r,n.width,n.height);return ge(a,"image/tiff")}return e.toDataURL()}(c.getCroppedCanvas(),null!==e&&void 0!==e?e:t);return c.clear(),i(void 0),n}}),[c,t]),u=Object(o.useMemo)((function(){return{captureAvailable:!!c,captureImage:s,setCurrentCropper:i}}),[s,c]);return Object(p.jsx)(on.Provider,{value:u,children:n})},un=function(){return Object(o.useContext)(on)},ln=Object(C.a)((function(e){return Object(w.a)({image:{marginTop:e.spacing(2),width:"max-content",maxWidth:"100%"},imagePlaceholder:{marginTop:e.spacing(6),height:50},imageActions:{marginLeft:-10}})})),dn=Object(d.withJsonFormsControlProps)((function(e){var t=e.uischema,n=e.config,r=e.id,a=e.data,c=e.visible,i=e.errors,u=e.label,d=e.required,f=e.description,b=e.path,j=e.handleChange,v=Object(W.a)().t,O=ln(),h=0===i.length,m=Object(Qt.merge)({},n,t.options),g=!Object(l.isDescriptionHidden)(c,null!==f&&void 0!==f?f:"",!1,m.showUnfocusedDescription),x=Ne().getDisplayableDataUrl,y=un(),k=y.captureAvailable,C=y.captureImage,w=Object(o.useCallback)((function(){if(k){var e=C();j(b,e)}}),[k,C,j,b]),I=Object(o.useCallback)((function(){j(b,void 0)}),[j,b]),T=g?f:h?null:i,P=g&&!h?i:null;return Object(p.jsx)(s.a,{xsUp:!c,children:Object(p.jsxs)(Yt.a,{fullWidth:!m.trim,id:r,children:[Object(p.jsx)(Zt.a,{htmlFor:r+"-input",error:!h,shrink:"string"===typeof a,children:Object(l.computeLabel)(Object(l.isPlainLabel)(u)?u:u.default,!!d,m.hideRequiredAsterisk)}),Object(p.jsxs)("div",{children:["string"===typeof a&&Object(p.jsx)("img",{src:x(a),alt:"",className:O.image}),"string"!==typeof a&&Object(p.jsx)("img",{src:"".concat(Object(en.a)(),"images/image-placeholder.png"),alt:"placeholder",className:O.imagePlaceholder})]}),Object(p.jsxs)("div",{className:O.imageActions,children:[Object(p.jsx)(Ee.a,{title:v("CaptureCurrentSelection"),children:Object(p.jsx)("span",{children:Object(p.jsx)(ze.a,{onClick:w,disabled:!k,children:Object(p.jsx)(tn,{})})})}),Object(p.jsx)(Ee.a,{title:v("Delete"),children:Object(p.jsx)(ze.a,{onClick:I,children:Object(p.jsx)($e.a,{})})})]}),Object(p.jsx)(Xt.a,{error:!h&&!g,children:T}),Object(p.jsx)(Xt.a,{error:!h,children:P})]})})})),fn=Object(l.rankWith)(4,Object(l.and)(l.isControl,(function(e,t){var n=l.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"image"===n.format}))),bn=n(664),jn=n(110),vn=n.n(jn),pn=n(146),On=n(914),hn=n(933),mn=n(447),gn=n.n(mn),xn=(Ot=On.a,Object(bn.a)((function(e){return Object(p.jsx)(Ot,Object(b.a)({},e))}))),yn=i.a.memo((function(e){var t,n,r,a,c=Object(o.useState)(!1),i=Object(j.a)(c,2),s=i[0],u=i[1],l=e.data,d=e.config,f=e.className,b=e.id,v=e.enabled,O=e.uischema,h=e.isValid,m=e.path,g=e.handleChange,x=e.schema,y=e.muiInputProps,k=x.maxLength,C=vn()({},d,O.options);a=C.restrict?{maxLength:k}:{};var w=Object(o.useMemo)((function(){return x.patternMask}),[x]);a=vn()(a,y),C.trim&&void 0!==k&&(a.size=k);var I=Object(pn.a)(),T=(null===(t=I.jsonforms)||void 0===t||null===(n=t.input)||void 0===n||null===(r=n.delete)||void 0===r?void 0:r.background)||I.palette.background.default,P=Object(o.useCallback)((function(e){g(m,e)}),[g,m]);return Object(p.jsx)(xn,{mask:w,onAccept:P,type:"text",className:f,id:b,value:l,disabled:!v,autoFocus:C.focus,multiline:C.multi,fullWidth:!C.trim||void 0===k,inputProps:a,error:!h,onPointerEnter:function(){return u(!0)},onPointerLeave:function(){return u(!1)},endAdornment:Object(p.jsx)(hn.a,{position:"end",style:{display:s&&v&&void 0!==l?"flex":"none",position:"absolute",right:0},children:Object(p.jsx)(ze.a,{"aria-label":"Clear input field",onClick:function(){return g(m,void 0)},children:Object(p.jsx)(gn.a,{style:{background:T,borderRadius:"50%"}})})})})}),d.areEqual),kn=Object(d.withJsonFormsControlProps)((function(e){return Object(p.jsx)(a.MaterialInputControl,Object(b.a)(Object(b.a)({},e),{},{input:yn}))})),Cn=Object(l.rankWith)(4,Object(l.and)(l.isControl,(function(e,t){var n=l.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"string"===typeof n.patternMask}))),wn=Object(C.a)((function(e){return Object(w.a)({content:{maxHeight:"100%",width:"99%",overflowY:"auto",overflowX:"visible"}})})),In={restrict:!0},Tn=function(e){var t,n=Ne(),a=n.documentSchemas,c=n.currentDocument,i=n.currentDocumentEditionState,s=n.setCurrentDocumentEditionState,u=n.canModify,l=n.updateCurrentDocument,f=wn(),j=Object(W.a)().t,v=Object(o.useRef)(null===i||void 0===i?void 0:i.document.data),O=Object(o.useRef)(!1);Object(o.useMemo)((function(){v.current=null===i||void 0===i?void 0:i.document.data}),[null===i||void 0===i?void 0:i.document.data]);var h=Object(o.useMemo)((function(){var e={};if(a){var t,n=Object(M.a)(a);try{for(n.s();!(t=n.n()).done;){var r,c=t.value;c.$id&&(e[c.$id]={label:null!==(r=c.title)&&void 0!==r?r:c.$id,description:c.description})}}catch(o){n.e(o)}finally{n.f()}}return e}),[a]),m=Object(o.useMemo)((function(){var e=Object.keys(h);return Object(bt.a)((function(e){return h[e].label}),e)}),[h]),g=Object(o.useMemo)((function(){return[].concat(Object(r.a)(ta),[{tester:fn,renderer:dn},{tester:Cn,renderer:kn}])}),[]),x=Object(o.useCallback)((function(e){O.current=!!e.errors&&e.errors.length>0;var t=O.current?Object(Oe.a)(e.errors.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{instancePath:e.dataPath})}))):void 0;O.current||v.current===e.data||(v.current=e.data,O.current=!1),s((function(n){var r,a;return Object(H.a)(e.data,null===n||void 0===n?void 0:n.document)&&Object(H.a)(t,null===n||void 0===n?void 0:n.errors)?n:{document:Object(b.a)(Object(b.a)({},n.document),{},{data:null!==(r=e.data)&&void 0!==r?r:null===n||void 0===n||null===(a=n.document)||void 0===a?void 0:a.data}),errors:t}}))}),[s]),y=Object(o.useCallback)((function(e){var t=Object(b.a)(Object(b.a)({},c),{},{action:e.target.value});l(t)}),[c,l]),k=Object(o.useCallback)((function(e,t){if(t&&(null===c||void 0===c?void 0:c.schemaId)!==t){var n=Object(b.a)(Object(b.a)({},c),{},{schemaId:t,data:{}});l(n)}}),[c,l]);if(!(null===i||void 0===i?void 0:i.document))return null;var C=null===a||void 0===a?void 0:a.find((function(e){return e.$id===(null===i||void 0===i?void 0:i.document.schemaId)}));return Object(p.jsxs)(Fe.a,{container:!0,spacing:1,className:f.content,children:[Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(yt.a,{value:null===c||void 0===c?void 0:c.schemaId,options:m,onChange:k,getOptionLabel:function(e){var t,n;return null!==(t=null===(n=h[e])||void 0===n?void 0:n.label)&&void 0!==t?t:""},disableClearable:!0,renderInput:function(e){return Object(p.jsx)(dt.a,Object(b.a)(Object(b.a)({},e),{},{label:j("DocumentType"),InputLabelProps:{required:!0},required:!0,autoFocus:!0}))},fullWidth:!0})}),Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(dt.a,{select:!0,value:null===c||void 0===c?void 0:c.action,onChange:y,label:j("Action"),fullWidth:!0,children:pt.map((function(e){return Object(p.jsx)(ft.a,{value:e,children:j("RecognizedDocumentAction.".concat(e))},e)}))})}),Object(p.jsx)(Fe.a,{item:!0,xs:12,children:Object(p.jsx)(d.JsonForms,{data:null!==(t=null===i||void 0===i?void 0:i.document.data)&&void 0!==t?t:{},schema:C,onChange:x,renderers:g,cells:na,ajv:me,readonly:!u||"dontSend"===(null===i||void 0===i?void 0:i.document.action),config:In})})]})},Pn=n(83),Sn=n(904),Mn=n(2441),Rn=n(2477),Nn=n(2412),An=n(264),Dn=n.n(An),zn=n(605),En=n.n(zn),Ln=n(606),Fn=n.n(Ln),_n=n(265),Un=n.n(_n),$n=n(611),Bn=n.n($n),Vn=n(612),Wn=n.n(Vn),Hn=n(610),Jn=n.n(Hn),qn=n(609),Gn=n.n(qn),Kn=n(608),Yn=n.n(Kn),Xn=n(607),Zn=n.n(Xn),Qn=n(336),er=n.n(Qn),tr=n(385),nr=n(604),rr=n.n(nr),ar=n(180),cr=function(e){return Object(p.jsx)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 1000 1000"},e),{},{children:Object(p.jsx)("path",{d:"M560.8 191.3v246.9h245V315.8L990 500 805.8 684.2V558.9h-245v246.9h123.4L500 990 315.8 805.8h122.5V558.9h-245v124.4L10 500l183.3-183.3v121.5h245V191.3H318.6L500 10l181.4 181.3H560.8z"})}))},or=function(e){return Object(p.jsxs)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(p.jsx)("path",{d:"M458.3 948.4c125.9 0 239.5-51.9 321-135.4l-37.5-40.2c-72.2 75-173.6 121.7-285.9 121.7-219.2 0-396.9-177.7-396.9-396.9S236.7 100.7 455.9 100.7c207.6 0 377.8 159.5 395.2 362.6h-96.3l117.6 196L990 463.2h-85C886.3 232.9 693.6 51.6 458.3 51.6 210.7 51.6 10 252.4 10 500c0 247.6 200.7 448.4 448.3 448.4z"}),Object(p.jsx)("path",{d:"M 402.3 395.8 c -17.6 -17.8 -41.8 -26.8 -72 -26.8 c -1.3 0 -2.7 0 -4.1 0.1 h -0.1 c -31.8 1.5 -56.7 11.1 -73.8 28.5 c -17.1 17.4 -26.8 42.9 -28.7 75.7 v 0.7 c 1.4 30.5 10 54.2 25.5 70.5 c 15.6 16.4 38.2 25.4 67.3 26.9 h 0.5 c 27.3 -0.8 49.5 -9.4 66.3 -25.6 c -1.9 25.7 -6.9 45.7 -15 59.6 c -9.5 16.3 -23.1 24.2 -41.7 24.2 H 325 c -22.4 0 -36.9 -12.4 -44.3 -37.8 c -0.9 -2.9 -3.5 -4.9 -6.5 -4.9 c -0.5 0 -1 0 -1.4 0.2 l -38.4 8.3 c -1.8 0.4 -3.4 1.5 -4.3 3 c -1 1.6 -1.3 3.5 -0.8 5.2 c 5.9 23 16.9 40.7 32.7 52.4 c 15.7 11.6 36.5 17.5 61.6 17.5 h 1.9 c 37.2 0 65.6 -13.6 84.4 -40.4 c 18.2 -26.1 27.5 -65.3 27.5 -116.5 c 0.3 -27.7 -2.5 -51.8 -8.2 -71.7 c -5.8 -20.5 -14.9 -37 -26.9 -49.1 z m -21 81.8 c -2.6 31.4 -20.1 46.8 -55 48.6 c -31.1 -1.8 -46.4 -19.3 -48.1 -55.2 c 1.7 -35.9 17.5 -53.5 49.6 -55.2 c 17.7 0.5 30.6 5.6 39.4 15.6 c 8.9 10 13.6 25.6 14.1 46.2 z M 647 409.2 c -17.9 -26.1 -44.8 -39.7 -79.9 -40.2 h -0.4 c -35 1.5 -61.9 15.4 -80.1 41.5 c -17.6 25.4 -27 62.8 -28 111.2 v 0.2 c 0.5 48.9 9.6 86.5 27.3 111.7 c 18.2 25.9 45.4 39.2 80.9 39.7 h 1.9 c 35 0 61.7 -13.2 79.4 -39.1 c 17.1 -25.1 25.8 -62.9 25.8 -112.3 v -0.1 c -0.4 -49.4 -9.5 -87.3 -26.9 -112.6 z m -30.5 114 c 0 36.5 -4.4 64.1 -13.1 81.9 c -8 16.4 -19.5 24.4 -35.1 24.4 h -2.8 c -15.6 0 -27.1 -8 -35.1 -24.4 c -8.7 -17.8 -13 -45.3 -13 -81.8 c 0 -36.9 4.4 -64.8 13.1 -82.9 c 8 -16.7 19.5 -24.8 35.1 -24.8 h 1.6 c 0.8 0 1.5 -0.1 2.3 -0.1 c 10.1 0 18.3 3.3 24.9 10 c 15.3 15.4 22.7 48.3 22.1 97.7 z M 647.5 257.5 c -28.4 0 -51.4 23 -51.4 51.5 c 0 28.4 23 51.4 51.4 51.4 s 51.5 -23 51.5 -51.4 c -0.1 -28.5 -23.1 -51.5 -51.5 -51.5 z m 0 73.4 c -12.2 0 -22 -9.9 -22 -22.1 c 0 -12.2 9.9 -22.1 22 -22.1 c 12.2 0 22.1 9.9 22.1 22.1 c -0.1 12.3 -10 22.1 -22.1 22.1 z"})]}))},ir=function(e){return Object(p.jsxs)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(p.jsx)("path",{d:"M541.7 948.4c-125.9 0-239.5-51.9-321-135.4l37.5-40.2c72.2 75 173.6 121.7 285.9 121.7 219.2 0 396.9-177.7 396.9-396.9S763.3 100.7 544.1 100.7c-207.6 0-377.8 159.5-395.2 362.6h96.3l-117.6 196L10 463.2h85C113.7 232.9 306.4 51.6 541.7 51.6 789.3 51.6 990 252.4 990 500c0 247.6-200.7 448.4-448.3 448.4z"}),Object(p.jsx)("path",{d:"M502.3 395.8c-17.6-17.8-41.8-26.8-72-26.8-1.3 0-2.7 0-4.1.1h-.1c-31.8 1.5-56.7 11.1-73.8 28.5-17.1 17.4-26.8 42.9-28.7 75.7v.7c1.4 30.5 10 54.2 25.5 70.5 15.6 16.4 38.2 25.4 67.3 26.9h.5c27.3-.8 49.5-9.4 66.3-25.6-1.9 25.7-6.9 45.7-15 59.6-9.5 16.3-23.1 24.2-41.7 24.2H425c-22.4 0-36.9-12.4-44.3-37.8-.9-2.9-3.5-4.9-6.5-4.9-.5 0-1 0-1.4.2l-38.4 8.3c-1.8.4-3.4 1.5-4.3 3-1 1.6-1.3 3.5-.8 5.2 5.9 23 16.9 40.7 32.7 52.4 15.7 11.6 36.5 17.5 61.6 17.5h1.9c37.2 0 65.6-13.6 84.4-40.4 18.2-26.1 27.5-65.3 27.5-116.5.3-27.7-2.5-51.8-8.2-71.7-5.8-20.5-14.9-37-26.9-49.1zm-21 81.8c-2.6 31.4-20.1 46.8-55 48.6-31.1-1.8-46.4-19.3-48.1-55.2 1.7-35.9 17.5-53.5 49.6-55.2 17.7.5 30.6 5.6 39.4 15.6 8.9 10 13.6 25.6 14.1 46.2zM747 409.2c-17.9-26.1-44.8-39.7-79.9-40.2h-.4c-35 1.5-61.9 15.4-80.1 41.5-17.6 25.4-27 62.8-28 111.2v.2c.5 48.9 9.6 86.5 27.3 111.7 18.2 25.9 45.4 39.2 80.9 39.7h1.9c35 0 61.7-13.2 79.4-39.1 17.1-25.1 25.8-62.9 25.8-112.3v-.1c-.4-49.4-9.5-87.3-26.9-112.6zm-30.5 114c0 36.5-4.4 64.1-13.1 81.9-8 16.4-19.5 24.4-35.1 24.4h-2.8c-15.6 0-27.1-8-35.1-24.4-8.7-17.8-13-45.3-13-81.8 0-36.9 4.4-64.8 13.1-82.9 8-16.7 19.5-24.8 35.1-24.8h1.6c.8 0 1.5-.1 2.3-.1 10.1 0 18.3 3.3 24.9 10 15.3 15.4 22.7 48.3 22.1 97.7zM747.5 257.5c-28.4 0-51.4 23-51.4 51.5 0 28.4 23 51.4 51.4 51.4s51.5-23 51.5-51.4c-.1-28.5-23.1-51.5-51.5-51.5zm0 73.4c-12.2 0-22-9.9-22-22.1 0-12.2 9.9-22.1 22-22.1 12.2 0 22.1 9.9 22.1 22.1-.1 12.3-10 22.1-22.1 22.1z"})]}))},sr=function(e){return Object(p.jsx)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 100 100"},e),{},{children:Object(p.jsx)("switch",{children:Object(p.jsxs)("g",{children:[Object(p.jsx)("path",{d:"M5273.1 2400.1v-2c0-2.8-5-4-9.7-4s-9.7 1.3-9.7 4v2c0 1.8.7 3.6 2 4.9l5 4.9c.3.3.4.6.4 1v6.4c0 .4.2.7.6.8l2.9.9c.5.1 1-.2 1-.8v-7.2c0-.4.2-.7.4-1l5.1-5c1.3-1.3 2-3.1 2-4.9zm-9.7-.1c-4.8 0-7.4-1.3-7.5-1.8.1-.5 2.7-1.8 7.5-1.8s7.3 1.3 7.5 1.8c-.2.5-2.7 1.8-7.5 1.8z"}),Object(p.jsx)("path",{d:"M5268.4 2410.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1s-.4-1-1-1h-4.3zM5272.7 2413.7h-4.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1s-.4-1-1-1zM5272.7 2417h-4.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1 0-.5-.4-1-1-1z"}),Object(p.jsx)("g",{children:Object(p.jsx)("path",{d:"M45.2 45.5H32.4v-5.2c0-.7-.4-1.3-1-1.5-.6-.3-1.3-.2-1.8.3l-10.7 9.7c-.4.3-.6.8-.6 1.2 0 .4.2.9.5 1.2l.1.1L29.6 61c.5.4 1.2.6 1.8.3.6-.3 1-.9 1-1.5v-5.2h12.8c.8 0 1.4-.6 1.4-1.4V47c0-.9-.7-1.5-1.4-1.5zM70.4 39.1c-.5-.4-1.2-.6-1.8-.3-.6.3-1 .9-1 1.5v5.2H54.8c-.8 0-1.4.6-1.4 1.4v6.2c0 .8.6 1.4 1.4 1.4h12.8v5.2c0 .5.2.9.5 1.2.1.1.3.3.5.3.6.3 1.3.2 1.8-.3l10.7-9.7c.4-.3.6-.8.6-1.2 0-.5-.2-.9-.6-1.2l-10.7-9.7zM10.9 28.7H4.2c-.9 0-1.7.8-1.7 1.7v39.2c0 .9.8 1.7 1.7 1.7h6.7c.9 0 1.7-.8 1.7-1.7V30.4c0-.9-.8-1.7-1.7-1.7zM95.8 28.7h-6.7c-.9 0-1.7.8-1.7 1.7v39.2c0 .9.8 1.7 1.7 1.7h6.7c.9 0 1.7-.8 1.7-1.7V30.4c0-.9-.8-1.7-1.7-1.7z"})})]})})}))},ur=function(e){return Object(p.jsx)(Rt.a,Object(b.a)(Object(b.a)({viewBox:"0 0 24 24"},e),{},{children:Object(p.jsx)("path",{d:"M2 2v5h2V4h3V2H2zm15 0v2h3v3h2V2h-5zm-5.844 4.031L7 17h1.969l.906-2.563h4.25L15 17h2L12.844 6.031h-1.688zM12 8.375l1.594 4.531h-3.188L12 8.375zM2 17v5h5v-2H4v-3H2zm18 0v3h-3v2h5v-5h-2z"})}))},lr=n(154),dr=Object(C.a)((function(e){return Object(w.a)({toolbar:{minHeight:"48px",paddingLeft:0,borderBottom:"solid 2px ".concat(e.palette.divider)},listContainer:{width:"100%",height:"calc(100% - 48px)"},cropper:{height:"100%",width:"100%"},cropperDisabled:{"& .cropper-crop-box":{display:"none"},"& .cropper-drag-box":{opacity:0}},imageItem:{width:"100%",position:"relative"},image:{maxWidth:"100%",marginTop:10,marginBottom:10},imagePlaceholder:{marginTop:10,height:50},imageActions:{marginLeft:-10},grow:{flexGrow:1},textField:{width:"4ch"},totalPages:{display:"inline-block",marginTop:6},fixHeight:{height:24},toolbarButtonContainer:{position:"relative"},ellipsis:{position:"absolute",fontSize:12,right:0,bottom:0,borderRadius:"50%",backgroundColor:e.palette.background.default,border:"solid 1px ".concat(e.palette.action.active)}})})),fr=Object(Pn.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(Rn.a),br=function(e){var t=e.tooltip,n=e.onClick,r=e.showEllipsis,a=e.disabled,c=e.children,o=dr();return Object(p.jsx)(Ee.a,{title:t,children:Object(p.jsxs)("div",{className:o.toolbarButtonContainer,children:[Object(p.jsx)(ze.a,{onClick:n,size:"small",disabled:a,children:c}),r&&Object(p.jsx)(er.a,{className:o.ellipsis})]})})},jr="move",vr=function(e){var t=Object(W.a)().t,n=Ne(),r=n.canModify,a=n.rotateImage,c=n.rotateAllImages,i=n.canOcr,s=n.ocrImage,u=dr(),l=Object(tr.a)({}),d=l.width,f=l.height,b=l.ref,v=Object(o.useRef)(null),O=function(){var e=Ne(),t=e.currentDocument,n=e.currentDocumentLocation,r=e.setCurrentDocumentLocation,a=e.fileInfos,c=e.unusedPages,i=Object(o.useMemo)((function(){var e=[],n=[];if(t){var r,o=Object(M.a)(t.pages);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=a[i.fileIndex];"loaded"===s.status&&(e.push(s.pages[i.filePageNumber]),n.push(s.pageStates[i.filePageNumber]))}}catch(u){o.e(u)}finally{o.f()}}else a.forEach((function(t,r){"loaded"===t.status&&t.pageStates.forEach((function(a,o){c.findIndex((function(e){return e.fileIndex===r&&e.filePageNumber===o}))>-1&&(n.push(a),e.push(t.pages[o]))}))}));return[e,n]}),[t,a,c]),s=Object(j.a)(i,2),u=s[0],l=s[1],d=Object(o.useMemo)((function(){var e=null===n||void 0===n?void 0:n.pageIndex;if(!Object(R.isPresent)(e))return[void 0,void 0];var t=u.findIndex((function(t){return t.pageIndex===e}));return[null===n||void 0===n?void 0:n.documentIndex,t>=0?t:void 0]}),[null===n||void 0===n?void 0:n.documentIndex,null===n||void 0===n?void 0:n.pageIndex,u]),f=Object(j.a)(d,2),b=f[0],v=f[1],p=Object(o.useCallback)((function(){r({documentIndex:b,pageIndex:u[0].pageIndex})}),[b,u,r]),O=Object(o.useCallback)((function(){Object(R.isPresent)(v)&&0!==v&&r({documentIndex:b,pageIndex:u[v-1].pageIndex})}),[b,v,u,r]),h=Object(o.useCallback)((function(){!Object(R.isPresent)(v)||v+1>=u.length||r({documentIndex:b,pageIndex:u[v+1].pageIndex})}),[b,v,u,r]),m=Object(o.useCallback)((function(){0!==u.length&&r({documentIndex:b,pageIndex:u[u.length-1].pageIndex})}),[b,u,r]),g=Object(o.useCallback)((function(e){isNaN(e)||e<=0||e>u.length||r({documentIndex:b,pageIndex:u[e-1].pageIndex})}),[b,u,r]);return{currentPage:Object(R.isPresent)(v)?u[v]:void 0,currentPageState:Object(R.isPresent)(v)?l[v]:void 0,currentPageNumber:Object(R.isPresent)(v)?v+1:void 0,totalPages:u.length,gotoFirst:p,gotoPrev:O,gotoNext:h,gotoLast:m,gotoPage:g}}(),h=O.currentPageNumber,m=O.currentPage,g=O.currentPageState,x=O.totalPages,y=O.gotoFirst,k=O.gotoLast,C=O.gotoNext,w=O.gotoPage,I=O.gotoPrev,T=Object(o.useState)(null!==h&&void 0!==h?h:null),P=Object(j.a)(T,2),S=P[0],N=P[1],A=un(),D=A.setCurrentCropper,z=A.captureAvailable,F=A.captureImage,_=Object(o.useState)(),U=Object(j.a)(_,2),$=U[0],B=U[1],V=Object(o.useState)(jr),H=Object(j.a)(V,2),J=H[0],q=H[1],G=Object(o.useState)(!1),K=Object(j.a)(G,2),Y=K[0],X=K[1],Z=Object(o.useState)(!1),Q=Object(j.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!1),re=Object(j.a)(ne,2),ae=re[0],ce=re[1],ie=Object(ar.b)().enqueueSnackbar,se=Object(lr.a)();Object(o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.location===KeyboardEvent.DOM_KEY_LOCATION_LEFT?X(!0):e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&te(!0))},t=function(e){"Shift"===e.key&&(e.location===KeyboardEvent.DOM_KEY_LOCATION_LEFT?X(!1):e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&te(!1))};return document.addEventListener("keydown",e,{capture:!0}),document.addEventListener("keyup",t,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("keyup",t,{capture:!0})}}),[]),Object(o.useEffect)((function(){N(null!==h&&void 0!==h?h:null)}),[h]);var ue=Object(o.useCallback)((function(){null===$||void 0===$||$.clear(),D(void 0)}),[$,D]);Object(o.useEffect)((function(){var e=void 0;return m&&setTimeout((function(){var t,n=v.current;if(n){var r=n.getContext("2d");r&&(t=m.getImageData(),function(e){return"object"===typeof e&&"then"in e}(t)?t:Promise.resolve(t)).then((function(t){r.putImageData(t,0,0),(e=new rr.a(n,{dragMode:jr,initialAspectRatio:Number.NaN,guides:!1,crop:function(){var t,n=null===(t=e)||void 0===t?void 0:t.getCropBoxData();n&&!Object(oe.a)(n)&&D(e)},viewMode:1,autoCrop:!1,ready:function(){B(e)}})).clear(),q(jr)}))}}),0),function(){var t;B(void 0),D(void 0),null===(t=e)||void 0===t||t.destroy()}}),[m,D]);var le=Object(o.useMemo)((function(){if(!Object(R.isPresent)(d)||!Object(R.isPresent)(f)||!Object(R.isPresent)(m))return[1,1,1];var e=d/m.width,t=f/m.height;return[Math.min(e,t),e,t]}),[d,f,m]),de=Object(j.a)(le,3),fe=de[0],be=de[1],je=de[2];Object(o.useEffect)((function(){g&&(null===$||void 0===$||$.rotateTo(g.rotate))}),[$,g]);var ve=Object(o.useCallback)((function(e){var t=0,n=0;"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),ue()):"ArrowUp"===e.key?n=-1:"ArrowDown"===e.key?n=1:"ArrowLeft"===e.key?t=-1:"ArrowRight"===e.key&&(t=1),0===t&&0===n||null===$||void 0===$||$.move(t,n)}),[ue,$]),pe=Object(o.useCallback)((function(e){var t=e.target.value;if(Object(R.isPresent)(t)&&0!==t.length){var n=parseInt(t);isNaN(n)||N(n)}else N(null)}),[]),Oe=Object(o.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),Object(R.isPresent)(S)&&!isNaN(S)&&w(S))}),[w,S]),he=Object(o.useCallback)((function(e){e.currentTarget.focus()}),[]),me=Object(o.useCallback)((function(e,t){t&&(null===$||void 0===$||$.setDragMode(t),q(t))}),[$]),ge=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?c(e):m&&a(m.pageIndex,e)}),[m,c,a]),xe=Object(o.useCallback)((function(){if($){$.zoomTo(fe);var e=fe===be?0:(d-m.width*fe)/2,t=fe===je?0:(f-m.height*fe)/2;$.moveTo(e,t)}}),[$,m,je,fe,be,f,d]),ye=Object(o.useCallback)((function(){if($){$.zoomTo(be);var e=fe===je?0:(f-m.height*fe)/2;$.moveTo(0,e)}}),[$,m,je,fe,be,f]),ke=Object(o.useCallback)((function(){null===$||void 0===$||$.zoom(-.1)}),[$]),Ce=Object(o.useCallback)((function(){null===$||void 0===$||$.zoom(.1)}),[$]),we=Object(o.useCallback)(Object(L.a)(E.a.mark((function e(){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&i){e.next=2;break}return e.abrupt("return");case 2:if(n=F("image/png")){e.next=5;break}return e.abrupt("return");case 5:return ce(!0),e.prev=6,e.prev=7,e.next=10,s(n);case 10:r=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),se(t("TextRecognitionFunctionFailed"),e.t0),e.abrupt("return");case 17:return e.prev=17,e.next=20,navigator.clipboard.writeText(r);case 20:e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(17),se(t("RecognizedTextCouldNotBeCopiedToClipboard"),e.t1),e.abrupt("return");case 26:ie(t("RecognizedTextCopiedToClipboard"),{variant:"success"});case 27:return e.prev=27,ce(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[6,,27,30],[7,13],[17,22]])}))),[i,z,F,ie,s,se,t]);if(!m)return null;var Ie=Y||ee;return Object(p.jsxs)(p.Fragment,{children:[r&&Object(p.jsxs)(Le.a,{className:u.toolbar,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(dt.a,{value:null!==S&&void 0!==S?S:"",onChange:pe,onKeyDown:Oe,disabled:!Object(R.isPresent)(h),className:u.textField,inputProps:{style:{textAlign:"right"}},variant:"standard"}),Object(p.jsxs)("span",{className:u.totalPages,children:["\xa0 / ",x," \xa0"]})]}),Object(p.jsx)(br,{onClick:y,tooltip:t("GotoFirstPage"),children:Object(p.jsx)(Dn.a,{})}),Object(p.jsx)(br,{onClick:I,tooltip:t("GotoPrevPage"),children:Object(p.jsx)(En.a,{})}),Object(p.jsx)(br,{onClick:C,tooltip:t("GotoNextPage"),children:Object(p.jsx)(Fn.a,{})}),Object(p.jsx)(br,{onClick:k,tooltip:t("GotoLastPage"),children:Object(p.jsx)(Un.a,{})}),Object(p.jsx)(Nn.a,{orientation:"vertical",flexItem:!0}),Object(p.jsxs)(fr,{value:J,onChange:me,size:"small",exclusive:!0,children:[Object(p.jsx)(Mn.a,{value:"crop",children:Object(p.jsx)(Ee.a,{title:t("Crop"),children:Object(p.jsx)("div",{className:u.fixHeight,children:Object(p.jsx)(tn,{})})})}),Object(p.jsx)(Mn.a,{value:"move",children:Object(p.jsx)(Ee.a,{title:t("Move"),children:Object(p.jsx)("div",{className:u.fixHeight,children:Object(p.jsx)(cr,{})})})})]}),Object(p.jsx)(Nn.a,{orientation:"vertical",flexItem:!0}),Object(p.jsx)(br,{onClick:xe,tooltip:t("FitPage"),children:Object(p.jsx)(Zn.a,{})}),Object(p.jsx)(br,{onClick:ye,tooltip:t("FitWidth"),children:Object(p.jsx)(sr,{})}),Object(p.jsx)(br,{onClick:ke,tooltip:t("ZoomOut"),children:Object(p.jsx)(Yn.a,{})}),Object(p.jsx)(br,{onClick:Ce,tooltip:t("ZoomIn"),children:Object(p.jsx)(Gn.a,{})}),Object(p.jsx)(Nn.a,{orientation:"vertical",flexItem:!0}),Object(p.jsx)(br,{onClick:function(e){return ge(-90,e.shiftKey)},tooltip:t(Ie?"RotateAll90Ccw":"Rotate90Ccw"),showEllipsis:Ie,children:Object(p.jsx)(ir,{})}),Object(p.jsx)(br,{onClick:function(e){return ge(90,e.shiftKey)},tooltip:t(Ie?"RotateAll90Cw":"Rotate90Cw"),showEllipsis:Ie,children:Object(p.jsx)(or,{})}),Object(p.jsx)(br,{onClick:function(e){return ge(180,e.shiftKey)},tooltip:t(Ie?"RotateAll180":"Rotate180"),showEllipsis:Ie,children:Object(p.jsx)(Jn.a,{})}),Object(p.jsx)(br,{onClick:function(e){return ge(-1,e.shiftKey)},tooltip:t(Ie?"RotateAll1Ccw":"Rotate1Ccw"),showEllipsis:Ie,children:Object(p.jsx)(Bn.a,{})}),Object(p.jsx)(br,{onClick:function(e){return ge(1,e.shiftKey)},tooltip:t(Ie?"RotateAll1Cw":"Rotate1Cw"),showEllipsis:Ie,children:Object(p.jsx)(Wn.a,{})}),i&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Nn.a,{orientation:"vertical",flexItem:!0}),Object(p.jsx)(br,{onClick:we,tooltip:t("OcrCapture"),disabled:!z||ae,children:ae?Object(p.jsx)(Sn.a,{size:20}):Object(p.jsx)(ur,{})})]})]}),Object(p.jsx)("div",{ref:b,className:u.listContainer,onKeyDown:ve,tabIndex:-1,onClick:he,children:Object(R.isPresent)(d)&&Object(R.isPresent)(f)&&!!m&&Object(p.jsx)("canvas",{ref:v,width:m.width,height:m.height,style:{visibility:"hidden"}})})]})},pr=Object(C.a)((function(e){return Object(w.a)({content:{height:"80vh",minWidth:900,display:"flex",flexDirection:"row"},treePane:{flexGrow:1,overflow:"auto",width:function(e){return e.canModify?"26%":"40%"}},imageListPane:{flexGrow:1,width:"41%",overflowY:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10},editorPane:{width:function(e){return e.canModify?"32%":"59%"},flexGrow:1,overflow:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10}})})),Or=function(e){var t=Object(W.a)().t,n=Ne(),r=n.loadingImages,a=n.documentSchemas,c=n.canModify,o=pr({canModify:c});return a?r?Object(p.jsx)(Ae.b,{children:t("LoadingImages")}):Object(p.jsxs)("div",{className:o.content,children:[Object(p.jsx)("div",{className:o.treePane,children:Object(p.jsx)(Kt,{})}),c&&Object(p.jsx)("div",{className:o.imageListPane,children:Object(p.jsx)(vr,{})}),Object(p.jsx)("div",{className:o.editorPane,children:Object(p.jsx)(Tn,{})})]}):null},hr=function(e){var t,n=Object(d.useJsonForms)(),a=Object(l.mapStateToControlProps)({jsonforms:Object(b.a)({},n)},e),c=a.data,i=a.path,u=a.visible,f=a.uischema,j=null===c||void 0===c?void 0:c.documents,v=Object(o.useMemo)((function(){return j?function(e){if(!Array.isArray(e))return[];for(var t=e,n=0;n<t.length;n++){var a=t[n];if(!Object(R.isPresent)(a.data)||!a.action){var c,o,i=Object(b.a)(Object(b.a)({},a),{},{data:null!==(c=a.data)&&void 0!==c?c:{},action:null!==(o=a.action)&&void 0!==o?o:"send"});t===e&&(t=Object(r.a)(e)),t[n]=i}}return t}(j):[]}),[j]);if(Object(o.useEffect)((function(){var e;v===j||Object(H.a)(v,j)||(null===(e=n.dispatch)||void 0===e||e.call(n,Object(l.update)(Object(V.compose)(i,"documents"),(function(){return v}))))}),[n,j,v,i]),v!==j&&!Object(H.a)(v,j))return null;if("ImageBatchRecognition"!==f.type)return null;var O=f;return Object(p.jsx)(s.a,{xsUp:!u,children:Object(p.jsx)(ht.a,{children:Object(p.jsx)(Re,{basePath:i,batch:c,documentSchemasSource:O.documentSchemasSource,readonly:null!==(t=O.readonly)&&void 0!==t&&t,ocrFunction:O.ocrFunction,children:Object(p.jsx)(sn,{outputImageFormat:O.outputImageFormat,children:Object(p.jsx)(Or,{})})})})})},mr=Object(l.rankWith)(3,Object(l.uiTypeIs)("ImageBatchRecognition")),gr=n(4),xr=n(6),yr=n(9),kr=n(10),Cr=n(240),wr=n.n(Cr),Ir=n(241),Tr=n.n(Ir),Pr=n(242),Sr=n.n(Pr),Mr=n(725),Rr=n(514),Nr=n(2442),Ar=function(e){Object(yr.a)(n,e);var t=Object(kr.a)(n);function n(){return Object(gr.a)(this,n),t.apply(this,arguments)}return Object(xr.a)(n,[{key:"render",value:function(){var e=this.props,t=e.description,n=e.id,r=e.errors,a=e.label,c=e.uischema,o=e.visible,i=e.enabled,u=e.required,d=e.path,f=e.handleChange,b=e.data,j=e.config,v=a,O=0===r.length,h=vn()({},j,c.options),m=!Object(l.isDescriptionHidden)(o,null!==t&&void 0!==t?t:"",this.state.isFocused,h.showUnfocusedDescription),g=Object(l.isPlainLabel)(a)?a:v;return Object(p.jsx)(s.a,{xsUp:!o,children:Object(p.jsx)(Mr.b,{id:n+"-input",label:Object(l.computeLabel)(g,null!==u&&void 0!==u&&u,h.hideRequiredAsterisk),error:!O,fullWidth:!h.trim,helperText:O?m?t:" ":r,InputLabelProps:{shrink:!0},value:b?Object(Rr.default)(b):null,onChange:function(e){return f(d,e&&!isNaN(e.valueOf())?Object(Nr.a)(e,{representation:"date"}):"")},format:Ye.a.t("DATE_FORMAT"),clearable:!0,disabled:!i,autoFocus:h.focus,onFocus:this.onFocus,onBlur:this.onBlur,okLabel:Ye.a.t("OK"),cancelLabel:Ye.a.t("Cancel"),clearLabel:Ye.a.t("Clear"),leftArrowIcon:Object(p.jsx)(wr.a,{}),rightArrowIcon:Object(p.jsx)(Tr.a,{}),keyboardIcon:Object(p.jsx)(Sr.a,{}),InputProps:{}})})}}]),n}(d.Control),Dr=Object(l.rankWith)(10,l.isDateControl),zr=Object(d.withJsonFormsControlProps)(Ar),Er=n(375),Lr=n.n(Er),Fr=n(448),_r=n.n(Fr),Ur=n(728),$r=function(e){Object(yr.a)(n,e);var t=Object(kr.a)(n);function n(){return Object(gr.a)(this,n),t.apply(this,arguments)}return Object(xr.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.description,r=e.errors,a=e.label,c=e.uischema,o=e.visible,i=e.enabled,u=e.required,d=e.path,f=e.handleChange,b=e.data,j=e.config,v=vn()({},j,c.options),O=0===r.length;return Object(p.jsx)(s.a,{xsUp:!o,children:Object(p.jsx)(Ur.b,{id:t+"-input",label:Object(l.computeLabel)(Object(l.isPlainLabel)(a)?a:a.default,null!==u&&void 0!==u&&u,v.hideRequiredAsterisk),error:!O,fullWidth:!v.trim,onFocus:this.onFocus,onBlur:this.onBlur,helperText:O?n:r,InputLabelProps:{shrink:!0},value:b||null,onChange:function(e){return f(d,e&&!isNaN(e.valueOf())?e.toISOString():"")},format:Ye.a.t("DATETIME_FORMAT"),clearable:!0,disabled:!i,autoFocus:v.focus,okLabel:Ye.a.t("OK"),cancelLabel:Ye.a.t("Cancel"),clearLabel:Ye.a.t("Clear"),leftArrowIcon:Object(p.jsx)(wr.a,{}),rightArrowIcon:Object(p.jsx)(Tr.a,{}),dateRangeIcon:Object(p.jsx)(Lr.a,{}),keyboardIcon:Object(p.jsx)(Sr.a,{}),timeIcon:Object(p.jsx)(_r.a,{}),InputProps:{}})})}}]),n}(d.Control),Br=Object(l.rankWith)(10,l.isDateTimeControl),Vr=Object(d.withJsonFormsControlProps)($r),Wr=n(2468),Hr=n(2466),Jr=n(613),qr=n.n(Jr),Gr=n(1923),Kr=[n(338)],Yr=Object(Gr.a)((function(e){return e[0]}),Object(Hr.a)((function(e){return e.$id}),Kr)),Xr={resolve:{nimflow:{order:1,canRead:function(e){return!!Yr[e.url]},read:function(e){return Object(v.a)(["$id"],Yr[e.url])}}}},Zr=function(e){return qr.a.dereference(e,Xr)},Qr=["context","bindContext","uiSchemaLibrary","schema","onChange","config"],ea=function(e){var t=e.context,n=e.bindContext,a=e.uiSchemaLibrary,c=e.schema,i=e.onChange,s=e.config,u=Object(S.a)(e,Qr),l=function(e){var t=Object(Wr.a)(Object(L.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,Zr(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[e]);return{resolvedSchema:t.value,loading:t.loading,error:t.error}}(c),f=l.resolvedSchema,v=l.loading,O=l.error,h=Object(o.useState)(),g=Object(j.a)(h,2),x=g[0],y=g[1],k=Object(o.useState)([]),C=Object(j.a)(k,2),w=C[0],I=C[1],T=Object(o.useState)(),P=Object(j.a)(T,2),M=P[0],R=P[1],N=Object(o.useMemo)((function(){var e;return Object(b.a)(Object(b.a)({},s),{},{restrict:null===(e=null===s||void 0===s?void 0:s.restrict)||void 0===e||e})}),[s]),A=Object(o.useCallback)((function(e){y(e)}),[]),D=Object(o.useCallback)((function(e){I(e)}),[]);if(Object(o.useEffect)((function(){if(x||0!==w.length){var e=function(e,t){var n={data:void 0};return t.length>0||(null===e||void 0===e?void 0:e.errors)&&e.errors.length>0?(n.errors=n.errors?[].concat(Object(r.a)(n.errors),Object(r.a)(t)):t,n.errors=Object(K.a)([Object(Xe.a)((function(e,t){var n,r;return e.dataPath<t.dataPath||e.dataPath===t.dataPath&&(null!==(n=e.message)&&void 0!==n?n:"")<(null!==(r=t.message)&&void 0!==r?r:"")}))],n.errors)):n.data=null===e||void 0===e?void 0:e.data,n}(x,w);R((function(t){return Object(H.a)(t,e)?t:e}))}}),[w,x]),Object(o.useEffect)((function(){M&&(null===i||void 0===i||i(M))}),[M,i]),v)return Object(p.jsx)(Ae.a,{});if(O)throw O;return Object(p.jsx)(m,{context:t,bindContext:n,uiSchemaLibrary:a,onErrorsChange:D,children:Object(p.jsx)(d.JsonForms,Object(b.a)({renderers:ta,cells:na,schema:f,onChange:A,config:N},u))})},ta=[].concat(Object(r.a)(c.extendedMaterialRenderers),[{tester:k,renderer:y},{tester:P,renderer:T},{tester:D,renderer:A},{tester:B,renderer:$},{tester:mr,renderer:hr},{tester:Dr,renderer:zr},{tester:Br,renderer:Vr}]),na=a.materialCells},386:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(12),a=n.n(r),c=n(41),o=n(2),i=n(2426),s=n(197),u=n.n(s),l=n(2424),d=n(2473),f=n(1),b=n.n(f),j=n(2471),v=n(910),p=n(2425),O=n(339),h=n(2409),m=n(2410),g=n(109),x=n(128),y=n(232),k=n(406),C=n(514),w=n(40),I=function(e){var t=e.taskId,n=e.activityName,r=e.otherUsers,s=e.warning,I=Object(j.a)().t,T=Object(f.useState)([]),P=Object(o.a)(T,2),S=P[0],M=P[1],R=Object(g.c)().tasks_GetUserTaskLastKnownActivityRecords,N=Object(x.c)().authenticatedUser,A=Object(y.c)().isFeatureSupported,D=Object(f.useCallback)(Object(c.a)(a.a.mark((function e(){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(y.a.UserTasksActivityTracking)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,R({taskId:t});case 5:return c=e.sent,e.abrupt("return",c.filter((function(e){return(!n||e.activityName===n)&&(!r||e.userId!==(null===N||void 0===N?void 0:N.sub)&&e.email!==(null===N||void 0===N?void 0:N.email))&&Object(k.a)(new Date,Object(C.default)(e.timestamp))<=60})));case 9:return e.prev=9,e.t0=e.catch(2),console.error("Error trying to record user task activity."),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[A,R,t,n,r,null===N||void 0===N?void 0:N.sub,null===N||void 0===N?void 0:N.email]);return Object(f.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||M([]),e.next=3,D();case 3:n=e.sent,M(n);case 5:case"end":return e.stop()}}),e)})))()}),[t,M,D]),S&&!Object(d.a)(S)&&Object(w.jsxs)(l.a,{defaultExpanded:!0,children:[Object(w.jsx)(i.a,{expandIcon:Object(w.jsx)(u.a,{}),children:Object(w.jsx)(v.a,{variant:"h5",color:s?"error":"inherit",children:s?"".concat(I("Warning"),": ").concat(I("AnotherUserCouldBeWorkingOnTheSameTask")):I("RecentUserTaskActivityRecords")})}),Object(w.jsx)(p.a,{children:S.map((function(e){var t;return Object(w.jsx)(b.a.Fragment,{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(m.a,{primary:null!==(t=e.email)&&void 0!==t?t:e.userId,secondary:Object(w.jsx)(O.a,{datetime:e.timestamp})})})},e.id)}))})]})||null}},406:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));Math.pow(10,8);var r=n(421),a=n(93),c={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function o(e){return e?c[e]:c.trunc}function i(e,t,n){Object(a.a)(2,arguments);var c=Object(r.a)(e,t)/6e4;return o(null===n||void 0===n?void 0:n.roundingMethod)(c)}},431:function(e,t,n){"use strict";n.r(t),n.d(t,"TasksViewResponseEditorModal",(function(){return R}));var r=n(3),a=n(12),c=n.n(a),o=n(41),i=n(2),s=n(1),u=n(893),l=n(890),d=n(2388),f=n(2404),b=n(2394),j=n(2393),v=n(910),p=n(919),O=n(2471),h=n(2438),m=n(180),g=n(2468),x=n(109),y=n(173),k=n(326),C=n(132),w=n(122),I=n(345),T=n(154),P=n(386),S=n(40),M=Object(u.a)((function(e){return Object(l.a)({dialogPaper:{minHeight:"98%",minWidth:"98%"},dialogContent:{},grow:{flexGrow:1},content:{padding:"8px 24px","&:first-child":{paddingTop:20}}})}));var R=function(e){var t=e.task,n=e.contextType,a=e.responseType,u=e.open,l=e.taskGroupSize,R=void 0===l?1:l,N=e.onAddResponse,A=e.onClose,D=M(),z=Object(O.a)().t,E=Object(m.b)().enqueueSnackbar,L=Object(T.a)(),F=Object(x.c)().tasks_BuildInitialResponsePayload,_=Object(s.useState)(),U=Object(i.a)(_,2),$=U[0],B=U[1],V=Object(s.useState)(),W=Object(i.a)(V,2),H=W[0],J=W[1],q=Object(s.useRef)(),G=Object(g.a)(Object(o.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!(null===a||void 0===a?void 0:a.jsInitialPayloadBuilder)){e.next=14;break}return e.prev=2,e.next=5,F({contextId:t.contextId,contextTypeName:t.contextTypeName,responseTypeName:a.name,taskTypeName:t.typeName});case 5:(r=e.sent).defined&&(n=r.payload),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),X(z("ServerErrorInitializingResponsePayload"),e.t0),A(!0),e.abrupt("return");case 14:B(n);case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),[]),K=G.loading,Y=G.error,X=Object(s.useCallback)((function(e,t){!function(e){var t;if(null==(null===e||void 0===e?void 0:e.response))return!1;var n=null===(t=JSON.parse(null===e||void 0===e?void 0:e.response))||void 0===t?void 0:t.detail;return"string"===typeof n&&n.startsWith("Active")}(t)?L(e,t):E(z("TaskIsNoLongerActive"),{variant:"warning",action:Object(S.jsx)(p.a,{onClick:function(){A(!0)},children:z("Refresh")})})}),[E,z,A,L]),Z=Object(s.useCallback)(Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(q.current&&q.current.length>0)){e.next=2;break}return e.abrupt("return");case 2:n="".concat(t.title,": ").concat(Object(C.h)(a)),N($,H).catch((function(e){X(z("ErrorSendingResponse",{description:n}),e)})),A(!1);case 5:case"end":return e.stop()}}),e)}))),[t,a,N,$,A,X,H,z]),Q=Object(s.useCallback)((function(e){e.errors&&e.errors.length>0?Object(y.a)(e.errors.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{instancePath:e.dataPath})}))):B(e.data),q.current=Object(h.a)(e.errors)}),[B]),ee=Object(s.useMemo)((function(){if(t&&n)return Object(k.b)(n,t.typeName,a.name)}),[t,n,a]),te=Object(s.useMemo)((function(){var e;if(t&&n){var r=a?null===(e=Object(C.i)(a))||void 0===e?void 0:e.uiSchema:void 0;return r?JSON.parse(r):void 0}}),[t,n,a]),ne=Object(s.useMemo)((function(){if(t&&$)return{task:t,payload:$}}),[t,$]);Object(s.useEffect)((function(){K||J(new Date)}),[K]);var re=Object(s.useCallback)((function(e,t){"backdropClick"!==t&&A(!1)}),[A]),ae=Object(s.useMemo)((function(){var e,t=null===(e=Object(C.i)(n))||void 0===e?void 0:e.uiSchemaCommon;if(t)return JSON.parse(t)}),[n]);return K?Object(S.jsx)(w.a,{}):Y||!$?null:Object(S.jsxs)(d.a,{open:u,onClose:re,maxWidth:"xl",fullWidth:!0,classes:{paper:D.dialogPaper},children:[Object(S.jsxs)(j.a,{disableTypography:!0,children:[Object(S.jsxs)(v.a,{component:"h2",variant:"h6",children:[null===t||void 0===t?void 0:t.title," ",R>1?z("AndNOtherResponses",{othersCount:R-1}):""]}),Object(S.jsx)(v.a,{variant:"subtitle1",children:Object(C.g)(a)})]}),Object(S.jsxs)(b.a,{className:D.dialogContent,children:[K&&Object(S.jsx)(w.a,{}),!!t&&!K&&!Y&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P.a,{taskId:null===t||void 0===t?void 0:t.id,otherUsers:!0,warning:!0,activityName:"UserStartedNewTaskResponse"}),Object(S.jsx)(I.a,{schema:ee,uischema:te,data:$,onChange:Q,context:ne,uiSchemaLibrary:ae})]})]}),Object(S.jsxs)(f.a,{children:[!!t&&Object(S.jsx)(p.a,{onClick:Z,disabled:K||!!Y,color:"primary",children:z("Accept")}),Object(S.jsx)(p.a,{onClick:function(){return A(!1)},color:"primary",children:z("Cancel")})]})]})};t.default=R},455:function(e,t){},461:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"}),"AssignmentInd");t.default=o},462:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.default=o},463:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.default=o},464:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=o},465:function(e,t,n){"use strict";var r=n(82),a=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(1)),o=(0,r(n(90)).default)(c.createElement("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn");t.default=o},476:function(e,t,n){"use strict";n.d(t,"a",(function(){return cn}));var r=n(3),a=n(12),c=n.n(a),o=n(41),i=n(2),s=n(27),u=n(1),l=n.n(u),d=n(893),f=n(890),b=n(909),j=n(934),v=n(910),p=n(193),O=n.n(p),h=n(2471),m=n(0),g=n(22),x=n(23),y=n(114),k=n(46),C=n(2351),w=n(1281),I=n(94),T=n(109),P=n(132),S=n(130),M=n(211),R=n(128),N=n(40),A=function(){throw new Error("You forgot to wrap your component in <TasksViewTaskServiceProvider>.")},D={task:{},addResponse:A,refreshTasks:A,taskBlocked:!1},z=Object(u.createContext)(D),E=Object(k.c)({key:"taskBlockedState",default:!1}),L=(z.Consumer,n(418)),F=n(259),_=n(232),U=function(){throw new Error("You forgot to wrap your component in <TasksViewServiceProvider>.")},$=Object.freeze({data:[],page:0,totalCount:0,activityRecords:[]}),B=Object.freeze({}),V={data:$,contextTypes:B,currentState:{currentPage:0,pageSize:0},updateTask:U,refreshTasks:U,addResponse:U,setCurrentState:U,canCreateReponses:U,canReassignUsers:U,canCreateResponsesTo:U,getColumnCandidates:U,taskResponseStarted:U,taskResponseClosed:U},W=Object(u.createContext)(V),H=function e(t,n){switch(t.type){case"or":case"and":return Object(x.a)({},"$".concat(t.type),t.filters.map((function(t){return e(t,n)})));case"boolean":case"textMatch":case"selection":return Object(I.isPresent)(t.value)?{$eq:["$".concat(n),t.value]}:{$in:[{$type:"$".concat(n)},["missing","null"]]};case"prefixTextMatch":return{$regexMatch:{input:"$".concat(n),regex:"^".concat(t.prefix,".*")}};case"dateRange":var r=[];return Object(I.isPresent)(t.from)&&r.push(Object(x.a)({},t.includeFrom?"$gte":"$gt",["$".concat(n),{$dateFromString:{dateString:t.from}}])),Object(I.isPresent)(t.to)&&r.push({$lt:["$".concat(n),{$dateFromString:{dateString:t.includeTo?(c=new Date(t.to),new Date(c.getFullYear(),c.getMonth(),c.getDate(),24)).toISOString():t.to}}]}),r;case"numberRange":var a=[];return Object(I.isPresent)(t.from)&&a.push(Object(x.a)({},t.includeFrom?"$gte":"$gt",["$".concat(n),t.from])),Object(I.isPresent)(t.to)&&a.push(Object(x.a)({},t.includeTo?"$lte":"$lt",["$".concat(n),t.to])),a;default:return}var c},J=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(i.a)(r[n],2),c=a[0],o=a[1];if(o){var s=H(o,c);Array.isArray(s)?t.push.apply(t,Object(g.a)(s)):t.push(s)}}return{$match:{$expr:1===t.length?t[0]:{$and:t}}}},q=function(e,t){var n=[{$set:{id:"$_id"}},{$unset:"_id"}];if(t&&n.push(J(t)),e.filters&&Object.keys(e.filters).length>0&&n.push(J(e.filters)),e.searchText){var r=e.searchText.toLocaleLowerCase();n.push({$match:{$expr:{$or:["title","contextReference"].map((function(e){return{$gt:[{$indexOfBytes:[{$toLower:"$".concat(e)},r]},-1]}}))}}})}e.sortInfo&&n.push({$sort:Object(x.a)({},e.sortInfo.column,"desc"===e.sortInfo.direction?-1:1)});var a=[];return e.currentPage>0&&a.push({$skip:e.currentPage*e.pageSize}),a.push({$limit:e.pageSize}),n.push({$facet:{data:a,totalCount:[{$count:"count"}]}}),n.push({$project:{data:1,totalCount:{$arrayElemAt:[{$map:{input:"$totalCount",as:"cnt",in:"$$cnt.count"}},0]}}}),n},G=function(e){var t=e.initialState,n=e.enforcedFilter,a=Object(T.c)(),s=a.tasks_Aggregate,l=a.tasks_Update,d=a.tasks_AddResponse,f=a.contextTypes_FindOne,b=a.tasks_RecordActivity,j=a.tasks_GetUserTaskLastKnownActivityRecords,v=Object(R.c)().authenticatedUser,p=Object(u.useRef)([]),O=Object(u.useState)(t),h=Object(i.a)(O,2),g=h[0],x=h[1],P=Object(u.useRef)($),S=Object(u.useRef)(B),M=Object(L.a)().can,A=Object(u.useState)(0),D=Object(i.a)(A,2),z=D[0],U=D[1],V=Object(_.c)().isFeatureSupported,H=Object(y.a)(["/Tasks/Search",g],Object(o.a)(c.a.mark((function e(){var t,r,a,o,i,u,l,d,b,v,p,O,h,x,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q(g,n),e.next=3,s({stages:t});case 3:if(r=e.sent,a=r[0],o=a.data,i=a.totalCount,u=void 0===i?0:i,!V(_.a.UserTasksActivityTracking)){e.next=11;break}return e.next=8,j({});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:return l=e.t0,d={data:o,page:g.currentPage,totalCount:u,activityRecords:l},b=Object(C.a)(o.map((function(e){return e.contextTypeName}))),e.next=17,Promise.allSettled(b.map((function(e){return f({name:e})})));case 17:v=e.sent,p={},O=Object(m.a)(v);try{for(O.s();!(h=O.n()).done;)"fulfilled"===(x=h.value).status&&(y=x.value)&&(p[y.name]=y)}catch(c){O.e(c)}finally{O.f()}return P.current=d,S.current=p,e.abrupt("return",{data:d,contextTypes:p});case 24:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),G=H.data,K=(G=void 0===G?{}:G).data,Y=G.contextTypes,X=H.mutate,Z=Object(u.useCallback)(Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,x((function(e){return Object(r.a)({},e)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[X]),Q=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n){var a,o,s,u,d,f,b,j,v,O,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e){for(var t=0,r=Object.entries(n);t<r.length;t++){var a=Object(i.a)(r[t],2),c=a[0],o=a[1];if(!Object(w.a)(e[c],o))return!0}return!1},o=!1,X((function(e){if(e){var c=e.data.data.map((function(e){return e.id!==t.id?e:(o=a(e),Object(r.a)(Object(r.a)({},e),n))}));return o?Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{data:c})}):e}}),!1),o){e.next=5;break}return e.abrupt("return");case 5:for(s={},u={},d=0,f=Object.entries(n);d<f.length;d++)b=Object(i.a)(f[d],2),j=b[0],v=b[1],(Object(I.isPresent)(v)?s:u)[j]=null!==v&&void 0!==v?v:"";O=[],Object.keys(s).length>0&&O.push({$set:s}),Object.keys(u).length>0&&O.push({$unset:u}),h=l({id:t.id,update:O,returnTask:!0}),p.current.push(h),h.finally((function(){var e=p.current.indexOf(h);e>=-1&&p.current.splice(e,1)})).then((function(e){e.task&&!a(e.task)||X(),U((function(e){return e+1}))})).catch((function(){return X()}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[X,l]),ee=Object(k.d)((function(e){var t=e.set;return function(){var e=Object(o.a)(c.a.mark((function e(n,r,a,o){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E(n.id),!0),e.prev=1,e.next=4,d({contextId:n.contextId,contextTypeName:n.contextTypeName,taskTypeName:n.typeName,responseTypeName:r.name,payload:a,startedOn:null===o||void 0===o?void 0:o.toISOString(),sentOn:(new Date).toISOString(),sentBy:null===v||void 0===v?void 0:v.name});case 4:return e.next=6,Z();case 6:return e.prev=6,t(E(n.id),!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()}),[Z,d,null===v||void 0===v?void 0:v.name]),te=Object(u.useCallback)((function(){return M([F.b.sendTaskResponses])}),[M]),ne=Object(u.useCallback)((function(){return M([F.b.manageTasks,F.b.readUsers])}),[M]),re=Object(u.useCallback)((function(e){return te()&&(e.assignedTo===(null===v||void 0===v?void 0:v.name)||e.assignedTo===(null===v||void 0===v?void 0:v.email)||"*"===e.assignedTo)}),[te,v]),ae=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,r){var a,o,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.filterCandidates,!Array.isArray(a)){e.next=3;break}return e.abrupt("return",a);case 3:return o=[],i=!!r&&Object.keys(r).length>0,(n||i)&&(o.push({$set:{name:"$_id"}},{$unset:"_id"}),n&&o.push(J(n)),i&&o.push(J(r))),o.push({$group:{_id:"$"+t.field,value:{$sum:1}}},{$set:{name:"$_id"}},{$unset:"_id"},{$sort:{name:1}}),e.next=9,s({stages:o});case 9:return u=e.sent,z.toString(),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,z,s]),ce=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(_.a.UserTasksActivityTracking)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b({taskId:t.id,activityName:"UserStartedNewTaskResponse",responseTypeName:n.name});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error trying to record user task activity.");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[V,b]),oe=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(_.a.UserTasksActivityTracking)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b({taskId:t.id,activityName:"UserClosedTaskResponse",responseTypeName:n.name});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error trying to record user task activity.");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[V,b]),ie=Object(u.useMemo)((function(){return{data:null!==K&&void 0!==K?K:P.current,contextTypes:null!==Y&&void 0!==Y?Y:S.current,updateTask:Q,refreshTasks:Z,addResponse:ee,currentState:g,setCurrentState:x,canCreateReponses:te,canReassignUsers:ne,canCreateResponsesTo:re,getColumnCandidates:ae,taskResponseStarted:ce,taskResponseClosed:oe}}),[ee,te,re,ne,Y,g,K,ae,Z,Q,ce,oe]);return Object(N.jsx)(W.Provider,{value:ie,children:e.children})},K=(W.Consumer,function(){return Object(u.useContext)(W)}),Y=n(260),X=n(701),Z=n(944),Q=n(2410),ee=n(2416),te=n(462),ne=n.n(te),re=n(463),ae=n.n(re),ce=n(465),oe=n.n(ce),ie=n(336),se=n.n(ie),ue=n(464),le=n.n(ue),de=n(42),fe=n(43),be=Object(fe.a)((function(e,t){var n,r=Number(t),a=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);a<r;)n[a]=e(a),a+=1;return n})),je=n(286),ve=n(406),pe=n(514),Oe=function(e){var t=new Date(e);return t.getFullYear()<=1?"":Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(t)},he=n(316),me=n(149),ge=n(2438),xe=n(509),ye=n(210),ke=Object(ye.a)(Object(xe.a)("slice",(function(e,t,n){return Array.prototype.slice.call(n,e,t)})))(0,-1),Ce=n(2472),we=function(){throw new Error("You forgot to wrap your component in <TasksViewGroupServiceProvider>.")},Ie={representativeTask:{},tasks:[],addResponse:we,updateAssignedTo:we},Te=Object(u.createContext)(Ie),Pe=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.jsInitialPayloadBuilder){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,r({contextId:t.contextId,contextTypeName:t.contextTypeName,responseTypeName:n.name,taskTypeName:t.typeName});case 4:if(!(a=e.sent).defined){e.next=7;break}return e.abrupt("return",a.payload);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Se=function e(t,n,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!c.includes(n))if(c.push(n),t===n)a.push(r);else if("object"===typeof n&&null!==n&&"object"===typeof t&&null!==t)for(var o=0,i=Object.keys(n);o<i.length;o++){var s=i[o];e(t[s],n[s],[].concat(Object(g.a)(r),[s]),a,c)}},Me=function(e,t,n){var r,a=Object(ge.a)(e),c=Object(m.a)(n);try{for(c.s();!(r=c.n()).done;){var o,i,s=r.value,u=t,l=a,d=Object(m.a)(ke(s));try{for(d.s();!(i=d.n()).done;){var f,b=i.value;l=a[b],u=null===(f=u)||void 0===f?void 0:f[b]}}catch(j){d.e(j)}finally{d.f()}l[Object(Ce.a)(s)]=null===(o=u)||void 0===o?void 0:o[Object(Ce.a)(s)]}}catch(j){c.e(j)}finally{c.f()}return a},Re=function(e){var t=e.tasks,n=e.children,r=Object(T.c)(),a=r.tasks_AddResponse,s=r.tasks_BuildInitialResponsePayload,l=r.tasks_UpdateMany,d=Object(R.c)().authenticatedUser,f=K().refreshTasks,b=Object(u.useMemo)((function(){if(0===t.length)throw new Error("tasks.length === 0");return t[0]}),[t]),j=function(e){var t=Object(T.c)().contextTypes_FindOne,n=Object(y.a)("/ContextType/".concat(e),Object(o.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),r=n.data,a=n.isValidating,i=n.mutate,s=n.error;return Object(u.useMemo)((function(){return{contextType:r,isValidating:a,error:s,mutate:i}}),[r,a,i,s])}(b.contextTypeName).contextType,v=Object(u.useMemo)((function(){var e,t=null===j||void 0===j?void 0:j.tasks.find((function(e){return e.name===b.typeName})),n=[];if(t){var r,a=null===(r=Object(P.i)(t))||void 0===r?void 0:r.taskDetailsTemplate;a&&(e=Object(S.a)(a,{task:b})),t.validResponses&&(n=t.validResponses)}return[n,e]}),[j,b]),p=Object(i.a)(v,2),O=p[0],h=p[1],g=Object(k.d)((function(e){var n=e.set;return function(){var e=Object(o.a)(c.a.mark((function e(r,i){var u,l,j,v,p,O,h,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){return(l=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t,r,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e){return l.apply(this,arguments)},e.next=4,u(b);case 4:j=e.sent,Se(i,j,[],v=[]),p=[],O=Object(m.a)(t),e.prev=9,g=c.a.mark((function e(){var t,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=h.value)!==b&&0!==v.length){e.next=5;break}e.t0=i,e.next=12;break;case 5:return e.t1=Me,e.t2=i,e.next=9,u(t);case 9:e.t3=e.sent,e.t4=v,e.t0=(0,e.t1)(e.t2,e.t3,e.t4);case 12:o=e.t0,n(E(t.id),!0),s=a({contextId:t.contextId,contextTypeName:t.contextTypeName,taskTypeName:t.typeName,responseTypeName:r.name,payload:o,sentBy:null===d||void 0===d?void 0:d.name}).catch((function(e){throw n(E(t.id),!1),e})),p.push(s);case 16:case"end":return e.stop()}}),e)})),O.s();case 12:if((h=O.n()).done){e.next=16;break}return e.delegateYield(g(),"t0",14);case 14:e.next=12;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),O.e(e.t1);case 21:return e.prev=21,O.f(),e.finish(21);case 24:return e.next=26,Promise.allSettled(p);case 26:f();case 27:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}()}),[b,s,f,t,a,d]),x=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n?r.push({$set:{assignedTo:n}}):r.push({$unset:{assignedTo:""}}),e.next=4,l({filter:{_id:{$in:t.map((function(e){return e.id}))}},update:r,returnTasks:!1});case 4:f();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,t,l]),C={representativeTask:b,tasks:t,contextType:j,responses:O,taskDetails:h,addResponse:g,updateAssignedTo:x};return Object(N.jsx)(Te.Provider,{value:C,children:n})},Ne=Te.Consumer,Ae=n(1293),De=n(515),ze=n.n(De),Ee=["response","title","icon"],Le=function(e){var t=e.response,n=e.title,a=e.icon,c=Object(s.a)(e,Ee);return Object(N.jsx)(Ae.a,Object(r.a)({icon:null!==a&&void 0!==a?a:Object(N.jsx)(ze.a,{}),label:null!==n&&void 0!==n?n:Object(P.h)(t)},c))},Fe=n(431),_e=Object(d.a)((function(e){return Object(f.a)({responses:{textAlign:"center",marginBottom:10,marginLeft:10},response:{marginRight:5}})})),Ue=function(e){var t=e.taskGroupService,n=e.onResponsesAdded,r=_e(),a=t.representativeTask,s=t.tasks,l=t.responses,d=t.contextType,f=t.addResponse,b=Object(u.useContext)(z).refreshTasks,j=Object(u.useState)(),v=Object(i.a)(j,2),p=v[0],O=v[1],h=Object(u.useCallback)((function(e){O(e)}),[]),m=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(void 0),!t){e.next=4;break}return e.next=4,b();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]),g=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(p,t);case 2:null===n||void 0===n||n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,n,p]);return l&&d?Object(N.jsxs)("div",{className:r.responses,children:[null===l||void 0===l?void 0:l.map((function(e,t){return Object(N.jsx)(Le,{response:e,onClick:function(){return h(e)},className:r.response,variant:"outlined"},t)})),!!p&&Object(N.jsx)(Fe.TasksViewResponseEditorModal,{task:a,contextType:d,responseType:p,open:!!p,taskGroupSize:s.length,onAddResponse:g,onClose:m})]}):null},$e=function(e){var t=e.data,n=e.onResponsesAdded;return Object(N.jsx)(Re,{tasks:t,children:Object(N.jsx)(Ne,{children:function(e){return Object(N.jsx)(Ue,{taskGroupService:e,onResponsesAdded:n})}})})},Be=n(154),Ve=n(919),We=n(2388),He=n(2404),Je=n(2394),qe=n(2393),Ge=n(2386),Ke=n(2398),Ye=n(461),Xe=n.n(Ye),Ze=n(1288),Qe=n(1296),et=n(913),tt=["value","onChange","onBlur","users","digitalWorkers","renderInput","freeSolo"],nt="13rem",rt=Object(d.a)((function(e){return Object(f.a)({small:{width:e.spacing(3),height:e.spacing(3)},view:{width:nt,borderRadius:e.shape.borderRadius,padding:e.spacing(1),overflowX:"hidden","&:hover":{borderWidth:1,borderStyle:"solid",borderColor:e.palette.divider}},textFieldRoot:{width:nt,"& .MuiInput-root":{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}},container:{position:"relative","&:hover .clear-button":{visibility:"visible"}},clearButton:{position:"absolute",left:-40,top:0,visibility:"hidden"}})}));function at(e){if(e)switch(e.type){case"any-user":return"*";case"digital-worker":return"dw:".concat(e.digitalWorker.id);case"user":return e.user.email;case"unknown":return e.id}}var ct=function(e){var t;switch(null===e||void 0===e?void 0:e.type){case"any-user":return de.a.t("AnyUser");case"digital-worker":return e.digitalWorker.name;case"user":return null!==(t=e.user.fullName)&&void 0!==t?t:e.user.email;case"unknown":return e.id}return""},ot=function(e){var t,n,r=e.taskAssignment,a=e.onClick,c=rt();return Object(N.jsxs)(Ge.a,{container:!0,spacing:1,alignItems:"center",onClick:a,wrap:"nowrap",children:["user"===r.type&&Object(N.jsx)(Ge.a,{item:!0,children:Object(N.jsx)(j.a,{title:null!==(t=r.user.email)&&void 0!==t?t:"",children:Object(N.jsx)(Ze.a,{alt:r.user.fullName,src:null===(n=r.user.props)||void 0===n?void 0:n.Picture,className:c.small})})}),Object(N.jsx)(Ge.a,{item:!0,xs:!0,children:ct(r)})]})},it=l.a.forwardRef((function(e,t){var n=e.value,a=e.onChange,c=(e.onBlur,e.users),o=e.digitalWorkers,i=e.renderInput,l=e.freeSolo,d=Object(s.a)(e,tt),f=rt(),b=Object(u.useMemo)((function(){var e=[];if(c){var t=c.filter((function(e){return e.id&&e.email})).map((function(e){return{type:"user",user:e}}));e.push.apply(e,Object(g.a)(t))}if(o){var n=o.filter((function(e){return e.id})).map((function(e){return{type:"digital-worker",digitalWorker:e}}));e.push.apply(e,Object(g.a)(n))}return e.unshift({type:"any-user"}),e}),[c,o]),j=Object(u.useMemo)((function(){return b.find((function(e){switch(e.type){case"any-user":return"any-user"===(null===n||void 0===n?void 0:n.type);case"digital-worker":return"digital-worker"===(null===n||void 0===n?void 0:n.type)&&e.digitalWorker.id===n.digitalWorker.id;case"user":return"user"===(null===n||void 0===n?void 0:n.type)&&e.user.id===n.user.id}return!1}))}),[b,n]),v=Object(u.useCallback)((function(e){e.preventDefault();var t=e.target;setTimeout((function(){return t.setSelectionRange(0,t.value.length)}),0)}),[]);return Object(N.jsx)(Qe.a,Object(r.a)({ref:t,freeSolo:null===l||void 0===l||l,blurOnSelect:!0,options:null!==b&&void 0!==b?b:[],value:j,onChange:function(e,t,n){var r;"object"===typeof t&&"select-option"===n&&(null===a||void 0===a||a(null!==(r=t)&&void 0!==r?r:void 0))},getOptionLabel:function(e){var t;return null!==(t=ct(e))&&void 0!==t?t:""},filterOptions:function(e,t){var n,r=(n=t.inputValue,n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase();return r?e.filter((function(e){return function(e,t){switch(e.type){case"any-user":return"*"===t;case"digital-worker":var n=e.digitalWorker.name;return n&&n.includes(t);case"user":var r=e.user.fullName,a=e.user.email;return r&&r.includes(t)||a&&a.includes(t)}return!1}(e,r)})):e},renderInput:null!==i&&void 0!==i?i:function(e){return Object(N.jsx)(et.a,Object(r.a)(Object(r.a)({},e),{},{autoFocus:!0,margin:"dense",onFocus:v,classes:{root:f.textFieldRoot}}))},renderOption:function(e){return Object(N.jsx)(ot,{taskAssignment:e})}},d))})),st=["data","users","digitalWorkers","onAssignmentChange"],ut=Object(d.a)((function(e){return Object(f.a)({grow:{flexGrow:1},assignmentEditorContainer:{justifyContent:"center"}})})),lt=function(e){var t=e.taskGroupService,n=e.users,r=e.digitalWorkers,a=e.open,s=e.onClose,l=e.onChange,d=ut(),f=Object(h.a)().t,b=t.updateAssignedTo,j=Object(u.useState)(),v=Object(i.a)(j,2),p=v[0],O=v[1],m=Object(Be.a)(),g=Object(u.useCallback)((function(e){O(e)}),[]),x=Object(u.useCallback)(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(at(p));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),m(f("CouldNotAssignUser"),e.t0),e.abrupt("return");case 9:null===l||void 0===l||l(at(p)),s();case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,s,m,p,f,b]),y=Object(u.useCallback)(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(void 0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),m(f("CouldNotClearAssignments"),e.t0),e.abrupt("return");case 9:null===l||void 0===l||l(void 0),s();case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,s,m,f,b]),k=Object(u.useCallback)((function(e,t){"backdropClick"!==t&&(null===s||void 0===s||s())}),[s]);return Object(N.jsxs)(We.a,{open:a,onClose:k,maxWidth:"sm",fullWidth:!0,children:[Object(N.jsx)(qe.a,{children:f("AssigningUser")}),Object(N.jsx)(Je.a,{className:d.assignmentEditorContainer,children:Object(N.jsxs)(Ge.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[Object(N.jsx)(Ge.a,{item:!0,children:Object(N.jsx)(Ke.a,{children:f("User")})}),Object(N.jsx)(Ge.a,{item:!0,xs:6,children:Object(N.jsx)(it,{users:n,digitalWorkers:r,value:p,onChange:g})})]})}),Object(N.jsxs)(He.a,{children:[Object(N.jsx)(Ve.a,{onClick:y,color:"primary",children:f("ClearAssignments")}),Object(N.jsx)("div",{className:d.grow}),Object(N.jsx)(Ve.a,{onClick:x,color:"primary",disabled:!p,children:f("Accept")}),Object(N.jsx)(Ve.a,{onClick:s,color:"primary",children:f("Cancel")})]})]})},dt=function(e){var t=e.data,n=e.users,a=e.digitalWorkers,c=e.onAssignmentChange,o=Object(s.a)(e,st),l=Object(h.a)().t,d=Object(u.useState)(!1),f=Object(i.a)(d,2),b=f[0],j=f[1],v=Object(u.useCallback)((function(){j(!0)}),[]),p=Object(u.useCallback)((function(){j(!1)}),[]),O=Object(u.useCallback)((function(e){null===c||void 0===c||c(e)}),[c]);return Object(N.jsx)(Re,{tasks:t,children:Object(N.jsx)(Ne,{children:function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Ae.a,Object(r.a)({icon:Object(N.jsx)(Xe.a,{}),label:l("AssignUser"),clickable:!0,onClick:v,variant:"outlined"},o)),b&&Object(N.jsx)(lt,{taskGroupService:e,users:n,digitalWorkers:a,open:b,onClose:p,onChange:O})]})}})})},ft=n(2384),bt=n(285),jt=n.n(bt),vt=["value","onChange","users","digitalWorkers"],pt=Object(d.a)((function(e){return Object(f.a)({view:{width:"13rem",borderRadius:e.shape.borderRadius,padding:e.spacing(1),overflowX:"hidden",borderWidth:1,borderStyle:"solid",borderColor:"transparent","&:hover":{borderColor:e.palette.divider}},container:{position:"relative","&:hover .clear-button":{visibility:"visible"}},clearButton:{position:"absolute",left:-40,top:0,visibility:"hidden"}})})),Ot=function(e){var t=e.value,n=e.onChange,a=e.users,l=e.digitalWorkers,d=Object(s.a)(e,vt),f=Object(h.a)().t,j=pt(),v=Object(me.c)(),p=Object(u.useState)(!1),O=Object(i.a)(p,2),m=O[0],g=O[1],x=Object(u.useMemo)((function(){return t?function(e,t,n){if("*"===e)return{type:"any-user"};if(e.startsWith("dw:")){var r=e.substring(3),a=null===n||void 0===n?void 0:n.find((function(e){return e.id===r}));if(a)return{type:"digital-worker",digitalWorker:a}}else{var c=null===t||void 0===t?void 0:t.find((function(t){return t.id===e||t.email===e}));if(c)return{type:"user",user:c}}return e?{type:"unknown",id:e}:void 0}(t,a,l):void 0}),[t,a,l]),y=Object(u.useCallback)((function(){g(!0)}),[g]),k=Object(u.useCallback)((function(){g(!1)}),[g]),C=Object(u.useCallback)((function(e){"Escape"===e.key&&g(!1)}),[g]),w=Object(u.useCallback)((function(e){g(!1),null===n||void 0===n||n(e?at(e):void 0)}),[n]),I=Object(u.useCallback)(Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!1),t=ct(x),e.next=4,v({description:f("ConfirmClearAssignment",{name:t})});case 4:e.sent&&(null===n||void 0===n||n(void 0));case 6:case"end":return e.stop()}}),e)}))),[n,x,v,f]);return m?Object(N.jsx)(ft.a,{onClickAway:k,children:Object(N.jsx)(it,Object(r.a)({value:x,onChange:w,users:a,digitalWorkers:l,onKeyUp:C,disableClearable:!0},d))}):Object(N.jsxs)("div",{className:j.container,children:[Object(N.jsx)("div",{className:j.view,children:Object(N.jsx)(ot,{taskAssignment:null!==x&&void 0!==x?x:{type:"unknown",id:null!==t&&void 0!==t?t:"\xa0"},onClick:y})}),!!t&&Object(N.jsx)(b.a,{onClick:I,className:"".concat(j.clearButton," clear-button"),children:Object(N.jsx)(jt.a,{})})]})},ht=n(81),mt=n(977),gt=["family","className"],xt=function(e){switch(e){case"Outlined":return"material-icons-outlined";case"Rounded":return"material-icons-round";case"Sharp":return"material-icons-sharp";case"Two tone":return"material-icons-two-tone";default:return}},yt=function(e){var t=e.family,n=e.className,a=Object(s.a)(e,gt);return Object(N.jsx)(mt.a,Object(r.a)({className:Object(ht.default)(xt(t),n)},a))},kt=n(275),Ct=n(122),wt=n(252),It={padding:"dense",showSelectAllCheckbox:!1,search:!1},Tt=function(e){var t,n={currentPage:e.page,pageSize:e.pageSize};if(e.filters&&e.filters.length>0){n.filters={};var r,a=Object(m.a)(e.filters);try{for(a.s();!(r=a.n()).done;){var c=r.value;n.filters[c.column.field]=null===c||void 0===c?void 0:c.value}}catch(o){a.e(o)}finally{a.f()}}return(null===(t=e.orderBy)||void 0===t?void 0:t.field)&&(n.sortInfo={column:e.orderBy.field,direction:e.orderDirection}),n},Pt=function(e){return function(t,n){Array.isArray(n)&&(n=n[0]),e(n)}},St=function(){return Object(N.jsx)(ne.a,{})},Mt=function(){return Object(N.jsx)(ae.a,{})},Rt=Object(u.lazy)((function(){return n.e(21).then(n.bind(null,2453))})),Nt=l.a.memo((function(e){var t=e.columns,n=e.pageSizeOptions,a=e.initialState,s=e.allowResponseCreation,l=e.allowTaskReassignment,d=e.allowFocusing,f=e.onResponseRequested,b=K(),j=b.data,v=b.contextTypes,p=b.canCreateResponsesTo,x=b.currentState,k=b.setCurrentState,C=b.refreshTasks,I=b.updateTask,A=Object(h.a)().t,D=Object(Be.a)(),z=Object(u.useRef)(),E=Object(u.useState)(),L=Object(i.a)(E,2),_=L[0],U=L[1],B=Object(u.useRef)(),V=Object(u.useRef)(),W=Object(u.useRef)(),H=Object(u.useRef)(),J=Object(u.useRef)(),q=Object(u.useCallback)((function(e){U(e),B.current=e}),[]),G=Object(me.c)(),te=function(e){var t=Object(T.c)().users_GetUsersWithPermission,n=Object(M.a)(t,F.b.readTasks,e),r=Object(y.a)(n,Object(o.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return n.next=4,t({action:F.b.readTasks,pageSize:100,pageNumber:0});case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))),a=r.data,i=r.isValidating,s=r.mutate,l=r.error;return Object(u.useMemo)((function(){return{users:null!==a&&void 0!==a?a:[],isValidating:i,error:l,mutate:s}}),[a,i,s,l])}(l).users,ne=function(e){var t=Object(T.c)().digitalWorkers_SearchData,n=Object(M.a)(t,e),r=Object(y.a)(n,Object(o.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return n.next=4,t({active:!0});case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))),a=r.data,i=r.isValidating,s=r.mutate,l=r.error;return Object(u.useMemo)((function(){return{digitalWorkers:null!==a&&void 0!==a?a:[],isValidating:i,error:l,mutate:s}}),[a,i,s,l])}(l).digitalWorkers,re=Object(u.useState)(),ae=Object(i.a)(re,2),ce=ae[0],ie=ae[1],ue=function(){var e=Object(je.usePopupState)({variant:"popover",popupId:"actionMenu"}),t=Object(u.useState)(),n=Object(i.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(),o=Object(i.a)(c,2),s=o[0],l=o[1],d=Object(u.useCallback)((function(t,n,r){for(var c=t.target;c&&!(c instanceof HTMLElement);)c=c.parentNode;if(c){var o=r.tasks.find((function(e){return e.name===n.typeName}));(null===o||void 0===o?void 0:o.validResponses)&&l(o.validResponses),a(n),setTimeout((function(){e.open(c)}),0)}}),[e]),f=Object(u.useCallback)((function(){e.close(),a(void 0),l(void 0)}),[e]);return{popupState:e,openMenu:d,closeMenu:f,currentTask:r,responseTypes:s}}(),fe=ue.popupState,ge=ue.openMenu,xe=ue.closeMenu,ye=ue.currentTask,ke=ue.responseTypes,Ce=Object(R.c)().authenticatedUser,we=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,{assignedTo:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),D(A("TaskAssignmentFailed"),e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),[D,A,I]),Ie=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,{focused:!t.focused});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),D(A("TaskAssignmentFailed"),e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[D,A,I]),Te=Object(u.useMemo)((function(){return t.map((function(e){var t,n,r,c={field:e.field,title:null!==(t=e.title)&&void 0!==t?t:A(e.field.toUpperCase()[0]+e.field.substring(1)),sorting:"focused"!==e.field&&(null===(n=e.allowSorting)||void 0===n||n),hidden:e.hidden};return"dueDate"===e.field&&(c.render=function(e){return e.dueDate?Oe(e.dueDate):""}),"dateCreated"===e.field&&(c.render=function(e){return e.dateCreated?Oe(e.dateCreated):""}),"assignedTo"===e.field&&l&&(c.render=function(e){return Object(N.jsx)(Ot,{value:e.assignedTo,users:te,digitalWorkers:ne,onChange:function(t){return we(e,t)}})}),"typeName"===e.field&&(c.render=function(e){return A(e.typeName,{ns:kt.b})}),"contextTypeName"===e.field&&(c.render=function(e){return A(e.contextTypeName,{ns:kt.b})}),(null===a||void 0===a||null===(r=a.sortInfo)||void 0===r?void 0:r.column)===e.field&&(c.defaultSort=a.sortInfo.direction),c}))}),[l,t,ne,we,a.sortInfo,A,te]);Object(u.useEffect)((function(){var e,n;(Object(w.a)(H.current,x.filters)||(H.current=x.filters,t.forEach((function(e,t){var n,r;null===(n=z.current)||void 0===n||n.onFilterChange(t,null===(r=x.filters)||void 0===r?void 0:r[e.field])}))),J.current!==x.searchText)&&(J.current=x.searchText,null===(e=z.current)||void 0===e||e.onSearchChangeDebounce(null!==(n=x.searchText)&&void 0!==n?n:""))}),[t,x.filters,x.searchText]),Object(u.useEffect)((function(){var e;(V.current=j,W.current)?W.current(j):null===(e=z.current)||void 0===e||e.onQueryChange()}),[j]);var Pe=Object(u.useCallback)((function(e,t){if(0===e.length)q(void 0),B.current=void 0;else{var n={taskTypeName:e[0].typeName,contextTypeName:e[0].contextTypeName,selectedTasks:e};q(n)}}),[q]),Se=Object(u.useCallback)((function(){q(void 0)}),[q]),Me=Object(u.useCallback)((function(e,t){q(void 0)}),[q]),Re=Object(u.useCallback)((function(e){}),[]),Ne=Object(u.useCallback)((function(e){ie(e)}),[]),Ae=Object(u.useCallback)((function(e){if(xe(),ye){var t=v[ye.contextTypeName];null===f||void 0===f||f(t,ye,e)}}),[xe,v,ye,f]),De=Object(u.useMemo)((function(){var e={onChange:function(e,t){var n=z.current,r=null===n||void 0===n?void 0:n.dataManager;r&&(0===r.selectedCount&&s?G({title:null,description:de.a.t("SelectAtLeastOneRowToDetermineType"),cancellationButtonProps:{style:{display:"none"}}}):(r.changeAllSelected(t),n.setState(r.getRenderState(),(function(){return n.onSelectionChange()}))))}};return Object(r.a)(Object(r.a)({},It),{},{selectionProps:function(e){if(!s)return{};var t=B.current,n=!!t&&(t.taskTypeName!==e.typeName||t.contextTypeName!==e.contextTypeName)||!p(e);return e.tableData.disabled=n,{disabled:n}},headerSelectionProps:e,selection:s||l,showSelectAllCheckbox:s||l,pageSizeOptions:n,pageSize:x.pageSize,initialPage:a.currentPage})}),[s,l,n,x.pageSize,a.currentPage,p,G]),ze=Object(u.useMemo)((function(){var e,t=[(e=function(){return C()},{icon:O.a,tooltip:de.a.t("RefreshData"),isFreeAction:!0,onClick:e})];return d&&t.push({action:function(e){return function(e,t){return{icon:e.focused?Mt:St,tooltip:de.a.t(e.focused?"Unfocus":"Focus"),onClick:Pt(t)}}(e,(function(){return Ie(e)}))},position:"row"}),s&&(t.push({action:function(e){return function(e,t,n,r,a){var c,o,i=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),s=i?null===(c=Object(P.i)(i))||void 0===c?void 0:c.taskDetailsTemplate:void 0,u=void 0,l=null!==(o=null===n||void 0===n?void 0:n.filter((function(t){return t.taskId===e.id&&"UserStartedNewTaskResponse"===t.activityName&&t.userId!==(null===r||void 0===r?void 0:r.sub)&&t.email!==(null===r||void 0===r?void 0:r.email)&&Object(ve.a)(new Date,Object(pe.default)(t.timestamp))<=60})))&&void 0!==o?o:[];return s?u=Object(S.a)(s.trimStart().split("\n")[0],{task:e,activityRecords:l}):l.length>0&&(u=l.map((function(e){return"".concat(e.email,": ").concat(Object(wt.a)(e.timestamp))})).join("; ")),{icon:function(){return Object(N.jsx)(le.a,{color:0===l.length?"action":"error"})},tooltip:u,onClick:Pt(a),disabled:!u}}(e,v[e.contextTypeName],j.activityRecords,Ce,(function(){Ne(e)}))},position:"row"}),t.push.apply(t,Object(g.a)(be((function(e){return{action:function(t){var n=v[t.contextTypeName];return function(e,t,n,r){var a,c=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),o=null===c||void 0===c?void 0:c.validResponses.filter((function(e){var t;return!!(null===(t=Object(P.i)(e))||void 0===t?void 0:t.icon)}))[n],i=o?null===(a=Object(P.i)(o))||void 0===a?void 0:a.icon:void 0;return{icon:function(){return Object(N.jsx)(yt,{family:null===i||void 0===i?void 0:i.family,children:null===i||void 0===i?void 0:i.name})},tooltip:o?Object(P.h)(o):"",onClick:Pt((function(e){return r(e,o)})),position:"row",hidden:!o}}(t,n,e,(function(e,t){null===f||void 0===f||f(n,e,t)}))},position:"row"}}),3))),t.push({action:function(e){return function(e,t,n){var r=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),a=!1,c=!1;if(r){var o,i=Object(m.a)(r.validResponses);try{for(i.s();!(o=i.n()).done;){var s,u=o.value;(null===(s=Object(P.i)(u))||void 0===s?void 0:s.icon)?a=!0:c=!0}}catch(l){i.e(l)}finally{i.f()}}return{icon:a?se.a:oe.a,tooltip:de.a.t(a?"MoreResponses":"SendResponse"),onClick:function(e,r){return n(e,Array.isArray(r)?r[0]:r,t)},position:"row",hidden:!c}}(e,v[e.contextTypeName],(function(e,t,n){ge(e,t,n)}))},position:"row"})),t}),[d,s,Ce,v,j.activityRecords,Ie,Ne,f,ge,C]),Ee=Object(u.useMemo)((function(){return{Container:function(e){return Object(N.jsx)("div",Object(r.a)({},e))},Actions:function(e){return _&&Array.isArray(e.data)?Object(N.jsxs)(N.Fragment,{children:[l&&Object(N.jsx)(dt,Object(r.a)({onAssignmentChange:Se,users:te,digitalWorkers:ne},e)),s&&Object(N.jsx)($e,Object(r.a)({onResponsesAdded:Se},e))]}):Object(N.jsx)(Y.MTableActions,Object(r.a)({},e))},Toolbar:function(e){return _&&Array.isArray(e.data)?Object(N.jsx)(Y.MTableToolbar,Object(r.a)({},e)):Object(N.jsx)("div",{})}}}),[s,l,Se,ne,_,te]),Le=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,k((function(e){var n=Tt(t);return n.filters=e.filters,n.searchText=e.searchText,(r=!Object(w.a)(e,n))?n:e})),!r){e.next=4;break}return e.abrupt("return",new Promise((function(e,t){W.current=function(t){e(t),W.current=void 0}})));case 4:return e.abrupt("return",Promise.resolve(null!==(n=V.current)&&void 0!==n?n:$));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k]),Fe=Object(u.useMemo)((function(){return!!ke&&ke.some((function(e){var t;return!!(null===(t=Object(P.i)(e))||void 0===t?void 0:t.icon)}))}),[ke]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(he.a,{tableRef:z,columns:Te,data:Le,options:De,title:" ",components:Ee,actions:ze,onSelectionChange:Pe,onPageChange:Me,onRowsPerPageChange:Re}),Object(N.jsx)(X.a,Object(r.a)(Object(r.a)({},Object(je.bindMenu)(fe)),{},{children:null===ke||void 0===ke?void 0:ke.map((function(e){var t,n,r=null===(t=Object(P.i)(e))||void 0===t?void 0:t.icon;return Object(N.jsxs)(Z.a,{onClick:function(){return Ae(e)},children:[Fe&&Object(N.jsx)(ee.a,{children:Object(N.jsx)(yt,{fontSize:"small",family:null===r||void 0===r?void 0:r.family,children:null===r||void 0===r?void 0:r.name})}),Object(N.jsx)(Q.a,{primary:null!==(n=Object(P.h)(e))&&void 0!==n?n:""})]},e.name)}))})),!!ce&&Object(N.jsx)(u.Suspense,{fallback:Object(N.jsx)(Ct.a,{}),children:Object(N.jsx)(Rt,{open:!!ce,task:ce,contextType:v[ce.contextTypeName],onClose:function(){return ie(void 0)}})})]})})),At=n(933),Dt=n(2417),zt=n(147),Et=Object(d.a)((function(e){return Object(f.a)({size:{width:"7em"}})})),Lt=n(2383),Ft=function(e){return Object(N.jsx)(Lt.a,Object(r.a)(Object(r.a)({viewBox:"0 0 247.46 247.46"},e),{},{children:Object(N.jsx)("path",{d:"M246.744,13.984c-1.238-2.626-3.881-4.301-6.784-4.301H7.5c-2.903,0-5.545,1.675-6.784,4.301\r c-1.238,2.626-0.85,5.73,0.997,7.97l89.361,108.384v99.94c0,2.595,1.341,5.005,3.545,6.373c1.208,0.749,2.579,1.127,3.955,1.127\r c1.137,0,2.278-0.259,3.33-0.78l50.208-24.885c2.551-1.264,4.165-3.863,4.169-6.71l0.098-75.062l89.366-108.388\r C247.593,19.714,247.982,16.609,246.744,13.984z M143.097,122.873c-1.105,1.34-1.711,3.023-1.713,4.761l-0.096,73.103\r l-35.213,17.453v-90.546c0-1.741-0.605-3.428-1.713-4.771L23.404,24.682h200.651L143.097,122.873z"})}))};function _t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=function(e,t){void 0===t&&(t=0);var n=Object(u.useRef)(!1),r=Object(u.useRef)(),a=Object(u.useRef)(e),c=Object(u.useCallback)((function(){return n.current}),[]),o=Object(u.useCallback)((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,a.current()}),t)}),[t]),i=Object(u.useCallback)((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return Object(u.useEffect)((function(){a.current=e}),[e]),Object(u.useEffect)((function(){return o(),i}),[t]),[c,i,o]}(e,t),a=r[0],c=r[1],o=r[2];return Object(u.useEffect)(o,n),[a,c]}var Ut=function(e){var t=e.value,n=e.onChange,r=Object(u.useState)("textMatch"===(null===t||void 0===t?void 0:t.type)?t.value:void 0),a=Object(i.a)(r,2),c=a[0],o=a[1],s=Object(u.useRef)(!1),l=Object(u.useRef)();Object(u.useEffect)((function(){var e;l.current&&!s.current&&(null===t||void 0===t?void 0:t.value)!==c&&(o(null===t||void 0===t?void 0:t.value),l.current.value=null!==(e=null===t||void 0===t?void 0:t.value)&&void 0!==e?e:"")}),[c,t]),_t((function(){s.current=!1,null===n||void 0===n||n(c?{type:"textMatch",value:c}:void 0)}),2e3,[c,n]);var d=Object(u.useCallback)((function(e){s.current=!0,o(e.target.value)}),[]);return Object(N.jsx)(et.a,{value:c,onChange:d,inputRef:l})},$t=["value","onChange"],Bt=function(e){var t=e.value,n=e.onChange,a=Object(s.a)(e,$t),c=Object(u.useMemo)((function(){if(t)return{type:"textMatch",value:t.prefix}}),[t]),o=Object(u.useCallback)((function(e){var t=void 0;e&&(t={type:"prefixTextMatch",prefix:e.value}),null===n||void 0===n||n(t)}),[n]);return Object(N.jsx)(Ut,Object(r.a)({value:c,onChange:o},a))},Vt=n(405),Wt=["field","title","value","onClearFilter","size","variant"],Ht=function(e){switch(null===e||void 0===e?void 0:e.type){case"boolean":return de.a.t(e.value?"Yes":"No");case"textMatch":return e.value;case"selection":return null!==e.value?e.value:de.a.t("NullValueText");case"prefixTextMatch":return"".concat(e.prefix,"*");case"dateRange":var t="";return Object(I.isPresent)(e.from)?(t+=e.includeFrom?"[":"(",t+=Object(Vt.default)(Object(pe.default)(e.from),de.a.t("DATE_FORMAT"))):t+="(-\u221e",t+=", ",Object(I.isPresent)(e.to)?(t+=Object(Vt.default)(Object(pe.default)(e.to),de.a.t("DATE_FORMAT")),t+=e.includeTo?"]":")"):t+="\u221e)",t;case"numberRange":var n="";return Object(I.isPresent)(e.from)?(n+=e.includeFrom?"[":"(",n+=e.from):n+="(-\u221e",n+=", ",Object(I.isPresent)(e.to)?(n+=e.to,n+=e.includeTo?"]":")"):n+="\u221e)",n;default:return"??"}},Jt=function(e){var t=e.field,n=e.title,a=e.value,c=e.onClearFilter,o=e.size,i=e.variant,l=Object(s.a)(e,Wt),d=Object(u.useCallback)((function(){null===c||void 0===c||c(t)}),[t,c]);return Object(N.jsx)(Ae.a,Object(r.a)({onDelete:d,label:"".concat(n,": ").concat(Ht(a)),size:null!==o&&void 0!==o?o:"small",variant:null!==i&&void 0!==i?i:"outlined"},l))},qt=Object(u.lazy)((function(){return Promise.all([n.e(15),n.e(19)]).then(n.bind(null,2475))})),Gt=Object(u.lazy)((function(){return Promise.all([n.e(4),n.e(20)]).then(n.bind(null,2454))})),Kt={width:20,height:20},Yt=Object(d.a)((function(e){return Object(f.a)({filter:{marginRight:20},filterIconContainer:{position:"relative"},filteringActiveIcon:{position:"absolute",fontSize:12,right:-5,top:-20},filterAppliedIcon:Object(r.a)({fontSize:"1rem",verticalAlign:"text-bottom"},Kt),clearIconContainer:{position:"relative"},clearButton:{position:"absolute",right:-35},appliedFilterMarker:Object(r.a)({display:"inline-block"},Kt),appliedFilterMarkerClearButton:Object(r.a)({padding:0},Kt),chip:{marginRight:5}})})),Xt={search:Ut,contextReference:Bt,title:Bt,assignedTo:Gt,dueDate:qt,contextTypeName:Gt,typeName:Gt,focused:function(e){var t=e.value,n=e.onChange,r=Object(h.a)().t,a=Et(),c="boolean"===(null===t||void 0===t?void 0:t.type)?!0===t.value?1:0:void 0,o=Object(u.useCallback)((function(e){var t=e.target.value;null===n||void 0===n||n(1===t?{type:"boolean",value:!0}:0===t?{type:"boolean",value:!1}:void 0)}),[n]);return Object(N.jsxs)(et.a,{select:!0,value:c,onChange:o,className:a.size,children:[Object(N.jsx)(Z.a,{value:void 0,children:"\xa0"}),Object(N.jsx)(Z.a,{value:1,children:r("Yes")}),Object(N.jsx)(Z.a,{value:0,children:r("No")})]})},status:Gt,dateCreated:qt},Zt=function(e){var t,n;return null!==(t=null!==(n=e.title)&&void 0!==n?n:de.a.t(e.field.toUpperCase()[0]+e.field.substring(1)))&&void 0!==t?t:""},Qt=function(e){var t=e.columns,n=Yt(),a=K(),s=a.currentState,l=a.setCurrentState,d=a.getColumnCandidates,f=Object(u.useMemo)((function(){var e=Object(g.a)(t);return e.unshift({field:"search"}),e}),[t]),b=Object(u.useState)(f[0]),j=Object(i.a)(b,2),v=j[0],p=j[1],O=Object(u.useCallback)((function(e){var t;p(null!==(t=f.find((function(t){return t.field===e.target.value})))&&void 0!==t?t:f[0])}),[f]),h=Object(u.useCallback)((function(e,t){l((function(n){if("search"===e)return Object(I.isPresent)(t)?Object(r.a)(Object(r.a)({},n),{},{searchText:t.value}):Object(Dt.a)(["searchText"],n);var a=n.filters;Object(I.isPresent)(t)?a=Object(r.a)(Object(r.a)({},a),{},Object(x.a)({},e,t)):Object(I.isPresent)(a)&&delete a[e];var c=Object(r.a)(Object(r.a)({},n),{},{filters:a});return Object(I.isPresent)(a)&&0===Object.keys(a).length&&delete c.filters,c}))}),[l]),m=Object(u.useCallback)((function(e){h(v.field,e)}),[h,v.field]),y=Object(u.useCallback)((function(e){h(e,void 0),v.field}),[h,v]),k=Object(u.useMemo)((function(){var e;return{type:"textMatch",value:null!==(e=s.searchText)&&void 0!==e?e:""}}),[s.searchText]),C=Object(u.useRef)({}),T=Object(u.useMemo)((function(){var e;if("search"===v.field)return k;var t=Object(r.a)({},null!==(e=s.filters)&&void 0!==e?e:{});return delete t[v.field],Object(w.a)(C.current,t)||(C.current=t),C.current}),[s.filters,k,v.field]),P=Object(u.useCallback)(Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&"search"!==v.field){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,d(v,T);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),[d,v,T]),S=Object(u.useCallback)((function(e){var t;return"search"!==e?null===(t=s.filters)||void 0===t?void 0:t[e]:k.value?k:void 0}),[s.filters,k]),M=Xt[v.field],R=S(v.field),A=Object(u.useMemo)((function(){return{startAdornment:Object(N.jsx)(At.a,{position:"start",className:n.filterIconContainer,children:Object(N.jsx)(Ft,{fontSize:"small"})})}}),[n]);return Object(N.jsxs)(Ge.a,{container:!0,spacing:3,alignItems:"flex-start",children:[Object(N.jsx)(Ge.a,{item:!0,xs:12,children:f.filter((function(e){return!!S(e.field)})).map((function(e){return Object(N.jsx)(Jt,{title:Zt(e),field:e.field,value:S(e.field),onClearFilter:y,className:n.chip},e.field)}))}),Object(N.jsx)(Ge.a,{item:!0,xs:2,children:Object(N.jsx)(et.a,{select:!0,value:v.field,onChange:O,fullWidth:!0,InputProps:A,className:n.filter,children:f.map((function(e){return Object(N.jsx)(Z.a,{value:e.field,children:Zt(e)},e.field)}))})}),Object(N.jsx)(Ge.a,{item:!0,xs:10,children:Object(N.jsx)(zt.a,{children:Object(N.jsx)(u.Suspense,{fallback:Object(N.jsx)(Ct.a,{}),children:!!M&&Object(N.jsx)(M,{column:v,value:R,onChange:m,getCandidates:P})})})})]})},en=["onStateChanged","allowResponseCreation","allowTaskReassignment"],tn=["initialState","pageSizeOptions","allowResponseCreation","allowTaskReassignment","allowFocusing","enforcedFilter"],nn=Object(d.a)((function(e){return Object(f.a)({root:{position:"relative"},taskCount:{position:"absolute",right:60,top:12},refreshButton:{position:"absolute",right:10,top:0}})})),rn=Object(u.lazy)((function(){return Promise.resolve().then(n.bind(null,431))})),an=function(e){var t=e.onStateChanged,n=e.allowResponseCreation,a=e.allowTaskReassignment,l=Object(s.a)(e,en),d=Object(h.a)().t,f=nn(),p=K(),m=p.data,g=p.addResponse,x=p.refreshTasks,y=p.currentState,k=p.canCreateReponses,C=p.canReassignUsers,w=p.taskResponseStarted,I=p.taskResponseClosed,T=Object(u.useState)(),P=Object(i.a)(T,2),S=P[0],M=P[1];Object(u.useEffect)((function(){null===t||void 0===t||t(y)}),[y,t]);var R=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M({contextType:t,task:n,responseType:r}),e.next=3,w(n,r);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[w]),A=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g(S.task,S.responseType,t,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[g,S]),D=Object(u.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===S||void 0===S?void 0:S.task)){e.next=3;break}return e.next=3,I(S.task,S.responseType);case 3:if(M(void 0),!t){e.next=7;break}return e.next=7,x();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,null===S||void 0===S?void 0:S.responseType,null===S||void 0===S?void 0:S.task,I]),z=Object(u.useMemo)((function(){return n&&k()}),[k,n]),E=Object(u.useMemo)((function(){return a&&C()}),[C,a]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:f.root,children:[Object(N.jsx)(v.a,{className:f.taskCount,children:d("TotalTaskCount",{total:m.totalCount})}),Object(N.jsx)(j.a,{title:d("RefreshData"),children:Object(N.jsx)(b.a,{className:f.refreshButton,onClick:x,children:Object(N.jsx)(O.a,{})})})]}),Object(N.jsx)(Qt,Object(r.a)({},l)),Object(N.jsx)("div",{style:{height:10}}),Object(N.jsx)(Nt,Object(r.a)({allowResponseCreation:z,allowTaskReassignment:E,onResponseRequested:R},l)),!!S&&Object(N.jsx)(u.Suspense,{fallback:null,children:Object(N.jsx)(rn,{task:S.task,contextType:S.contextType,responseType:S.responseType,open:!!S,onAddResponse:A,onClose:D})})]})},cn=function(e){var t=e.initialState,n=e.pageSizeOptions,a=e.allowResponseCreation,c=void 0!==a&&a,o=e.allowTaskReassignment,i=void 0!==o&&o,l=e.allowFocusing,d=void 0!==l&&l,f=e.enforcedFilter,b=Object(s.a)(e,tn),j=Object(u.useMemo)((function(){var e=n;return e&&0!==e.length||(e=[5,10,20,100]),e}),[n]),v=Object(u.useMemo)((function(){return Object(r.a)({currentPage:0,pageSize:j[0]},t)}),[t,j]);return Object(N.jsx)(G,{initialState:v,enforcedFilter:f,children:Object(N.jsx)(an,Object(r.a)({pageSizeOptions:j,initialState:v,allowResponseCreation:c,allowTaskReassignment:i,allowFocusing:d},b))})}},560:function(e,t){},562:function(e,t){},563:function(e,t){},578:function(e,t){},579:function(e,t){},582:function(e,t){},583:function(e,t){},584:function(e,t){},585:function(e,t){},586:function(e,t){},588:function(e,t){},590:function(e,t){},591:function(e,t){},592:function(e,t){},593:function(e,t){},594:function(e,t){},615:function(e,t){}}]);
//# sourceMappingURL=12.88e7252b.chunk.js.map