(this["webpackJsonpnimflow-portal"]=this["webpackJsonpnimflow-portal"]||[]).push([[14],{130:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(3),r=n(42),c=n(426),o=n.n(c),i=n(275);o.a.registerHelper("translate",(function(e,t){var n={ns:i.b};return"object"===typeof t&&"hash"in t&&(n=Object(a.a)(Object(a.a)({},n),t.hash)),r.a.t(e,n)}));var u=function(e,t,n,a){return function(e,t){return o.a.compile(e,t)}(e,n)(t,a)}},132:function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return j})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return y}));var a=n(22),r=n(2473),c=(n(2351),n(2421),n(255),n(94),["MilestoneReached","MilestoneCleared"]),o=["TaskCreated","TaskUpdated","TaskArchived","ResponseSent"],i=["ActionDispatched","ContextsRecalculationCompleted","ContextRecalculationError"].concat(o,c);["RequestProcessed"].concat(Object(a.a)(i),["CustomEvent"]);function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.settings;return!n&&t&&(e.settings=n={}),n}function s(e){var t,n=null===(t=u(e))||void 0===t?void 0:t.commandText;return Object(r.a)(n)?e.name:n}function l(e){var t,n=null===(t=u(e))||void 0===t?void 0:t.actionInProgressText;return n||e.name}var d={id:"string",typeName:"string",reference:"string",state:"record",dateCreated:"dateTime",dateModified:"dateTime",version:"string",contextTypeVersion:"number",milestones:"array",tags:"array",metrics:"array"},b={id:"string",contextId:"string",contextTypeName:"string",contextReference:"string",typeName:"string",title:"string",data:"record",labels:"array",dateCreated:"dateTime",dateUpdated:"dateTime",assignedTo:"string",status:"string",archived:"boolean",dueDate:"string",importance:"number",focused:"boolean"},j={event:"string",timestamp:"dateTime",requestTypeName:"string",contextTypeName:"string",sentBy:"string",reference:"string",subject:"string",contextIsNew:"boolean",action:"string",message:"string",dueDate:"dateTime",taskTypeName:"string",assignedTo:"string",importance:"number",responseTypeName:"string",oldImportance:"number",oldLabels:"array",oldDueDate:"dateTime",oldAssignedTo:"string",milestoneName:"string",value:"dateTime",tags:"array",metrics:"array"},f=function(e){var t=["string","number","boolean","dateTime"];return Object.keys(e).filter((function(n){return t.includes(e[n])})).sort()},h=function(e){return Object.keys(e).filter((function(t){return"array"===e[t]})).sort()},O=function(e){return Object.keys(e).filter((function(t){return"record"===e[t]})).sort()},v=f(d),m=h(d),p=O(d),g=([].concat(Object(a.a)(v),Object(a.a)(m),Object(a.a)(p)),f(b)),x=(h(b),O(b)),y=([].concat(Object(a.a)(g),Object(a.a)(x)),f(j)),C=h(j);[].concat(Object(a.a)(y),Object(a.a)(C))},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(4),r=n(6),c=n(9),o=n(10),i=n(1),u=n(910),s=n(2424),l=n(2425),d=n(2426),b=n(197),j=n.n(b),f=n(40),h=function(e){var t=e.error,n=e.stack;return Object(f.jsxs)(s.a,{children:[Object(f.jsx)(d.a,{expandIcon:Object(f.jsx)(j.a,{}),children:Object(f.jsx)(u.a,{variant:"h5",color:"error",children:t})}),Object(f.jsx)(l.a,{children:Object(f.jsx)("pre",{children:n})})]})},O=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(r.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,a=n.hasError,r=n.error,c=n.errorInfo;return a?Object(f.jsx)(h,{error:null!==(e=null===r||void 0===r?void 0:r.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(i.Component)},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),r=n(919),c=n(180),o=n(2471),i=n(149),u=n(257),s=n(304),l=n(40),d=function(){var e=Object(o.a)().t,t=Object(c.b)().enqueueSnackbar,n=Object(i.b)();return Object(a.useCallback)((function(a,c,o){var i,d,b=null!==(i=null===o||void 0===o?void 0:o.variant)&&void 0!==i?i:"error",j=null!==(d=null===o||void 0===o?void 0:o.dialogTitle)&&void 0!==d?d:e("Error");if(Object(s.b)(c)&&"string"===typeof a){var f,h=!1===(null===(f=window.navigator)||void 0===f?void 0:f.onLine);a=e(h?"BrowserOfflineMessage":"NetworkErrorMessage",{message:a})}t(a,{variant:b,action:Object(l.jsx)(r.a,{onClick:function(){n({title:j,description:Object(l.jsx)(u.a,{error:c})})},children:e("ShowDetails")})})}),[n,t,e])}},173:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return f}));var a=n(432),r=n.n(a),c=n(546),o=n.n(c),i=n(290),u=n.n(i),s=n(42),l=u.a;function d(e){n(325)("./".concat(e,"/index")).then((function(e){"function"===typeof(null===e||void 0===e?void 0:e.default)&&(l=e.default)})).catch((function(){var t=e.indexOf("-");t>0&&d(e.substring(0,t))}))}s.a.language&&d(s.a.language),s.a.on("languageChanged",(function(e){d(e)}));var b=new r.a({allErrors:!0,addUsedSchema:!1});o()(b),b.addKeyword({keyword:"markdownDescription",schemaType:"string",valid:!0});var j=function(e){var t;return b.validateSchema(e)?{type:"success"}:(b.errors&&l&&l(b.errors),{type:"failure",errors:null!==(t=b.errors)&&void 0!==t?t:[]})},f=function(e){return l&&l(e),e}},1925:function(e,t,n){"use strict";var a=n(82),r=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(1)),o=(0,a(n(90)).default)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.default=o},1926:function(e,t,n){"use strict";var a=n(82),r=n(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(1)),o=(0,a(n(90)).default)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");t.default=o},2457:function(e,t,n){"use strict";n.r(t),n.d(t,"DispatchActionStepper",(function(){return Oe}));var a=n(2),r=n(1),c=n(893),o=n(890),i=n(2386),u=n(2432),s=n(2429),l=n(2430),d=n(2471),b=n(3),j=n(27),f=n(908),h=n(40),O=["children","className"],v=Object(c.a)((function(e){return Object(o.a)({paper:{padding:e.spacing(2),color:e.palette.text.secondary}})})),m=function(e){var t=e.children,n=e.className,a=Object(j.a)(e,O),r=v();return Object(h.jsx)(f.a,Object(b.a)(Object(b.a)({className:"".concat(r.paper," ").concat(n),elevation:3},a),{},{children:t}))},p=n(954),g=n(910),x=["children"],y=function(e){var t=e.children,n=Object(j.a)(e,x);return Object(h.jsx)(g.a,Object(b.a)(Object(b.a)({variant:"h5"},n),{},{children:t}))},C=Object(c.a)((function(e){return Object(o.a)({grow:{flexGrow:1},actionToolbarButtons:{display:"flex"}})})),I=function(e){var t=e.title,n=e.actions,a=Object(j.a)(e,["title","actions"]),r=C();return Object(h.jsxs)(p.a,Object(b.a)(Object(b.a)({variant:"dense"},a),{},{children:[t&&Object(h.jsx)(y,{children:t}),Object(h.jsx)("div",{className:r.grow}),n&&Object(h.jsx)("div",{className:r.actionToolbarButtons,children:n})]}))},k=n(12),w=n.n(k),P=n(41),M=n(114),S=n(1895),N=n(909),z=n(2403),D=n(2409),L=n(2410),T=n(2428),A=n(2416),E=n(2459),R=n(361),V=n.n(R),F=n(109),B=n(2383),H=function(e){return Object(h.jsxs)(B.a,Object(b.a)(Object(b.a)({viewBox:"0 0 64 64"},e),{},{children:[Object(h.jsx)("path",{d:"M58 13H6c-1.103 0-2-.897-2-2s.897-2 2-2h52c1.103 0 2 .897 2 2S59.103 13 58 13zM6 10c-.552 0-1 .449-1 1s.448 1 1 1h52c.552 0 1-.449 1-1s-.448-1-1-1H6zM36.5 20h-9c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h9c1.379 0 2.5 1.122 2.5 2.5S37.879 20 36.5 20zM27.5 16c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h9c.827 0 1.5-.673 1.5-1.5S37.327 16 36.5 16H27.5zM18.497 45h-6c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h6c1.379 0 2.5 1.122 2.5 2.5S19.876 45 18.497 45zM12.497 41c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h6c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5H12.497zM51.497 45h-6c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h6c1.379 0 2.5 1.122 2.5 2.5S52.876 45 51.497 45zM45.497 41c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h6c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5H45.497zM29.5 28h-10c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h10c.276 0 .5.224.5.5v4C30 27.776 29.776 28 29.5 28zM20 27h9v-3h-9V27zM44.5 28h-10c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h10c.276 0 .5.224.5.5v4C45 27.776 44.776 28 44.5 28zM35 27h9v-3h-9V27zM29.5 36h-8c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h8c.276 0 .5.224.5.5v4C30 35.776 29.776 36 29.5 36zM22 35h7v-3h-7V35zM43.5 36h-8c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h8c.276 0 .5.224.5.5v4C44 35.776 43.776 36 43.5 36zM36 35h7v-3h-7V35z"}),Object(h.jsx)("path",{d:"M56.5,48h-49C7.224,48,7,47.776,7,47.5v-35C7,12.224,7.224,12,7.5,12h49c0.276,0,0.5,0.224,0.5,0.5v35    C57,47.776,56.776,48,56.5,48z M8,47h48V13H8V47z"}),Object(h.jsx)("rect",{width:"1",height:"3",x:"31.5",y:"6.5"}),Object(h.jsx)("path",{d:"M32 7c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2S33.103 7 32 7zM32 4c-.552 0-1 .449-1 1s.448 1 1 1 1-.449 1-1S32.552 4 32 4zM21.5 61h-4c-.152 0-.297-.069-.392-.188-.095-.12-.13-.275-.096-.424l3-13C20.065 47.161 20.268 47 20.5 47h4c.152 0 .297.069.392.188.095.12.13.275.096.424l-3 13C21.935 60.839 21.732 61 21.5 61zM18.129 60h2.974l2.769-12h-2.974L18.129 60zM46.5 61h-4c-.232 0-.435-.161-.487-.388l-3-13c-.034-.148.001-.304.096-.424C39.203 47.069 39.348 47 39.5 47h4c.232 0 .435.161.487.388l3 13c.034.148-.001.304-.096.424C46.797 60.931 46.652 61 46.5 61zM42.897 60h2.974l-2.769-12h-2.974L42.897 60z"}),Object(h.jsx)("path",{d:"M41.974 56H22.026l.922-4h18.104L41.974 56zM23.282 55h17.436l-.461-2H23.743L23.282 55zM15.48 37.008c-.128 0-.256-.049-.354-.146l-3.008-3.008c-.195-.195-.195-.512 0-.707l3.008-3.008c.195-.195.512-.195.707 0l3.008 3.008c.195.195.195.512 0 .707l-3.008 3.008C15.736 36.959 15.608 37.008 15.48 37.008zM13.18 33.5l2.301 2.301 2.301-2.301-2.301-2.301L13.18 33.5zM32.48 46.008c-.128 0-.256-.049-.354-.146l-3.008-3.008c-.195-.195-.195-.512 0-.707l3.008-3.008c.195-.195.512-.195.707 0l3.008 3.008c.195.195.195.512 0 .707l-3.008 3.008C32.736 45.959 32.608 46.008 32.48 46.008zM30.18 42.5l2.301 2.301 2.301-2.301-2.301-2.301L30.18 42.5zM32 22c-.276 0-.5-.224-.5-.5v-2c0-.276.224-.5.5-.5s.5.224.5.5v2C32.5 21.776 32.276 22 32 22z"}),Object(h.jsx)("path",{d:"M39.5 24c-.276 0-.5-.224-.5-.5V22H25v1.5c0 .276-.224.5-.5.5S24 23.776 24 23.5v-2c0-.276.224-.5.5-.5h15c.276 0 .5.224.5.5v2C40 23.776 39.776 24 39.5 24zM15.5 31c-.276 0-.5-.224-.5-.5v-5c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5S19.776 26 19.5 26H16v4.5C16 30.776 15.776 31 15.5 31zM32.48 39.992c-.234.01-.501-.225-.5-.501L31.998 34H29.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h3c.133 0 .261.053.354.147S33 33.369 33 33.501l-.02 5.992C32.979 39.77 32.756 39.992 32.48 39.992z"}),Object(h.jsx)("path",{d:"M32.52 39.992c-.275 0-.499-.223-.5-.499L32 33.501c0-.133.052-.26.146-.354S32.367 33 32.5 33h3c.276 0 .5.224.5.5S35.776 34 35.5 34h-2.498l.018 5.491c.001.276-.223.5-.498.501C32.521 39.992 32.521 39.992 32.52 39.992zM15.5 41c-.276 0-.5-.224-.5-.5v-3.992c0-.276.224-.5.5-.5s.5.224.5.5V40.5C16 40.776 15.776 41 15.5 41zM39.5 32c-.276 0-.5-.224-.5-.5v-3.992c0-.276.224-.5.5-.5s.5.224.5.5V31.5C40 31.776 39.776 32 39.5 32zM21.5 34h-3.012c-.276 0-.5-.224-.5-.5s.224-.5.5-.5H21.5c.276 0 .5.224.5.5S21.776 34 21.5 34zM29.5 43h-9.012c-.276 0-.5-.224-.5-.5s.224-.5.5-.5H29.5c.276 0 .5.224.5.5S29.776 43 29.5 43zM43.497 43h-8.009c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h8.009c.276 0 .5.224.5.5S43.773 43 43.497 43z"}),Object(h.jsxs)("g",{children:[Object(h.jsx)("defs",{children:Object(h.jsx)("rect",{id:"SVGID_1_",width:"675.5",height:"132.688",x:"-1235.486",y:"289.422"})}),Object(h.jsx)("clipPath",{id:"SVGID_2_",children:Object(h.jsx)("use",{overflow:"visible",href:"#SVGID_1_"})})]})]}))},_=n(932),U=n(919),W=Object(c.a)((function(e){return Object(o.a)({button:{marginRight:e.spacing(1)},content:{maxHeight:"60vh",overflowY:"auto"}})})),J=function(e){var t=e.onNext,n=e.onBack,a=e.onSkip,r=e.nextActionCaption,c=e.children,o=W(),u=Object(d.a)().t;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{container:!0,children:Object(h.jsx)(i.a,{item:!0,xs:12,className:o.content,children:c})}),Object(h.jsx)(i.a,{container:!0,children:Object(h.jsxs)(i.a,{item:!0,xs:12,children:[Object(h.jsx)(U.a,{disabled:!n,onClick:n,className:o.button,children:u("Back")}),!!a&&Object(h.jsx)(U.a,{onClick:a,className:o.button,children:u("Skip")}),!!t&&Object(h.jsx)(U.a,{onClick:t,className:o.button,children:null!==r&&void 0!==r?r:u("Next")})]})})]})},q=Object(c.a)((function(e){return Object(o.a)({root:{flexGrow:1}})})),$=function(e,t){if(!e)return[];if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)||e.description&&e.description.includes(n)}))},K=n(94),G=Object(c.a)((function(e){return Object(o.a)({root:{flexGrow:1,width:"100%",marginTop:"20px",marginBottom:"20px"}})})),Y=n(2438),Z=n(326),X=n(173),Q=n(132),ee=n(345),te=Object(c.a)((function(e){return Object(o.a)({root:{flexGrow:1,width:"100%",marginBottom:"20px"},textField:{width:"100%"},content:{padding:"8px 24px","&:first-child":{paddingTop:20}}})})),ne=n(2468),ae=n(721),re=n(1926),ce=n.n(re),oe=n(1925),ie=n.n(oe),ue=n(698),se=n(122),le=n(257),de=Object(c.a)((function(e){return Object(o.a)({button:{marginRight:e.spacing(1)},icon:{textAlign:"center"}})})),be=function(e){var t=e.icon,n=e.title,a=e.details,r=de();return Object(h.jsx)(ae.a,{pt:"50px",pb:"50px",maxHeight:"60vh",children:Object(h.jsxs)(i.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:4,children:[!!t&&Object(h.jsx)(i.a,{item:!0,xs:12,className:r.icon,children:t}),Object(h.jsx)(i.a,{item:!0,xs:12,children:Object(h.jsx)(g.a,{variant:"h4",align:"center",children:n})}),!!a&&Object(h.jsx)(i.a,{item:!0,xs:12,children:"string"===typeof a?Object(h.jsx)(g.a,{variant:"h6",align:"center",children:a}):Object(h.jsx)("div",{children:a})})]})})},je=function(e){var t=e.action,n=e.onDispatchCompleted,a=e.onBack,r=de(),c=Object(d.a)().t,o=Object(F.c)().contexts_DispatchAction,u=Object(ne.a)(Object(P.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[o,t]),s=u.loading,l=u.value,b=u.error;return s?Object(h.jsx)(se.b,{children:c("ExecutingAction")}):Object(h.jsxs)(h.Fragment,{children:[!b&&Object(h.jsx)(be,{icon:Object(h.jsx)(ie.a,{style:{color:ue.a[500],fontSize:60}}),title:c("ActionCompleted"),details:c("DispatchActionResult",{id:null===l||void 0===l?void 0:l.contextId})}),!!b&&Object(h.jsx)(be,{icon:Object(h.jsx)(ce.a,{color:"error",style:{fontSize:60}}),title:c("ActionFailed"),details:Object(h.jsx)(le.a,{error:b})}),Object(h.jsx)(i.a,{container:!0,children:Object(h.jsxs)(i.a,{item:!0,xs:12,children:[!!b&&Object(h.jsx)(U.a,{onClick:a,className:r.button,children:c("Back")}),Object(h.jsx)(U.a,{onClick:n,className:r.button,children:c("Ok")})]})})]})},fe=Object(c.a)((function(e){return Object(o.a)({root:{width:"100%"},button:{marginRight:e.spacing(1)},content:{maxHeight:"60vh",overflowY:"auto"}})})),he=[function(e){var t=e.value,n=e.onNext,c=q(),o=Object(r.useState)(""),i=Object(a.a)(o,2),u=i[0],s=i[1],l=function(e){var t=Object(F.c)().contextTypes_Search,n=Object(M.a)("/ContextTypes/Search",Object(P.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({limit:100});case 2:return n=e.sent,e.abrupt("return",Object(S.a)((function(e){return e.name}),n));case 4:case"end":return e.stop()}}),e)})))),a=n.data,c=n.error,o=n.isValidating,i=n.mutate;return Object(r.useMemo)((function(){return{data:$(a,e),isValidating:o,error:c,mutate:i}}),[a,e,o,c,i])}(u),d=l.data,b=l.error,j=l.isValidating,f=Object(r.useCallback)((function(e){t.contextTypeName===e?n(t):n({contextTypeName:e})}),[t,n]);return Object(h.jsxs)(J,{children:[Object(h.jsx)(I,{actions:Object(h.jsx)(_.a,{value:u,onChange:s})}),Object(h.jsx)(z.a,{className:c.root,style:{maxHeight:"400",overflowY:"auto"},children:d.map((function(e,t){return Object(h.jsxs)(D.a,{children:[Object(h.jsx)(A.a,{children:Object(h.jsx)(H,{})}),Object(h.jsx)(L.a,{primary:e.name,secondary:e.description}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{edge:"end",onClick:function(){return f(e.name)},children:Object(h.jsx)(V.a,{})})})]},e.name)}))}),!j&&!!b&&Object(h.jsx)(E.a,{severity:"error",children:b.toString()})]})},function(e){var t=e.value,n=e.onBack,a=e.onNext,c=G(),o=function(e){var t=Object(F.c)().contextTypes_FindOne,n=Object(M.a)("/ContextType/".concat(e),Object(P.a)(w.a.mark((function n(){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),a=n.data,c=n.error,o=n.isValidating,i=n.mutate;return Object(r.useMemo)((function(){return{contextType:a,isValidating:o,error:c,mutate:i}}),[a,o,i,c])}(t.contextTypeName),u=o.contextType,s=o.error,l=o.isValidating,d=Object(r.useMemo)((function(){return u?u.initialActions.map((function(e){return u.actions.find((function(t){return t.name===e}))})).filter(K.isPresent):[]}),[u]),b=Object(r.useCallback)((function(e){t.action===e?a(t):a({contextTypeName:t.contextTypeName,action:e})}),[t,a]);return!l&&s?Object(h.jsx)(E.a,{severity:"error",children:s.toString()}):l||!u?null:Object(h.jsx)(J,{onBack:n,children:Object(h.jsx)(i.a,{container:!0,direction:"column",alignItems:"center",spacing:3,className:c.root,children:d.map((function(e){return Object(h.jsx)(i.a,{item:!0,xs:10,children:Object(h.jsx)(U.a,{variant:"outlined",onClick:function(){return b(e.name)},children:e.name})},e.name)}))})})},function(e){var t,n=e.value,c=e.onBack,o=e.onNext,u=te(),s=Object(d.a)().t,l=function(e){var t=Object(F.c)().contextTypes_FindOne,n=Object(M.a)("/ContextType/".concat(e),Object(P.a)(w.a.mark((function n(){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),a=n.data,c=n.error,o=n.isValidating,i=n.mutate;return Object(r.useMemo)((function(){return{contextType:a,isValidating:o,error:c,revalidate:i}}),[a,o,i,c])}(n.contextTypeName),j=l.contextType,f=l.error,O=l.isValidating,v=Object(r.useState)({reference:n.reference,contextId:n.contextId}),m=Object(a.a)(v,2),p=m[0],g=m[1],x=Object(r.useState)(null!==(t=n.payload)&&void 0!==t?t:{}),y=Object(a.a)(x,2),C=y[0],I=y[1],k=Object(r.useRef)(),S=Object(r.useRef)(),N=Object(r.useMemo)((function(){return null===j||void 0===j?void 0:j.actions.find((function(e){return e.name===n.action}))}),[j,n]),z=Object(r.useCallback)((function(){N&&j&&(k.current&&k.current.length>0||S.current&&S.current.length>0||o(Object(b.a)(Object(b.a)(Object(b.a)({},n),p),{},{payload:C})))}),[o,N,j,p,C,n]),D=Object(r.useMemo)((function(){return{type:"object",properties:{reference:{type:"string"}},required:["reference"]}}),[]),L=Object(r.useMemo)((function(){return function(e,t){if(e&&t&&e.payloadSchemaDefinitionName)return Object(Z.a)(t,e.name)}(N,j)}),[N,j]),T=Object(r.useMemo)((function(){var e,t=N?null===(e=Object(Q.i)(N))||void 0===e?void 0:e.uiSchema:void 0;if(t)return JSON.parse(t)}),[N]),A=Object(r.useCallback)((function(e){e.errors&&e.errors.length>0?(Object(X.a)(e.errors.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{instancePath:e.dataPath})}))),k.current=Object(Y.a)(e.errors)):(g(e.data),k.current=void 0)}),[g]),R=Object(r.useCallback)((function(e){e.errors&&e.errors.length>0?(Object(X.a)(e.errors.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{instancePath:e.dataPath})}))),S.current=Object(Y.a)(e.errors)):(I(e.data),S.current=void 0)}),[I]),V=Object(r.useMemo)((function(){var e;if(j){var t=null===(e=Object(Q.i)(j))||void 0===e?void 0:e.uiSchemaCommon;if(t)return JSON.parse(t)}}),[j]);return!O&&f?Object(h.jsx)(E.a,{severity:"error",children:f.toString()}):j&&N?Object(h.jsx)(J,{onBack:c,onNext:z,nextActionCaption:s("ExecuteAction"),children:Object(h.jsxs)(i.a,{container:!0,spacing:2,className:u.root,children:[Object(h.jsx)(i.a,{item:!0,xs:12,className:u.content,children:Object(h.jsx)(ee.a,{schema:D,data:p,onChange:A,uiSchemaLibrary:V})}),Object(h.jsx)(i.a,{item:!0,xs:12,className:u.content,children:!!L&&Object(h.jsx)(ee.a,{schema:L,uischema:T,data:C,onChange:R,uiSchemaLibrary:V})})]})}):null}],Oe=function(){var e=Object(d.a)().t,t=fe(),n=Object(r.useState)(0),c=Object(a.a)(n,2),o=c[0],b=c[1],j=Object(r.useState)({}),f=Object(a.a)(j,2),O=f[0],v=f[1],p=Object(r.useMemo)((function(){return[o>0?e("SelectedContextType",{name:O.contextTypeName}):e("SelectContextType"),o>1?e("SelectedActionType",{name:O.action}):e("SelectActionType"),e("CompleteActionData")]}),[o,O,e]),g=Object(r.useCallback)((function(e){v(e),b((function(e){return e+1}))}),[b]),x=Object(r.useCallback)((function(){b((function(e){return e+1}))}),[b]),y=Object(r.useCallback)((function(){b((function(e){return e-1}))}),[b]),C=Object(r.useCallback)((function(){b(0),v({})}),[]),k=function(){var e=he[o];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{activeStep:o,alternativeLabel:!0,children:p.map((function(e,t){return Object(h.jsx)(s.a,{children:Object(h.jsx)(l.a,{children:e})},t)}))}),!!e&&Object(h.jsx)(e,{value:O,onNext:g,onBack:y,onSkip:x})]})};return Object(h.jsx)(i.a,{container:!0,spacing:3,justifyContent:"center",children:Object(h.jsx)(i.a,{item:!0,xs:9,children:Object(h.jsxs)(m,{className:t.root,children:[Object(h.jsx)(I,{title:e("DispatchingAction")}),o<3?Object(h.jsx)(k,{}):Object(h.jsx)(je,{action:O,onDispatchCompleted:C,onBack:y})]})})})};t.default=Oe},325:function(e,t,n){var a={"./ar/index":[625,22],"./ca/index":[626,23],"./cs/index":[627,24],"./de/index":[628,25],"./en/index":[290],"./es/index":[629,26],"./fi/index":[630,27],"./fr/index":[631,28],"./hu/index":[632,29],"./id/index":[633,30],"./it/index":[634,31],"./ja/index":[635,32],"./ko/index":[636,33],"./nb/index":[637,34],"./nl/index":[638,35],"./pl/index":[639,36],"./pt-BR/index":[640,37],"./ru/index":[641,38],"./sk/index":[642,39],"./sv/index":[643,40],"./th/index":[644,41],"./zh-TW/index":[646,42],"./zh/index":[645,43]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(r,7)}))}r.keys=function(){return Object.keys(a)},r.id=325,e.exports=r},326:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));var a=n(3),r=n(94),c=n(2438),o=function(e,t){var n,o=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(r.isPresent)(o))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof o)throw new Error("Invalid definition ".concat(t));var i=Object(c.a)(o);return delete i.definitions,e=Object(a.a)(Object(a.a)({},e),i)},i=function(e,t,n){if(e.jsonSchema){var a=JSON.parse(e.jsonSchema),r=e.tasks.find((function(e){return e.name===t})),c=null===r||void 0===r?void 0:r.validResponses.find((function(e){return e.name===n})),i=null===c||void 0===c?void 0:c.payloadSchemaDefinitionName;if(i)return o(a,i)}},u=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),a=e.actions.find((function(e){return e.name===t})),r=null===a||void 0===a?void 0:a.payloadSchemaDefinitionName;if(r)return o(n,r)}}},338:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://nimflow.com/schemas/recognized-image-batch.schema.json","type":"object","title":"Recognized image batch schema","allOf":[{"$ref":"#/definitions/RecognizedImageBatch"}],"definitions":{"RecognizedImageBatch":{"type":"object","properties":{"fileUrls":{"type":"array","items":{"type":"string"}},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}}},"required":["fileUrls"]},"Document":{"type":"object","properties":{"schemaId":{"type":"string"},"pages":{"type":"array","items":{"$ref":"#/definitions/PageImageLocation"}},"action":{"type":"string","enum":["saveAsDraft","send","dontSend"]},"data":true},"required":["schemaId","action"]},"PageImageLocation":{"type":"object","properties":{"fileIndex":{"type":"integer"},"filePageNumber":{"type":"integer"}},"required":["fileIndex","filePageNumber"]}}}')},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return er})),n.d(t,"c",(function(){return tr})),n.d(t,"b",(function(){return nr}));var a=n(22),r=n(190),c=n(575),o=n(1),i=n.n(o),u=n(1284),s=n(299),l=n(89),d=n(86),b=n(23),j=n(3),f=n(2),h=n(2417),O=n(40),v=function(){throw new Error("You forgot to wrap your component in <JsonFormsContextProvider>.")},m=Object(o.createContext)({context:{},bindContext:!0,uiSchemaLibrary:{},registerValidationProvider:v,unregisterValidationProvider:v,validationProviderUpdated:v}),p=function(e){var t=e.context,n=e.bindContext,a=e.uiSchemaLibrary,r=e.children,c=e.onErrorsChange,i=Object(o.useState)({}),u=Object(f.a)(i,2),s=u[0],l=u[1];Object(o.useEffect)((function(){var e=Object.values(s).flatMap((function(e){return e}));null===c||void 0===c||c(e)}),[s,c]);var d=Object(o.useCallback)((function(e){l((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(b.a)({},e,[]))}))}),[]),v=Object(o.useCallback)((function(e){l((function(t){return Object(h.a)([e],t)}))}),[]),p=Object(o.useCallback)((function(e,t){l((function(n){return e in n?Object(j.a)(Object(j.a)({},n),{},Object(b.a)({},e,t)):n}))}),[]);return Object(O.jsx)(m.Provider,{value:{context:null!==t&&void 0!==t?t:{},bindContext:null===n||void 0===n||n,uiSchemaLibrary:null!==a&&void 0!==a?a:{},registerValidationProvider:d,unregisterValidationProvider:v,validationProviderUpdated:p},children:r})},g=function(){return Object(o.useContext)(m)},x=n(130),y=Object(d.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.visible,a=e.data,r=e.path,c=g(),i=c.bindContext,l=c.context,d=Object(o.useMemo)((function(){var e=t;if(e||"text"in e){var n={data:a,path:r};return i&&Object.assign(n,l),Object(x.a)(e.text,n)}}),[t,a,r,i,l]);return d?Object(O.jsx)(u.a,{xsUp:!n,children:Object(O.jsx)("div",{children:Object(O.jsx)(s.a,{children:d})})}):null})),C=Object(l.rankWith)(3,Object(l.uiTypeIs)("Markdown")),I=n(893),k=n(890),w=Object(I.a)((function(e){return Object(k.a)({viewer:{width:"100%",minHeight:"800px"}})})),P=Object(d.withJsonFormsLayoutProps)((function(e){var t=w(),n=e.uischema,a=e.visible,r=e.data,c=e.path,i=g(),s=i.bindContext,l=i.context,d=Object(o.useMemo)((function(){var e=n;if(e||"url"in e){var t={data:r,path:c};return s&&Object.assign(t,l),Object(x.a)(e.url,t)}}),[n,r,c,s,l]);return d?Object(O.jsx)(u.a,{xsUp:!a||!d,children:Object(O.jsx)("object",{data:d,type:"application/pdf",className:t.viewer,children:Object(O.jsx)("embed",{src:d,type:"application/pdf"})})}):null})),M=Object(l.rankWith)(3,Object(l.uiTypeIs)("Pdf")),S=n(27),N=n(0),z=n(94),D=["uischema","schema","path","renderers"],L=Object(d.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.schema,a=e.path,r=e.renderers,c=Object(S.a)(e,D),i=Object(d.useJsonForms)().core,u=g().uiSchemaLibrary,s="Use"===t.type?t:void 0,b=s?u[s.name]:void 0,f=s?l.Resolve.schema(n,s.scope):void 0,h=Object(o.useMemo)((function(){if(r&&b&&f)return function(e,t){var n,a=-1,r=void 0,c=Object(N.a)(e);try{for(c.s();!(n=c.n()).done;){var o=n.value,i=t(o);i>a&&(a=i,r=o)}}catch(u){c.e(u)}finally{c.f()}return r}(r,(function(e){return e.tester(b,f)}))}),[b,r,f]);if(!b||!s||!f)return null;var v=Object(l.composeWithUi)(s,a),m=l.Resolve.data(null===i||void 0===i?void 0:i.data,v);if(Object(z.isPresent)(h)&&-1!==h.tester(b,f)){var p=h.renderer;return Object(O.jsx)(p,Object(j.a)({uischema:b,schema:f,path:v,data:m,renderers:r},c))}return Object(O.jsx)(d.UnknownRenderer,{type:"renderer"})})),T=Object(l.rankWith)(3,Object(l.uiTypeIs)("Use")),A=n(12),E=n.n(A),R=n(41),V=n(114),F=n(233),B=n(307),H=Object(d.withJsonFormsControlProps)((function(e){var t=e.uischema.options.optionsSource,n=t.moduleName,a=t.functionName,c=Object(F.a)().call,i=Object(V.a)("function/".concat(n,"/").concat(a),Object(R.a)(E.a.mark((function e(){var t,r,o,i,u,s,l,d,b;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,c(n,a);case 3:if(r=e.sent,Array.isArray(r)){o=Object(N.a)(r);try{for(o.s();!(i=o.n()).done;)u=i.value,s=void 0,l=void 0,Object(B.a)(u)?(s=u.value,"string"===typeof u.label&&(l=u.label)):s=u,Object(z.isPresent)(s)&&(b={label:null!==(d=l)&&void 0!==d?d:"string"===typeof s?s:JSON.stringify(s),value:s},t.push(b))}catch(j){o.e(j)}finally{o.f()}}return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),{fallbackData:[],revalidateOnMount:!0,revalidateOnFocus:!1}).data,u=Object(o.useMemo)((function(){return Object(j.a)(Object(j.a)({},e),{},{options:i})}),[e,i]);return Object(O.jsx)(r.MaterialInputControl,Object(j.a)(Object(j.a)({},u),{},{input:r.MuiSelect}))})),_=Object(l.rankWith)(3,Object(l.and)(l.isControl,(function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.optionsSource;return!!n&&!!n.moduleName&&!!n.functionName}))),U=n(238),W=n(2471),J=n(1281),q=n(48),$=n(2463),K=n(2439),G=n(2406),Y=n(2407),Z=n(577),X=n.n(Z),Q=n(295),ee=n.n(Q),te=n(230),ne=n.n(te),ae=n(663),re=n(596),ce=n.n(re),oe=n(2473),ie=n(109),ue=n(179),se=["image/png","image/jpeg","image/webp"],le=function(e){return new Promise((function(t,n){var a=new Image;a.crossOrigin="anonymous",a.addEventListener("load",(function(){return t(a)})),a.addEventListener("error",(function(e){return n(e)})),a.src=e}))},de=function(){var e=Object(R.a)(E.a.mark((function e(t,n){var a,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Blob([t.content],{type:t.mimeType}),r=URL.createObjectURL(a),e.prev=2,e.next=5,le(r);case 5:c=e.sent,t.pages.push({getImageData:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=c.naturalWidth,e.height=c.naturalHeight,t.drawImage(c,0,0),t.getImageData(0,0,c.naturalWidth,c.naturalHeight)},width:c.naturalWidth,height:c.naturalHeight,fileIndex:n,filePageNumber:0,pageIndex:0}),t.pageStates.push({rotate:0});case 8:return e.prev=8,URL.revokeObjectURL(r),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[2,,8,11]])})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(R.a)(E.a.mark((function e(t,n){var a,r,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new ee.a({buffer:t.content}),r=function(e,r){a.setDirectory(e);var c={getImageData:function(){a.setDirectory(e);var t=a.readRGBAImage();return new ImageData(new Uint8ClampedArray(t),a.width(),a.height())},width:a.width(),height:a.height(),fileIndex:n,filePageNumber:e,pageIndex:0};t.pages.push(c),t.pageStates.push({rotate:0})},c=0,o=a.countDirectory();c<o;++c)r(c);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(R.a)(E.a.mark((function e(t,n){var a,r,c,o,i,u,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Uint8Array(t.content),e.next=3,ae.a.getDocument(a).promise;case 3:for(r=e.sent,c=[],o=new Array(r.numPages),i=new Array(r.numPages),u=function(e){c.push(r.getPage(e+1).then(function(){var t=Object(R.a)(E.a.mark((function t(a){var r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=2*window.devicePixelRatio,c=a.getViewport({scale:r}),o[e]={getImageData:function(){var e=Object(R.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("canvas")).style.width="".concat(c.width/r,"px"),t.style.height="".concat(c.height/r,"px"),t.height=c.height,t.width=c.width,n=t.getContext("2d"),e.next=8,a.render({canvasContext:n,viewport:c}).promise;case 8:return e.abrupt("return",n.getImageData(0,0,t.width,t.height));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),width:c.width,height:c.height,fileIndex:n,filePageNumber:e,pageIndex:0},i[e]={rotate:0};case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},s=0;s<r.numPages;s++)u(s);return e.next=11,Promise.all(c);case 11:t.pages=o;case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(R.a)(E.a.mark((function e(t,n,a){var r,c,o,i,u,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.lastIndexOf("/"),o=c>=0?t.substring(c+1):t,i={url:t,status:"loaded",name:o,mimeType:a.headers["content-type"],content:a.data,pages:[],pageStartIndex:0,pageStates:[]},u=null===(r=a.headers)||void 0===r?void 0:r["content-disposition"],(s=u?/filename="?([^"]*?)"?(;|$)/g.exec(u):void 0)&&s.length>1&&(i.name=s[1]),i.mimeType&&!se.includes(i.mimeType)){e.next=11;break}return e.next=9,de(i,n);case 9:e.next=19;break;case 11:if("image/tiff"!==i.mimeType){e.next=16;break}return e.next=14,be(i,n);case 14:e.next=19;break;case 16:if("application/pdf"!==i.mimeType){e.next=19;break}return e.next=19,je(i,n);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),he=function(e,t){return Object(q.a)(e,(function(e){null===t||void 0===t||t.forEach((function(t,n){t.pages.forEach((function(t,n){var a,r=e[t.fileIndex];"loaded"===(null===r||void 0===r?void 0:r.status)&&(r.pageStates[t.filePageNumber].rotate=null!==(a=t.rotate)&&void 0!==a?a:0)}))}));var n,a=0,r=Object(N.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;if("loaded"===c.status){c.pageStartIndex=a;var o,i=Object(N.a)(c.pages);try{for(i.s();!(o=i.n()).done;){o.value.pageIndex=a++}}catch(u){i.e(u)}finally{i.f()}}}}catch(u){r.e(u)}finally{r.f()}}))},Oe={height:170,width:170},ve=n(173),me=Symbol("marker"),pe=Object(l.createAjv)({allErrors:!0,addUsedSchema:!1,useDefaults:!0});pe.addFormat("image",(function(){return!0})),pe.addKeyword("patternMask",{type:"string",valid:!0,errors:!1});var ge=function(e,t){var n=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(e),r=a.byteLength,c=r%3,o=r-c,i=0;i<o;i+=3){var u=a[i]<<16|a[i+1]<<8|a[i+2],s=(258048&u)>>12,l=(4032&u)>>6,d=63&u;t+=n[(16515072&u)>>18]+n[s]+n[l]+n[d]}if(1===c){var b=a[o],j=(3&b)<<4;t+=n[(252&b)>>2]+n[j]+"=="}else if(2===c){var f=a[o]<<8|a[o+1],h=(1008&f)>>4,O=(15&f)<<2;t+=n[(64512&f)>>10]+n[h]+n[O]+"="}return t}(e);return"data:".concat(t,";base64,").concat(n)};var xe=function(){throw new Error("You forgot to wrap your component in <BatchProcessorContextProvider>.")},ye={fileInfos:[],documents:[],documentInfos:[],unusedPages:[],loadingImages:!1,setCurrentDocumentLocation:xe,updateCurrentDocument:xe,updateBatch:xe,movePage:xe,findByPageIndex:xe,deleteDocument:xe,addDocument:xe,updateDocument:xe,getDocument:xe,setCurrentDocumentEditionState:xe,canModify:!0,getDisplayableDataUrl:xe,rotateImage:xe,rotateAllImages:xe,getPageLocation:xe,canOcr:!1,ocrImage:xe},Ce=Object(o.createContext)(ye),Ie=function(e,t){var n,a=Object(N.a)(t);try{for(a.s();!(n=a.n()).done;){var r,c=n.value,o="loaded"===c.status?c.pages:[],i=Object(N.a)(o);try{for(i.s();!(r=i.n()).done;){var u=r.value;if(u.pageIndex===e)return u}}catch(s){i.e(s)}finally{i.f()}}}catch(s){a.e(s)}finally{a.f()}},ke=function(e,t,n){var a=e;return a&&(a+=","),a+=t.toString(),t!==n&&(a+="-".concat(n)),a},we=function(e){if(0===e.length)return"";for(var t=e.map((function(e){return e+1})),n=t[0],a=n,r="",c=1;c<t.length;c++){var o=t[c];o===a+1&&a>=n||o===a-1&&a<=n?a=o:(r=ke(r,n,a),n=a=o)}return r=ke(r,n,a)},Pe=function(e,t){var n=new Array(e.length);return t.forEach((function(t,a){"loaded"===t.status&&t.pages.forEach((function(t,r){var c=e.indexOf(t.pageIndex);c>=0&&(n[c]={fileIndex:a,filePageNumber:r})}))})),n},Me=function(e,t){return t&&!pe.validate(t,e.data)&&pe.errors?Object(ve.a)(pe.errors.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{instancePath:e.dataPath})}))):[]},Se=function(e,t){for(var n=e+t;n<0;)n+=360;for(;n>=360;)n-=360;return n},Ne=function(e,t){var n,a=Se(null!==(n=e.rotate)&&void 0!==n?n:0,t);0===a?delete e.rotate:e.rotate=a},ze=function(e){var t=e.basePath,n=e.batch,r=e.documentSchemasSource,c=e.readonly,i=e.ocrFunction,u=e.children,s=!c,h=Object(o.useState)(n),v=Object(f.a)(h,1)[0],m=function(e){var t=e.moduleName,n=e.functionName,a=Object(F.a)().call,r=Object(V.a)("function/".concat(t,"/").concat(n),Object(R.a)(E.a.mark((function e(){var r,c,o,i,u,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,a(t,n);case 3:if(c=e.sent,Array.isArray(c)){o=Object(N.a)(c);try{for(o.s();!(i=o.n()).done;)u=i.value,"success"===(s=Object(ve.b)(u)).type?r.push(u):console.error("Error validating schema ".concat(null===u||void 0===u?void 0:u.$id,". It will be ignored."),s.errors)}catch(l){o.e(l)}finally{o.f()}}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),c=r.data,i=r.isValidating,u=r.error;return{documentSchemas:Object(o.useMemo)((function(){return null!==c&&void 0!==c?c:[]}),[c]),loading:i,error:u}}(r).documentSchemas,p=Object(d.useJsonForms)().dispatch,x=function(e,t){var n=Object(ue.c)().hubBaseUrl,a=Object(ie.c)(),r=a.getConfiguredAxiosInstance,c=a.blobStorage_GetThumbnails,i=Object(o.useState)((function(){return e.fileUrls.map((function(e){var t=ce()(e);return t.is("relative")&&n&&(t=ce.a.joinPaths("BlobStorage",t).absoluteTo(n)),{url:t.valueOf(),status:"loading",name:t.filename()}}))})),u=Object(f.a)(i,2),s=u[0],l=u[1],d=Object(o.useState)(t&&e.fileUrls.length>0),b=Object(f.a)(d,2),h=b[0],O=b[1];return Object(o.useEffect)((function(){if(t){var a=ne.a.CancelToken.source(),o=ne.a.create({responseType:"arraybuffer",cancelToken:a.token}),i=r({responseType:"arraybuffer",cancelToken:a.token});return e.fileUrls.forEach((function(t,a){var r=t,u=ce()(t),s=o;u.is("relative")&&n&&(u=ce.a.joinPaths("BlobStorage",u),s=i),t=u.valueOf(),s.get(t).then((function(n){return fe(t,a,n).then((function(t){l((function(n){var r=Object(q.a)(n,(function(e){e[a]=t}));return r.every((function(e){return"loading"!==e.status}))&&(r=he(r,e.documents),O(!1)),r})),c(Object(j.a)(Object(j.a)({path:r},Oe),{},{format:"png"})).then((function(e){Object(oe.a)(e)||l((function(t){return Object(q.a)(t,(function(t){var n=t[a];"loaded"===n.status&&(n.thumbnails=e)}))}))}))}))})).catch((function(n){l((function(r){var c=Object(q.a)(r,(function(e){e[a]=function(e,t){var n=e.lastIndexOf("/"),a=n>=0?e.substring(n+1):e,r={url:e,status:"failed",name:a,error:t.message};return t.response&&(r.error="Code: ".concat(t.response.status,"\nData: ").concat(t.response.data)),r}(t,n)}));return c.every((function(e){return"loading"!==e.status}))&&(c=he(c,e.documents),O(!1)),c}))}))})),function(){a.cancel(),O(!1)}}l((function(e){return e.map((function(e){return{name:e.name,status:"loaded",url:e.url,content:new ArrayBuffer(0),pages:[],pageStartIndex:0,pageStates:[]}}))}))}),[c,t,r,n,e.documents,e.fileUrls]),{loadingFileInfos:h,fileInfos:s,setFileInfos:l}}(v,s),y=x.fileInfos,C=x.loadingFileInfos,I=x.setFileInfos,k=Object(o.useState)({documentIndex:v.documents.length>0?0:void 0}),w=Object(f.a)(k,2),P=w[0],M=w[1],S=Object(o.useState)([]),D=Object(f.a)(S,2),L=D[0],T=D[1],A=function(e){var t=g(),n=t.registerValidationProvider,a=t.unregisterValidationProvider,r=t.validationProviderUpdated,c=Object(o.useState)(),i=Object(f.a)(c,2),u=i[0],s=i[1];Object(o.useEffect)((function(){return n(e),function(){return a(e)}}),[e,n,a]),Object(o.useEffect)((function(){var t=(null!==u&&void 0!==u?u:[]).map((function(t){var n="".concat(e,".").concat(t.dataPath);return Object(j.a)(Object(j.a)({},t),{},{dataPath:n,instancePath:n})}));r(e,t)}),[u,e,r]);var l=Object(o.useCallback)((function(e){s((function(t){return Object(J.a)(t,e)?t:e}))}),[]);return Object(o.useMemo)((function(){return{updateErrors:l}}),[l])}(t).updateErrors,B=function(e,t){var n=Object(o.useState)([]),a=Object(f.a)(n,2),r=a[0],c=a[1];return Object(o.useEffect)((function(){c((function(n){for(var a=[],r=0;r<t.length;r++){var c=t[r];if("loaded"===c.status)for(var o=0;o<c.pageStates.length;o++){var i={fileIndex:r,filePageNumber:o},u=c.pageStates[o];Object(z.isPresent)(u.rotate)&&(i.rotate=u.rotate),a.push(i)}}var s,l=Object(N.a)(e.documents.flatMap((function(e){return e.pages})));try{var d=function(){var e=s.value,t=a.findIndex((function(t){return!!t&&t.fileIndex===e.fileIndex&&t.filePageNumber===e.filePageNumber}));t>-1&&(a[t]=void 0)};for(l.s();!(s=l.n()).done;)d()}catch(j){l.e(j)}finally{l.f()}var b=a.filter(z.isPresent);return Object(J.a)(b,n)?n:b}))}),[e.documents,t]),r}(n,y),H=Object(F.a)().call,_=Object(o.useMemo)((function(){return n.documents.map((function(e,t){var n;return{schemaId:e.schemaId,action:e.action,errors:null!==(n=L[t])&&void 0!==n?n:[]}}))}),[n.documents,L]);Object(o.useEffect)((function(){if(m&&0!==v.documents.length){var e=v.documents.map((function(e){var t=m.find((function(t){return t.$id===e.schemaId}));return Me(e,t)}));T((function(t){return e.map((function(e,n){return t[n]?t[n]:e}))}))}}),[v,m]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(o.useRef)(e),r=n.current;if(e!==r)if(r.length!==e.length)n.current=e;else if(t)for(var c=Object(a.a)(e),i=0;i<r.length;i++){var u=c.indexOf(r[i]);if(-1===u){n.current=e;break}c[u]=me}else for(var s=0;s<r.length;s++)if(r[s]!==e[s]){n.current=e;break}return n.current}(n.documents.reduce((function(e,t,n){return"send"===t.action&&e.push(n),e}),[]),!0);Object(o.useEffect)((function(){var e=W.flatMap((function(e){var t,n;return null!==(t=null===(n=L[e])||void 0===n?void 0:n.map((function(t){var n="documents[".concat(e,"].data.").concat(t.instancePath);return Object(j.a)(Object(j.a)({},t),{},{instancePath:n,dataPath:n})})))&&void 0!==t?t:[]}));s&&A(e)}),[s,L,W,A]);var Z=Object(o.useCallback)((function(e,n){var a="function"===typeof n?n:function(){return n};null===p||void 0===p||p(Object(l.update)(Object(U.compose)(t,e),a))}),[p]),X=Object(o.useMemo)((function(){return Object(z.isPresent)(P.documentIndex)?n.documents[P.documentIndex]:void 0}),[n.documents,P.documentIndex]),Q=Object(o.useCallback)((function(e){var t=null!==e&&void 0!==e?e:{};M((function(e){return e.documentIndex!==t.documentIndex||e.pageIndex!==t.pageIndex?t:e}))}),[]),te=Object(o.useCallback)((function(e){var t=null===P||void 0===P?void 0:P.documentIndex;Object(z.isPresent)(t)&&Z("documents[".concat(t,"]"),e)}),[null===P||void 0===P?void 0:P.documentIndex,Z]),ae=Object(z.isPresent)(P.documentIndex)?L[P.documentIndex]:void 0,re=Object(o.useMemo)((function(){if(X&&ae)return{document:X,errors:ae}}),[X,ae]),se=Object(o.useCallback)((function(e){var t=P.documentIndex;T((function(n){var a,r=X?{document:X,errors:n[t]}:void 0,c="function"===typeof e?e(r):e,o=Object(J.a)(null===c||void 0===c?void 0:c.errors,null===r||void 0===r?void 0:r.errors),i=Object(J.a)(null===c||void 0===c?void 0:c.document,null===r||void 0===r?void 0:r.document);if(o&&i)return n;var u=null===c||void 0===c?void 0:c.document;return u&&!i&&te(u),Object($.a)(t,null!==(a=null===c||void 0===c?void 0:c.errors)&&void 0!==a?a:[],n)}))}),[X,P.documentIndex,te]),le=Object(o.useCallback)((function(e,t){for(var a=0;a<n.documents.length;a++)for(var r=n.documents[a],c=0;c<r.pages.length;c++){var o=r.pages[c];if(o.fileIndex===e&&o.filePageNumber===t)return{documentIndex:a,documentOrder:c}}}),[n.documents]),de=Object(o.useCallback)((function(e,t){var a=Ie(e,y),r=function(e,t){var n,a=Object(N.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("loaded"===r.status)for(var c=r.pages,o=0;o<c.length;o++)if(c[o].pageIndex===e)return r.pageStates[o]}}catch(i){a.e(i)}finally{a.f()}}(e,y);if(a&&r){var c=le(a.fileIndex,a.filePageNumber);if(c||t){var o=Object(q.a)(n.documents,(function(e){c&&e[c.documentIndex].pages.splice(c.documentOrder,1),t&&e[t.documentIndex].pages.splice(t.documentOrder,0,{fileIndex:a.fileIndex,filePageNumber:a.filePageNumber,rotate:r.rotate})}));Z("documents",o)}}}),[n.documents,y,le,Z]),be=Object(o.useCallback)((function(e){return Ie(e,y)}),[y]),je=Object(o.useCallback)((function(e){if(Object(z.isPresent)(n.documents[e])){var t=Object(a.a)(n.documents);t.splice(e,1),setTimeout((function(){return Z("documents",t)}),0),T((function(t){return Object(K.a)(e,1,t)})),M((function(t){return t.documentIndex===e?{}:t}))}}),[n.documents,Z]),pe=Object(o.useCallback)((function(e){var t=n.documents.length,r=Object(a.a)(n.documents);if(T((function(e){return[].concat(Object(a.a)(e),[[]])})),e.pages.length>0){var c=e.pages.map((function(e){return le(e.fileIndex,e.filePageNumber)})).filter(z.isPresent);c.length>0&&(c=Object(G.a)([Object(Y.a)((function(e){return e.documentIndex})),Object(Y.a)((function(e){return e.documentOrder}))],c),r=Object(q.a)(r,(function(e){var t,n=Object(N.a)(c);try{for(n.s();!(t=n.n()).done;){var a=t.value;e[a.documentIndex].pages.splice(a.documentOrder,1)}}catch(r){n.e(r)}finally{n.f()}})))}return r.push(e),Z("documents",r),t}),[n.documents,le,Z]),ge=Object(o.useCallback)((function(e,t){var r=Object(a.a)(n.documents),c=r[e].schemaId;if(t.pages.length>0){var o=t.pages.map((function(e){return le(e.fileIndex,e.filePageNumber)})).filter(z.isPresent).filter((function(t){return t.documentIndex!==e}));o.length>0&&(o=Object(G.a)([Object(Y.a)((function(e){return e.documentIndex})),Object(Y.a)((function(e){return e.documentOrder}))],o),r=Object(q.a)(r,(function(e){var t,n=Object(N.a)(o);try{for(n.s();!(t=n.n()).done;){var a=t.value;e[a.documentIndex].pages.splice(a.documentOrder,1)}}catch(r){n.e(r)}finally{n.f()}})))}if(r[e]=t,Z("documents",r),c!==t.schemaId){var i=null===m||void 0===m?void 0:m.find((function(e){return e.$id===t.schemaId})),u=Me(t,i);T((function(t){return Object($.a)(e,u,t)}))}return e}),[n.documents,m,le,Z]),xe=Object(o.useCallback)((function(e){return n.documents[e]}),[n.documents]),ye=Object(o.useState)({}),ke=Object(f.a)(ye,2),we=ke[0],Pe=ke[1],ze=Object(o.useCallback)((function(e){var t=we[e];if(!t){var n=e.indexOf(",");if(!e.startsWith("data:")||-1===n)return e;if("image/tiff"===e.substring(5,n).split(";")[0]){var a=function(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),a=new Uint8Array(n),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return n}(e),r=new ee.a({buffer:a});t=r.toDataURL()}else t=e;Pe((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(b.a)({},e,t))}))}return t}),[we]),De=Object(o.useCallback)((function(e,t){var a=-1,r=-1;I((function(n){return Object(q.a)(n,(function(n){for(var c=n.length-1;c>=0;c--){var o=n[c];if("loaded"===o.status&&o.pageStartIndex<=e){for(var i=0;i<o.pages.length;i++){var u=o.pages[i];if(e===u.pageIndex){var s=o.pageStates[i];s.rotate=Se(s.rotate,t),a=u.fileIndex,r=u.filePageNumber;break}}break}}}))})),a>-1&&r>-1&&Z("documents",Object(q.a)(n.documents,(function(e){var n,c=null===(n=e[a])||void 0===n?void 0:n.pages[r];c&&Ne(c,t)})))}),[n.documents,I,Z]),Le=Object(o.useCallback)((function(e){I((function(t){return Object(q.a)(t,(function(t){var n,a=Object(N.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("loaded"===r.status){var c,o=Object(N.a)(r.pageStates);try{for(o.s();!(c=o.n()).done;){var i=c.value;i.rotate=Se(i.rotate,e)}}catch(u){o.e(u)}finally{o.f()}}}}catch(u){a.e(u)}finally{a.f()}}))})),Z("documents",Object(q.a)(n.documents,(function(t){var n,a=Object(N.a)(t.flatMap((function(e){return e.pages})));try{for(a.s();!(n=a.n()).done;){var r=n.value;Ne(r,e)}}catch(c){a.e(c)}finally{a.f()}})))}),[n.documents,I,Z]),Te=Object(o.useCallback)(function(){var e=Object(R.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw new Error("OcrFunction not defined");case 2:return e.next=4,H(i.moduleName,i.functionName,{image:t});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[H,i]),Ae=Object(o.useMemo)((function(){return{fileInfos:y,documents:n.documents,documentSchemas:m,unusedPages:B,loadingImages:C,documentInfos:_,currentDocumentLocation:P,setCurrentDocumentLocation:Q,currentDocument:X,updateCurrentDocument:te,updateBatch:Z,movePage:de,findByPageIndex:be,deleteDocument:je,addDocument:pe,updateDocument:ge,getDocument:xe,currentDocumentEditionState:re,setCurrentDocumentEditionState:se,canModify:s,getDisplayableDataUrl:ze,rotateImage:De,rotateAllImages:Le,getPageLocation:le,canOcr:!!i,ocrImage:Te}}),[pe,n.documents,s,X,re,P,je,_,m,y,ze,xe,le,be,se,Q,C,de,i,Te,Le,De,B,Z,te,ge]);return Object(O.jsx)(Ce.Provider,{value:Ae,children:u})},De=function(){return Object(o.useContext)(Ce)},Le=n(122),Te=n(81),Ae=n(909),Ee=n(934),Re=n(954),Ve=n(2386),Fe=n(910),Be=n(164),He=n.n(Be),_e=n(215),Ue=n.n(_e),We=n(263),Je=n.n(We),qe=n(601),$e=n.n(qe),Ke=n(602),Ge=n.n(Ke),Ye=n(42),Ze=n(2440),Xe=n(662),Qe=n(599),et=n.n(Qe),tt=n(459),nt=n.n(tt),at=n(458),rt=n.n(at),ct=n(149),ot=n(2388),it=n(2404),ut=n(2394),st=n(2393),lt=n(919),dt=n(913),bt=n(944),jt=n(1895),ft=n(204),ht=n(665),Ot=["saveAsDraft","send","dontSend"];Object.freeze(Ot);var vt,mt=n(147),pt=function e(t){var n={};if(t)for(var a=function(){var a=c[r];Array.isArray(t[a])?t[a].forEach((function(t,r){var c=n[a];Object(z.isPresent)(c)||(n[a]=c=[]),c[r]=e(t)})):"object"===typeof t[a]&&null!==t[a]?n[a]=e(t[a]):n[a]=!0},r=0,c=Object.keys(t);r<c.length;r++)a();return n},gt=["name","debounce","onChange","onBlur","helperText","error","disabled","controlValueAdapter"],xt=function(e){var t=e.name,n=e.debounce,a=e.onChange,r=e.onBlur,c=e.helperText,i=(e.error,e.disabled),u=e.controlValueAdapter,s=Object(S.a)(e,gt),l=Object(ft.d)().isSubmitting,d=Object(ft.c)({name:t}),b=Object(f.a)(d,3),h=b[0],v=b[1],m=b[2],p=v.error,g=v.touched&&!!p,x=Object(o.useState)(h.value),y=Object(f.a)(x,2),C=y[0],I=y[1],k=Object(o.useState)(),w=Object(f.a)(k,2),P=w[0],M=w[1];Object(o.useEffect)((function(){I(h.value)}),[h.value]);var N=Object(o.useCallback)((function(e){var t=e.target.value;m.setValue(u?u(t):t),null===a||void 0===a||a(e)}),[u,m,a]),D=Object(o.useCallback)((function(e){I((function(t){var n=e.target.value;return n||t})),Object(z.isPresent)(n)?(e.persist(),P&&clearTimeout(P),M(setTimeout((function(){return N(e)}),n))):N(e)}),[N,n,P]),L=Object(o.useCallback)((function(e){h.onBlur(e),null===r||void 0===r||r(e)}),[h,r]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(dt.a,Object(j.a)(Object(j.a)({},h),{},{value:null!==C&&void 0!==C?C:"",onChange:D,onBlur:L,error:g,helperText:g?p:c,disabled:null!==i&&void 0!==i?i:l},s))})},yt=n(1296),Ct=["name","controlValueAdapter","onChange","onBlur","renderInput","multiple","loading","disabled"],It=function(e){var t,n=e.name,a=e.controlValueAdapter,r=e.onChange,c=e.onBlur,i=e.renderInput,u=e.multiple,s=e.loading,l=e.disabled,d=Object(S.a)(e,Ct),b=Object(ft.d)(),h=b.isSubmitting,v=b.setFieldTouched,m=Object(ft.c)({name:n}),p=Object(f.a)(m,3),g=p[0],x=p[1],y=p[2],C=x.error,I=x.touched&&!!C,k=Object(o.useCallback)((function(e,t,n,c){var o=a?a(t):t;y.setValue(null!==o&&void 0!==o?o:void 0),null===r||void 0===r||r(e,t,n,c)}),[a,y,r]),w=Object(o.useCallback)((function(e){v(g.name),g.onBlur(e),null===c||void 0===c||c(e)}),[g,c,v]),P=Object(o.useCallback)((function(e){return i?i(Object(j.a)(Object(j.a)({},e),{},{error:I,helperText:I?C:void 0})):null}),[C,i,I]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(yt.a,Object(j.a)(Object(j.a)({},g),{},{value:null!==(t=g.value)&&void 0!==t?t:null,onChange:k,onBlur:w,renderInput:P,disabled:null!==l&&void 0!==l?l:h,loading:s||h,multiple:u},d))})},kt=Object(I.a)((function(e){return Object(k.a)({dialogPaper:{},dialogContent:{}})})),wt=function(e){var t=Object(W.a)().t,n=De().documentSchemas,a=Object(o.useMemo)((function(){var e={};if(n){var t,a=Object(N.a)(n);try{for(a.s();!(t=a.n()).done;){var r,c=t.value;c.$id&&(e[c.$id]={label:null!==(r=c.title)&&void 0!==r?r:c.$id,description:c.description})}}catch(o){a.e(o)}finally{a.f()}}return e}),[n]),r=Object(o.useMemo)((function(){var e=Object.keys(a);return Object(jt.a)((function(e){return a[e].label}),e)}),[a]);return Object(O.jsxs)(Ve.a,{container:!0,spacing:3,children:[Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(It,{name:"schemaId",options:r,getOptionLabel:function(e){var t;return null===(t=a[e])||void 0===t?void 0:t.label},renderInput:function(e){return Object(O.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{label:t("DocumentType"),InputLabelProps:{required:!0},required:!0,autoFocus:!0}))},fullWidth:!0})}),Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(xt,{name:"pages",label:t("Pages"),fullWidth:!0})}),Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(xt,{select:!0,name:"action",label:t("Action"),fullWidth:!0,children:Ot.map((function(e){return Object(O.jsx)(bt.a,{value:e,children:t("RecognizedDocumentAction.".concat(e))},e)}))})})]})},Pt="(\\d+(\\s*-\\s*\\d+)?)",Mt="^\\s*".concat(Pt,"(\\s*,\\s*").concat(Pt,")*\\s*$"),St=new RegExp(Mt),Nt=function(e){var t=e.open,n=e.document,r=e.availablePageIndices,c=e.onChange,i=e.onClose,u=Object(W.a)().t,s=kt(),l=De(),d=l.documentSchemas,b=l.fileInfos,j=Object(o.useMemo)((function(){var e,t=n?function(e,t){return e.map((function(e){var n=t[e.fileIndex];return"loaded"===n.status?n.pages[e.filePageNumber].pageIndex:-1}))}(n.pages,b):r;return{schemaId:null===n||void 0===n?void 0:n.schemaId,pages:we(t),action:null!==(e=null===n||void 0===n?void 0:n.action)&&void 0!==e?e:"send"}}),[r,n,b]),f=Object(o.useRef)(),h=Object(o.useMemo)((function(){return function(e,t){return ht.a().shape({schemaId:ht.b().required().test({test:function(e){return!e||!("string"!==typeof e||!t.find((function(t){return t.$id===e})))||this.createError({path:this.path,message:Ye.a.t("UnknownDocumentSchema",{schemaId:e})})}}),pages:ht.b().test({test:function(e){return!e||!("string"!==typeof e||!St.test(e))||this.createError({path:this.path,message:Ye.a.t("InvalidPageRange",{range:e})})}}),action:ht.b().required().oneOf(Object(a.a)(Ot))})}(0,null!==d&&void 0!==d?d:[])}),[r,d]),v=Object(o.useCallback)((function(){var e=f.current;e&&function(e){e.validateForm().then((function(t){Object.keys(t).length>0?e.setTouched(pt(t)):e.handleSubmit()}))}(e)}),[]),m=Object(o.useCallback)(function(){var e=Object(R.a)(E.a.mark((function e(t,a){var r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r={schemaId:t.schemaId,pages:[],data:null===n||void 0===n?void 0:n.data,action:t.action},t.pages&&(u=t.pages,o=X()(u).map((function(e){return e-1})),r.pages=Pe(o,b)),null===c||void 0===c||c(r),null===i||void 0===i||i()}finally{a.setSubmitting(!1)}case 1:case"end":return e.stop()}var u}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[null===n||void 0===n?void 0:n.data,b,c,i]),p=Object(o.useCallback)((function(){null===i||void 0===i||i()}),[i]),g=Object(o.useCallback)(function(){var e=Object(R.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===i||void 0===i||i());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]);return Object(O.jsxs)(ot.a,{open:t,onClose:g,maxWidth:"sm",fullWidth:!0,classes:{paper:s.dialogPaper},children:[Object(O.jsx)(st.a,{children:u(n?"EditingDocument":"AddingDocument")}),Object(O.jsx)(ut.a,{className:s.dialogContent,children:Object(O.jsx)(mt.a,{children:Object(O.jsx)(ft.b,{innerRef:function(e){return f.current=e},initialValues:j,onSubmit:m,validationSchema:h,validateOnChange:!0,validateOnBlur:!0,children:Object(O.jsx)(ft.a,{autoComplete:"off",children:Object(O.jsx)(wt,{availablePageIndices:r})})})})}),Object(O.jsxs)(it.a,{children:[Object(O.jsx)(lt.a,{onClick:v,color:"primary",children:u("Accept")}),Object(O.jsx)(lt.a,{onClick:p,color:"primary",children:u("Cancel")})]})]})},zt=n(2383),Dt=function(e){return Object(O.jsxs)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(O.jsx)("path",{d:"M808.3 950h-725C42.9 950 10 917.1 10 876.7V171.6c0-40.4 32.9-73.3 73.3-73.3h502.1c18.6 0 33.6 15.1 33.6 33.6 0 18.6-15.1 33.6-33.6 33.6H83.3c-3.4 0-6.1 2.7-6.1 6.1v705.1c0 3.4 2.7 6.1 6.1 6.1h724.9c3.4 0 6.1-2.7 6.1-6.1V492c0-18.6 15-33.6 33.6-33.6s33.6 15.1 33.6 33.6v384.7c.1 40.4-32.8 73.3-73.2 73.3z"}),Object(O.jsx)("path",{d:"M307.3 781.2c-16.1 0-31.1-8.1-40.1-21.7-8.9-13.5-10.5-30.4-4.1-45.3l83.4-196.8 431-431C801 62.9 832.3 50 865.5 50s64.5 13 88 36.5c48.5 48.6 48.5 127.5 0 176.1l-431 431-196.3 83.8c-6 2.5-12.4 3.8-18.9 3.8zm96-225.5-59.8 141.1 140.8-60.1L906 215c22.3-22.3 22.3-58.7 0-81-10.8-10.8-25.2-16.8-40.5-16.8s-29.7 6-40.5 16.8L403.3 555.7z"}),Object(O.jsx)("path",{d:"M398.4 502.3 530 633.8l-47.5 47.5-131.6-131.5 47.5-47.5zM800.2 100.5 931.8 232l-47.5 47.5L752.7 148l47.5-47.5z"})]}))},Lt=Object(I.a)((function(e){return Object(k.a)({toolbar:{minHeight:"48px",paddingLeft:0,borderBottom:"solid 2px ".concat(e.palette.divider)},tree:{"& .rstcustom__collapseButton":{color:"dark"===e.palette.type?"white":void 0,backgroundImage:void 0},"& .rstcustom__expandButton":{color:"dark"===e.palette.type?"white":void 0,backgroundImage:void 0},"& .rstcustom__collapseButton:focus, & .rst__expandButton:focus":{outline:"initial"},"& .rstcustom__highlight":{backgroundColor:"dark"===e.palette.type?rt.a[700]:void 0}},node:{"& .rstcustom__rowContents":{cursor:"pointer",backgroundColor:e.palette.background.default,minWidth:Math.max(Oe.height,Oe.width,120)+30,justifyContent:"center",paddingLeft:30},"& .rstcustom__moveHandle":{backgroundColor:"dark"===e.palette.type?rt.a[700]:void 0}},selectedNode:{"& .rstcustom__rowContents":{backgroundColor:e.palette.action.selected}},actionIcon:{marginLeft:5,verticalAlign:"bottom"},sendActionIcon:{marginLeft:5,color:nt.a[500],verticalAlign:"bottom"},document:{display:"block",wordWrap:"break-word",width:"175px",maxHeight:"40px",overflow:"hidden",whiteSpace:"normal"},documentWithErrors:{textDecoration:"underline wavy ".concat(e.palette.error.main)},documentTitle:{display:"flex"}})})),Tt=function(e){return!!e&&Object(z.isPresent)(e.documentIndex)&&!Object(z.isPresent)(e.pageIndex)},At=function(e){return!!e&&!Object(z.isPresent)(e.documentIndex)&&!Object(z.isPresent)(e.pageIndex)},Et=function(e){return!!e&&Object(z.isPresent)(e.pageIndex)},Rt=function(e){var t=e.node;return Et(t)?"p-".concat(t.pageIndex):Tt(t)?"d-".concat(t.documentIndex):"o"},Vt=function(e){return!Et(e)},Ft=function(e){return Et(e.node)},Bt=function(e){var t=e.node,n=e.nextParent,a=t;return!!n&&(!!Object(z.isPresent)(a.documentIndex)||!At(n))},Ht=function(){var e=De(),t=e.documentSchemas,n=e.fileInfos,r=e.documentInfos,c=e.canModify,i=e.setCurrentDocumentLocation,u=e.getPageLocation,s=Object(o.useMemo)((function(){return[]}),[]),l=Object(o.useState)(s),d=Object(f.a)(l,2),b=d[0],h=d[1];return Object(o.useEffect)((function(){h((function(e){var o=c?function(e,t,n,r){var c=[],o=[];e.forEach((function(e,n){"loaded"===e.status&&e.pages.forEach((function(a,r){var i=Ye.a.t("PageN",{index:a.pageIndex+1});if(e.thumbnails){var u=e.thumbnails[r],s=e.pageStates[r].rotate,l=Object(z.isPresent)(s)?{transform:"rotate(".concat(s,"deg)")}:void 0;i=Object(O.jsxs)("div",{style:{height:"100%"},children:[Object(O.jsx)("img",{src:u,alt:" ",style:Object(j.a)(Object(j.a)({},l),{},{top:"0px",left:"30px",position:"absolute",height:"100%"})}),Object(O.jsx)("div",{style:{position:"absolute",bottom:"8px",right:"8px"},children:i})]})}var d=t(n,r),b={title:i,pageIndex:a.pageIndex};if(Object(z.isPresent)(d)){b.documentIndex=d.documentIndex;var f=o[d.documentIndex];f||(o[d.documentIndex]=f=[]),f[d.documentOrder]=b}else c.push(b)}))}));var i=n.map((function(e,t){var n,a=null!==(n=o[t])&&void 0!==n?n:[],c=a.length,i=Ye.a.t("DocumentN",{index:t+1,count:c}),u=e.schemaId;if(u){var s=null===r||void 0===r?void 0:r.find((function(e){return e.$id===u}));if(s){var l=s.title;if(!l){var d=u.lastIndexOf("/");(l=u.substring(d+1)).toLocaleLowerCase().endsWith(".json")&&(l=l.substring(0,l.length-5))}i=Ye.a.t("NamedDocumentN",{title:l,index:t+1,count:c})}}return{documentIndex:t,title:i,action:e.action,errors:e.errors,children:a}}));return[].concat(Object(a.a)(i),[{title:Ye.a.t("OrphanPages",{count:c.length}),children:c}])}(n,u,r,t):function(e,t){return e.map((function(n,a){var r=Ye.a.t("DocumentN",{index:a+1}),c=e[a].schemaId;if(c){var o=null===t||void 0===t?void 0:t.find((function(e){return e.$id===c}));if(o){var i=o.title;if(!i){var u=c.lastIndexOf("/");(i=c.substring(u+1)).toLocaleLowerCase().endsWith(".json")&&(i=i.substring(0,i.length-5))}r="".concat(a+1," - ").concat(i)}}return{documentIndex:a,title:r,action:e[a].action,errors:e[a].errors,children:[]}}))}(r,t);if(e.length>0){for(var i=0;i<Math.min(o.length,e.length-1);i++)o[i].expanded=e[i].expanded;o[o.length-1].expanded=e[e.length-1].expanded}return s===e&&o.length>0&&(o[0].expanded=!0),o}))}),[c,r,t,n,u,s,i]),{treeData:b,setTreeData:h}},_t=function(e){var t=e.node,n=Object(W.a)().t,a=Lt(),r="send"===t.action?Object(O.jsx)($e.a,{className:a.sendActionIcon}):"dontSend"===t.action?Object(O.jsx)(Ge.a,{className:a.actionIcon,color:"error"}):Object(O.jsx)(Dt,{className:a.actionIcon});return Object(O.jsx)(Ee.a,{title:n("RecognizedDocumentAction.".concat(t.action)),children:Object(O.jsx)("span",{children:r})})},Ut=function(e){var t=e.node,n=e.canModify,a=Lt(),r="send"===t.action&&t.errors.length>0&&n?Object(Te.default)(a.document,a.documentWithErrors):a.document;return Object(O.jsxs)(Ve.a,{className:a.documentTitle,alignItems:"center",justifyContent:"center",alignContent:"stretch",children:[Object(O.jsx)(Fe.a,{noWrap:!1,variant:"body2",className:r,children:t.title}),Object(O.jsx)(_t,{node:t})]})},Wt=function(e){var t=e.description,n=e.onClick,a=e.icon;return Object(O.jsx)(Ee.a,{title:t,children:Object(O.jsx)(Ae.a,{size:"small",onClick:n,children:a})})},Jt=function(e){var t=e.node,n=e.unusedPageIndices,r=Object(W.a)().t,c=Object(o.useState)(),i=Object(f.a)(c,2),u=i[0],s=i[1],l=De(),d=l.updateDocument,b=l.getDocument,j=l.fileInfos,h=Object(o.useMemo)((function(){var e=n;if(Object(z.isPresent)(u)){var t=b(u).pages.map((function(e){var t=j[e.fileIndex];if("loaded"===t.status)return t.pages[e.filePageNumber].pageIndex})).filter(z.isPresent);t.push.apply(t,Object(a.a)(e)),e=t.sort()}return e}),[u,j,b,n]),v=Object(o.useCallback)((function(e,t){s(t)}),[]),m=Object(o.useCallback)((function(e){b(u).schemaId!==e.schemaId&&(e.data={}),d(u,e)}),[u,b,d]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Wt,{description:r("Edit"),icon:Object(O.jsx)(Je.a,{}),onClick:function(e){return v(e,t.documentIndex)}}),Object(z.isPresent)(u)&&Object(O.jsx)(Nt,{open:Object(z.isPresent)(u),document:b(u),availablePageIndices:h,onChange:m,onClose:function(){return s(void 0)}})]})},qt=function(e){var t=e.node,n=Object(W.a)().t,a=Object(ct.c)(),r=De().deleteDocument,c=Object(o.useCallback)(function(){var e=Object(R.a)(E.a.mark((function e(t,c,o){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,a({description:n("ConfirmDeleteBatchDocument",{name:o})});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[a,r,n]);return Object(O.jsx)(Wt,{description:n("Delete"),icon:Object(O.jsx)(He.a,{}),onClick:function(e){return c(e,t.documentIndex,t.title)}})},$t=function(e){var t=e.unusedPageIndices,n=Object(W.a)().t,a=Object(o.useState)(!1),r=Object(f.a)(a,2),c=r[0],i=r[1],u=De(),s=u.setCurrentDocumentLocation,l=u.addDocument,d=Object(o.useCallback)((function(){i(!0)}),[]),b=Object(o.useCallback)((function(e){e.data={};var t=l(e);s({documentIndex:t})}),[l,s]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ee.a,{title:n("AddDocument"),children:Object(O.jsx)(Ae.a,{onClick:d,size:"small",children:Object(O.jsx)(Ue.a,{})})}),c&&Object(O.jsx)(Nt,{open:c,availablePageIndices:t,onChange:b,onClose:function(){return i(!1)}})]})},Kt=function(e){var t=e.node;return Et(t)&&"string"!==typeof t.title?Math.max(Oe.height,Oe.width)+62:62},Gt=function(e){var t=Lt(),n=De(),a=n.fileInfos,r=n.loadingImages,c=n.movePage,i=n.currentDocumentLocation,u=n.setCurrentDocumentLocation,s=n.canModify,l=n.unusedPages,d=Ht(),f=d.treeData,h=d.setTreeData;Object(o.useEffect)((function(){if(!r&&s&&i&&Object(z.isPresent)(i.documentIndex)&&!Object(z.isPresent)(i.pageIndex)){var e,t=Object(N.a)(f);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(Tt(n)&&n.documentIndex===i.documentIndex&&Array.isArray(n.children)){var a=n.children[0];Et(a)&&u(Object(j.a)(Object(j.a)({},i),{},{pageIndex:a.pageIndex}))}}}catch(c){t.e(c)}finally{t.f()}}}),[s,i,r,u,f]);var v=Object(o.useMemo)((function(){return l.map((function(e){var t=a[e.fileIndex];if("loaded"===t.status)return t.pages[e.filePageNumber].pageIndex})).filter(z.isPresent)}),[a,l]),m=Object(o.useCallback)((function(e){!function(e){var t=e[e.length-1],n=t.children;At(t)&&Array.isArray(n)&&n.sort(Object(Ze.a)((function(e,t){return e.pageIndex<t.pageIndex})))}(e),h(e)}),[h]),p=Object(o.useCallback)((function(e){var t=e.node,n=e.nextParentNode,a=e.prevTreeIndex,r=e.nextTreeIndex;if(n&&a!==r){var o=t,i=n;if(!At(i)||Object(z.isPresent)(o.documentIndex))if(Tt(i)){var u=i.documentIndex,s=i.children.findIndex((function(e){return e.pageIndex===o.pageIndex}));c(o.pageIndex,{documentIndex:u,documentOrder:s})}else At(i)&&c(o.pageIndex)}}),[c]),g=Object(o.useCallback)((function(e,t){var n,a,r=e.target;if(!0!==(null===(n=r.classList)||void 0===n?void 0:n.contains("rst__collapseButton"))&&!0!==(null===(a=r.classList)||void 0===a?void 0:a.contains("rst__expandButton"))){var c=t,o=c.pageIndex;Object(z.isPresent)(o)||!Array.isArray(c.children)||Object(oe.a)(c.children)||(o=c.children[0].pageIndex),u({documentIndex:c.documentIndex,pageIndex:o})}}),[u]),x=Object(o.useCallback)((function(e){var n=e.node,a=i&&n.documentIndex===i.documentIndex&&(Tt(n)||n.pageIndex===i.pageIndex),r={onClick:function(t){return g(t,e.node)},className:Object(Te.default)(t.node,Object(b.a)({},t.selectedNode,a))};if(Tt(n)){if(s){var c=Object(O.jsx)(Jt,{node:n,unusedPageIndices:v}),o=Object(O.jsx)(qt,{node:n});r.buttons=[c,o]}r.title=function(){return Object(O.jsx)(Ut,{node:n,canModify:s})}}return r}),[s,t.node,t.selectedNode,i,g,v]);return r?null:Object(O.jsxs)(O.Fragment,{children:[s&&Object(O.jsx)(Re.a,{className:t.toolbar,children:Object(O.jsx)($t,{unusedPageIndices:v})}),Object(O.jsx)(Xe.a,{treeData:f,onChange:m,onMoveNode:p,getNodeKey:Rt,canDrag:Ft,canDrop:Bt,canNodeHaveChildren:Vt,isVirtualized:!1,generateNodeProps:x,className:t.tree,rowHeight:Kt,theme:et.a})]})},Yt=n(915),Zt=n(918),Xt=n(2398),Qt=n(334),en=n(49),tn=function(e){return Object(O.jsx)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 512 512"},e),{},{children:Object(O.jsx)("path",{d:"M9.5 1.4C2.3 4.6 0 9.7 0 22.6V32h32V0h-9.7c-5.9.1-11 .6-12.8 1.4zM62 16v16h29V0H62v16zM121 16v16h29V0h-29v16zM180 16v16h29V0h-29v16zM239 16v16h29V0h-29v16zM298 16v16h29V0h-29v16zM357 16v16h29V0h-29v16zM416 15.9V32h32.2l-.4-10.9c-.2-9.2-.6-11.4-2.4-13.7-4.4-6-6.7-6.9-18.5-7.2L416-.2v16.1zM0 76.5V91h32V62H0v14.5zM416 76.5V91h32V62h-32v14.5zM0 135.5V150h32v-29H0v14.5zM416 135.5V150h32v-29h-32v14.5zM0 194.5V209h32v-29H0v14.5zM416 194.5V209h32v-29h-32v14.5zM297.5 225.4c-4.1 1.8-8.3 6.9-9 10.9-.3 1.8-.4 62.2-.3 134.4.3 130.7.3 131.2 2.4 133.9 4.9 6.7 13 9.1 19.5 6 1.9-.9 20.5-15.3 41.4-32.1l38-30.4 54.8-.1c59.9 0 58.9.1 64-5.9 3-3.7 4.2-8.5 3.2-13.9-.6-3.3-11.6-14.6-99.3-102.6-57.7-57.7-100-99.4-101.9-100.2-4-1.7-8.9-1.7-12.8 0zM417.7 416l-39.4.5-3.9 3c-2.1 1.6-15 11.8-28.6 22.7-13.6 10.9-25 19.8-25.3 19.8-.3 0-.5-41.3-.5-91.7v-91.8l68.5 68.5 68.5 68.5-39.3.5zM0 253.5V268h32v-29H0v14.5zM416 253.5V268h32v-29h-32v14.5zM0 312.5V327h32v-29H0v14.5zM0 371.5V386h32v-29H0v14.5zM.2 426.9c.3 11.8 1.2 14.1 7.2 18.5 2.3 1.8 4.5 2.2 13.7 2.4l10.9.4V416H-.2l.4 10.9zM62 432v16h29v-32H62v16zM121 432v16h29v-32h-29v16zM180 432v16h29v-32h-29v16z"})}))},nn=n(603),an=n.n(nn),rn=function(){throw new Error("You forgot to wrap your component in <ImageCaptureContextProvider>.")},cn={captureAvailable:!1,captureImage:rn,setCurrentCropper:rn},on=Object(o.createContext)(cn),un=function(e){var t=e.outputImageFormat,n=e.children,a=Object(o.useState)(),r=Object(f.a)(a,2),c=r[0],i=r[1],u=Object(o.useCallback)((function(e){if(c){var n=function(e,t){if("image/tiff"===t){var n=e.getContext("2d").getImageData(0,0,e.width,e.height),a=new Uint8Array(n.data.buffer),r=an.a.encodeImage(a,n.width,n.height);return ge(r,"image/tiff")}return e.toDataURL()}(c.getCroppedCanvas(),null!==e&&void 0!==e?e:t);return c.clear(),i(void 0),n}}),[c,t]),s=Object(o.useMemo)((function(){return{captureAvailable:!!c,captureImage:u,setCurrentCropper:i}}),[u,c]);return Object(O.jsx)(on.Provider,{value:s,children:n})},sn=function(){return Object(o.useContext)(on)},ln=Object(I.a)((function(e){return Object(k.a)({image:{marginTop:e.spacing(2),width:"max-content",maxWidth:"100%"},imagePlaceholder:{marginTop:e.spacing(6),height:50},imageActions:{marginLeft:-10}})})),dn=Object(d.withJsonFormsControlProps)((function(e){var t=e.uischema,n=e.config,a=e.id,r=e.data,c=e.visible,i=e.errors,s=e.label,d=e.required,b=e.description,j=e.path,f=e.handleChange,h=Object(W.a)().t,v=ln(),m=0===i.length,p=Object(Qt.merge)({},n,t.options),g=!Object(l.isDescriptionHidden)(c,null!==b&&void 0!==b?b:"",!1,p.showUnfocusedDescription),x=De().getDisplayableDataUrl,y=sn(),C=y.captureAvailable,I=y.captureImage,k=Object(o.useCallback)((function(){if(C){var e=I();f(j,e)}}),[C,I,f,j]),w=Object(o.useCallback)((function(){f(j,void 0)}),[f,j]),P=g?b:m?null:i,M=g&&!m?i:null;return Object(O.jsx)(u.a,{xsUp:!c,children:Object(O.jsxs)(Yt.a,{fullWidth:!p.trim,id:a,children:[Object(O.jsx)(Xt.a,{htmlFor:a+"-input",error:!m,shrink:"string"===typeof r,children:Object(l.computeLabel)(Object(l.isPlainLabel)(s)?s:s.default,!!d,p.hideRequiredAsterisk)}),Object(O.jsxs)("div",{children:["string"===typeof r&&Object(O.jsx)("img",{src:x(r),alt:"",className:v.image}),"string"!==typeof r&&Object(O.jsx)("img",{src:"".concat(Object(en.a)(),"images/image-placeholder.png"),alt:"placeholder",className:v.imagePlaceholder})]}),Object(O.jsxs)("div",{className:v.imageActions,children:[Object(O.jsx)(Ee.a,{title:h("CaptureCurrentSelection"),children:Object(O.jsx)("span",{children:Object(O.jsx)(Ae.a,{onClick:k,disabled:!C,children:Object(O.jsx)(tn,{})})})}),Object(O.jsx)(Ee.a,{title:h("Delete"),children:Object(O.jsx)(Ae.a,{onClick:w,children:Object(O.jsx)(He.a,{})})})]}),Object(O.jsx)(Zt.a,{error:!m&&!g,children:P}),Object(O.jsx)(Zt.a,{error:!m,children:M})]})})})),bn=Object(l.rankWith)(4,Object(l.and)(l.isControl,(function(e,t){var n=l.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"image"===n.format}))),jn=n(664),fn=n(110),hn=n.n(fn),On=n(146),vn=n(914),mn=n(933),pn=n(447),gn=n.n(pn),xn=(vt=vn.a,Object(jn.a)((function(e){return Object(O.jsx)(vt,Object(j.a)({},e))}))),yn=i.a.memo((function(e){var t,n,a,r,c=Object(o.useState)(!1),i=Object(f.a)(c,2),u=i[0],s=i[1],l=e.data,d=e.config,b=e.className,j=e.id,h=e.enabled,v=e.uischema,m=e.isValid,p=e.path,g=e.handleChange,x=e.schema,y=e.muiInputProps,C=x.maxLength,I=hn()({},d,v.options);r=I.restrict?{maxLength:C}:{};var k=Object(o.useMemo)((function(){return x.patternMask}),[x]);r=hn()(r,y),I.trim&&void 0!==C&&(r.size=C);var w=Object(On.a)(),P=(null===(t=w.jsonforms)||void 0===t||null===(n=t.input)||void 0===n||null===(a=n.delete)||void 0===a?void 0:a.background)||w.palette.background.default,M=Object(o.useCallback)((function(e){g(p,e)}),[g,p]);return Object(O.jsx)(xn,{mask:k,onAccept:M,type:"text",className:b,id:j,value:l,disabled:!h,autoFocus:I.focus,multiline:I.multi,fullWidth:!I.trim||void 0===C,inputProps:r,error:!m,onPointerEnter:function(){return s(!0)},onPointerLeave:function(){return s(!1)},endAdornment:Object(O.jsx)(mn.a,{position:"end",style:{display:u&&h&&void 0!==l?"flex":"none",position:"absolute",right:0},children:Object(O.jsx)(Ae.a,{"aria-label":"Clear input field",onClick:function(){return g(p,void 0)},children:Object(O.jsx)(gn.a,{style:{background:P,borderRadius:"50%"}})})})})}),d.areEqual),Cn=Object(d.withJsonFormsControlProps)((function(e){return Object(O.jsx)(r.MaterialInputControl,Object(j.a)(Object(j.a)({},e),{},{input:yn}))})),In=Object(l.rankWith)(4,Object(l.and)(l.isControl,(function(e,t){var n=l.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"string"===typeof n.patternMask}))),kn=Object(I.a)((function(e){return Object(k.a)({content:{maxHeight:"100%",width:"99%",overflowY:"auto",overflowX:"visible"}})})),wn={restrict:!0},Pn=function(e){var t,n=De(),r=n.documentSchemas,c=n.currentDocument,i=n.currentDocumentEditionState,u=n.setCurrentDocumentEditionState,s=n.canModify,l=n.updateCurrentDocument,b=kn(),f=Object(W.a)().t,h=Object(o.useRef)(null===i||void 0===i?void 0:i.document.data),v=Object(o.useRef)(!1);Object(o.useMemo)((function(){h.current=null===i||void 0===i?void 0:i.document.data}),[null===i||void 0===i?void 0:i.document.data]);var m=Object(o.useMemo)((function(){var e={};if(r){var t,n=Object(N.a)(r);try{for(n.s();!(t=n.n()).done;){var a,c=t.value;c.$id&&(e[c.$id]={label:null!==(a=c.title)&&void 0!==a?a:c.$id,description:c.description})}}catch(o){n.e(o)}finally{n.f()}}return e}),[r]),p=Object(o.useMemo)((function(){var e=Object.keys(m);return Object(jt.a)((function(e){return m[e].label}),e)}),[m]),g=Object(o.useMemo)((function(){return[].concat(Object(a.a)(tr),[{tester:bn,renderer:dn},{tester:In,renderer:Cn}])}),[]),x=Object(o.useCallback)((function(e){v.current=!!e.errors&&e.errors.length>0;var t=v.current?Object(ve.a)(e.errors.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{instancePath:e.dataPath})}))):void 0;v.current||h.current===e.data||(h.current=e.data,v.current=!1),u((function(n){var a,r;return Object(J.a)(e.data,null===n||void 0===n?void 0:n.document)&&Object(J.a)(t,null===n||void 0===n?void 0:n.errors)?n:{document:Object(j.a)(Object(j.a)({},n.document),{},{data:null!==(a=e.data)&&void 0!==a?a:null===n||void 0===n||null===(r=n.document)||void 0===r?void 0:r.data}),errors:t}}))}),[u]),y=Object(o.useCallback)((function(e){var t=Object(j.a)(Object(j.a)({},c),{},{action:e.target.value});l(t)}),[c,l]),C=Object(o.useCallback)((function(e,t){if(t&&(null===c||void 0===c?void 0:c.schemaId)!==t){var n=Object(j.a)(Object(j.a)({},c),{},{schemaId:t,data:{}});l(n)}}),[c,l]);if(!(null===i||void 0===i?void 0:i.document))return null;var I=null===r||void 0===r?void 0:r.find((function(e){return e.$id===(null===i||void 0===i?void 0:i.document.schemaId)}));return Object(O.jsxs)(Ve.a,{container:!0,spacing:1,className:b.content,children:[Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(yt.a,{value:null===c||void 0===c?void 0:c.schemaId,options:p,onChange:C,getOptionLabel:function(e){var t,n;return null!==(t=null===(n=m[e])||void 0===n?void 0:n.label)&&void 0!==t?t:""},disableClearable:!0,renderInput:function(e){return Object(O.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{label:f("DocumentType"),InputLabelProps:{required:!0},required:!0,autoFocus:!0}))},fullWidth:!0})}),Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(dt.a,{select:!0,value:null===c||void 0===c?void 0:c.action,onChange:y,label:f("Action"),fullWidth:!0,children:Ot.map((function(e){return Object(O.jsx)(bt.a,{value:e,children:f("RecognizedDocumentAction.".concat(e))},e)}))})}),Object(O.jsx)(Ve.a,{item:!0,xs:12,children:Object(O.jsx)(d.JsonForms,{data:null!==(t=null===i||void 0===i?void 0:i.document.data)&&void 0!==t?t:{},schema:I,onChange:x,renderers:g,cells:nr,ajv:pe,readonly:!s||"dontSend"===(null===i||void 0===i?void 0:i.document.action),config:wn})})]})},Mn=n(83),Sn=n(904),Nn=n(2441),zn=n(2477),Dn=n(2412),Ln=n(264),Tn=n.n(Ln),An=n(605),En=n.n(An),Rn=n(606),Vn=n.n(Rn),Fn=n(265),Bn=n.n(Fn),Hn=n(611),_n=n.n(Hn),Un=n(612),Wn=n.n(Un),Jn=n(610),qn=n.n(Jn),$n=n(609),Kn=n.n($n),Gn=n(608),Yn=n.n(Gn),Zn=n(607),Xn=n.n(Zn),Qn=n(336),ea=n.n(Qn),ta=n(385),na=n(604),aa=n.n(na),ra=n(180),ca=function(e){return Object(O.jsx)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 1000 1000"},e),{},{children:Object(O.jsx)("path",{d:"M560.8 191.3v246.9h245V315.8L990 500 805.8 684.2V558.9h-245v246.9h123.4L500 990 315.8 805.8h122.5V558.9h-245v124.4L10 500l183.3-183.3v121.5h245V191.3H318.6L500 10l181.4 181.3H560.8z"})}))},oa=function(e){return Object(O.jsxs)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(O.jsx)("path",{d:"M458.3 948.4c125.9 0 239.5-51.9 321-135.4l-37.5-40.2c-72.2 75-173.6 121.7-285.9 121.7-219.2 0-396.9-177.7-396.9-396.9S236.7 100.7 455.9 100.7c207.6 0 377.8 159.5 395.2 362.6h-96.3l117.6 196L990 463.2h-85C886.3 232.9 693.6 51.6 458.3 51.6 210.7 51.6 10 252.4 10 500c0 247.6 200.7 448.4 448.3 448.4z"}),Object(O.jsx)("path",{d:"M 402.3 395.8 c -17.6 -17.8 -41.8 -26.8 -72 -26.8 c -1.3 0 -2.7 0 -4.1 0.1 h -0.1 c -31.8 1.5 -56.7 11.1 -73.8 28.5 c -17.1 17.4 -26.8 42.9 -28.7 75.7 v 0.7 c 1.4 30.5 10 54.2 25.5 70.5 c 15.6 16.4 38.2 25.4 67.3 26.9 h 0.5 c 27.3 -0.8 49.5 -9.4 66.3 -25.6 c -1.9 25.7 -6.9 45.7 -15 59.6 c -9.5 16.3 -23.1 24.2 -41.7 24.2 H 325 c -22.4 0 -36.9 -12.4 -44.3 -37.8 c -0.9 -2.9 -3.5 -4.9 -6.5 -4.9 c -0.5 0 -1 0 -1.4 0.2 l -38.4 8.3 c -1.8 0.4 -3.4 1.5 -4.3 3 c -1 1.6 -1.3 3.5 -0.8 5.2 c 5.9 23 16.9 40.7 32.7 52.4 c 15.7 11.6 36.5 17.5 61.6 17.5 h 1.9 c 37.2 0 65.6 -13.6 84.4 -40.4 c 18.2 -26.1 27.5 -65.3 27.5 -116.5 c 0.3 -27.7 -2.5 -51.8 -8.2 -71.7 c -5.8 -20.5 -14.9 -37 -26.9 -49.1 z m -21 81.8 c -2.6 31.4 -20.1 46.8 -55 48.6 c -31.1 -1.8 -46.4 -19.3 -48.1 -55.2 c 1.7 -35.9 17.5 -53.5 49.6 -55.2 c 17.7 0.5 30.6 5.6 39.4 15.6 c 8.9 10 13.6 25.6 14.1 46.2 z M 647 409.2 c -17.9 -26.1 -44.8 -39.7 -79.9 -40.2 h -0.4 c -35 1.5 -61.9 15.4 -80.1 41.5 c -17.6 25.4 -27 62.8 -28 111.2 v 0.2 c 0.5 48.9 9.6 86.5 27.3 111.7 c 18.2 25.9 45.4 39.2 80.9 39.7 h 1.9 c 35 0 61.7 -13.2 79.4 -39.1 c 17.1 -25.1 25.8 -62.9 25.8 -112.3 v -0.1 c -0.4 -49.4 -9.5 -87.3 -26.9 -112.6 z m -30.5 114 c 0 36.5 -4.4 64.1 -13.1 81.9 c -8 16.4 -19.5 24.4 -35.1 24.4 h -2.8 c -15.6 0 -27.1 -8 -35.1 -24.4 c -8.7 -17.8 -13 -45.3 -13 -81.8 c 0 -36.9 4.4 -64.8 13.1 -82.9 c 8 -16.7 19.5 -24.8 35.1 -24.8 h 1.6 c 0.8 0 1.5 -0.1 2.3 -0.1 c 10.1 0 18.3 3.3 24.9 10 c 15.3 15.4 22.7 48.3 22.1 97.7 z M 647.5 257.5 c -28.4 0 -51.4 23 -51.4 51.5 c 0 28.4 23 51.4 51.4 51.4 s 51.5 -23 51.5 -51.4 c -0.1 -28.5 -23.1 -51.5 -51.5 -51.5 z m 0 73.4 c -12.2 0 -22 -9.9 -22 -22.1 c 0 -12.2 9.9 -22.1 22 -22.1 c 12.2 0 22.1 9.9 22.1 22.1 c -0.1 12.3 -10 22.1 -22.1 22.1 z"})]}))},ia=function(e){return Object(O.jsxs)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(O.jsx)("path",{d:"M541.7 948.4c-125.9 0-239.5-51.9-321-135.4l37.5-40.2c72.2 75 173.6 121.7 285.9 121.7 219.2 0 396.9-177.7 396.9-396.9S763.3 100.7 544.1 100.7c-207.6 0-377.8 159.5-395.2 362.6h96.3l-117.6 196L10 463.2h85C113.7 232.9 306.4 51.6 541.7 51.6 789.3 51.6 990 252.4 990 500c0 247.6-200.7 448.4-448.3 448.4z"}),Object(O.jsx)("path",{d:"M502.3 395.8c-17.6-17.8-41.8-26.8-72-26.8-1.3 0-2.7 0-4.1.1h-.1c-31.8 1.5-56.7 11.1-73.8 28.5-17.1 17.4-26.8 42.9-28.7 75.7v.7c1.4 30.5 10 54.2 25.5 70.5 15.6 16.4 38.2 25.4 67.3 26.9h.5c27.3-.8 49.5-9.4 66.3-25.6-1.9 25.7-6.9 45.7-15 59.6-9.5 16.3-23.1 24.2-41.7 24.2H425c-22.4 0-36.9-12.4-44.3-37.8-.9-2.9-3.5-4.9-6.5-4.9-.5 0-1 0-1.4.2l-38.4 8.3c-1.8.4-3.4 1.5-4.3 3-1 1.6-1.3 3.5-.8 5.2 5.9 23 16.9 40.7 32.7 52.4 15.7 11.6 36.5 17.5 61.6 17.5h1.9c37.2 0 65.6-13.6 84.4-40.4 18.2-26.1 27.5-65.3 27.5-116.5.3-27.7-2.5-51.8-8.2-71.7-5.8-20.5-14.9-37-26.9-49.1zm-21 81.8c-2.6 31.4-20.1 46.8-55 48.6-31.1-1.8-46.4-19.3-48.1-55.2 1.7-35.9 17.5-53.5 49.6-55.2 17.7.5 30.6 5.6 39.4 15.6 8.9 10 13.6 25.6 14.1 46.2zM747 409.2c-17.9-26.1-44.8-39.7-79.9-40.2h-.4c-35 1.5-61.9 15.4-80.1 41.5-17.6 25.4-27 62.8-28 111.2v.2c.5 48.9 9.6 86.5 27.3 111.7 18.2 25.9 45.4 39.2 80.9 39.7h1.9c35 0 61.7-13.2 79.4-39.1 17.1-25.1 25.8-62.9 25.8-112.3v-.1c-.4-49.4-9.5-87.3-26.9-112.6zm-30.5 114c0 36.5-4.4 64.1-13.1 81.9-8 16.4-19.5 24.4-35.1 24.4h-2.8c-15.6 0-27.1-8-35.1-24.4-8.7-17.8-13-45.3-13-81.8 0-36.9 4.4-64.8 13.1-82.9 8-16.7 19.5-24.8 35.1-24.8h1.6c.8 0 1.5-.1 2.3-.1 10.1 0 18.3 3.3 24.9 10 15.3 15.4 22.7 48.3 22.1 97.7zM747.5 257.5c-28.4 0-51.4 23-51.4 51.5 0 28.4 23 51.4 51.4 51.4s51.5-23 51.5-51.4c-.1-28.5-23.1-51.5-51.5-51.5zm0 73.4c-12.2 0-22-9.9-22-22.1 0-12.2 9.9-22.1 22-22.1 12.2 0 22.1 9.9 22.1 22.1-.1 12.3-10 22.1-22.1 22.1z"})]}))},ua=function(e){return Object(O.jsx)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 100 100"},e),{},{children:Object(O.jsx)("switch",{children:Object(O.jsxs)("g",{children:[Object(O.jsx)("path",{d:"M5273.1 2400.1v-2c0-2.8-5-4-9.7-4s-9.7 1.3-9.7 4v2c0 1.8.7 3.6 2 4.9l5 4.9c.3.3.4.6.4 1v6.4c0 .4.2.7.6.8l2.9.9c.5.1 1-.2 1-.8v-7.2c0-.4.2-.7.4-1l5.1-5c1.3-1.3 2-3.1 2-4.9zm-9.7-.1c-4.8 0-7.4-1.3-7.5-1.8.1-.5 2.7-1.8 7.5-1.8s7.3 1.3 7.5 1.8c-.2.5-2.7 1.8-7.5 1.8z"}),Object(O.jsx)("path",{d:"M5268.4 2410.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1s-.4-1-1-1h-4.3zM5272.7 2413.7h-4.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1s-.4-1-1-1zM5272.7 2417h-4.3c-.6 0-1 .4-1 1s.4 1 1 1h4.3c.6 0 1-.4 1-1 0-.5-.4-1-1-1z"}),Object(O.jsx)("g",{children:Object(O.jsx)("path",{d:"M45.2 45.5H32.4v-5.2c0-.7-.4-1.3-1-1.5-.6-.3-1.3-.2-1.8.3l-10.7 9.7c-.4.3-.6.8-.6 1.2 0 .4.2.9.5 1.2l.1.1L29.6 61c.5.4 1.2.6 1.8.3.6-.3 1-.9 1-1.5v-5.2h12.8c.8 0 1.4-.6 1.4-1.4V47c0-.9-.7-1.5-1.4-1.5zM70.4 39.1c-.5-.4-1.2-.6-1.8-.3-.6.3-1 .9-1 1.5v5.2H54.8c-.8 0-1.4.6-1.4 1.4v6.2c0 .8.6 1.4 1.4 1.4h12.8v5.2c0 .5.2.9.5 1.2.1.1.3.3.5.3.6.3 1.3.2 1.8-.3l10.7-9.7c.4-.3.6-.8.6-1.2 0-.5-.2-.9-.6-1.2l-10.7-9.7zM10.9 28.7H4.2c-.9 0-1.7.8-1.7 1.7v39.2c0 .9.8 1.7 1.7 1.7h6.7c.9 0 1.7-.8 1.7-1.7V30.4c0-.9-.8-1.7-1.7-1.7zM95.8 28.7h-6.7c-.9 0-1.7.8-1.7 1.7v39.2c0 .9.8 1.7 1.7 1.7h6.7c.9 0 1.7-.8 1.7-1.7V30.4c0-.9-.8-1.7-1.7-1.7z"})})]})})}))},sa=function(e){return Object(O.jsx)(zt.a,Object(j.a)(Object(j.a)({viewBox:"0 0 24 24"},e),{},{children:Object(O.jsx)("path",{d:"M2 2v5h2V4h3V2H2zm15 0v2h3v3h2V2h-5zm-5.844 4.031L7 17h1.969l.906-2.563h4.25L15 17h2L12.844 6.031h-1.688zM12 8.375l1.594 4.531h-3.188L12 8.375zM2 17v5h5v-2H4v-3H2zm18 0v3h-3v2h5v-5h-2z"})}))},la=n(154),da=Object(I.a)((function(e){return Object(k.a)({toolbar:{minHeight:"48px",paddingLeft:0,borderBottom:"solid 2px ".concat(e.palette.divider)},listContainer:{width:"100%",height:"calc(100% - 48px)"},cropper:{height:"100%",width:"100%"},cropperDisabled:{"& .cropper-crop-box":{display:"none"},"& .cropper-drag-box":{opacity:0}},imageItem:{width:"100%",position:"relative"},image:{maxWidth:"100%",marginTop:10,marginBottom:10},imagePlaceholder:{marginTop:10,height:50},imageActions:{marginLeft:-10},grow:{flexGrow:1},textField:{width:"4ch"},totalPages:{display:"inline-block",marginTop:6},fixHeight:{height:24},toolbarButtonContainer:{position:"relative"},ellipsis:{position:"absolute",fontSize:12,right:0,bottom:0,borderRadius:"50%",backgroundColor:e.palette.background.default,border:"solid 1px ".concat(e.palette.action.active)}})})),ba=Object(Mn.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(zn.a),ja=function(e){var t=e.tooltip,n=e.onClick,a=e.showEllipsis,r=e.disabled,c=e.children,o=da();return Object(O.jsx)(Ee.a,{title:t,children:Object(O.jsxs)("div",{className:o.toolbarButtonContainer,children:[Object(O.jsx)(Ae.a,{onClick:n,size:"small",disabled:r,children:c}),a&&Object(O.jsx)(ea.a,{className:o.ellipsis})]})})},fa="move",ha=function(e){var t=Object(W.a)().t,n=De(),a=n.canModify,r=n.rotateImage,c=n.rotateAllImages,i=n.canOcr,u=n.ocrImage,s=da(),l=Object(ta.a)({}),d=l.width,b=l.height,j=l.ref,h=Object(o.useRef)(null),v=function(){var e=De(),t=e.currentDocument,n=e.currentDocumentLocation,a=e.setCurrentDocumentLocation,r=e.fileInfos,c=e.unusedPages,i=Object(o.useMemo)((function(){var e=[],n=[];if(t){var a,o=Object(N.a)(t.pages);try{for(o.s();!(a=o.n()).done;){var i=a.value,u=r[i.fileIndex];"loaded"===u.status&&(e.push(u.pages[i.filePageNumber]),n.push(u.pageStates[i.filePageNumber]))}}catch(s){o.e(s)}finally{o.f()}}else r.forEach((function(t,a){"loaded"===t.status&&t.pageStates.forEach((function(r,o){c.findIndex((function(e){return e.fileIndex===a&&e.filePageNumber===o}))>-1&&(n.push(r),e.push(t.pages[o]))}))}));return[e,n]}),[t,r,c]),u=Object(f.a)(i,2),s=u[0],l=u[1],d=Object(o.useMemo)((function(){var e=null===n||void 0===n?void 0:n.pageIndex;if(!Object(z.isPresent)(e))return[void 0,void 0];var t=s.findIndex((function(t){return t.pageIndex===e}));return[null===n||void 0===n?void 0:n.documentIndex,t>=0?t:void 0]}),[null===n||void 0===n?void 0:n.documentIndex,null===n||void 0===n?void 0:n.pageIndex,s]),b=Object(f.a)(d,2),j=b[0],h=b[1],O=Object(o.useCallback)((function(){a({documentIndex:j,pageIndex:s[0].pageIndex})}),[j,s,a]),v=Object(o.useCallback)((function(){Object(z.isPresent)(h)&&0!==h&&a({documentIndex:j,pageIndex:s[h-1].pageIndex})}),[j,h,s,a]),m=Object(o.useCallback)((function(){!Object(z.isPresent)(h)||h+1>=s.length||a({documentIndex:j,pageIndex:s[h+1].pageIndex})}),[j,h,s,a]),p=Object(o.useCallback)((function(){0!==s.length&&a({documentIndex:j,pageIndex:s[s.length-1].pageIndex})}),[j,s,a]),g=Object(o.useCallback)((function(e){isNaN(e)||e<=0||e>s.length||a({documentIndex:j,pageIndex:s[e-1].pageIndex})}),[j,s,a]);return{currentPage:Object(z.isPresent)(h)?s[h]:void 0,currentPageState:Object(z.isPresent)(h)?l[h]:void 0,currentPageNumber:Object(z.isPresent)(h)?h+1:void 0,totalPages:s.length,gotoFirst:O,gotoPrev:v,gotoNext:m,gotoLast:p,gotoPage:g}}(),m=v.currentPageNumber,p=v.currentPage,g=v.currentPageState,x=v.totalPages,y=v.gotoFirst,C=v.gotoLast,I=v.gotoNext,k=v.gotoPage,w=v.gotoPrev,P=Object(o.useState)(null!==m&&void 0!==m?m:null),M=Object(f.a)(P,2),S=M[0],D=M[1],L=sn(),T=L.setCurrentCropper,A=L.captureAvailable,V=L.captureImage,F=Object(o.useState)(),B=Object(f.a)(F,2),H=B[0],_=B[1],U=Object(o.useState)(fa),J=Object(f.a)(U,2),q=J[0],$=J[1],K=Object(o.useState)(!1),G=Object(f.a)(K,2),Y=G[0],Z=G[1],X=Object(o.useState)(!1),Q=Object(f.a)(X,2),ee=Q[0],te=Q[1],ne=Object(o.useState)(!1),ae=Object(f.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(ra.b)().enqueueSnackbar,ue=Object(la.a)();Object(o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.location===KeyboardEvent.DOM_KEY_LOCATION_LEFT?Z(!0):e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&te(!0))},t=function(e){"Shift"===e.key&&(e.location===KeyboardEvent.DOM_KEY_LOCATION_LEFT?Z(!1):e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&te(!1))};return document.addEventListener("keydown",e,{capture:!0}),document.addEventListener("keyup",t,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("keyup",t,{capture:!0})}}),[]),Object(o.useEffect)((function(){D(null!==m&&void 0!==m?m:null)}),[m]);var se=Object(o.useCallback)((function(){null===H||void 0===H||H.clear(),T(void 0)}),[H,T]);Object(o.useEffect)((function(){var e=void 0;return p&&setTimeout((function(){var t,n=h.current;if(n){var a=n.getContext("2d");a&&(t=p.getImageData(),function(e){return"object"===typeof e&&"then"in e}(t)?t:Promise.resolve(t)).then((function(t){a.putImageData(t,0,0),(e=new aa.a(n,{dragMode:fa,initialAspectRatio:Number.NaN,guides:!1,crop:function(){var t,n=null===(t=e)||void 0===t?void 0:t.getCropBoxData();n&&!Object(oe.a)(n)&&T(e)},viewMode:1,autoCrop:!1,ready:function(){_(e)}})).clear(),$(fa)}))}}),0),function(){var t;_(void 0),T(void 0),null===(t=e)||void 0===t||t.destroy()}}),[p,T]);var le=Object(o.useMemo)((function(){if(!Object(z.isPresent)(d)||!Object(z.isPresent)(b)||!Object(z.isPresent)(p))return[1,1,1];var e=d/p.width,t=b/p.height;return[Math.min(e,t),e,t]}),[d,b,p]),de=Object(f.a)(le,3),be=de[0],je=de[1],fe=de[2];Object(o.useEffect)((function(){g&&(null===H||void 0===H||H.rotateTo(g.rotate))}),[H,g]);var he=Object(o.useCallback)((function(e){var t=0,n=0;"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),se()):"ArrowUp"===e.key?n=-1:"ArrowDown"===e.key?n=1:"ArrowLeft"===e.key?t=-1:"ArrowRight"===e.key&&(t=1),0===t&&0===n||null===H||void 0===H||H.move(t,n)}),[se,H]),Oe=Object(o.useCallback)((function(e){var t=e.target.value;if(Object(z.isPresent)(t)&&0!==t.length){var n=parseInt(t);isNaN(n)||D(n)}else D(null)}),[]),ve=Object(o.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),Object(z.isPresent)(S)&&!isNaN(S)&&k(S))}),[k,S]),me=Object(o.useCallback)((function(e){e.currentTarget.focus()}),[]),pe=Object(o.useCallback)((function(e,t){t&&(null===H||void 0===H||H.setDragMode(t),$(t))}),[H]),ge=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?c(e):p&&r(p.pageIndex,e)}),[p,c,r]),xe=Object(o.useCallback)((function(){if(H){H.zoomTo(be);var e=be===je?0:(d-p.width*be)/2,t=be===fe?0:(b-p.height*be)/2;H.moveTo(e,t)}}),[H,p,fe,be,je,b,d]),ye=Object(o.useCallback)((function(){if(H){H.zoomTo(je);var e=be===fe?0:(b-p.height*be)/2;H.moveTo(0,e)}}),[H,p,fe,be,je,b]),Ce=Object(o.useCallback)((function(){null===H||void 0===H||H.zoom(-.1)}),[H]),Ie=Object(o.useCallback)((function(){null===H||void 0===H||H.zoom(.1)}),[H]),ke=Object(o.useCallback)(Object(R.a)(E.a.mark((function e(){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&i){e.next=2;break}return e.abrupt("return");case 2:if(n=V("image/png")){e.next=5;break}return e.abrupt("return");case 5:return ce(!0),e.prev=6,e.prev=7,e.next=10,u(n);case 10:a=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),ue(t("TextRecognitionFunctionFailed"),e.t0),e.abrupt("return");case 17:return e.prev=17,e.next=20,navigator.clipboard.writeText(a);case 20:e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(17),ue(t("RecognizedTextCouldNotBeCopiedToClipboard"),e.t1),e.abrupt("return");case 26:ie(t("RecognizedTextCopiedToClipboard"),{variant:"success"});case 27:return e.prev=27,ce(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[6,,27,30],[7,13],[17,22]])}))),[i,A,V,ie,u,ue,t]);if(!p)return null;var we=Y||ee;return Object(O.jsxs)(O.Fragment,{children:[a&&Object(O.jsxs)(Re.a,{className:s.toolbar,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(dt.a,{value:null!==S&&void 0!==S?S:"",onChange:Oe,onKeyDown:ve,disabled:!Object(z.isPresent)(m),className:s.textField,inputProps:{style:{textAlign:"right"}},variant:"standard"}),Object(O.jsxs)("span",{className:s.totalPages,children:["\xa0 / ",x," \xa0"]})]}),Object(O.jsx)(ja,{onClick:y,tooltip:t("GotoFirstPage"),children:Object(O.jsx)(Tn.a,{})}),Object(O.jsx)(ja,{onClick:w,tooltip:t("GotoPrevPage"),children:Object(O.jsx)(En.a,{})}),Object(O.jsx)(ja,{onClick:I,tooltip:t("GotoNextPage"),children:Object(O.jsx)(Vn.a,{})}),Object(O.jsx)(ja,{onClick:C,tooltip:t("GotoLastPage"),children:Object(O.jsx)(Bn.a,{})}),Object(O.jsx)(Dn.a,{orientation:"vertical",flexItem:!0}),Object(O.jsxs)(ba,{value:q,onChange:pe,size:"small",exclusive:!0,children:[Object(O.jsx)(Nn.a,{value:"crop",children:Object(O.jsx)(Ee.a,{title:t("Crop"),children:Object(O.jsx)("div",{className:s.fixHeight,children:Object(O.jsx)(tn,{})})})}),Object(O.jsx)(Nn.a,{value:"move",children:Object(O.jsx)(Ee.a,{title:t("Move"),children:Object(O.jsx)("div",{className:s.fixHeight,children:Object(O.jsx)(ca,{})})})})]}),Object(O.jsx)(Dn.a,{orientation:"vertical",flexItem:!0}),Object(O.jsx)(ja,{onClick:xe,tooltip:t("FitPage"),children:Object(O.jsx)(Xn.a,{})}),Object(O.jsx)(ja,{onClick:ye,tooltip:t("FitWidth"),children:Object(O.jsx)(ua,{})}),Object(O.jsx)(ja,{onClick:Ce,tooltip:t("ZoomOut"),children:Object(O.jsx)(Yn.a,{})}),Object(O.jsx)(ja,{onClick:Ie,tooltip:t("ZoomIn"),children:Object(O.jsx)(Kn.a,{})}),Object(O.jsx)(Dn.a,{orientation:"vertical",flexItem:!0}),Object(O.jsx)(ja,{onClick:function(e){return ge(-90,e.shiftKey)},tooltip:t(we?"RotateAll90Ccw":"Rotate90Ccw"),showEllipsis:we,children:Object(O.jsx)(ia,{})}),Object(O.jsx)(ja,{onClick:function(e){return ge(90,e.shiftKey)},tooltip:t(we?"RotateAll90Cw":"Rotate90Cw"),showEllipsis:we,children:Object(O.jsx)(oa,{})}),Object(O.jsx)(ja,{onClick:function(e){return ge(180,e.shiftKey)},tooltip:t(we?"RotateAll180":"Rotate180"),showEllipsis:we,children:Object(O.jsx)(qn.a,{})}),Object(O.jsx)(ja,{onClick:function(e){return ge(-1,e.shiftKey)},tooltip:t(we?"RotateAll1Ccw":"Rotate1Ccw"),showEllipsis:we,children:Object(O.jsx)(_n.a,{})}),Object(O.jsx)(ja,{onClick:function(e){return ge(1,e.shiftKey)},tooltip:t(we?"RotateAll1Cw":"Rotate1Cw"),showEllipsis:we,children:Object(O.jsx)(Wn.a,{})}),i&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Dn.a,{orientation:"vertical",flexItem:!0}),Object(O.jsx)(ja,{onClick:ke,tooltip:t("OcrCapture"),disabled:!A||re,children:re?Object(O.jsx)(Sn.a,{size:20}):Object(O.jsx)(sa,{})})]})]}),Object(O.jsx)("div",{ref:j,className:s.listContainer,onKeyDown:he,tabIndex:-1,onClick:me,children:Object(z.isPresent)(d)&&Object(z.isPresent)(b)&&!!p&&Object(O.jsx)("canvas",{ref:h,width:p.width,height:p.height,style:{visibility:"hidden"}})})]})},Oa=Object(I.a)((function(e){return Object(k.a)({content:{height:"80vh",minWidth:900,display:"flex",flexDirection:"row"},treePane:{flexGrow:1,overflow:"auto",width:function(e){return e.canModify?"26%":"40%"}},imageListPane:{flexGrow:1,width:"41%",overflowY:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10},editorPane:{width:function(e){return e.canModify?"32%":"59%"},flexGrow:1,overflow:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10}})})),va=function(e){var t=Object(W.a)().t,n=De(),a=n.loadingImages,r=n.documentSchemas,c=n.canModify,o=Oa({canModify:c});return r?a?Object(O.jsx)(Le.b,{children:t("LoadingImages")}):Object(O.jsxs)("div",{className:o.content,children:[Object(O.jsx)("div",{className:o.treePane,children:Object(O.jsx)(Gt,{})}),c&&Object(O.jsx)("div",{className:o.imageListPane,children:Object(O.jsx)(ha,{})}),Object(O.jsx)("div",{className:o.editorPane,children:Object(O.jsx)(Pn,{})})]}):null},ma=function(e){var t,n=Object(d.useJsonForms)(),r=Object(l.mapStateToControlProps)({jsonforms:Object(j.a)({},n)},e),c=r.data,i=r.path,s=r.visible,b=r.uischema,f=null===c||void 0===c?void 0:c.documents,h=Object(o.useMemo)((function(){return f?function(e){if(!Array.isArray(e))return[];for(var t=e,n=0;n<t.length;n++){var r=t[n];if(!Object(z.isPresent)(r.data)||!r.action){var c,o,i=Object(j.a)(Object(j.a)({},r),{},{data:null!==(c=r.data)&&void 0!==c?c:{},action:null!==(o=r.action)&&void 0!==o?o:"send"});t===e&&(t=Object(a.a)(e)),t[n]=i}}return t}(f):[]}),[f]);if(Object(o.useEffect)((function(){var e;h===f||Object(J.a)(h,f)||(null===(e=n.dispatch)||void 0===e||e.call(n,Object(l.update)(Object(U.compose)(i,"documents"),(function(){return h}))))}),[n,f,h,i]),h!==f&&!Object(J.a)(h,f))return null;if("ImageBatchRecognition"!==b.type)return null;var v=b;return Object(O.jsx)(u.a,{xsUp:!s,children:Object(O.jsx)(mt.a,{children:Object(O.jsx)(ze,{basePath:i,batch:c,documentSchemasSource:v.documentSchemasSource,readonly:null!==(t=v.readonly)&&void 0!==t&&t,ocrFunction:v.ocrFunction,children:Object(O.jsx)(un,{outputImageFormat:v.outputImageFormat,children:Object(O.jsx)(va,{})})})})})},pa=Object(l.rankWith)(3,Object(l.uiTypeIs)("ImageBatchRecognition")),ga=n(4),xa=n(6),ya=n(9),Ca=n(10),Ia=n(240),ka=n.n(Ia),wa=n(241),Pa=n.n(wa),Ma=n(242),Sa=n.n(Ma),Na=n(725),za=n(514),Da=n(2442),La=function(e){Object(ya.a)(n,e);var t=Object(Ca.a)(n);function n(){return Object(ga.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"render",value:function(){var e=this.props,t=e.description,n=e.id,a=e.errors,r=e.label,c=e.uischema,o=e.visible,i=e.enabled,s=e.required,d=e.path,b=e.handleChange,j=e.data,f=e.config,h=r,v=0===a.length,m=hn()({},f,c.options),p=!Object(l.isDescriptionHidden)(o,null!==t&&void 0!==t?t:"",this.state.isFocused,m.showUnfocusedDescription),g=Object(l.isPlainLabel)(r)?r:h;return Object(O.jsx)(u.a,{xsUp:!o,children:Object(O.jsx)(Na.b,{id:n+"-input",label:Object(l.computeLabel)(g,null!==s&&void 0!==s&&s,m.hideRequiredAsterisk),error:!v,fullWidth:!m.trim,helperText:v?p?t:" ":a,InputLabelProps:{shrink:!0},value:j?Object(za.default)(j):null,onChange:function(e){return b(d,e&&!isNaN(e.valueOf())?Object(Da.a)(e,{representation:"date"}):"")},format:Ye.a.t("DATE_FORMAT"),clearable:!0,disabled:!i,autoFocus:m.focus,onFocus:this.onFocus,onBlur:this.onBlur,okLabel:Ye.a.t("OK"),cancelLabel:Ye.a.t("Cancel"),clearLabel:Ye.a.t("Clear"),leftArrowIcon:Object(O.jsx)(ka.a,{}),rightArrowIcon:Object(O.jsx)(Pa.a,{}),keyboardIcon:Object(O.jsx)(Sa.a,{}),InputProps:{}})})}}]),n}(d.Control),Ta=Object(l.rankWith)(10,l.isDateControl),Aa=Object(d.withJsonFormsControlProps)(La),Ea=n(375),Ra=n.n(Ea),Va=n(448),Fa=n.n(Va),Ba=n(728),Ha=function(e){Object(ya.a)(n,e);var t=Object(Ca.a)(n);function n(){return Object(ga.a)(this,n),t.apply(this,arguments)}return Object(xa.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.description,a=e.errors,r=e.label,c=e.uischema,o=e.visible,i=e.enabled,s=e.required,d=e.path,b=e.handleChange,j=e.data,f=e.config,h=hn()({},f,c.options),v=0===a.length;return Object(O.jsx)(u.a,{xsUp:!o,children:Object(O.jsx)(Ba.b,{id:t+"-input",label:Object(l.computeLabel)(Object(l.isPlainLabel)(r)?r:r.default,null!==s&&void 0!==s&&s,h.hideRequiredAsterisk),error:!v,fullWidth:!h.trim,onFocus:this.onFocus,onBlur:this.onBlur,helperText:v?n:a,InputLabelProps:{shrink:!0},value:j||null,onChange:function(e){return b(d,e&&!isNaN(e.valueOf())?e.toISOString():"")},format:Ye.a.t("DATETIME_FORMAT"),clearable:!0,disabled:!i,autoFocus:h.focus,okLabel:Ye.a.t("OK"),cancelLabel:Ye.a.t("Cancel"),clearLabel:Ye.a.t("Clear"),leftArrowIcon:Object(O.jsx)(ka.a,{}),rightArrowIcon:Object(O.jsx)(Pa.a,{}),dateRangeIcon:Object(O.jsx)(Ra.a,{}),keyboardIcon:Object(O.jsx)(Sa.a,{}),timeIcon:Object(O.jsx)(Fa.a,{}),InputProps:{}})})}}]),n}(d.Control),_a=Object(l.rankWith)(10,l.isDateTimeControl),Ua=Object(d.withJsonFormsControlProps)(Ha),Wa=n(2468),Ja=n(2466),qa=n(613),$a=n.n(qa),Ka=n(1923),Ga=[n(338)],Ya=Object(Ka.a)((function(e){return e[0]}),Object(Ja.a)((function(e){return e.$id}),Ga)),Za={resolve:{nimflow:{order:1,canRead:function(e){return!!Ya[e.url]},read:function(e){return Object(h.a)(["$id"],Ya[e.url])}}}},Xa=function(e){return $a.a.dereference(e,Za)},Qa=["context","bindContext","uiSchemaLibrary","schema","onChange","config"],er=function(e){var t=e.context,n=e.bindContext,r=e.uiSchemaLibrary,c=e.schema,i=e.onChange,u=e.config,s=Object(S.a)(e,Qa),l=function(e){var t=Object(Wa.a)(Object(R.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,Xa(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[e]);return{resolvedSchema:t.value,loading:t.loading,error:t.error}}(c),b=l.resolvedSchema,h=l.loading,v=l.error,m=Object(o.useState)(),g=Object(f.a)(m,2),x=g[0],y=g[1],C=Object(o.useState)([]),I=Object(f.a)(C,2),k=I[0],w=I[1],P=Object(o.useState)(),M=Object(f.a)(P,2),N=M[0],z=M[1],D=Object(o.useMemo)((function(){var e;return Object(j.a)(Object(j.a)({},u),{},{restrict:null===(e=null===u||void 0===u?void 0:u.restrict)||void 0===e||e})}),[u]),L=Object(o.useCallback)((function(e){y(e)}),[]),T=Object(o.useCallback)((function(e){w(e)}),[]);if(Object(o.useEffect)((function(){if(x||0!==k.length){var e=function(e,t){var n={data:void 0};return t.length>0||(null===e||void 0===e?void 0:e.errors)&&e.errors.length>0?(n.errors=n.errors?[].concat(Object(a.a)(n.errors),Object(a.a)(t)):t,n.errors=Object(G.a)([Object(Ze.a)((function(e,t){var n,a;return e.dataPath<t.dataPath||e.dataPath===t.dataPath&&(null!==(n=e.message)&&void 0!==n?n:"")<(null!==(a=t.message)&&void 0!==a?a:"")}))],n.errors)):n.data=null===e||void 0===e?void 0:e.data,n}(x,k);z((function(t){return Object(J.a)(t,e)?t:e}))}}),[k,x]),Object(o.useEffect)((function(){N&&(null===i||void 0===i||i(N))}),[N,i]),h)return Object(O.jsx)(Le.a,{});if(v)throw v;return Object(O.jsx)(p,{context:t,bindContext:n,uiSchemaLibrary:r,onErrorsChange:T,children:Object(O.jsx)(d.JsonForms,Object(j.a)({renderers:tr,cells:nr,schema:b,onChange:L,config:D},s))})},tr=[].concat(Object(a.a)(c.extendedMaterialRenderers),[{tester:C,renderer:y},{tester:M,renderer:P},{tester:T,renderer:L},{tester:_,renderer:H},{tester:pa,renderer:ma},{tester:Ta,renderer:Aa},{tester:_a,renderer:Ua}]),nr=r.materialCells},455:function(e,t){},560:function(e,t){},562:function(e,t){},563:function(e,t){},578:function(e,t){},579:function(e,t){},582:function(e,t){},583:function(e,t){},584:function(e,t){},585:function(e,t){},586:function(e,t){},588:function(e,t){},590:function(e,t){},591:function(e,t){},592:function(e,t){},593:function(e,t){},594:function(e,t){},615:function(e,t){}}]);
//# sourceMappingURL=14.cad9e23f.chunk.js.map