(this["webpackJsonpnimflow-portal"]=this["webpackJsonpnimflow-portal"]||[]).push([[18],{1972:function(e,t,n){"use strict";var r=n(34),i=n(480),a=n(421),s=Object(r.a)((function(e,t){return Object(i.a)((function(n,r){return n[r]=e(t[r],r,t),n}),{},Object(a.a)(t))}));t.a=s},2382:function(e,t,n){"use strict";var r=n(21);function i(e){return e}var a=Object(r.a)(i),s=n(523),u=n(34),c=Object(u.a)((function(e,t){for(var n,r,i=new s.a,a=[],u=0;u<t.length;)n=e(r=t[u]),i.add(n)&&a.push(r),u+=1;return a}))(a);t.a=c},2474:function(e,t,n){"use strict";n.r(t),n.d(t,"UnitSecurity",(function(){return y}));var r=n(15),i=n(1),a=n(5),s=n.n(a),u=n(32),c=n(3),o=n(2494),l=n(99),f=n(1972),m=n(2489),b=n(2382),d=n(254),p=n.n(d),j=n(1308),v=n(1300),O=n(35),_=n(253),h=n(97),S=n(166),x=n(202),g=n(31),y=function(){var e=Object(o.a)().t,t=Object(O.g)(S.a),n=Object(S.d)().permissions_Set,a=function(){var e=Object(h.c)().users_GetUsersWithPermission,t=Object(l.a)("/users_GetUsersWithPermission/",Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({pageSize:100,pageNumber:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))),n=t.data,r=t.isValidating,i=t.mutate,a=t.error;return Object(c.useMemo)((function(){return{users:null!==n&&void 0!==n?n:[],isValidating:r,error:a,mutate:i}}),[n,r,i,a])}().users,d=function(e){var t=Object(S.d)().permissions_Search,n=Object(x.a)(t,e),r=Object(l.a)(n,Object(u.a)(s.a.mark((function n(){var r,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:return n.next=4,t({entityType:"Unit",entityId:e});case 4:return r=n.sent,i=Object(f.a)((function(e){return e[0]}),Object(m.a)((function(e){var t;return null!==(t=e.userId)&&void 0!==t?t:""}),r)),n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))),i=r.data,a=r.mutate,o=r.isValidating,b=r.error;return Object(c.useMemo)((function(){return{permissions:null!==i&&void 0!==i?i:{},isValidating:o,error:b,revalidate:a,mutatePermissionsSearch:a}}),[i,b,o,a])}(t),y=d.permissions,w=d.mutatePermissionsSearch,k=Object(c.useCallback)((function(e){if(null==(null===e||void 0===e?void 0:e.id))return[];var t=y[e.id];return t?Object.values(_.c).filter((function(e){return e.permissions.find((function(e){return t.actions&&t.actions.indexOf(e)>=0}))})):[]}),[y]),U=Object(c.useMemo)((function(){return a.map((function(e){return{user:e,roles:k(e)}}))}),[a,k]),M=Object.values(_.c),z=Object(c.useState)(!1),N=Object(i.a)(z,2),P=N[0],I=N[1],V=Object(c.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(i,a,u){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.roles.filter((function(e){return e.name!==a.name})),u&&(c=[].concat(Object(r.a)(c),[a])),o=Object(b.a)(c.flatMap((function(e){return e.permissions}))),I(!0),e.prev=4,e.next=7,n({userIds:[i.user.id],entityType:"Unit",entityId:t,actions:o});case 7:return e.prev=7,w(),I(!1),e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[4,,7,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,w]),C=[{field:"user.fullName",render:function(e){return function(e){var t;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.a,{alt:e.fullName,src:null===(t=e.props)||void 0===t?void 0:t.Picture}),Object(g.jsx)("p",{children:e.fullName}),e.email!==e.fullName&&Object(g.jsx)("p",{children:e.email})]})}(e.user)},title:e("User")}].concat(Object(r.a)(M.map((function(t){return{render:function(e){return function(e,t){return Object(g.jsx)(v.a,{disabled:P,checked:null!=e.roles.find((function(e){return e.name===t.name})),onChange:function(n){return V(e,t,n.target.checked)},color:"primary"})}(e,t)},title:e(t.name)}})))),F=Object(c.useMemo)((function(){return[]}),[]);return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(p.a,{columns:C,data:U,title:e("UnitMembers"),actions:F})})};t.default=y},523:function(e,t,n){"use strict";var r=n(852),i=function(){function e(){this._nativeSet="function"===typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!a(e,!0,this)},e.prototype.has=function(e){return a(e,!1,this)},e}();function a(e,t,n){var i,a=typeof e;switch(a){case"string":case"number":return 0===e&&1/e===-1/0?!!n._items["-0"]||(t&&(n._items["-0"]=!0),!1):null!==n._nativeSet?t?(i=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===i):n._nativeSet.has(e):a in n._items?e in n._items[a]||(t&&(n._items[a][e]=!0),!1):(t&&(n._items[a]={},n._items[a][e]=!0),!1);case"boolean":if(a in n._items){var s=e?1:0;return!!n._items[a][s]||(t&&(n._items[a][s]=!0),!1)}return t&&(n._items[a]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?t?(i=n._nativeSet.size,n._nativeSet.add(e),n._nativeSet.size===i):n._nativeSet.has(e):a in n._items?!!Object(r.a)(e,n._items[a])||(t&&n._items[a].push(e),!1):(t&&(n._items[a]=[e]),!1);case"undefined":return!!n._items[a]||(t&&(n._items[a]=!0),!1);case"object":if(null===e)return!!n._items.null||(t&&(n._items.null=!0),!1);default:return(a=Object.prototype.toString.call(e))in n._items?!!Object(r.a)(e,n._items[a])||(t&&n._items[a].push(e),!1):(t&&(n._items[a]=[e]),!1)}}t.a=i}}]);
//# sourceMappingURL=18.4da1357b.chunk.js.map