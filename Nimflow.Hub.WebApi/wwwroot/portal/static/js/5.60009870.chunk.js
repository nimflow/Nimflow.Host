(this["webpackJsonpnimflow-portal"]=this["webpackJsonpnimflow-portal"]||[]).push([[5],{1044:function(e,t){},1339:function(e,t,n){var r={"./ar/index":[2042,6],"./ca/index":[2043,7],"./cs/index":[2044,8],"./de/index":[2045,9],"./en/index":[855],"./es/index":[2046,10],"./fr/index":[2047,11],"./hu/index":[2048,12],"./id/index":[2049,13],"./it/index":[2050,14],"./ja/index":[2051,15],"./ko/index":[2052,16],"./nb/index":[2053,17],"./nl/index":[2054,18],"./pl/index":[2055,19],"./pt-BR/index":[2056,20],"./ru/index":[2057,21],"./sk/index":[2058,22],"./sv/index":[2059,23],"./th/index":[2060,24],"./zh-TW/index":[2062,25],"./zh/index":[2061,26]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=1339,e.exports=a},1451:function(e,t){},1459:function(e,t){},1461:function(e,t){},1653:function(e,t){},1655:function(e,t){},1688:function(e,t){},1689:function(e,t){},1694:function(e,t){},1696:function(e,t){},1703:function(e,t){},1722:function(e,t){},1738:function(e,t){},1739:function(e,t){},1740:function(e,t){},1741:function(e,t){},1742:function(e,t){},1817:function(e,t){},1822:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://nimflow.com/schemas/recognized-image-batch.schema.json","type":"object","title":"Recognized image batch schema","allOf":[{"$ref":"#/definitions/RecognizedImageBatch"}],"definitions":{"RecognizedImageBatch":{"type":"object","properties":{"fileUrls":{"type":"array","items":{"type":"string"}},"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}}},"required":["fileUrls"]},"Document":{"type":"object","properties":{"schemaId":{"type":"string"},"pages":{"type":"array","items":{"$ref":"#/definitions/PageImageLocation"}},"action":{"type":"string","enum":["saveAsDraft","send","dontSend"]},"data":true},"required":["schemaId","action"]},"PageImageLocation":{"type":"object","properties":{"fileIndex":{"type":"integer"},"filePageNumber":{"type":"integer"}},"required":["fileIndex","filePageNumber"]}}}')},2424:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),s=n(19),i=n.n(s),c=n(274),o=n(2423),u=n(33),l=n(410),d=n(96),p=n(2439),f=n(18),b=n(1),h=n(2),v=n(68),j=n(779),O=n(776),m=n(122),g=n(840),x=n(2390),y=n(838),k=n(839),C=n(794),S=n(2384),w=n(793),T=n(1284),_=n.n(T),P=n(841),A=n.n(P),N=n(842),I=n.n(N),R=n(802),U=n(5),E=n.n(U),D=n(32),M=n(20),$=n(1188),L=n(427),F=n.n(L),z=n(577),J=n(828),B=n(289),W=n(37),q=n(415),V=n(10),G=n(11),H=n(22),Y=n(4),K=n(6),Z=n(248),X=n.n(Z),Q=function(){function e(t,n){Object(Y.a)(this,e),this.instance=void 0,this.baseUrl=void 0,this.jsonParseReviver=void 0,this.instance=n||X.a.create(),this.baseUrl=void 0!==t&&null!==t?t:"https://localhost:44358"}return Object(K.a)(e,[{key:"auth_SupportedSchemes",value:function(e){var t=this,n=this.baseUrl+"/Auth/SupportedSchemes",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return t.processAuth_SupportedSchemes(e)}))}},{key:"processAuth_SupportedSchemes",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"auth_BearerSchemeSettings",value:function(e){var t=this,n=this.baseUrl+"/Auth/BearerSchemeSettings",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return t.processAuth_BearerSchemeSettings(e)}))}},{key:"processAuth_BearerSchemeSettings",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"info_Get",value:function(e){var t=this,n=this.baseUrl+"/Info",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return t.processInfo_Get(e)}))}},{key:"processInfo_Get",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"organizations_FindById",value:function(e,t){var n=this,r=this.baseUrl+"/Organizations/FindById?";void 0!==e&&null!==e&&(r+="id="+encodeURIComponent(""+e)+"&");var a={method:"POST",url:r=r.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processOrganizations_FindById(e)}))}},{key:"processOrganizations_FindById",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"organizations_Update",value:function(e,t){var n=this,r=this.baseUrl+"/Organizations/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processOrganizations_Update(e)}))}},{key:"processOrganizations_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"organizations_Register",value:function(e,t){var n=this,r=this.baseUrl+"/Organizations/Register";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processOrganizations_Register(e)}))}},{key:"processOrganizations_Register",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"organizations_Delete",value:function(e,t){var n=this,r=this.baseUrl+"/Organizations/Delete";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processOrganizations_Delete(e)}))}},{key:"processOrganizations_Delete",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"organizations_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Organizations/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processOrganizations_Search(e)}))}},{key:"processOrganizations_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_Grant",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/Grant";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_Grant(e)}))}},{key:"processPermissions_Grant",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_Deny",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/Deny";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_Deny(e)}))}},{key:"processPermissions_Deny",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_Set",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/Set";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_Set(e)}))}},{key:"processPermissions_Set",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_Search(e)}))}},{key:"processPermissions_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_Any",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/Any";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_Any(e)}))}},{key:"processPermissions_Any",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"permissions_SearchEntityUsers",value:function(e,t){var n=this,r=this.baseUrl+"/Permissions/SearchEntityUsers";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processPermissions_SearchEntityUsers(e)}))}},{key:"processPermissions_SearchEntityUsers",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_Register",value:function(e,t){var n=this,r=this.baseUrl+"/Units/Register";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_Register(e)}))}},{key:"processUnits_Register",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_Update",value:function(e,t){var n=this,r=this.baseUrl+"/Units/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_Update(e)}))}},{key:"processUnits_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_UpdateProps",value:function(e,t){var n=this,r=this.baseUrl+"/Units/UpdateProps";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_UpdateProps(e)}))}},{key:"processUnits_UpdateProps",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_Delete",value:function(e,t){var n=this,r=this.baseUrl+"/Units/Delete";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_Delete(e)}))}},{key:"processUnits_Delete",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Units/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_Search(e)}))}},{key:"processUnits_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_SetUserRoles",value:function(e,t){var n=this,r=this.baseUrl+"/Units/SetUserRoles";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_SetUserRoles(e)}))}},{key:"processUnits_SetUserRoles",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"units_SearchUserRoles",value:function(e,t){var n=this,r=this.baseUrl+"/Units/SearchUserRoles";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUnits_SearchUserRoles(e)}))}},{key:"processUnits_SearchUserRoles",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_Register",value:function(e,t){var n=this,r=this.baseUrl+"/Users/Register";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_Register(e)}))}},{key:"processUsers_Register",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_FindById",value:function(e,t){var n=this,r=this.baseUrl+"/Users/FindById?";void 0!==e&&null!==e&&(r+="id="+encodeURIComponent(""+e)+"&");var a={method:"POST",url:r=r.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_FindById(e)}))}},{key:"processUsers_FindById",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_FindByEmail",value:function(e,t){var n=this,r=this.baseUrl+"/Users/FindByEmail?";void 0!==e&&null!==e&&(r+="emailAddress="+encodeURIComponent(""+e)+"&");var a={method:"POST",url:r=r.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_FindByEmail(e)}))}},{key:"processUsers_FindByEmail",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Users/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_Search(e)}))}},{key:"processUsers_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"userSession_GetUnits",value:function(e,t){var n=this,r=this.baseUrl+"/UserSession/GetUnits";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(ne(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUserSession_GetUnits(e)}))}},{key:"processUserSession_GetUnits",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?te("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}}]),e}(),ee=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(e,r,a,s,i){var c;return Object(Y.a)(this,n),(c=t.call(this)).message=void 0,c.status=void 0,c.response=void 0,c.headers=void 0,c.result=void 0,c.isApiException=!0,c.message=e,c.status=r,c.response=a,c.headers=s,c.result=i,c}return Object(K.a)(n,null,[{key:"isApiException",value:function(e){return!0===e.isApiException}}]),n}(Object(H.a)(Error));function te(e,t,n,r,a){throw null!==a&&void 0!==a?a:new ee(e,t,n,r,null)}function ne(e){return e&&!0===e.isAxiosError}var re,ae,se,ie=n(2431),ce=function(){function e(t,n){Object(Y.a)(this,e),this.instance=void 0,this.baseUrl=void 0,this.jsonParseReviver=void 0,this.instance=n||X.a.create(),this.baseUrl=void 0!==t&&null!==t?t:"https://localhost:44304"}return Object(K.a)(e,[{key:"backgroundJobs_GetPendingJobs",value:function(e,t){var n=this,r=this.baseUrl+"/BackgroundJobs/GetPendingJobs";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBackgroundJobs_GetPendingJobs(e)}))}},{key:"processBackgroundJobs_GetPendingJobs",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"backgroundJobs_GetJobsStatus",value:function(e,t){var n=this,r=this.baseUrl+"/BackgroundJobs/GetJobsStatus";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBackgroundJobs_GetJobsStatus(e)}))}},{key:"processBackgroundJobs_GetJobsStatus",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"backgroundJobs_CancelJob",value:function(e,t){var n=this,r=this.baseUrl+"/BackgroundJobs/CancelJob";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBackgroundJobs_CancelJob(e)}))}},{key:"processBackgroundJobs_CancelJob",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_Upload",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/Upload?";void 0!==e&&null!==e&&(r+="path="+encodeURIComponent(""+e)+"&");var a={method:"POST",url:r=r.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_Upload(e)}))}},{key:"processBlobStorage_Upload",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_List",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/List";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_List(e)}))}},{key:"processBlobStorage_List",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_Get",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/{path}";if(void 0===e||null===e)throw new Error("The parameter 'path' must be defined.");var a={responseType:"blob",method:"GET",url:r=(r=r.replace("{path}",encodeURIComponent(""+e))).replace(/[?&]$/,""),headers:{Accept:"application/octet-stream"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_Get(e)}))}},{key:"processBlobStorage_Get",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t||206===t){var a=e.headers?e.headers["content-disposition"]:void 0,s=a?/filename="?([^"]*?)"?(;|$)/g.exec(a):void 0,i=s&&s.length>1?s[1]:void 0;return Promise.resolve({fileName:i,status:t,data:e.data,headers:n})}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_GetDataUrl",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/GetDataUrl/{path}";if(void 0===e||null===e)throw new Error("The parameter 'path' must be defined.");var a={method:"GET",url:r=(r=r.replace("{path}",encodeURIComponent(""+e))).replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_GetDataUrl(e)}))}},{key:"processBlobStorage_GetDataUrl",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_Delete",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/Delete";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_Delete(e)}))}},{key:"processBlobStorage_Delete",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_IsSupported",value:function(e){var t=this,n=this.baseUrl+"/BlobStorage/IsSupported",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return t.processBlobStorage_IsSupported(e)}))}},{key:"processBlobStorage_IsSupported",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"blobStorage_WriteFiles",value:function(e,t){var n=this,r=this.baseUrl+"/BlobStorage/WriteFiles";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processBlobStorage_WriteFiles(e)}))}},{key:"processBlobStorage_WriteFiles",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_InsertOne",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/InsertOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_InsertOne(e)}))}},{key:"processCollections_InsertOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_InsertMany",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/InsertMany";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_InsertMany(e)}))}},{key:"processCollections_InsertMany",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_Replace",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/Replace";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_Replace(e)}))}},{key:"processCollections_Replace",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_UpdateOne",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/UpdateOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_UpdateOne(e)}))}},{key:"processCollections_UpdateOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_UpdateMany",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/UpdateMany";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_UpdateMany(e)}))}},{key:"processCollections_UpdateMany",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_DeleteOne",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/DeleteOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_DeleteOne(e)}))}},{key:"processCollections_DeleteOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_DeleteMany",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/DeleteMany";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_DeleteMany(e)}))}},{key:"processCollections_DeleteMany",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_Get",value:function(e,t,n){var r=this,a=this.baseUrl+"/Collections/{collectionName}/{id}";if(void 0===e||null===e)throw new Error("The parameter 'collectionName' must be defined.");if(a=a.replace("{collectionName}",encodeURIComponent(""+e)),void 0===t||null===t)throw new Error("The parameter 'id' must be defined.");var s={method:"GET",url:a=(a=a.replace("{id}",encodeURIComponent(""+t))).replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:n};return this.instance.request(s).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return r.processCollections_Get(e)}))}},{key:"processCollections_Get",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_FindById",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/FindById";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_FindById(e)}))}},{key:"processCollections_FindById",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_Find",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/Find";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_Find(e)}))}},{key:"processCollections_Find",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"collections_Aggregate",value:function(e,t){var n=this,r=this.baseUrl+"/Collections/Aggregate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processCollections_Aggregate(e)}))}},{key:"processCollections_Aggregate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_Search(e)}))}},{key:"processContexts_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_FindOne",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/FindOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_FindOne(e)}))}},{key:"processContexts_FindOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_DispatchAction",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/DispatchAction";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_DispatchAction(e)}))}},{key:"processContexts_DispatchAction",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_BeginActiveContextRecalculation",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/BeginActiveContextRecalculation";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_BeginActiveContextRecalculation(e)}))}},{key:"processContexts_BeginActiveContextRecalculation",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_Aggregate",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/Aggregate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_Aggregate(e)}))}},{key:"processContexts_Aggregate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contexts_Recalculate",value:function(e,t){var n=this,r=this.baseUrl+"/Contexts/Recalculate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContexts_Recalculate(e)}))}},{key:"processContexts_Recalculate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_Search",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_Search(e)}))}},{key:"processContextTypes_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_History",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/History";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_History(e)}))}},{key:"processContextTypes_History",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_FindOne",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/FindOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_FindOne(e)}))}},{key:"processContextTypes_FindOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_Add",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/Add";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_Add(e)}))}},{key:"processContextTypes_Add",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_Update",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_Update(e)}))}},{key:"processContextTypes_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_Delete",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/Delete";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_Delete(e)}))}},{key:"processContextTypes_Delete",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"contextTypes_EvalJsExpression",value:function(e,t){var n=this,r=this.baseUrl+"/ContextTypes/EvalJsExpression";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processContextTypes_EvalJsExpression(e)}))}},{key:"processContextTypes_EvalJsExpression",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"digitalWorkers_Add",value:function(e,t){var n=this,r=this.baseUrl+"/DigitalWorkers/Add";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processDigitalWorkers_Add(e)}))}},{key:"processDigitalWorkers_Add",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"digitalWorkers_Search",value:function(e,t){var n=this,r=this.baseUrl+"/DigitalWorkers/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processDigitalWorkers_Search(e)}))}},{key:"processDigitalWorkers_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"digitalWorkers_SearchData",value:function(e,t){var n=this,r=this.baseUrl+"/DigitalWorkers/SearchData";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processDigitalWorkers_SearchData(e)}))}},{key:"processDigitalWorkers_SearchData",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"digitalWorkers_Remove",value:function(e,t){var n=this,r=this.baseUrl+"/DigitalWorkers/Remove";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processDigitalWorkers_Remove(e)}))}},{key:"processDigitalWorkers_Remove",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"digitalWorkers_Update",value:function(e,t){var n=this,r=this.baseUrl+"/DigitalWorkers/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processDigitalWorkers_Update(e)}))}},{key:"processDigitalWorkers_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddRequestProcessedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddRequestProcessedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddRequestProcessedEventListener(e)}))}},{key:"processEvents_AddRequestProcessedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddActionDispatchedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddActionDispatchedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddActionDispatchedEventListener(e)}))}},{key:"processEvents_AddActionDispatchedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddContextsRecalculationCompletedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddContextsRecalculationCompletedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddContextsRecalculationCompletedEventListener(e)}))}},{key:"processEvents_AddContextsRecalculationCompletedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddContextRecalculationErrorEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddContextRecalculationErrorEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddContextRecalculationErrorEventListener(e)}))}},{key:"processEvents_AddContextRecalculationErrorEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddResponseSentEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddResponseSentEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddResponseSentEventListener(e)}))}},{key:"processEvents_AddResponseSentEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddTaskCreatedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddTaskCreatedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddTaskCreatedEventListener(e)}))}},{key:"processEvents_AddTaskCreatedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddTaskUpdatedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddTaskUpdatedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddTaskUpdatedEventListener(e)}))}},{key:"processEvents_AddTaskUpdatedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddTaskArchivedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddTaskArchivedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddTaskArchivedEventListener(e)}))}},{key:"processEvents_AddTaskArchivedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddMilestoneReachedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddMilestoneReachedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddMilestoneReachedEventListener(e)}))}},{key:"processEvents_AddMilestoneReachedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddMilestoneClearedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddMilestoneClearedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddMilestoneClearedEventListener(e)}))}},{key:"processEvents_AddMilestoneClearedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddCustomEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddCustomEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddCustomEventListener(e)}))}},{key:"processEvents_AddCustomEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AddBlobStorageUpdatedEventListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AddBlobStorageUpdatedEventListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AddBlobStorageUpdatedEventListener(e)}))}},{key:"processEvents_AddBlobStorageUpdatedEventListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_SearchContextEventListeners",value:function(e,t){var n=this,r=this.baseUrl+"/Events/SearchContextEventListeners";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_SearchContextEventListeners(e)}))}},{key:"processEvents_SearchContextEventListeners",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_AggregateEvents",value:function(e,t){var n=this,r=this.baseUrl+"/Events/AggregateEvents";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_AggregateEvents(e)}))}},{key:"processEvents_AggregateEvents",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_RemoveListener",value:function(e,t){var n=this,r=this.baseUrl+"/Events/RemoveListener";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_RemoveListener(e)}))}},{key:"processEvents_RemoveListener",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_SearchEventListenerFailures",value:function(e,t){var n=this,r=this.baseUrl+"/Events/SearchEventListenerFailures";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_SearchEventListenerFailures(e)}))}},{key:"processEvents_SearchEventListenerFailures",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"events_RegisterCustomEvents",value:function(e,t){var n=this,r=this.baseUrl+"/Events/RegisterCustomEvents";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processEvents_RegisterCustomEvents(e)}))}},{key:"processEvents_RegisterCustomEvents",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_Call",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/Call";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_Call(e)}))}},{key:"processFunctions_Call",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_GetModules",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/GetModules";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_GetModules(e)}))}},{key:"processFunctions_GetModules",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_Add",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/Add";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_Add(e)}))}},{key:"processFunctions_Add",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_Update",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_Update(e)}))}},{key:"processFunctions_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_Delete",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/Delete";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_Delete(e)}))}},{key:"processFunctions_Delete",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"functions_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Functions/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processFunctions_Search(e)}))}},{key:"processFunctions_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"info_Get",value:function(e){var t=this,n=this.baseUrl+"/Info",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return t.processInfo_Get(e)}))}},{key:"processInfo_Get",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"javascript_GetGlobalImports",value:function(e){var t=this,n=this.baseUrl+"/Javascript/GetGlobalImports",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return t.processJavascript_GetGlobalImports(e)}))}},{key:"processJavascript_GetGlobalImports",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"simulation_Simulate",value:function(e,t){var n=this,r=this.baseUrl+"/Simulation/Simulate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processSimulation_Simulate(e)}))}},{key:"processSimulation_Simulate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"simulation_BuildInitialResponsePayload",value:function(e,t){var n=this,r=this.baseUrl+"/Simulation/BuildInitialResponsePayload";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processSimulation_BuildInitialResponsePayload(e)}))}},{key:"processSimulation_BuildInitialResponsePayload",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_FindOne",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/FindOne";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_FindOne(e)}))}},{key:"processTasks_FindOne",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_Search",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/Search";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_Search(e)}))}},{key:"processTasks_Search",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_AssignedToMe",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/AssignedToMe";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_AssignedToMe(e)}))}},{key:"processTasks_AssignedToMe",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_Aggregate",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/Aggregate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_Aggregate(e)}))}},{key:"processTasks_Aggregate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_AddResponse",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/AddResponse";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_AddResponse(e)}))}},{key:"processTasks_AddResponse",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_BuildInitialResponsePayload",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/BuildInitialResponsePayload";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_BuildInitialResponsePayload(e)}))}},{key:"processTasks_BuildInitialResponsePayload",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_Update",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/Update";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_Update(e)}))}},{key:"processTasks_Update",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_UpdateMany",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/UpdateMany";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_UpdateMany(e)}))}},{key:"processTasks_UpdateMany",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"tasks_SearchAndUpdate",value:function(e,t){var n=this,r=this.baseUrl+"/Tasks/SearchAndUpdate";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processTasks_SearchAndUpdate(e)}))}},{key:"processTasks_SearchAndUpdate",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_GetUsersWithPermission",value:function(e,t){var n=this,r=this.baseUrl+"/Users/GetUsersWithPermission";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_GetUsersWithPermission(e)}))}},{key:"processUsers_GetUsersWithPermission",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_GetUnitUsers",value:function(e){var t=this,n=this.baseUrl+"/Users/GetUnitUsers",r={method:"GET",url:n=n.replace(/[?&]$/,""),headers:{Accept:"application/json"},cancelToken:e};return this.instance.request(r).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return t.processUsers_GetUnitUsers(e)}))}},{key:"processUsers_GetUnitUsers",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_GetCurrentUserPermissions",value:function(e,t){var n=this,r=this.baseUrl+"/Users/GetCurrentUserPermissions";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_GetCurrentUserPermissions(e)}))}},{key:"processUsers_GetCurrentUserPermissions",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_InviteUsersOrRequestToVerifyEmails",value:function(e,t){var n=this,r=this.baseUrl+"/Users/InviteUsersOrRequestToVerifyEmails";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_InviteUsersOrRequestToVerifyEmails(e)}))}},{key:"processUsers_InviteUsersOrRequestToVerifyEmails",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_SetRoles",value:function(e,t){var n=this,r=this.baseUrl+"/Users/SetRoles";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_SetRoles(e)}))}},{key:"processUsers_SetRoles",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}},{key:"users_SearchRoles",value:function(e,t){var n=this,r=this.baseUrl+"/Users/SearchRoles";r=r.replace(/[?&]$/,"");var a={data:JSON.stringify(e),method:"POST",url:r,headers:{"Content-Type":"application/json",Accept:"application/json"},cancelToken:t};return this.instance.request(a).catch((function(e){if(le(e)&&e.response)return e.response;throw e})).then((function(e){return n.processUsers_SearchRoles(e)}))}},{key:"processUsers_SearchRoles",value:function(e){var t=e.status,n={};if(e.headers&&"object"===typeof e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n[r]=e.headers[r]);if(200===t){var a=e.data;return JSON.parse(a)}return 200!==t&&204!==t?ue("An unexpected server error occurred.",t,e.data,n):Promise.resolve(null)}}]),e}();!function(e){e[e.Completed=0]="Completed",e[e.NewerContextTypeFound=1]="NewerContextTypeFound"}(re||(re={})),function(e){e[e.Normal=0]="Normal",e[e.High=1]="High",e[e.Low=-1]="Low"}(ae||(ae={})),function(e){e[e.Ascending=1]="Ascending",e[e.Descending=-1]="Descending"}(se||(se={}));var oe=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(e,r,a,s,i){var c;return Object(Y.a)(this,n),(c=t.call(this)).message=void 0,c.status=void 0,c.response=void 0,c.headers=void 0,c.result=void 0,c.isApiException=!0,c.message=e,c.status=r,c.response=a,c.headers=s,c.result=i,c}return Object(K.a)(n,null,[{key:"isApiException",value:function(e){return!0===e.isApiException}}]),n}(Object(H.a)(Error));function ue(e,t,n,r,a){throw null!==a&&void 0!==a?a:new oe(e,t,n,r,null)}function le(e){return e&&!0===e.isAxiosError}var de,pe=n(0),fe=n(2426),be=n(2360),he=n(1234),ve=n(2440),je=n(2359),Oe=n(790),me=n(31),ge=["children"],xe=function(e){var t=e.children,n=Object(M.a)(e,ge);return Object(me.jsx)("div",Object(h.a)(Object(h.a)({},n),{},{children:Object(me.jsxs)(je.a,{container:!0,direction:"column",alignItems:"center",justifyContent:"center",children:[Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(Oe.a,{})}),t&&Object(me.jsx)(je.a,{item:!0,xs:12,children:t})]})}))},ye=["children"],ke=Object(j.a)((function(e){return Object(O.a)({waitContainer:{alignItems:"center",display:"flex",justifyContent:"center",height:"100vh",width:"100vw"}})})),Ce=function(e){var t=e.children,n=(Object(M.a)(e,ye),ke());return Object(me.jsx)("div",{className:n.waitContainer,children:Object(me.jsx)(xe,{children:t})})},Se=n(28),we=n(39),Te=Object(W.b)({key:"authenticatedUser",default:void 0}),_e=Object(W.b)({key:"auth0AuthenticationState",default:{isAuthenticated:!1,isLoading:!0}}),Pe=void 0,Ae=void 0,Ne=void 0,Ie=function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pe){e.next=4;break}return e.next=3,Pe(t);case 3:return e.abrupt("return",e.sent);case 4:throw new Error("Auth0 not set up");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(he.b)(),t=e.isLoading,n=e.isAuthenticated,a=e.user,s=e.error,i=e.getAccessTokenSilently,c=e.getIdTokenClaims,o=e.logout,u=e.loginWithRedirect,l=Object(W.h)(Te),d=Object(W.h)(_e);return Pe=i,c,Ae=o,Ne=u,Object(r.useEffect)((function(){l(a)}),[l,a]),Object(r.useEffect)((function(){d({isLoading:t,isAuthenticated:n,error:s})}),[d,s,n,t]),null},Ue=function(e){var t=e.children,n=Object(p.a)().t,a=Object(W.g)(_e),s=a.isAuthenticated,i=a.isLoading,c=a.error,o=Object(W.g)(Te),u=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ne){e.next=4;break}return e.next=3,Ne({appState:{returnTo:"".concat(window.location.pathname).concat(window.location.search)}});case 3:return e.abrupt("return",e.sent);case 4:throw new Error("Auth0 not set up");case 5:case"end":return e.stop()}}),e)}))),[]),l=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ae){e.next=5;break}return t={returnTo:window.location.origin+Object(we.a)()},e.next=4,Ae(t);case 4:return e.abrupt("return",e.sent);case 5:throw new Error("Auth0 not set up");case 6:case"end":return e.stop()}}),e)}))),[]),d=Object(r.useCallback)((function(e){var t=X.a.create(e);return t.interceptors.request.use(function(){var e=Object(D.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:return(n=e.sent)&&(t.headers.Authorization="Bearer "+n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)})),t}),[]),f={isAuthenticated:s,supportsPasswordReset:!0,login:u,logout:l,startResetPasswordFlow:Object(r.useCallback)((function(e){var t=d({baseURL:"https://".concat(Se.c,"/")}),n={method:"POST",url:"/dbconnections/change_password",headers:{"Content-Type":"application/json",Accept:"application/json"},data:{client_id:Se.b,email:e,connection:"Username-Password-Authentication"}};return t.request(n)}),[d]),authenticatedUser:o,getAuthorizedAxios:d};return i?Object(me.jsx)(Ce,{}):c?Object(me.jsxs)(fe.a,{severity:"error",children:[Object(me.jsx)(be.a,{children:n("Error")}),c.message]}):Object(me.jsx)(Qe.Provider,{value:f,children:t})},Ee=function(){var e=Object(D.a)(E.a.mark((function e(){var t,n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.a.create({baseURL:Se.d,transformResponse:[]}),n=st(t),e.prev=2,e.next=5,n.auth_BearerSchemeSettings();case 5:return r=e.sent,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(2),a={supported:!0,audience:Se.a,authority:"https://".concat(Se.c,"/")},e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),De=function(e){var t=e.children,n=Object(p.a)().t,a=Object(d.h)(),s=Object(q.a)("auth0AuthenticationSchemeSettings",Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),i=s.data,c=s.isValidating,o=s.error,u=Object(r.useMemo)((function(){var e="";return(null===i||void 0===i?void 0:i.authority)&&(e=function(e){var t=Object(ve.a)(e.split("//")),n=t.indexOf("/");return n>=0&&(t=t.substring(0,n)),t}(i.authority)),{domain:e,clientId:null!==Se.b&&void 0!==Se.b?Se.b:"",audience:null===i||void 0===i?void 0:i.audience,redirectUri:window.location.origin+Se.f,onRedirectCallback:function(e){a((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)}}}),[a,null===i||void 0===i?void 0:i.audience,null===i||void 0===i?void 0:i.authority]);return c?Object(me.jsx)(Ce,{}):o?Object(me.jsxs)(fe.a,{severity:"error",children:[Object(me.jsx)(be.a,{children:n("Error")}),o.message]}):Object(me.jsxs)(he.a,Object(h.a)(Object(h.a)({},u),{},{children:[Object(me.jsx)(Re,{}),Object(me.jsx)(Ue,{children:t})]}))},Me=n(2361),$e=n(2377),Le=n(2367),Fe=n(2366),ze=n(796),Je=function(e){return e&&!0===e.isAxiosError},Be=function(e){return Je(e)&&!e.response&&!!e.request},We=function(e){var t=e.open,n=e.onChange,a=e.onClose,s=Object(p.a)().t,i=Object(r.useState)(""),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useState)(""),d=Object(b.a)(l,2),f=d[0],h=d[1],v=Object(r.useState)(""),j=Object(b.a)(v,2),O=j[0],m=j[1],g=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return t={username:o,password:f},e.prev=3,e.next=6,X.a.post("user/authenticate",t,{baseURL:Se.d});case 6:r=e.sent,null===n||void 0===n||n(o,f,r.data),a(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Je(e.t0)?m(e.t0.response?e.t0.response.statusText:e.t0.message):m(e.t0.toString());case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),[n,a,f,o]),x=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a();case 1:case"end":return e.stop()}}),e)}))),[a]),y=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===a||void 0===a||a());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]);return Object(me.jsxs)(Me.a,{open:t,onClose:y,maxWidth:"sm",fullWidth:!0,children:[Object(me.jsx)(Fe.a,{children:s("Login")}),Object(me.jsx)(Le.a,{children:Object(me.jsxs)(je.a,{container:!0,spacing:2,children:[Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(ze.a,{label:s("UserName"),value:o,onChange:function(e){return u(e.target.value)},fullWidth:!0,required:!0,InputProps:{autoFocus:!0,required:!0}})}),Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(ze.a,{type:"password",label:s("Password"),value:f,onChange:function(e){return h(e.target.value)},fullWidth:!0})}),!!O&&Object(me.jsx)(fe.a,{severity:"error",children:O})]})}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(R.a,{onClick:g,color:"primary",children:s("Login")}),Object(me.jsx)(R.a,{onClick:x,color:"primary",children:s("Cancel")})]})]})},qe=function(e){return null!==e&&"object"===typeof e},Ve=Function.prototype.toString,Ge=Ve.call(Object),He=function(e){if(!qe(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ve.call(n)===Ge},Ye=Object(W.b)({key:"basicAuthenticationData",default:void 0}),Ke=function(e){var t=e.children,n=Object(d.h)(),a=Object(r.useState)(!1),s=Object(b.a)(a,2),i=s[0],c=s[1],o=Object(W.e)(Ye),u=Object(b.a)(o,2),l=u[0],p=u[1],f=Object(r.useMemo)((function(){if(l)return l.user}),[l]),h=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}}),e)}))),[]),v=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(void 0),n(Object(we.a)());case 2:case"end":return e.stop()}}),e)}))),[n,p]),j=Object(r.useCallback)((function(e){throw new Error("Functionality not supported")}),[]),O=Object(r.useCallback)((function(e){var t=X.a.create(e);return t.interceptors.request.use(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return e.next=3,h();case 3:return l&&(t.headers.Authorization="Basic "+l.credentials),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)})),t}),[l,h]),m=Object(r.useCallback)((function(e,t,n){var r={name:e};if(He(n))for(var a=0,s=Object.keys(n);a<s.length;a++){var i=s[a];switch(i.toLowerCase()){case"name":r.name=n[i];break;case"picture":r.picture=n[i];break;case"email":r.email=n[i]}}p({user:r,credentials:btoa("".concat(e,":").concat(t)),tokenData:n})}),[p]),g={isAuthenticated:!!l,supportsPasswordReset:!1,login:h,logout:v,startResetPasswordFlow:j,authenticatedUser:f,getAuthorizedAxios:O};return Object(me.jsxs)(Qe.Provider,{value:g,children:[t,i&&Object(me.jsx)(We,{open:i,onChange:m,onClose:function(){return c(!1)}})]})},Ze=function(){throw new Error("You forgot to wrap your component in <AuthenticationProvider>.")},Xe={isAuthenticated:!1,supportsPasswordReset:!1,login:Ze,logout:Ze,startResetPasswordFlow:Ze,getAuthorizedAxios:Ze},Qe=Object(r.createContext)(Xe),et=function(e){var t=e.children,n=Object(p.a)().t,r=Object(q.a)("supportedAuthenticationSchemes",Object(D.a)(E.a.mark((function e(){var t,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.a.create({baseURL:Se.d,transformResponse:[]}),n=st(t),e.prev=2,e.next=5,n.auth_SupportedSchemes();case 5:return r=e.sent,e.abrupt("return",r&&0!==r.length?r:["Bearer"]);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",["Bearer"]);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),a=r.data,s=r.isValidating,i=r.error;if(s)return Object(me.jsx)(Ce,{});if(i)return Object(me.jsxs)(fe.a,{severity:"error",children:[Object(me.jsx)(be.a,{children:n("Error")}),i.message]});if(!a)return null;var c,o=Object(pe.a)(a);try{for(o.s();!(c=o.n()).done;){var u=c.value;if("Bearer"===u)return Object(me.jsx)(De,{children:t});if("Basic"===u)return Object(me.jsx)(Ke,{children:t})}}catch(l){o.e(l)}finally{o.f()}return Object(me.jsxs)(fe.a,{severity:"error",children:[Object(me.jsx)(be.a,{children:n("Error")}),n("CouldNotFindSupportedAuthenticationSchemes",{schemes:a.join(", ")})]})},tt=function(){return Object(r.useContext)(Qe)},nt="hubApiUrl",rt="studioAllowed",at=function(){var e=ot(),t=e.unit,n=e.hubBaseUrl,a=tt().getAuthorizedAxios,s=Object(r.useCallback)((function(e){var r=n;if(r)for(var s=r.length-1;s>=0;s--)if("/"!==r[s]){r=r.substring(0,s+1);break}var i={baseURL:r,headers:{"unit-id":null===t||void 0===t?void 0:t.id}};return e&&(i=Object(ie.a)(e,i)),a(i)}),[a,n,t]),i=Object(r.useMemo)((function(){return function(e){var t=new ce(e.defaults.baseURL,e);return{backgroundJobs_GetPendingJobs:t.backgroundJobs_GetPendingJobs.bind(t),backgroundJobs_GetJobsStatus:t.backgroundJobs_GetJobsStatus.bind(t),backgroundJobs_CancelJob:t.backgroundJobs_CancelJob.bind(t),blobStorage_Upload:t.blobStorage_Upload.bind(t),blobStorage_List:t.blobStorage_List.bind(t),blobStorage_Get:t.blobStorage_Get.bind(t),blobStorage_GetDataUrl:t.blobStorage_GetDataUrl.bind(t),blobStorage_Delete:t.blobStorage_Delete.bind(t),blobStorage_IsSupported:t.blobStorage_IsSupported.bind(t),blobStorage_WriteFiles:t.blobStorage_WriteFiles.bind(t),collections_InsertOne:t.collections_InsertOne.bind(t),collections_InsertMany:t.collections_InsertMany.bind(t),collections_Replace:t.collections_Replace.bind(t),collections_UpdateOne:t.collections_UpdateOne.bind(t),collections_UpdateMany:t.collections_UpdateMany.bind(t),collections_DeleteOne:t.collections_DeleteOne.bind(t),collections_DeleteMany:t.collections_DeleteMany.bind(t),collections_Get:t.collections_Get.bind(t),collections_Find:t.collections_Find.bind(t),collections_FindById:t.collections_FindById.bind(t),collections_Aggregate:t.collections_Aggregate.bind(t),contexts_Search:t.contexts_Search.bind(t),contexts_FindOne:t.contexts_FindOne.bind(t),contexts_DispatchAction:t.contexts_DispatchAction.bind(t),contexts_Aggregate:t.contexts_Aggregate.bind(t),contexts_BeginActiveContextRecalculation:t.contexts_BeginActiveContextRecalculation.bind(t),contexts_Recalculate:t.contexts_Recalculate.bind(t),contextTypes_Search:t.contextTypes_Search.bind(t),contextTypes_FindOne:t.contextTypes_FindOne.bind(t),contextTypes_Add:t.contextTypes_Add.bind(t),contextTypes_Update:t.contextTypes_Update.bind(t),contextTypes_Delete:t.contextTypes_Delete.bind(t),contextTypes_EvalJsExpression:t.contextTypes_EvalJsExpression.bind(t),contextTypes_History:t.contextTypes_History.bind(t),digitalWorkers_Add:t.digitalWorkers_Add.bind(t),digitalWorkers_Search:t.digitalWorkers_Search.bind(t),digitalWorkers_SearchData:t.digitalWorkers_SearchData.bind(t),digitalWorkers_Remove:t.digitalWorkers_Remove.bind(t),digitalWorkers_Update:t.digitalWorkers_Update.bind(t),events_AddRequestProcessedEventListener:t.events_AddRequestProcessedEventListener.bind(t),events_AddActionDispatchedEventListener:t.events_AddActionDispatchedEventListener.bind(t),events_AddContextsRecalculationCompletedEventListener:t.events_AddContextsRecalculationCompletedEventListener.bind(t),events_AddContextRecalculationErrorEventListener:t.events_AddContextRecalculationErrorEventListener.bind(t),events_AddResponseSentEventListener:t.events_AddResponseSentEventListener.bind(t),events_AddTaskCreatedEventListener:t.events_AddTaskCreatedEventListener.bind(t),events_AddTaskUpdatedEventListener:t.events_AddTaskUpdatedEventListener.bind(t),events_AddTaskArchivedEventListener:t.events_AddTaskArchivedEventListener.bind(t),events_AddMilestoneReachedEventListener:t.events_AddMilestoneReachedEventListener.bind(t),events_AddMilestoneClearedEventListener:t.events_AddMilestoneClearedEventListener.bind(t),events_AddCustomEventListener:t.events_AddCustomEventListener.bind(t),events_AddBlobStorageUpdatedEventListener:t.events_AddBlobStorageUpdatedEventListener.bind(t),events_SearchContextEventListeners:t.events_SearchContextEventListeners.bind(t),events_AggregateEvents:t.events_AggregateEvents.bind(t),events_RegisterCustomEvents:t.events_RegisterCustomEvents.bind(t),events_RemoveListener:t.events_RemoveListener.bind(t),events_SearchEventListenerFailures:t.events_SearchEventListenerFailures.bind(t),functions_Call:t.functions_Call.bind(t),functions_GetModules:t.functions_GetModules.bind(t),functions_Add:t.functions_Add.bind(t),functions_Update:t.functions_Update.bind(t),functions_Delete:t.functions_Delete.bind(t),functions_Search:t.functions_Search.bind(t),info_Get:t.info_Get.bind(t),javascript_GetGlobalImports:t.javascript_GetGlobalImports.bind(t),simulation_Simulate:t.simulation_Simulate.bind(t),simulation_BuildInitialResponsePayload:t.simulation_BuildInitialResponsePayload.bind(t),tasks_Search:t.tasks_Search.bind(t),tasks_AssignedToMe:t.tasks_AssignedToMe.bind(t),tasks_FindOne:t.tasks_FindOne.bind(t),tasks_AddResponse:t.tasks_AddResponse.bind(t),tasks_Update:t.tasks_Update.bind(t),tasks_UpdateMany:t.tasks_UpdateMany.bind(t),tasks_Aggregate:t.tasks_Aggregate.bind(t),tasks_BuildInitialResponsePayload:t.tasks_BuildInitialResponsePayload.bind(t),tasks_SearchAndUpdate:t.tasks_SearchAndUpdate.bind(t),users_GetUsersWithPermission:t.users_GetUsersWithPermission.bind(t),users_GetUnitUsers:t.users_GetUnitUsers.bind(t),users_GetCurrentUserPermissions:t.users_GetCurrentUserPermissions.bind(t),users_InviteUsersOrRequestToVerifyEmails:t.users_InviteUsersOrRequestToVerifyEmails.bind(t),users_SetRoles:t.users_SetRoles.bind(t),users_SearchRoles:t.users_SearchRoles.bind(t)}}(s({transformResponse:[]}))}),[s]);return Object(r.useMemo)((function(){return Object(h.a)(Object(h.a)({},null!==i&&void 0!==i?i:function(e,t){return{backgroundJobs_GetPendingJobs:e,backgroundJobs_GetJobsStatus:e,backgroundJobs_CancelJob:e,blobStorage_Upload:e,blobStorage_List:e,blobStorage_Get:e,blobStorage_GetDataUrl:e,blobStorage_Delete:e,blobStorage_IsSupported:e,blobStorage_WriteFiles:e,collections_InsertOne:e,collections_InsertMany:e,collections_Replace:e,collections_UpdateOne:e,collections_UpdateMany:e,collections_DeleteOne:e,collections_DeleteMany:e,collections_Get:e,collections_FindById:e,collections_Find:e,collections_Aggregate:e,contexts_Search:e,contexts_FindOne:e,contexts_DispatchAction:e,contexts_BeginActiveContextRecalculation:e,contexts_Aggregate:e,contexts_Recalculate:e,contextTypes_Search:e,contextTypes_FindOne:e,contextTypes_History:e,contextTypes_Add:e,contextTypes_Update:e,contextTypes_Delete:e,contextTypes_EvalJsExpression:e,digitalWorkers_Add:e,digitalWorkers_Search:e,digitalWorkers_SearchData:e,digitalWorkers_Remove:e,digitalWorkers_Update:e,events_AddRequestProcessedEventListener:e,events_AddActionDispatchedEventListener:e,events_AddContextsRecalculationCompletedEventListener:e,events_AddContextRecalculationErrorEventListener:e,events_AddResponseSentEventListener:e,events_AddTaskCreatedEventListener:e,events_AddTaskUpdatedEventListener:e,events_AddTaskArchivedEventListener:e,events_AddMilestoneReachedEventListener:e,events_AddMilestoneClearedEventListener:e,events_AddCustomEventListener:e,events_AddBlobStorageUpdatedEventListener:e,events_SearchContextEventListeners:e,events_AggregateEvents:e,events_RemoveListener:e,events_RegisterCustomEvents:e,events_SearchEventListenerFailures:e,functions_Call:e,functions_GetModules:e,functions_Add:e,functions_Update:e,functions_Delete:e,functions_Search:e,info_Get:e,javascript_GetGlobalImports:e,simulation_Simulate:e,simulation_BuildInitialResponsePayload:e,tasks_FindOne:e,tasks_Search:e,tasks_AssignedToMe:e,tasks_Aggregate:e,tasks_AddResponse:e,tasks_BuildInitialResponsePayload:e,tasks_Update:e,tasks_UpdateMany:e,tasks_SearchAndUpdate:e,users_GetUsersWithPermission:e,users_GetUnitUsers:e,users_GetCurrentUserPermissions:e,users_InviteUsersOrRequestToVerifyEmails:e,users_SetRoles:e,users_SearchRoles:e,isHubSelected:t,getConfiguredAxiosInstance:e}}((function(){throw new Error("Invalid hub api state.")}),!1)),{},{isHubSelected:!!n,getConfiguredAxiosInstance:s})}),[i,n,s])},st=function(e){var t=new Q(e.defaults.baseURL,e);return{auth_SupportedSchemes:t.auth_SupportedSchemes.bind(t),auth_BearerSchemeSettings:t.auth_BearerSchemeSettings.bind(t),info_Get:t.info_Get.bind(t),organizations_FindById:t.organizations_FindById.bind(t),organizations_Update:t.organizations_Update.bind(t),organizations_Register:t.organizations_Register.bind(t),organizations_Delete:t.organizations_Delete.bind(t),organizations_Search:t.organizations_Search.bind(t),permissions_Grant:t.permissions_Grant.bind(t),permissions_Deny:t.permissions_Deny.bind(t),permissions_Set:t.permissions_Set.bind(t),permissions_Search:t.permissions_Search.bind(t),permissions_Any:t.permissions_Any.bind(t),permissions_SearchEntityUsers:t.permissions_SearchEntityUsers.bind(t),units_Register:t.units_Register.bind(t),units_Update:t.units_Update.bind(t),units_UpdateProps:t.units_UpdateProps.bind(t),units_Delete:t.units_Delete.bind(t),units_Search:t.units_Search.bind(t),units_SetUserRoles:t.units_SetUserRoles.bind(t),units_SearchUserRoles:t.units_SearchUserRoles.bind(t),users_Register:t.users_Register.bind(t),users_FindById:t.users_FindById.bind(t),users_FindByEmail:t.users_FindByEmail.bind(t),users_Search:t.users_Search.bind(t),userSession_GetUnits:t.userSession_GetUnits.bind(t),baseUrl:Se.d}},it=Object(W.b)({key:"currentUnitIdState",default:void 0}),ct=function(){var e=tt().getAuthorizedAxios;return Object(r.useMemo)((function(){for(var t=Se.d,n=t.length-1;n>=0;n--)if("/"!==t[n]){t=t.substring(0,n+1);break}var r=e({baseURL:t,transformResponse:[]});return st(r)}),[e])},ot=function(){var e=Object(W.g)(it),t=ct().userSession_GetUnits,n=tt().isAuthenticated,a=Object(q.a)(["unit/".concat(e),n],Object(D.a)(E.a.mark((function r(){var a,s;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return",void 0);case 2:return r.next=4,t({withProps:[nt,rt]}).catch((function(){return[]}));case 4:if(!((a=r.sent).length>0)){r.next=9;break}return r.abrupt("return",null!==(s=a.find((function(t){return t.id===e})))&&void 0!==s?s:a[0]);case 9:return r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})))).data,s=Object(r.useMemo)((function(){if(a)return a.props.hubApiUrl}),[a]);return{unit:a,hubBaseUrl:s}},ut=n(2376),lt=n(2381),dt=n(2382),pt=n(125),ft=n(2378),bt=n(2379),ht=n(2432),vt=n(2380),jt=n(2433),Ot=n(803),mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.useMemo)((function(){return Object(Ot.v4)()}),[].concat(t))},gt=n(391),xt=function e(t){var n;return t instanceof oe?function(e){try{var t=JSON.parse(e.response);if("title"in t){var n=function(e){return"errors"in e?e.errors:"extensions"in e?e.extensions.errors:void 0}(t);if(n){var r="### ".concat(t.title,"\n\n");Array.isArray(n)||(n=[n]);var a,s=Object(pe.a)(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;if("object"===typeof i){var c=Object.entries(i);if(1===c.length&&""===c[0][0]){var o=c[0][1];Array.isArray(o)?o.forEach((function(e,t){r+="".concat(t,". ").concat(e,"\n")})):o&&(r+="".concat(o,"\n"))}else c.forEach((function(e,t){var n=Object(b.a)(e,2),a=n[0],s=n[1];r+="".concat(t,". ").concat(a),Array.isArray(s)?(r+="\n",s.forEach((function(e,t){r+="\t".concat(t,". ").concat(e)}))):s&&(r+=": ".concat(s)),r+="\n"}))}}}catch(u){s.e(u)}finally{s.f()}return r}return"".concat(t.title," (").concat(t.status,")")}}catch(l){}return e.toString()}(t):Be(t)?function(e){var t;return!1===(null===(t=window.navigator)||void 0===t?void 0:t.onLine)?u.a.t("BrowserIsOffline"):u.a.t("AxiosNetworkErrorMarkdown")}():Array.isArray(t)?t.map((function(t){return e(t)})).join("\n\n"):t instanceof Error?t.message:null!==(n=null===t||void 0===t?void 0:t.toString())&&void 0!==n?n:""},yt=function(e){var t=e.error,n=Object(r.useMemo)((function(){return xt(t)}),[t]);return Object(me.jsx)(gt.a,{children:n})},kt=n(814),Ct=n(815),St=n(817),wt=n.n(St),Tt=n(583),_t=n.n(Tt),Pt=["onChange","tooltip","value","variant"],At=function(e){var t=e.onChange,n=e.tooltip,r=e.value,a=e.variant,s=Object(M.a)(e,Pt);return Object(me.jsx)(ze.a,Object(h.a)({variant:a,value:r,onChange:function(e){return null===t||void 0===t?void 0:t(e.target.value)},InputProps:{startAdornment:Object(me.jsx)(kt.a,{position:"start",children:Object(me.jsx)(Ct.a,{title:null!==n&&void 0!==n?n:"",children:Object(me.jsx)(wt.a,{fontSize:"small"})})}),endAdornment:Object(me.jsx)(kt.a,{position:"end",children:Object(me.jsx)(w.a,{disabled:!r,onClick:function(){return null===t||void 0===t?void 0:t("")},children:Object(me.jsx)(_t.a,{fontSize:"small"})})}),inputProps:{"aria-label":"Search"}}},s))},Nt=Object(j.a)((function(e){return Object(O.a)({dialog:{height:"50vh"},title:{display:"flex",flexDirection:"row"},grow:{flexGrow:1},nested:{paddingLeft:e.spacing(5)}})})),It=u.a.t("UnknownOrganization"),Rt=function(e){var t=e.units,n=e.onClose,s=Object(d.h)(),i=Nt(),c=Object(W.e)(it),o=Object(b.a)(c,2),u=o[0],l=o[1],p=Object(r.useMemo)((function(){var e=Object(jt.a)((function(e){var t;return null!==(t=e.organizationName)&&void 0!==t?t:It}),t);return[e,Object(ft.a)([Object(vt.a)((function(e){return Object(ht.a)(e)}))],Object.keys(e))]}),[t]),f=Object(b.a)(p,2),h=f[0],v=f[1],j=Object(r.useCallback)((function(e,t){l(t.id),n(),s("/",{replace:!0})}),[l,n,s]),O=function(e,t){return e.map((function(e){return Object(me.jsx)(lt.a,{button:!0,selected:e.id===u,onClick:function(t){return j(t,e)},className:t?i.nested:void 0,children:Object(me.jsx)(dt.a,{primary:e.name,secondary:e.description})},e.id)}))};return 1===v.length&&v[0]===It?Object(me.jsx)(ut.a,{children:O(t,!1)}):Object(me.jsx)(ut.a,{children:v.map((function(e){return Object(me.jsxs)(a.a.Fragment,{children:[Object(me.jsx)(lt.a,{children:Object(me.jsx)(dt.a,{primary:e})}),Object(me.jsx)(ut.a,{component:"div",disablePadding:!0,children:O(h[e],!0)})]},e)}))})},Ut=function(e){var t=e.open,n=e.onClose,a=Object(p.a)().t,s=Nt(),i=function(){var e=ct().userSession_GetUnits,t=mt(e),n=Object(pt.a)(t,Object(D.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({withProps:[nt,rt]});case 2:return n=t.sent,t.abrupt("return",Object(ft.a)([Object(bt.a)((function(e){var t;return Object(ht.a)(null!==(t=e.organizationName)&&void 0!==t?t:It)})),Object(vt.a)((function(e){return Object(ht.a)(e.name)}))],n));case 4:case"end":return t.stop()}}),t)})))),a=n.data,s=n.isValidating,i=n.error,c=n.mutate,o=Object(r.useState)(),u=Object(b.a)(o,2),l=u[0],d=u[1],p=Object(r.useMemo)((function(){return a?l?a.filter((function(e){return e.name&&Object(ht.a)(e.name).includes(Object(ht.a)(l))||e.organizationName&&Object(ht.a)(e.organizationName).includes(Object(ht.a)(l))})):a:[]}),[a,l]);return Object(r.useMemo)((function(){return{units:p,isValidating:s,error:i,revalidate:c,filter:l,setFilter:d}}),[p,s,i,c,l])}(),c=i.units,o=i.isValidating,u=i.error,l=i.filter,d=i.setFilter,f=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&(null===n||void 0===n||n())}),[n]);return Object(me.jsxs)(Me.a,{open:t,onClose:f,fullWidth:!0,maxWidth:"md",children:[Object(me.jsxs)(Fe.a,{disableTypography:!0,className:s.title,children:[Object(me.jsx)(C.a,{variant:"h6",display:"inline",children:a("SwitchBusinessUnit")}),Object(me.jsx)("div",{className:s.grow}),Object(me.jsx)(At,{value:l,onChange:d})]}),Object(me.jsxs)(Le.a,{className:s.dialog,children:[o&&Object(me.jsx)(xe,{}),!!u&&Object(me.jsx)(yt,{error:u}),!o&&!u&&Object(me.jsx)(Rt,{units:c,onClose:n})]}),Object(me.jsx)($e.a,{children:Object(me.jsx)(R.a,{onClick:n,color:"primary",children:a("Cancel")})})]})},Et=n(2383),Dt=function(e){var t=e.open,n=e.options,r=e.onClose,a=e.onClick,s=n.title,i=n.description,c=n.actions,o=n.dialogProps;return Object(me.jsxs)(Me.a,Object(h.a)(Object(h.a)({fullWidth:!0},o),{},{open:t,onClose:r,children:[s&&Object(me.jsx)(Fe.a,{children:s}),i&&Object(me.jsx)(Le.a,{children:Object(me.jsx)(C.a,{component:"div",variant:"body1",color:"textSecondary",children:i})}),Object(me.jsx)($e.a,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(me.jsx)(R.a,Object(h.a)(Object(h.a)({},e.buttonProps),{},{onClick:function(t){return a(t,e.type)},children:e.text}),e.type)}))})]}))},Mt={title:"Are you sure?",description:"",dialogProps:{},actions:[],confirmationText:"Ok",cancellationText:"Cancel",confirmationButtonProps:{},cancellationButtonProps:{}},$t=function(){throw new Error("You forgot to wrap your component in <ConfirmProvider>.")},Lt={confirm:$t,getDefaultOptions:$t},Ft=Object(r.createContext)(Lt),zt=function(e){var t=e.children,n=e.defaultOptions,a=void 0===n?{}:n,s=Object(r.useState)(Object(h.a)(Object(h.a)({},Mt),a)),i=Object(b.a)(s,2),c=i[0],o=i[1],u=Object(r.useState)([]),l=Object(b.a)(u,2),d=l[0],p=l[1],f=Object(b.a)(d,2),v=f[0],j=f[1],O=Object(r.useCallback)((function(e){return new Promise((function(t,n){o(e),p([t,n])}))}),[]),m=Object(r.useCallback)((function(e,t){c.mapCloseTo?v(c.mapCloseTo):j(t),p([])}),[j,v,c.mapCloseTo]),g=Object(r.useCallback)((function(e,t){v(t),p([])}),[v]),x=Object(r.useCallback)((function(){return a}),[a]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ft.Provider,{value:{confirm:O,getDefaultOptions:x},children:t}),Object(me.jsx)(Dt,{open:2===d.length,options:c,onClose:m,onClick:g})]})},Jt=function(e,t){return Object(ie.a)(Mt,Object(ie.a)(e,t))},Bt=function(){var e=Object(r.useContext)(Ft),t=e.confirm,n=e.getDefaultOptions;return Object(r.useCallback)((function(){var e,r,a,s,i,c,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=Jt(n(),o);return t({title:u.title,description:u.description,dialogProps:u.dialogProps,mapCloseTo:"cancel",actions:[{type:"ok",text:null!==(e=o.confirmationText)&&void 0!==e?e:u.confirmationText,buttonProps:Object(ie.a)(null!==(r=u.confirmationButtonProps)&&void 0!==r?r:{},null!==(a=o.confirmationButtonProps)&&void 0!==a?a:{})},{type:"cancel",text:null!==(s=o.cancellationText)&&void 0!==s?s:u.cancellationText,buttonProps:Object(ie.a)(null!==(i=u.cancellationButtonProps)&&void 0!==i?i:{},null!==(c=o.cancellationButtonProps)&&void 0!==c?c:{})}]}).then((function(e){return"ok"===e})).catch((function(){return!1}))}),[t,n])},Wt=n(1252),qt=n.n(Wt);!function(e){e.Security="security"}(de||(de={}));var Vt=Object(f.a)({},de.Security,"3.6.0"),Gt={hubBaseUrl:"",hubName:"",hubVersion:"",businessDirectoryBaseUrl:"",businessDirectoryName:"",businessDirectoryVersion:"",supportedFeatures:[],isFeatureSupported:function(){throw new Error("You forgot to wrap your component in <SystemInfoContextProvider>.")}},Ht=Object(r.createContext)(Gt),Yt=function(e){var t=e.children,n=ct(),a=n.baseUrl,s=n.info_Get,i=ot(),c=i.unit,o=i.hubBaseUrl,u=at(),l=u.info_Get,d=u.isHubSelected,p=Object(r.useState)(),f=Object(b.a)(p,2),h=f[0],v=f[1],j=Object(r.useState)(),O=Object(b.a)(j,2),m=O[0],g=O[1];Object(r.useEffect)((function(){if(d)try{s().then(v)}catch(e){}}),[s,d]),Object(r.useEffect)((function(){if(d)try{l().then(g)}catch(e){}}),[l,d]);var x=Object(r.useMemo)((function(){var e=[],t=null===m||void 0===m?void 0:m.version;if(t){var n,r=Object.keys(de).filter((function(e){return Number.isNaN(+e)})),a=Object(pe.a)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value,i=de[s],c=Vt[i];c&&qt.a.compare(t,c,">=")&&e.push(i)}}catch(o){a.e(o)}finally{a.f()}}return e}),[null===m||void 0===m?void 0:m.version]),y=Object(r.useCallback)((function(e){return x.includes(e)}),[x]),k=Object(r.useMemo)((function(){var e,t,n,r;return{hubBaseUrl:null!==o&&void 0!==o?o:"",hubName:null!==(e=null===m||void 0===m?void 0:m.name)&&void 0!==e?e:"",hubVersion:null!==(t=null===m||void 0===m?void 0:m.version)&&void 0!==t?t:"",businessDirectoryBaseUrl:a,businessDirectoryName:null!==(n=null===h||void 0===h?void 0:h.name)&&void 0!==n?n:"",businessDirectoryVersion:null!==(r=null===h||void 0===h?void 0:h.version)&&void 0!==r?r:"",currentUnit:c,supportedFeatures:x,isFeatureSupported:y}}),[h,a,c,o,m,y,x]);return Object(me.jsx)(Ht.Provider,{value:k,children:t})},Kt=function(){return Object(r.useContext)(Ht)},Zt=n(2323),Xt=n(2326),Qt=n(2321),en=["children"],tn=function(e){var t=e.children,n=Object(M.a)(e,en);return Object(me.jsx)(gt.a,Object(h.a)(Object(h.a)({className:"markdown-body",remarkPlugins:[Qt.a],rehypePlugins:[Zt.a,Xt.a]},n),{},{children:null!==t&&void 0!==t?t:""}))},nn=function(e){var t=e.open,n=e.onClose,a=Kt(),s=Object(p.a)().t,i=Object(r.useMemo)((function(){var e,t,n,r,i,c,o,u,l,d=a.supportedFeatures.join(", ");return"|".concat(s("Item"),"|").concat(s("Value"),"|\n|------------|-------------|\n|").concat(s("unitId"),"|").concat(null!==(e=null===(t=a.currentUnit)||void 0===t?void 0:t.id)&&void 0!==e?e:"","|\n|").concat(s("unitName"),"|").concat(null!==(n=null===(r=a.currentUnit)||void 0===r?void 0:r.name)&&void 0!==n?n:"","|\n|").concat(s("unitDescription"),"|").concat(null!==(i=null===(c=a.currentUnit)||void 0===c?void 0:c.description)&&void 0!==i?i:"","|\n|").concat(s("unitOrganizationId"),"|").concat(null!==(o=null===(u=a.currentUnit)||void 0===u?void 0:u.organizationId)&&void 0!==o?o:"","|\n|").concat(s("unitProps"),"|").concat(JSON.stringify(null===(l=a.currentUnit)||void 0===l?void 0:l.props),"|\n|").concat(s("hubName"),"|").concat(a.hubName,"|\n|").concat(s("hubBaseUrl"),"|").concat(a.hubBaseUrl,"|\n|").concat(s("hubVersion"),"|").concat(a.hubVersion,"|\n|").concat(s("businessDirectoryBaseUrl"),"|").concat(a.businessDirectoryBaseUrl,"|\n|").concat(s("businessDirectoryName"),"|").concat(a.businessDirectoryName,"|\n|").concat(s("businessDirectoryVersion"),"|").concat(a.businessDirectoryVersion,"|\n|").concat(s("supportedFeatures"),"|").concat(d,"|\n")}),[a,s]),c=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&(null===n||void 0===n||n())}),[n]);return Object(me.jsxs)(Me.a,{open:t,onClose:c,maxWidth:"md",children:[Object(me.jsx)(Fe.a,{children:s("SystemInfo")}),Object(me.jsx)(Le.a,{children:Object(me.jsx)(tn,{children:i})}),Object(me.jsx)($e.a,{children:Object(me.jsx)(R.a,{onClick:n,color:"primary",children:s("Close")})})]})},rn=["className"],an=Object(j.a)((function(){return Object(O.a)({header:{display:"flex",alignItems:"center"},unitContainer:{flex:"1 1 auto",textAlign:"right"},userName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:14,maxWidth:160,textTransform:"none",fontWeight:"normal"},unit:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:10,fontWeight:600,maxWidth:160,textTransform:"uppercase"},avatar:{flex:"0 0 auto",marginLeft:6}})})),sn=function(e){var t=e.className,n=Object(M.a)(e,rn),a=Object(p.a)().t,s=an(),i=Object(r.useState)(!1),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useState)(!1),d=Object(b.a)(l,2),f=d[0],j=d[1],O=tt(),m=O.isAuthenticated,g=O.logout,x=O.supportsPasswordReset,y=O.startResetPasswordFlow,k=O.authenticatedUser,C=Bt(),w=ot().unit,T=Object(B.usePopupState)({variant:"popover",popupId:"profileMenu"}),_=Object(r.useCallback)((function(){g()}),[g]),P=Object(r.useCallback)((function(){T.close(),u(!0)}),[T]),A=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.close(),null===k||void 0===k?void 0:k.email){e.next=5;break}return e.next=4,C({title:a("Error"),description:a("UserEmailNotSet"),cancellationButtonProps:{style:{visibility:"hidden"}}});case 4:return e.abrupt("return");case 5:return e.next=7,C({title:a("ChangePassword"),description:a("ChangePasswordDescription"),confirmationText:a("SendMail")});case 7:if(!e.sent){e.next=18;break}return e.prev=8,e.next=11,y(null===k||void 0===k?void 0:k.email);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(8),e.next=17,C({title:a("Error"),description:a("ErrorChangingPassword"),cancellationButtonProps:{style:{visibility:"hidden"}}});case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[8,13]])}))),[C,T,y,a,null===k||void 0===k?void 0:k.email]),N=Object(r.useCallback)((function(){T.close(),j(!0)}),[T]);return m?Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(R.a,Object(h.a)(Object(h.a)(Object(h.a)({className:Object(v.default)(s.header,t)},n),Object(B.bindTrigger)(T)),{},{children:[Object(me.jsxs)("div",{className:s.unitContainer,children:[Object(me.jsx)("div",{className:s.userName,children:null===k||void 0===k?void 0:k.name}),Object(me.jsx)("div",{className:s.unit,children:null===w||void 0===w?void 0:w.name})]}),Object(me.jsx)($.a,{src:null===k||void 0===k?void 0:k.picture,alt:null===k||void 0===k?void 0:k.name,className:s.avatar}),Object(me.jsx)(F.a,{})]})),Object(me.jsxs)(z.a,Object(h.a)(Object(h.a)({},Object(B.bindMenu)(T)),{},{children:[Object(me.jsx)(J.a,{children:null===k||void 0===k?void 0:k.name}),Object(me.jsx)(S.a,{}),Object(me.jsx)(J.a,{onClick:P,children:a("SwitchBusinessUnit")}),x&&Object(me.jsx)(J.a,{onClick:A,children:a("ChangePassword")}),Object(me.jsx)(J.a,{onClick:N,children:a("SystemInfo")}),Object(me.jsx)(S.a,{}),Object(me.jsx)(J.a,{onClick:_,children:a("Logout")})]})),o&&Object(me.jsx)(Ut,{open:o,onClose:function(){return u(!1)}}),f&&Object(me.jsx)(nn,{open:f,onClose:function(){return j(!1)}})]}):null},cn=n(1278),on=n.n(cn),un=n(1279),ln=n.n(un),dn=n(2386),pn=n(2385),fn=n(392),bn=Object(r.createContext)((function(){throw new Error("Forgot to wrap component in `ThemeProvider`")}));var hn=Object(j.a)((function(e){return Object(O.a)({globalStyles:{"& *::-webkit-scrollbar":{width:10},"& *::-webkit-scrollbar-track":{backgroundColor:"#9993 !important"},"& *::-webkit-scrollbar-thumb":{backgroundColor:"#9999 !important"},scrollbarWidth:"thin",scrollbarColor:"#9999 #9993"}})})),vn=function(e){var t=e.children,n=hn();return Object(r.useLayoutEffect)((function(){var e=document.getElementsByTagName("body")[0],t=n.globalStyles;return e.classList.contains(t)||e.classList.add(t),function(){return e.classList.remove(t)}}),[n.globalStyles]),Object(me.jsx)(me.Fragment,{children:t})},jn=function(e){var t=e.persistKey,n=e.children,s="".concat(t,":type"),i=Object(pn.a)("(prefers-color-scheme: dark)"),c=Object(r.useState)((function(){var e=localStorage.getItem(s);return"light"===e||"dark"===e?e:i?"dark":"light"})),o=Object(b.a)(c,2),u=o[0],l=o[1];Object(r.useEffect)((function(){try{localStorage.setItem(s,u)}catch(e){console.warn(e)}}),[u,s]);var d=a.a.useMemo((function(){return function(e){var t=e.paletteType;return Object(fn.b)({palette:{type:t,primary:{main:"#00B1EB",dark:"#2B2E32",contrastText:"#fff"},secondary:{main:"#202225"}},overrides:{MuiCssBaseline:{"@global":{"*":{"scrollbar-width":"thin"}}}}})}({paletteType:u})}),[u]);return Object(me.jsx)(dn.a,{theme:d,children:Object(me.jsx)(bn.Provider,{value:l,children:Object(me.jsx)(vn,{children:n})})})};var On=function(e){var t=e.title,n=Object(M.a)(e,["title"]),s=Object(m.a)(),i=Object(p.a)().t,c=function(){var e=a.a.useContext(bn);return a.a.useCallback((function(t){return e(t)}),[e])}(),o=Object(r.useCallback)((function(){var e="light"===s.palette.type?"dark":"light";c(e)}),[s.palette.type,c]);return Object(me.jsx)(Ct.a,{title:null!==t&&void 0!==t?t:i("ToggleTheme"),enterDelay:300,children:Object(me.jsx)(w.a,Object(h.a)(Object(h.a)({onClick:o},n),{},{children:"light"===s.palette.type?Object(me.jsx)(on.a,{}):Object(me.jsx)(ln.a,{})}))})},mn=n(2387),gn=function(e){var t=e.children,n=Object(mn.a)({disableHysteresis:!0,threshold:0});return a.a.cloneElement(t,{elevation:n?4:0})},xn=n(837),yn=n.n(xn),kn=n(1282),Cn=n.n(kn),Sn=n(1283),wn=n.n(Sn),Tn=n(2356),_n=function(e){return Object(me.jsx)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 36 36"},e),{},{children:Object(me.jsxs)("g",{children:[Object(me.jsx)("path",{d:"M17.996 11.599a.5.5 0 00-.5.5v5.69a.5.5 0 101 0v-5.61a.5.5 0 00-.5-.58z"}),Object(me.jsx)("path",{d:"M6.959 11.763a.5.5 0 00-.492.506v3.027a.5.5 0 00.5.5h22.066a.5.5 0 00.5-.5V12.27a.5.5 0 10-1 0v2.527H7.467V12.27a.5.5 0 00-.508-.506z"}),Object(me.jsx)("path",{d:"M29.008 3a2.052 2.052 0 00-2.045 2.044v1.512c0 .497.277.876.566 1.21-.218.11-1.364.678-2.588 1.345-.456.228-.88.67-.88 1.293v.377a.5.5 0 101 0v-.377c0-.104.14-.305.328-.399a.5.5 0 00.015-.01 89.372 89.372 0 012.71-1.408l.845-.01c.018 0 .03.022.049.022.019 0 .032-.021.05-.022l.864-.01c.05.024.094.051.174.09l.623.309c.514.257 1.227.623 2.074 1.095.165.104.207.199.207.5v.239a.5.5 0 101 0v-.239c0-.502-.2-1.053-.678-1.351a.5.5 0 00-.021-.012 52.764 52.764 0 00-2.135-1.13l-.629-.31c-.028-.014-.015-.01-.04-.02.28-.332.554-.7.554-1.187V5.039a2.05 2.05 0 00-2.043-2.045zm0 1a1.03 1.03 0 011.043 1.044v1.512c0 .256-.139.521-.362.727-.207.19-.47.282-.634.296h-.092a1.167 1.167 0 01-.639-.296c-.223-.206-.361-.47-.361-.727V5.044c0-.587.458-1.045 1.045-1.045zM6.948 3a2.052 2.052 0 00-2.046 2.044v1.512c0 .497.28.876.569 1.21-.218.109-1.366.678-2.59 1.345-.456.228-.881.67-.881 1.293v.377a.5.5 0 101 0v-.377c0-.104.14-.305.328-.399a.5.5 0 00.016-.01 89.373 89.373 0 012.709-1.408l.845-.01c.019 0 .031.022.05.022.018 0 .031-.021.05-.022l.863-.01c.05.024.095.051.174.09.155.076.364.179.623.309.514.257 1.228.623 2.074 1.095.165.104.207.198.207.5v.239a.5.5 0 101 0v-.239c0-.503-.2-1.053-.677-1.351a.5.5 0 00-.022-.012 52.764 52.764 0 00-2.135-1.13l-.628-.31c-.028-.014-.016-.01-.041-.02.28-.332.554-.7.554-1.187V5.039a2.05 2.05 0 00-2.043-2.045zm0 1A1.03 1.03 0 017.99 5.043v1.512c0 .256-.138.521-.361.727-.208.19-.47.282-.635.296h-.092a1.167 1.167 0 01-.638-.296c-.223-.206-.362-.47-.362-.727V5.044C5.902 4.457 6.36 4 6.947 4zm11.029-1a2.05 2.05 0 00-2.043 2.044v1.512c0 .497.277.876.566 1.21-.218.11-1.366.678-2.59 1.345-.456.228-.88.67-.88 1.293v.377a.5.5 0 101 0v-.377c0-.104.14-.305.327-.399a.5.5 0 00.016-.01 89.372 89.372 0 012.709-1.408l.846-.01c.018 0 .03.022.049.022.018 0 .032-.021.05-.022l.866-.01c.049.024.092.051.171.09.155.076.366.179.625.309.514.256 1.227.624 2.073 1.095.166.104.209.2.209.502v.239a.5.5 0 101 0v-.239c0-.503-.202-1.053-.68-1.351a.5.5 0 00-.02-.012 52.764 52.764 0 00-2.134-1.13c-.264-.131-.479-.235-.631-.31-.028-.014-.015-.01-.041-.02.28-.332.556-.7.556-1.187V5.04a2.052 2.052 0 00-2.044-2.045zm0 1c.586 0 1.044.457 1.044 1.044v1.512c0 .256-.14.521-.363.727-.207.19-.47.282-.635.296h-.091a1.162 1.162 0 01-.637-.296c-.223-.206-.361-.47-.361-.727V5.044A1.03 1.03 0 0117.977 4z"}),Object(me.jsx)("path",{d:"M17.951 17.591a3.693 3.693 0 00-3.69 3.691v3.127c0 1.056.537 1.976 1.243 2.627.04.038.093.054.135.09l-.01.01s-3.087 1.531-5.84 3.034c-.8.4-1.525 1.186-1.525 2.195v.78a.5.5 0 101 0v-.78c0-.49.44-1.037.972-1.303a.5.5 0 00.016-.01 194.862 194.862 0 015.82-3.023l.53-.262c.429.202.875.323 1.32.328.01 0 .02.01.03.01h.003a.5.5 0 00.053 0c.153-.01.188-.06.314-.084.34-.046.676-.108 1.002-.264.012 0 .035-.01.047-.012l.488.239-.058-.035c.164.11.316.173.635.33.318.157.754.369 1.292.638 1.072.537 2.557 1.302 4.327 2.29.51.318.681.757.681 1.49v.494a.5.5 0 101 0v-.494c0-.933-.329-1.825-1.15-2.338a.5.5 0 00-.022-.014 108.792 108.792 0 00-4.388-2.322c-.543-.272-.983-.485-1.3-.641-.315-.156-.558-.29-.519-.264a.5.5 0 00-.039-.024c.026-.022.058-.032.082-.055.707-.65 1.243-1.57 1.243-2.627v-3.127a3.694 3.694 0 00-3.692-3.69zm0 1a2.675 2.675 0 012.692 2.691v3.127c0 .713-.374 1.388-.92 1.891-.543.5-1.248.793-1.76.797h-.002c-.02 0-.033-.014-.053-.016-.51-.014-1.194-.29-1.726-.781-.546-.503-.92-1.178-.92-1.89v-3.128c0-1.5 1.19-2.691 2.69-2.691z"})]})}))},Pn="dispatch:context-actions",An="manage:tasks",Nn="read:context-types",In="read:tasks",Rn="read:users",Un="send:task-responses",En="manage",Dn={member:{name:"member",permissions:[In,Un]},coordinator:{name:"coordinator",permissions:[An,"read:contexts",Rn]},developer:{name:"developer",permissions:[Nn,"write:context-types",Pn]},administrator:{name:"administrator",permissions:[En]}},Mn={workMyTasks:[In,Nn,Un],manageTeamTasks:[An,Rn],dispatchActions:[Pn,Nn],manage:[En]},$n=function(){var e=ot().unit,t=at().users_GetCurrentUserPermissions,n=tt().isAuthenticated,a=Object(q.a)(["permissions/".concat(null===e||void 0===e?void 0:e.id),n],Object(D.a)(E.a.mark((function r(){return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&n){r.next=2;break}return r.abrupt("return",[]);case 2:return r.prev=2,r.next=5,t({pageNumber:0,pageSize:100});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(2),r.abrupt("return",[]);case 11:case"end":return r.stop()}}),r,null,[[2,8]])})))).data,s=Object(r.useCallback)((function(){return null!==a&&void 0!==a?a:[]}),[a]),i=Object(r.useCallback)((function(e){var t=s();return e.filter((function(e){return"string"===typeof e?!t.includes(e):e.every((function(e){return!t.includes(e)}))}))}),[s]);return{can:Object(r.useCallback)((function(e){return 0===i(e).length}),[i]),canAny:Object(r.useCallback)((function(e){return i(e).length<e.length}),[i]),getGrantedPermission:s,checkPermissions:i,permissions:a}},Ln=n(2388),Fn=n(2358),zn=n(1280),Jn=n.n(zn),Bn=Object(j.a)((function(e){return Object(O.a)({menuItem:{},menuItemIcon:{}})})),Wn=function e(t){var n=t.name,s=t.link,i=t.icon,c=t.items,o=void 0===c?[]:c,u=Bn(),l=Object(d.h)(),p=o&&o.length>0,f=a.a.useState(!1),v=Object(b.a)(f,2),j=v[0],O=v[1],m=Object(r.useCallback)((function(){p?O((function(e){return!e})):"string"===typeof s&&s&&l(s)}),[p,s,l]),g=Object(me.jsxs)(lt.a,{button:!0,className:u.menuItem,onClick:m,children:[!!i&&Object(me.jsx)(Ln.a,{className:u.menuItemIcon,children:i}),Object(me.jsx)(dt.a,{primary:n,inset:!i}),p&&!j&&Object(me.jsx)(F.a,{}),p&&j&&Object(me.jsx)(Jn.a,{})]}),x=p?Object(me.jsxs)(Fn.a,{in:j,timeout:"auto",unmountOnExit:!0,children:[Object(me.jsx)(S.a,{}),Object(me.jsx)(ut.a,{component:"div",disablePadding:!0,children:o.map((function(t,n){return Object(r.createElement)(e,Object(h.a)(Object(h.a)({},t),{},{key:n}))}))})]}):null;return Object(me.jsxs)(me.Fragment,{children:[g,x]})},qn=n(15),Vn=n(101),Gn=n(341),Hn=n(1281),Yn=n(2389),Kn=n(42),Zn=function(e,t){for(var n,r,a=null!==(n=null===t||void 0===t?void 0:t.inputValues)&&void 0!==n?n:{},s=null!==(r=null===t||void 0===t?void 0:t.outputValues)&&void 0!==r?r:{},i=Object.keys(a),c=Object.keys(s),o="\n    (function() {\n        ".concat(e,"\n    })();\n    return {").concat(c.join(", "),"};\n    "),u=Object(Kn.a)(Function,Object(qn.a)(i.concat(c)).concat([o])),l=i.map((function(e){return a[e]})),d=c.map((function(e){return s[e]})),p=u.apply(void 0,Object(qn.a)(l.concat(d))),f=0,b=c;f<b.length;f++){var h=b[f];s[h]=p[h]}},Xn=function(){var e=at(),t=e.functions_Call,n=e.functions_GetModules,a=e.functions_Search,s=e.functions_Add,i=e.functions_Delete,c=e.functions_Update,o=Object(r.useRef)(),u=Object(r.useCallback)((function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return t({moduleName:e,name:n,parameters:r},a)}),[t]),l=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n,r){var a,s,i,c,o,l=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},s=l.length>4?l[4]:void 0,i=void 0,r&&(Zn(r,{inputValues:a,outputValues:c={args:void 0}}),i=c.args),e.next=6,u(t,n,i,s);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[u]),d=Object(r.useCallback)((function(e,t){return n({retrieveFunctionInfos:e},t)}),[n]),p=Object(r.useCallback)((function(e){var t=o.current;return t||(o.current=t=n({retrieveFunctionInfos:!0},e).then((function(e){var t,n={},r=Object(pe.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.functions){var s,i=Object(pe.a)(a.functions);try{for(i.s();!(s=i.n()).done;){var c=s.value;a.name&&c.name&&(n["".concat(a.name,"/").concat(c.name)]=Object(h.a)(Object(h.a)({},c),{},{moduleName:a.name}))}}catch(o){i.e(o)}finally{i.f()}}}}catch(o){r.e(o)}finally{r.f()}return n}))),t}),[n]),f=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("javascript","EvaluateScript",{script:t,context:n},r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[u]),b=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("javascript","EvaluateScriptWithConsole",{script:t,context:n},r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[u]),v=Object(r.useMemo)((function(){return{evaluateScript:f,evaluateScriptWithConsole:b}}),[f,b]),j=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),O=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({id:t},n);case 2:return r=e.sent,e.abrupt("return",r.length>0?r[0]:void 0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),m=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),g=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object(Yn.a)(["id","version"],t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s]),x=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(Object(Yn.a)(["version"],t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),y=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({id:t},n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]);return{javascript:v,call:u,evaluateArgsAndCall:l,getModules:d,getFunctions:p,getUdFunction:O,getAllUdFunctions:j,searchUdFunctions:m,addUdFunction:g,updateUdFunction:x,deleteUdFunction:y}};Object.freeze(["number","string","boolean","datetime","dateinterval"]);Object.freeze(["single","multiple","freeText","timeRange"]);Object.freeze(["static","function"]);var Qn=function(e){switch(e.selectionType){case"timeRange":return[e.beginVariableName,e.endVariableName];default:return[e.variableName]}},er=function(e,t){if(Object(Vn.isPresent)(null===e||void 0===e?void 0:e.displayText))return null===e||void 0===e?void 0:e.displayText;var n=null===e||void 0===e?void 0:e.value;if("string"===typeof n&&"datetime"===t.dataType){var r=u.a.t("DATE_FORMAT"),a=u.a.t("TIME_FORMAT");return Object(Gn.default)(Object(Hn.default)(n),r)+" "+Object(Gn.default)(Object(Hn.default)(n),a)+" (UTC)"}return null===n||void 0===n?void 0:n.toString()},tr=["30s","1m","5m","15m","30m","1h","2h","1d"];Object.freeze(tr);var nr=6e4,rr=36e5,ar="NimflowDashboards",sr=function(){var e=at(),t=e.collections_Aggregate,n=e.collections_FindById,a=e.collections_InsertOne,s=e.collections_DeleteOne,i=e.collections_Replace;return{dashboards_GetInfos:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n,r){var a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{$project:{_id:!1,id:"$_id",name:1,title:1}},{$sort:{name:1}}],(s=null===n||void 0===n?void 0:n.name)&&(a=[{$match:{name:s}}].concat(Object(qn.a)(a))),e.next=5,t({collectionName:ar,stages:a},r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),dashboards_FindOne:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({collectionName:ar,id:t},r);case 2:return(a=e.sent).id||(a.id=a._id),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),dashboards_InsertOne:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({collectionName:ar,document:t},n);case 2:return r=e.sent,e.abrupt("return",r.id);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),dashboards_Replace:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({id:null!==(r=t.id)&&void 0!==r?r:t._id,collectionName:ar,replacement:t},n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]),dashboards_Delete:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({collectionName:ar,id:t},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s])}},ir=function(e){return Object(me.jsxs)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 256 256"},e),{},{children:[Object(me.jsx)("path",{d:"M23.5 48.9c-1.1.5-3.1 2.1-4.5 3.6l-2.5 2.7V201l3.3 3.2 3.2 3.3h210l3.2-3.3 3.3-3.2V55l-3.3-3.2-3.2-3.3-103.8-.2c-57-.1-104.6.2-105.7.6zm207.3 8.3c.7.7 1.2 4 1.2 8V72H24v-6.8c0-4 .5-7.3 1.2-8 1.7-1.7 203.9-1.7 205.6 0zm1.2 81.6c0 44.4-.3 59.1-1.2 60-1.7 1.7-203.9 1.7-205.6 0-.9-.9-1.2-15.6-1.2-60V80h208v58.8z"}),Object(me.jsx)("path",{d:"M185 61.5c-2.6 3.2 1.3 8.1 4.8 5.9 3.4-2.2 2.2-7.4-1.8-7.4-1 0-2.3.7-3 1.5zM201 61.5c-2.6 3.2 1.3 8.1 4.8 5.9 3.4-2.2 2.2-7.4-1.8-7.4-1 0-2.3.7-3 1.5zM217 61.5c-2.6 3.2 1.3 8.1 4.8 5.9 3.4-2.2 2.2-7.4-1.8-7.4-1 0-2.3.7-3 1.5zM33.2 89.2c-.6.6-1.2 2-1.2 2.9 0 3.5 2.3 4 18.5 3.7 13.8-.3 15.9-.5 16.9-2.1.8-1.2.8-2.2 0-3.5-1-1.5-3.1-1.7-17-2-11.6-.2-16.3.1-17.2 1zM180.2 95c-3.5 6.3-3.1 6.2-10.7 2.4-3.8-1.9-8.7-3.7-10.7-4.1-6.6-1-6.8-.5-6.8 21.1 0 13.6.4 19.6 1.2 20.4.8.8 6.8 1.2 20.4 1.2 21.5 0 22.1-.2 21.1-6.5-.8-4.9-5.2-14.2-8.8-18.7-2.9-3.7-2.9-3.7-1.2-7.2l1.6-3.5 10-.3c8.2-.3 10.2-.6 11.1-2.1.8-1.2.8-2.2 0-3.5-.9-1.4-3-1.7-13.3-2l-12.2-.3-1.7 3.1zm-14.1 9.6c7.1 3.5 13.1 9.4 16.8 16.3 1.7 3.2 3.1 6.2 3.1 6.5 0 .3-5.8.6-13 .6h-13v-13c0-7.2.2-13 .5-13s2.8 1.2 5.6 2.6zM217 93.5c-2.6 3.2 1.3 8.1 4.8 5.9 3.4-2.2 2.2-7.4-1.8-7.4-1 0-2.3.7-3 1.5z"}),Object(me.jsx)("path",{d:"M130.9 95.4c-8.1 3.3-11.9 5.9-17.6 11.9-14.8 15.6-17.3 37.2-6.7 56.6l3.6 6.5-2.3 4.8-2.2 4.7-10 .3c-8.2.3-10.2.6-11.1 2-.8 1.3-.8 2.3 0 3.5 1 1.6 2.8 1.8 13.5 1.8h12.4l3-5.5 3-5.6 4.8 3.2c19.2 13.1 45 10.3 61.1-6.5 8.5-9 14.8-23.8 11.6-27.6-1-1.3-5.1-1.5-25.6-1.5H144v-24.3c0-17.6-.3-24.6-1.2-25.5-1.8-1.8-5.6-1.4-11.9 1.2zm5.1 30.4c0 17.2.3 24.1 1.2 25 .9.9 7.8 1.2 25 1.2 13.1 0 23.8.3 23.8.6s-1.4 3.3-3.1 6.5c-4 7.5-10.2 13.2-18.7 17.2-6.1 2.9-7.6 3.2-16.2 3.2s-10.1-.3-16.2-3.2c-9.3-4.4-15.1-10-19.6-19.1-3.5-7.2-3.7-8.1-3.7-17.2s.2-10 3.7-17.1c2-4 5.4-9.1 7.5-11.1 3.4-3.3 13.6-9.7 15.6-9.8.4 0 .7 10.7.7 23.8zM33.2 105.2c-.6.6-1.2 2-1.2 2.9 0 3.5 2.3 4 18.5 3.7 13.8-.3 15.9-.5 16.9-2.1.8-1.2.8-2.2 0-3.5-1-1.5-3.1-1.7-17-2-11.6-.2-16.3.1-17.2 1zM205.2 105.2c-.6.6-1.2 2-1.2 2.9 0 3.1 2.5 4 10.6 3.7 6-.2 7.9-.7 8.8-2.1.8-1.2.8-2.2 0-3.5-.9-1.3-2.8-1.8-9-2-5.3-.2-8.3.1-9.2 1zM33.2 121.2c-.6.6-1.2 2-1.2 2.9 0 3.5 2.3 4 18.5 3.7 13.8-.3 15.9-.5 16.9-2.1.8-1.2.8-2.2 0-3.5-1-1.5-3.1-1.7-17-2-11.6-.2-16.3.1-17.2 1zM33.2 137.2c-.6.6-1.2 2-1.2 2.9 0 3.5 2.3 4 18.5 3.7 13.8-.3 15.9-.5 16.9-2.1.8-1.2.8-2.2 0-3.5-1-1.5-3.1-1.7-17-2-11.6-.2-16.3.1-17.2 1z"}),Object(me.jsx)("path",{d:"M69.2 169.2c-.6.6-1.2 2-1.2 2.9 0 3.1 2.5 4 10.6 3.7 6-.2 7.9-.7 8.8-2.1.8-1.2.8-2.2 0-3.5-.9-1.3-2.8-1.8-9-2-5.3-.2-8.3.1-9.2 1zM69 181.5c-2.6 3.2 1.3 8.1 4.8 5.9 3.4-2.2 2.2-7.4-1.8-7.4-1 0-2.3.7-3 1.5z"})]}))},cr=Mn.workMyTasks,or=Mn.manageTeamTasks,ur=Mn.dispatchActions,lr=Mn.manage,dr=Object(j.a)((function(e){return Object(O.a)({appMenu:{width:"100%",height:"100%"}})})),pr=function(){var e=dr(),t=Object(p.a)().t,n=$n().can,a=function(){var e=sr().dashboards_GetInfos,t=mt(e),n=Object(pt.a)(t,Object(D.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),{revalidateOnFocus:!1}),a=n.data,s=n.isValidating,i=n.mutate,c=n.error;return Object(r.useMemo)((function(){return{dashboards:a,isValidating:s,error:c,mutate:i}}),[a,s,i,c])}().dashboards,s=Kt().isFeatureSupported,i=Object(r.useMemo)((function(){var e=[];return n(cr)&&e.push({name:t("MyTasks"),link:"/tasks",icon:Object(me.jsx)(yn.a,{})}),n(or)&&e.push({name:t("UnitTasks"),link:"/team-tasks",icon:Object(me.jsx)(_n,{})}),a&&a.length>0&&e.push({name:t("Dashboards"),icon:Object(me.jsx)(ir,{}),items:null===a||void 0===a?void 0:a.map((function(e){var t;return{name:null!==(t=e.title)&&void 0!==t?t:e.name,link:"/dashboard/".concat(e.id)}}))}),n(ur)&&e.push({name:t("DispatchActions"),link:"/dispatch-action",icon:Object(me.jsx)(Cn.a,{})}),n(lr)&&s(de.Security)&&e.push({name:t("Security"),link:"/security",icon:Object(me.jsx)(wn.a,{})}),e}),[n,a,s,t]);return Object(me.jsx)(ut.a,{component:"nav",className:e.appMenu,disablePadding:!0,children:i.map((function(e,t){return Object(r.createElement)(Wn,Object(h.a)(Object(h.a)({},e),{},{key:t}))}))})},fr=240,br=Object(j.a)((function(e){return Object(O.a)({root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),maxHeight:64},appBarShift:{width:"calc(100% - ".concat(fr,"px)"),marginLeft:fr,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:fr,flexShrink:0},drawerPaper:{width:fr},drawerHeader:Object(h.a)(Object(h.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px"),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},grow:{flexGrow:1},actionToolbarButtons:{display:"flex"}})})),hr=function(){var e=br(),t=Object(m.a)(),n=Object(p.a)().t,a=Object(r.useState)(!0),s=Object(b.a)(a,2),i=s[0],c=s[1],o=tt(),u=o.isAuthenticated,l=o.login;return Object(me.jsxs)("div",{className:e.root,children:[Object(me.jsx)(x.a,{}),Object(me.jsx)(gn,{children:Object(me.jsx)(y.a,{position:"fixed",className:Object(v.default)(e.appBar,Object(f.a)({},e.appBarShift,i)),children:Object(me.jsxs)(k.a,{children:[Object(me.jsx)(w.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",className:Object(v.default)(e.menuButton,i&&e.hide),children:Object(me.jsx)(_.a,{})}),Object(me.jsx)(C.a,{variant:"h6",noWrap:!0,children:"Nimflow"}),Object(me.jsx)("div",{className:e.grow}),Object(me.jsxs)("div",{className:e.actionToolbarButtons,children:[Object(me.jsx)(On,{color:"inherit"}),!u&&Object(me.jsx)(R.a,{onClick:l,color:"inherit",children:n("Login")}),u&&Object(me.jsx)(sn,{color:"inherit"})]})]})})}),Object(me.jsxs)(g.a,{className:e.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:e.drawerPaper},children:[Object(me.jsx)("div",{className:e.drawerHeader,children:Object(me.jsx)(w.a,{onClick:function(){c(!1)},children:"ltr"===t.direction?Object(me.jsx)(A.a,{}):Object(me.jsx)(I.a,{})})}),Object(me.jsx)(S.a,{}),Object(me.jsx)(pr,{})]}),Object(me.jsxs)("main",{className:Object(v.default)(e.content,Object(f.a)({},e.contentShift,i)),children:[Object(me.jsx)("div",{className:e.drawerHeader}),Object(me.jsx)(d.a,{})]})]})},vr=["onRedirecting"],jr=function(){return Object(me.jsx)("div",{})},Or=function(e){var t=e.onRedirecting,n=void 0===t?jr:t,a=Object(M.a)(e,vr),s=tt(),i=s.isAuthenticated,c=s.login;return Object(r.useEffect)((function(){i||c()}),[i,c]),i?Object(me.jsx)(d.b,Object(h.a)({},a)):n()},mr=function(){var e=Object(p.a)().t;return Object(me.jsx)(C.a,{variant:"h5",color:"error",children:e("UnauthorizedMessage")})},gr=["permissions","unauthorized","element"],xr=function(e){var t=e.permissions,n=e.unauthorized,r=e.element,a=ot().unit,s=$n(),i=s.checkPermissions,c=s.permissions;if(!a||!c)return Object(me.jsx)(me.Fragment,{});if(t){var o=Array.isArray(t)?t:[t];if(o.length>0&&i(o).length>0)return null!==n&&void 0!==n?n:Object(me.jsx)(mr,{})}return null!==r&&void 0!==r?r:null},yr=function(e){var t=e.permissions,n=e.unauthorized,r=e.element,a=Object(M.a)(e,gr);return Object(me.jsx)(Or,Object(h.a)({element:Object(me.jsx)(xr,{element:r,permissions:t,unauthorized:n})},a))},kr=n(2405),Cr=n(2402),Sr=n(2403),wr=n(792),Tr=Object(j.a)((function(e){return Object(O.a)({paper:{padding:e.spacing(2),color:e.palette.text.secondary}})})),_r=function(e){var t=e.children,n=e.className,r=Object(M.a)(e,["children","className"]),a=Tr();return Object(me.jsx)(wr.a,Object(h.a)(Object(h.a)({className:"".concat(a.paper," ").concat(n),elevation:3},r),{},{children:t}))},Pr=function(e){var t=e.children,n=Object(M.a)(e,["children"]);return Object(me.jsx)(C.a,Object(h.a)(Object(h.a)({variant:"h5"},n),{},{children:t}))},Ar=Object(j.a)((function(e){return Object(O.a)({grow:{flexGrow:1},actionToolbarButtons:{display:"flex"}})})),Nr=function(e){var t=e.title,n=e.actions,r=Object(M.a)(e,["title","actions"]),a=Ar();return Object(me.jsxs)(k.a,Object(h.a)(Object(h.a)({variant:"dense"},r),{},{children:[t&&Object(me.jsx)(Pr,{children:t}),Object(me.jsx)("div",{className:a.grow}),n&&Object(me.jsx)("div",{className:a.actionToolbarButtons,children:n})]}))},Ir=n(2391),Rr=n(2392),Ur=n(843),Er=n.n(Ur),Dr=function(e){return Object(me.jsxs)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 64 64"},e),{},{children:[Object(me.jsx)("path",{d:"M58 13H6c-1.103 0-2-.897-2-2s.897-2 2-2h52c1.103 0 2 .897 2 2S59.103 13 58 13zM6 10c-.552 0-1 .449-1 1s.448 1 1 1h52c.552 0 1-.449 1-1s-.448-1-1-1H6zM36.5 20h-9c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h9c1.379 0 2.5 1.122 2.5 2.5S37.879 20 36.5 20zM27.5 16c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h9c.827 0 1.5-.673 1.5-1.5S37.327 16 36.5 16H27.5zM18.497 45h-6c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h6c1.379 0 2.5 1.122 2.5 2.5S19.876 45 18.497 45zM12.497 41c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h6c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5H12.497zM51.497 45h-6c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h6c1.379 0 2.5 1.122 2.5 2.5S52.876 45 51.497 45zM45.497 41c-.827 0-1.5.673-1.5 1.5s.673 1.5 1.5 1.5h6c.827 0 1.5-.673 1.5-1.5s-.673-1.5-1.5-1.5H45.497zM29.5 28h-10c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h10c.276 0 .5.224.5.5v4C30 27.776 29.776 28 29.5 28zM20 27h9v-3h-9V27zM44.5 28h-10c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h10c.276 0 .5.224.5.5v4C45 27.776 44.776 28 44.5 28zM35 27h9v-3h-9V27zM29.5 36h-8c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h8c.276 0 .5.224.5.5v4C30 35.776 29.776 36 29.5 36zM22 35h7v-3h-7V35zM43.5 36h-8c-.276 0-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5h8c.276 0 .5.224.5.5v4C44 35.776 43.776 36 43.5 36zM36 35h7v-3h-7V35z"}),Object(me.jsx)("path",{d:"M56.5,48h-49C7.224,48,7,47.776,7,47.5v-35C7,12.224,7.224,12,7.5,12h49c0.276,0,0.5,0.224,0.5,0.5v35    C57,47.776,56.776,48,56.5,48z M8,47h48V13H8V47z"}),Object(me.jsx)("rect",{width:"1",height:"3",x:"31.5",y:"6.5"}),Object(me.jsx)("path",{d:"M32 7c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2S33.103 7 32 7zM32 4c-.552 0-1 .449-1 1s.448 1 1 1 1-.449 1-1S32.552 4 32 4zM21.5 61h-4c-.152 0-.297-.069-.392-.188-.095-.12-.13-.275-.096-.424l3-13C20.065 47.161 20.268 47 20.5 47h4c.152 0 .297.069.392.188.095.12.13.275.096.424l-3 13C21.935 60.839 21.732 61 21.5 61zM18.129 60h2.974l2.769-12h-2.974L18.129 60zM46.5 61h-4c-.232 0-.435-.161-.487-.388l-3-13c-.034-.148.001-.304.096-.424C39.203 47.069 39.348 47 39.5 47h4c.232 0 .435.161.487.388l3 13c.034.148-.001.304-.096.424C46.797 60.931 46.652 61 46.5 61zM42.897 60h2.974l-2.769-12h-2.974L42.897 60z"}),Object(me.jsx)("path",{d:"M41.974 56H22.026l.922-4h18.104L41.974 56zM23.282 55h17.436l-.461-2H23.743L23.282 55zM15.48 37.008c-.128 0-.256-.049-.354-.146l-3.008-3.008c-.195-.195-.195-.512 0-.707l3.008-3.008c.195-.195.512-.195.707 0l3.008 3.008c.195.195.195.512 0 .707l-3.008 3.008C15.736 36.959 15.608 37.008 15.48 37.008zM13.18 33.5l2.301 2.301 2.301-2.301-2.301-2.301L13.18 33.5zM32.48 46.008c-.128 0-.256-.049-.354-.146l-3.008-3.008c-.195-.195-.195-.512 0-.707l3.008-3.008c.195-.195.512-.195.707 0l3.008 3.008c.195.195.195.512 0 .707l-3.008 3.008C32.736 45.959 32.608 46.008 32.48 46.008zM30.18 42.5l2.301 2.301 2.301-2.301-2.301-2.301L30.18 42.5zM32 22c-.276 0-.5-.224-.5-.5v-2c0-.276.224-.5.5-.5s.5.224.5.5v2C32.5 21.776 32.276 22 32 22z"}),Object(me.jsx)("path",{d:"M39.5 24c-.276 0-.5-.224-.5-.5V22H25v1.5c0 .276-.224.5-.5.5S24 23.776 24 23.5v-2c0-.276.224-.5.5-.5h15c.276 0 .5.224.5.5v2C40 23.776 39.776 24 39.5 24zM15.5 31c-.276 0-.5-.224-.5-.5v-5c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5S19.776 26 19.5 26H16v4.5C16 30.776 15.776 31 15.5 31zM32.48 39.992c-.234.01-.501-.225-.5-.501L31.998 34H29.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h3c.133 0 .261.053.354.147S33 33.369 33 33.501l-.02 5.992C32.979 39.77 32.756 39.992 32.48 39.992z"}),Object(me.jsx)("path",{d:"M32.52 39.992c-.275 0-.499-.223-.5-.499L32 33.501c0-.133.052-.26.146-.354S32.367 33 32.5 33h3c.276 0 .5.224.5.5S35.776 34 35.5 34h-2.498l.018 5.491c.001.276-.223.5-.498.501C32.521 39.992 32.521 39.992 32.52 39.992zM15.5 41c-.276 0-.5-.224-.5-.5v-3.992c0-.276.224-.5.5-.5s.5.224.5.5V40.5C16 40.776 15.776 41 15.5 41zM39.5 32c-.276 0-.5-.224-.5-.5v-3.992c0-.276.224-.5.5-.5s.5.224.5.5V31.5C40 31.776 39.776 32 39.5 32zM21.5 34h-3.012c-.276 0-.5-.224-.5-.5s.224-.5.5-.5H21.5c.276 0 .5.224.5.5S21.776 34 21.5 34zM29.5 43h-9.012c-.276 0-.5-.224-.5-.5s.224-.5.5-.5H29.5c.276 0 .5.224.5.5S29.776 43 29.5 43zM43.497 43h-8.009c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h8.009c.276 0 .5.224.5.5S43.773 43 43.497 43z"}),Object(me.jsxs)("g",{children:[Object(me.jsx)("defs",{children:Object(me.jsx)("rect",{id:"SVGID_1_",width:"675.5",height:"132.688",x:"-1235.486",y:"289.422"})}),Object(me.jsx)("clipPath",{id:"SVGID_2_",children:Object(me.jsx)("use",{overflow:"visible",href:"#SVGID_1_"})})]})]}))},Mr=Object(j.a)((function(e){return Object(O.a)({button:{marginRight:e.spacing(1)},content:{maxHeight:"60vh",overflowY:"auto"}})})),$r=function(e){var t=e.onNext,n=e.onBack,r=e.onSkip,a=e.nextActionCaption,s=e.children,i=Mr(),c=Object(p.a)().t;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(je.a,{container:!0,children:Object(me.jsx)(je.a,{item:!0,xs:12,className:i.content,children:s})}),Object(me.jsx)(je.a,{container:!0,children:Object(me.jsxs)(je.a,{item:!0,xs:12,children:[Object(me.jsx)(R.a,{disabled:!n,onClick:n,className:i.button,children:c("Back")}),!!r&&Object(me.jsx)(R.a,{onClick:r,className:i.button,children:c("Skip")}),!!t&&Object(me.jsx)(R.a,{onClick:t,className:i.button,children:null!==a&&void 0!==a?a:c("Next")})]})})]})},Lr=Object(j.a)((function(e){return Object(O.a)({root:{flexGrow:1}})})),Fr=function(e,t){if(!e)return[];if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)||e.description&&e.description.includes(n)}))},zr=Object(j.a)((function(e){return Object(O.a)({root:{flexGrow:1,width:"100%",marginTop:"20px",marginBottom:"20px"}})})),Jr=n(2393),Br=function(e,t){var n,r=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(Vn.isPresent)(r))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof r)throw new Error("Invalid definition ".concat(t));var a=Object(Jr.a)(r);return delete a.definitions,e=Object(h.a)(Object(h.a)({},e),a)},Wr=function(e,t,n){if(e.jsonSchema){var r=JSON.parse(e.jsonSchema),a=e.tasks.find((function(e){return e.name===t})),s=null===a||void 0===a?void 0:a.validResponses.find((function(e){return e.name===n})),i=null===s||void 0===s?void 0:s.payloadSchemaDefinitionName;if(i)return Br(r,i)}},qr=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),r=e.actions.find((function(e){return e.name===t})),a=null===r||void 0===r?void 0:r.payloadSchemaDefinitionName;if(a)return Br(n,a)}},Vr=n(844),Gr=n.n(Vr),Hr=n(1336),Yr=n.n(Hr),Kr=n(855),Zr=n.n(Kr).a;function Xr(e){n(1339)("./".concat(e,"/index")).then((function(e){"function"===typeof(null===e||void 0===e?void 0:e.default)&&(Zr=e.default)})).catch((function(){var t=e.indexOf("-");t>0&&Xr(e.substring(0,t))}))}u.a.language&&Xr(u.a.language),u.a.on("languageChanged",(function(e){Xr(e)}));var Qr=new Gr.a({allErrors:!0,addUsedSchema:!1});Yr()(Qr),Qr.addKeyword({keyword:"markdownDescription",schemaType:"string",valid:!0});var ea=function(e){var t;return Qr.validateSchema(e)?{type:"success"}:(Qr.errors&&Zr&&Zr(Qr.errors),{type:"failure",errors:null!==(t=Qr.errors)&&void 0!==t?t:[]})},ta=function(e){return Zr&&Zr(e),e},na=n(2441),ra=n(2429),aa=(n(2394),["MilestoneReached","MilestoneCleared"]),sa=["TaskCreated","TaskUpdated","TaskArchived","ResponseSent"],ia=["ActionDispatched","ContextsRecalculationCompleted","ContextRecalculationError"].concat(sa,aa);["RequestProcessed"].concat(Object(qn.a)(ia),["CustomEvent"]);function ca(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.settings;return!n&&t&&(e.settings=n={}),n}function oa(e){var t,n=null===(t=ca(e))||void 0===t?void 0:t.commandText;return Object(na.a)(n)?e.name:n}function ua(e){var t,n=null===(t=ca(e))||void 0===t?void 0:t.actionInProgressText;return n||e.name}var la={id:"string",typeName:"string",reference:"string",state:"record",dateCreated:"dateTime",dateModified:"dateTime",version:"string",contextTypeVersion:"number",milestones:"array",tags:"array",metrics:"array"},da={id:"string",contextId:"string",contextTypeName:"string",contextReference:"string",typeName:"string",title:"string",data:"record",labels:"array",dateCreated:"dateTime",dateUpdated:"dateTime",assignedTo:"string",status:"string",archived:"boolean",dueDate:"string",importance:"number",focused:"boolean"},pa={event:"string",timestamp:"dateTime",requestTypeName:"string",contextTypeName:"string",sentBy:"string",reference:"string",subject:"string",contextIsNew:"boolean",action:"string",message:"string",dueDate:"dateTime",taskTypeName:"string",assignedTo:"string",importance:"number",responseTypeName:"string",oldImportance:"number",oldLabels:"array",oldDueDate:"dateTime",oldAssignedTo:"string",milestoneName:"string",value:"dateTime",tags:"array",metrics:"array"},fa=function(e){var t=["string","number","boolean","dateTime"];return Object.keys(e).filter((function(n){return t.includes(e[n])})).sort()},ba=function(e){return Object.keys(e).filter((function(t){return"array"===e[t]})).sort()},ha=function(e){return Object.keys(e).filter((function(t){return"record"===e[t]})).sort()},va=fa(la),ja=ba(la),Oa=ha(la),ma=([].concat(Object(qn.a)(va),Object(qn.a)(ja),Object(qn.a)(Oa)),fa(da)),ga=(ba(da),ha(da)),xa=([].concat(Object(qn.a)(ma),Object(qn.a)(ga)),fa(pa)),ya=ba(pa),ka=([].concat(Object(qn.a)(xa),Object(qn.a)(ya)),n(596)),Ca=n(1181),Sa=n(77),wa=n(75),Ta=function(){throw new Error("You forgot to wrap your component in <JsonFormsContextProvider>.")},_a=Object(r.createContext)({context:{},bindContext:!0,uiSchemaLibrary:{},registerValidationProvider:Ta,unregisterValidationProvider:Ta,validationProviderUpdated:Ta}),Pa=function(e){var t=e.context,n=e.bindContext,a=e.uiSchemaLibrary,s=e.children,i=e.onErrorsChange,c=Object(r.useState)({}),o=Object(b.a)(c,2),u=o[0],l=o[1];Object(r.useEffect)((function(){var e=Object.values(u).flatMap((function(e){return e}));null===i||void 0===i||i(e)}),[u,i]);var d=Object(r.useCallback)((function(e){l((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(f.a)({},e,[]))}))}),[]),p=Object(r.useCallback)((function(e){l((function(t){return Object(Yn.a)([e],t)}))}),[]),v=Object(r.useCallback)((function(e,t){l((function(n){return e in n?Object(h.a)(Object(h.a)({},n),{},Object(f.a)({},e,t)):n}))}),[]);return Object(me.jsx)(_a.Provider,{value:{context:null!==t&&void 0!==t?t:{},bindContext:null===n||void 0===n||n,uiSchemaLibrary:null!==a&&void 0!==a?a:{},registerValidationProvider:d,unregisterValidationProvider:p,validationProviderUpdated:v},children:s})},Aa=function(){return Object(r.useContext)(_a)},Na=n(1627),Ia=n.n(Na),Ra="NimflowLocalizations",Ua=n(43),Ea="ud",Da=function(){var e=Object(p.a)().i18n,t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],s=n[1],i=Object(W.h)(Ua.a),c=function(){var e=at(),t=e.collections_Aggregate,n=e.collections_InsertOne,a=e.collections_DeleteOne,s=e.collections_UpdateOne;return{localizations_GetSupportedLanguages:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({collectionName:Ra,stages:[{$project:{_id:!1,language:1}},{$sort:{language:1}}]},n);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return e.language})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),localizations_GetAll:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({collectionName:Ra,stages:[{$project:{_id:!1,id:"$_id",language:1,translations:1}},{$sort:{language:1}}]},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),localizations_FindByLanguage:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n,r){var a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={language:n},n.length>2&&"-"===n[2]&&(a={$or:[a,{language:n.substr(0,2)}]}),s=[{$match:a}],e.next=5,t({collectionName:Ra,stages:s},r);case 5:return(i=e.sent).length>1&&i.sort((function(e,t){return t.language.length-e.language.length})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),localizations_Add:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({collectionName:Ra,document:t},r);case 2:return a=e.sent,e.abrupt("return",a.id);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),localizations_Remove:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({collectionName:Ra,id:t},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),localizations_UpdateTranslation:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n,r,a){var i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Vn.isPresent)(r)?{$set:Object(f.a)({},"translations.".concat(n),r)}:{$unset:Object(f.a)({},"translations.".concat(n),"")},e.next=3,s({collectionName:Ra,filter:{language:t},update:i,isUpsert:!0},a);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[s])}}().localizations_FindByLanguage,o=ot().unit,u=Object(r.useCallback)(function(){var t=Object(D.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a!==n&&o){t.next=2;break}return t.abrupt("return");case 2:return a&&e.removeResourceBundle(a,Ea),t.prev=3,t.next=6,c(n);case 6:(r=t.sent).length>0?(e.addResourceBundle(n,Ea,r[0].translations),s(n)):s(void 0),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[e,a,c,o]);return Object(r.useEffect)((function(){i(e.language),u(e.language)}),[e.language,u,i]),null};Ia.a.registerHelper("translate",(function(e,t){var n={ns:Ea};return"object"===typeof t&&"hash"in t&&(n=Object(h.a)(Object(h.a)({},n),t.hash)),u.a.t(e,n)}));var Ma=function(e,t,n,r){return function(e,t){return Ia.a.compile(e,t)}(e,n)(t,r)},$a=Object(wa.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.visible,a=e.data,s=e.path,i=Aa(),c=i.bindContext,o=i.context,u=Object(r.useMemo)((function(){var e=t;if(e||"text"in e){var n={data:a,path:s};return c&&Object.assign(n,o),Ma(e.text,n)}}),[t,a,s,c,o]);return u?Object(me.jsx)(Ca.a,{xsUp:!n,children:Object(me.jsx)("div",{children:Object(me.jsx)(gt.a,{children:u})})}):null})),La=Object(Sa.rankWith)(3,Object(Sa.uiTypeIs)("Markdown")),Fa=Object(j.a)((function(e){return Object(O.a)({viewer:{width:"100%",minHeight:"800px"}})})),za=Object(wa.withJsonFormsLayoutProps)((function(e){var t=Fa(),n=e.uischema,a=e.visible,s=e.data,i=e.path,c=Aa(),o=c.bindContext,u=c.context,l=Object(r.useMemo)((function(){var e=n;if(e||"url"in e){var t={data:s,path:i};return o&&Object.assign(t,u),Ma(e.url,t)}}),[n,s,i,o,u]);return l?Object(me.jsx)(Ca.a,{xsUp:!a||!l,children:Object(me.jsx)("object",{data:l,type:"application/pdf",className:t.viewer,children:Object(me.jsx)("embed",{src:l,type:"application/pdf"})})}):null})),Ja=Object(Sa.rankWith)(3,Object(Sa.uiTypeIs)("Pdf")),Ba=["uischema","schema","path","renderers"],Wa=Object(wa.withJsonFormsLayoutProps)((function(e){var t=e.uischema,n=e.schema,a=e.path,s=e.renderers,i=Object(M.a)(e,Ba),c=Object(wa.useJsonForms)().core,o=Aa().uiSchemaLibrary,u="Use"===t.type?t:void 0,l=u?o[u.name]:void 0,d=u?Sa.Resolve.schema(n,u.scope):void 0,p=Object(r.useMemo)((function(){if(s&&l&&d)return function(e,t){var n,r=-1,a=void 0,s=Object(pe.a)(e);try{for(s.s();!(n=s.n()).done;){var i=n.value,c=t(i);c>r&&(r=c,a=i)}}catch(o){s.e(o)}finally{s.f()}return a}(s,(function(e){return e.tester(l,d)}))}),[l,s,d]);if(!l||!u||!d)return null;var f=Object(Sa.composeWithUi)(u,a),b=Sa.Resolve.data(null===c||void 0===c?void 0:c.data,f);if(Object(Vn.isPresent)(p)&&-1!==p.tester(l,d)){var v=p.renderer;return Object(me.jsx)(v,Object(h.a)({uischema:l,schema:d,path:f,data:b,renderers:s},i))}return Object(me.jsx)(wa.UnknownRenderer,{type:"renderer"})})),qa=Object(Sa.rankWith)(3,Object(Sa.uiTypeIs)("Use")),Va=Object(wa.withJsonFormsControlProps)((function(e){var t=e.uischema.options.optionsSource,n=t.moduleName,a=t.functionName,s=Xn().call,i=Object(pt.a)("function/".concat(n,"/").concat(a),Object(D.a)(E.a.mark((function e(){var t,r,i,c,o,u,l,d,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,s(n,a);case 3:if(r=e.sent,Array.isArray(r)){i=Object(pe.a)(r);try{for(i.s();!(c=i.n()).done;)o=c.value,u=void 0,l=void 0,qe(o)?(u=o.value,"string"===typeof o.label&&(l=o.label)):u=o,Object(Vn.isPresent)(u)&&(p={label:null!==(d=l)&&void 0!==d?d:"string"===typeof u?u:JSON.stringify(u),value:u},t.push(p))}catch(f){i.e(f)}finally{i.f()}}return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),{fallbackData:[],revalidateOnMount:!0,revalidateOnFocus:!1}).data,c=Object(r.useMemo)((function(){return Object(h.a)(Object(h.a)({},e),{},{options:i})}),[e,i]);return Object(me.jsx)(ka.MaterialInputControl,Object(h.a)(Object(h.a)({},c),{},{input:ka.MuiSelect}))})),Ga=Object(Sa.rankWith)(3,Object(Sa.and)(Sa.isControl,(function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.optionsSource;return!!n&&!!n.moduleName&&!!n.functionName}))),Ha=n(449),Ya=n(1178),Ka=n(2400),Za=n(1049),Xa=n.n(Za),Qa=n(2411),es=n(672),ts=n(2324),ns=n(41),rs=n(2430),as=n(2412),ss=n(1649),is=n.n(ss),cs=n(1650),os=n.n(cs),us=n(2320),ls=n(1744),ds=n.n(ls),ps=["image/png","image/jpeg","image/webp"],fs=function(e){return new Promise((function(t,n){var r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.src=e}))},bs=function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([t.content],{type:t.mimeType}),a=URL.createObjectURL(r),e.prev=2,e.next=5,fs(a);case 5:s=e.sent,t.pages.push({getImageData:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=s.naturalWidth,e.height=s.naturalHeight,t.drawImage(s,0,0),t.getImageData(0,0,s.naturalWidth,s.naturalHeight)},width:s.naturalWidth,height:s.naturalHeight,fileIndex:n,filePageNumber:0,pageIndex:0});case 7:return e.prev=7,URL.revokeObjectURL(a),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(t,n){return e.apply(this,arguments)}}(),hs=function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new os.a({buffer:t.content}),a=function(e,a){r.setDirectory(e);var s={getImageData:function(){r.setDirectory(e);var t=r.readRGBAImage();return new ImageData(new Uint8ClampedArray(t),r.width(),r.height())},width:r.width(),height:r.height(),fileIndex:n,filePageNumber:e,pageIndex:0};t.pages.push(s)},s=0,i=r.countDirectory();s<i;++s)a(s);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vs=function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,i,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(t.content),e.next=3,us.a.getDocument(r).promise;case 3:for(a=e.sent,s=[],i=new Array(a.numPages),c=function(e){s.push(a.getPage(e+1).then(function(){var t=Object(D.a)(E.a.mark((function t(r){var a,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=2*window.devicePixelRatio,s=r.getViewport({scale:a}),i[e]={getImageData:function(){var e=Object(D.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("canvas")).style.width="".concat(s.width/a,"px"),t.style.height="".concat(s.height/a,"px"),t.height=s.height,t.width=s.width,n=t.getContext("2d"),e.next=8,r.render({canvasContext:n,viewport:s}).promise;case 8:return e.abrupt("return",n.getImageData(0,0,t.width,t.height));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),width:s.width,height:s.height,fileIndex:n,filePageNumber:e,pageIndex:0};case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},o=0;o<a.numPages;o++)c(o);return e.next=10,Promise.all(s);case 10:t.pages=i;case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),js=function(){var e=Object(D.a)(E.a.mark((function e(t,n,r){var a,s,i,c,o,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.lastIndexOf("/"),i=s>=0?t.substring(s+1):t,c={url:t,status:"loaded",name:i,mimeType:r.headers["content-type"],content:r.data,pages:[],pageStartIndex:0},o=null===(a=r.headers)||void 0===a?void 0:a["content-disposition"],(u=o?/filename="?([^"]*?)"?(;|$)/g.exec(o):void 0)&&u.length>1&&(c.name=u[1]),c.mimeType&&!ps.includes(c.mimeType)){e.next=11;break}return e.next=9,bs(c,n);case 9:e.next=19;break;case 11:if("image/tiff"!==c.mimeType){e.next=16;break}return e.next=14,hs(c,n);case 14:e.next=19;break;case 16:if("application/pdf"!==c.mimeType){e.next=19;break}return e.next=19,vs(c,n);case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Os=function(e,t){return Object(ns.a)(e,(function(e){null===t||void 0===t||t.forEach((function(t,n){t.pages.forEach((function(t,r){var a=e[t.fileIndex];if("loaded"===(null===a||void 0===a?void 0:a.status)){var s=a.pages[t.filePageNumber];s.documentIndex=n,s.documentOrder=r}}))}));var n,r=0,a=Object(pe.a)(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("loaded"===s.status){s.pageStartIndex=r;var i,c=Object(pe.a)(s.pages);try{for(c.s();!(i=c.n()).done;){i.value.pageIndex=r++}}catch(o){c.e(o)}finally{c.f()}}}}catch(o){a.e(o)}finally{a.f()}}))},ms=Symbol("marker"),gs=Object(Sa.createAjv)({allErrors:!0,addUsedSchema:!1,useDefaults:!0});gs.addFormat("image",(function(){return!0})),gs.addKeyword("patternMask",{type:"string",valid:!0,errors:!1});var xs=function(){throw new Error("You forgot to wrap your component in <BatchProcessorContextProvider>.")},ys={fileInfos:[],documentInfos:[],loadingImages:!1,setCurrentDocumentLocation:xs,updateCurrentDocument:xs,updateBatch:xs,movePage:xs,findByPageIndex:xs,deleteDocument:xs,addDocument:xs,updateDocument:xs,getDocument:xs,setCurrentDocumentEditionState:xs,canModify:!0},ks=Object(r.createContext)(ys),Cs=function(e,t){var n,r=Object(pe.a)(t);try{for(r.s();!(n=r.n()).done;){var a,s=n.value,i="loaded"===s.status?s.pages:[],c=Object(pe.a)(i);try{for(c.s();!(a=c.n()).done;){var o=a.value;if(o.pageIndex===e)return o}}catch(u){c.e(u)}finally{c.f()}}}catch(u){r.e(u)}finally{r.f()}},Ss=function(e){return is()(e).map((function(e){return e-1}))},ws=function(e,t,n){var r=e;return r&&(r+=","),r+=t.toString(),t!==n&&(r+="-".concat(n)),r},Ts=function(e){if(0===e.length)return"";for(var t=e.map((function(e){return e+1})),n=t[0],r=n,a="",s=1;s<t.length;s++){var i=t[s];i===r+1&&r>=n||i===r-1&&r<=n?r=i:(a=ws(a,n,r),n=r=i)}return a=ws(a,n,r)},_s=function(e,t){var n=new Array(e.length);return t.forEach((function(t,r){"loaded"===t.status&&t.pages.forEach((function(t,a){var s=e.indexOf(t.pageIndex);s>=0&&(n[s]={fileIndex:r,filePageNumber:a})}))})),n},Ps=function(e,t){return t&&!gs.validate(t,e.data)&&gs.errors?ta(gs.errors.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{instancePath:e.dataPath})}))):[]},As=function(e){var t=e.basePath,n=e.batch,a=e.documentSchemasSource,s=e.readonly,i=e.children,c=!s,o=Object(r.useState)(n),u=Object(b.a)(o,1)[0],l=function(e){var t=e.moduleName,n=e.functionName,a=Xn().call,s=Object(pt.a)("function/".concat(t,"/").concat(n),Object(D.a)(E.a.mark((function e(){var r,s,i,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,a(t,n);case 3:if(s=e.sent,Array.isArray(s)){i=Object(pe.a)(s);try{for(i.s();!(c=i.n()).done;)o=c.value,"success"===ea(o).type&&r.push(o)}catch(u){i.e(u)}finally{i.f()}}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),i=s.data,c=s.isValidating,o=s.error;return{documentSchemas:Object(r.useMemo)((function(){return null!==i&&void 0!==i?i:[]}),[i]),loading:c,error:o}}(a).documentSchemas,d=Object(wa.useJsonForms)().dispatch,p=function(e,t){var n=ot().hubBaseUrl,a=at().getConfiguredAxiosInstance,s=Object(r.useState)((function(){return e.fileUrls.map((function(e){var t=ds()(e);return t.is("relative")&&n&&(t=ds.a.joinPaths("BlobStorage",t).absoluteTo(n)),{url:t.valueOf(),status:"loading",name:t.filename()}}))})),i=Object(b.a)(s,2),c=i[0],o=i[1],u=Object(r.useState)(t&&e.fileUrls.length>0),l=Object(b.a)(u,2),d=l[0],p=l[1];return Object(r.useEffect)((function(){if(t){var r=X.a.CancelToken.source(),s=X.a.create({responseType:"arraybuffer",cancelToken:r.token}),i=a({responseType:"arraybuffer",cancelToken:r.token});return e.fileUrls.map((function(t,r){var a=ds()(t),c=s;return a.is("relative")&&n&&(a=ds.a.joinPaths("BlobStorage",a),c=i),t=a.valueOf(),c.get(t).then((function(n){return js(t,r,n).then((function(t){o((function(n){var a=Object(ns.a)(n,(function(e){e[r]=t}));return a.every((function(e){return"loading"!==e.status}))&&(a=Os(a,e.documents),p(!1)),a}))}))})).catch((function(n){o((function(a){var s=Object(ns.a)(a,(function(e){e[r]=function(e,t){var n=e.lastIndexOf("/"),r=n>=0?e.substring(n+1):e,a={url:e,status:"failed",name:r,error:t.message};return t.response&&(a.error="Code: ".concat(t.response.status,"\nData: ").concat(t.response.data)),a}(t,n)}));return s.every((function(e){return"loading"!==e.status}))&&(s=Os(s,e.documents),p(!1)),s}))}))})),function(){r.cancel(),p(!1)}}o((function(e){return e.map((function(e){return{name:e.name,status:"loaded",url:e.url,content:new ArrayBuffer(0),pages:[],pageStartIndex:0}}))}))}),[t,a,n,e.documents,e.fileUrls]),{loadingFileInfos:d,fileInfos:c,setFileInfos:o}}(u,c),f=p.fileInfos,v=p.loadingFileInfos,j=p.setFileInfos,O=Object(r.useState)({documentIndex:u.documents.length>0?0:void 0}),m=Object(b.a)(O,2),g=m[0],x=m[1],y=Object(r.useState)([]),k=Object(b.a)(y,2),C=k[0],S=k[1],w=function(e){var t=Aa(),n=t.registerValidationProvider,a=t.unregisterValidationProvider,s=t.validationProviderUpdated,i=Object(r.useState)(),c=Object(b.a)(i,2),o=c[0],u=c[1];Object(r.useEffect)((function(){return n(e),function(){return a(e)}}),[e,n,a]),Object(r.useEffect)((function(){var t=(null!==o&&void 0!==o?o:[]).map((function(t){var n="".concat(e,".").concat(t.dataPath);return Object(h.a)(Object(h.a)({},t),{},{dataPath:n,instancePath:n})}));s(e,t)}),[o,e,s]);var l=Object(r.useCallback)((function(e){u((function(t){return Object(Ya.a)(t,e)?t:e}))}),[]);return Object(r.useMemo)((function(){return{updateErrors:l}}),[l])}(t).updateErrors,T=Object(r.useMemo)((function(){return n.documents.map((function(e,t){var n;return{schemaId:e.schemaId,action:e.action,errors:null!==(n=C[t])&&void 0!==n?n:[]}}))}),[n.documents,C]);Object(r.useEffect)((function(){if(l&&0!==u.documents.length){var e=u.documents.map((function(e){var t=l.find((function(t){return t.$id===e.schemaId}));return Ps(e,t)}));S((function(t){return e.map((function(e,n){return t[n]?t[n]:e}))}))}}),[u,l]);var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.useRef)(e),a=n.current;if(e!==a)if(a.length!==e.length)n.current=e;else if(t)for(var s=Object(qn.a)(e),i=0;i<a.length;i++){var c=s.indexOf(a[i]);if(-1===c){n.current=e;break}s[c]=ms}else for(var o=0;o<a.length;o++)if(a[o]!==e[o]){n.current=e;break}return n.current}(n.documents.reduce((function(e,t,n){return"send"===t.action&&e.push(n),e}),[]),!0);Object(r.useEffect)((function(){var e=_.flatMap((function(e){var t,n;return null!==(t=null===(n=C[e])||void 0===n?void 0:n.map((function(t){var n="documents[".concat(e,"].data.").concat(t.instancePath);return Object(h.a)(Object(h.a)({},t),{},{instancePath:n,dataPath:n})})))&&void 0!==t?t:[]}));c&&w(e)}),[c,C,_,w]);var P=Object(r.useCallback)((function(e,n){var r="function"===typeof n?n:function(){return n};null===d||void 0===d||d(Object(Sa.update)(Object(Ha.compose)(t,e),r))}),[d]),A=Object(r.useMemo)((function(){return Object(Vn.isPresent)(g.documentIndex)?n.documents[g.documentIndex]:void 0}),[n.documents,g.documentIndex]),N=Object(r.useCallback)((function(e){var t=null!==e&&void 0!==e?e:{};x((function(e){return e.documentIndex!==t.documentIndex||e.pageIndex!==t.pageIndex?t:e}))}),[]),I=Object(r.useCallback)((function(e){var t=null===g||void 0===g?void 0:g.documentIndex;Object(Vn.isPresent)(t)&&P("documents[".concat(t,"]"),e)}),[null===g||void 0===g?void 0:g.documentIndex,P]),R=Object(Vn.isPresent)(g.documentIndex)?C[g.documentIndex]:void 0,U=Object(r.useMemo)((function(){if(A&&R)return{document:A,errors:R}}),[A,R]),M=Object(r.useCallback)((function(e){var t=g.documentIndex;S((function(n){var r,a=A?{document:A,errors:n[t]}:void 0,s="function"===typeof e?e(a):e,i=Object(Ya.a)(null===s||void 0===s?void 0:s.errors,null===a||void 0===a?void 0:a.errors),c=Object(Ya.a)(null===s||void 0===s?void 0:s.document,null===a||void 0===a?void 0:a.document);if(i&&c)return n;var o=null===s||void 0===s?void 0:s.document;return o&&!c&&I(o),Object(rs.a)(t,null!==(r=null===s||void 0===s?void 0:s.errors)&&void 0!==r?r:[],n)}))}),[A,g.documentIndex,I]),$=Object(r.useCallback)((function(e,t){var r=Object(ns.a)({fileInfos:f,docs:n.documents},(function(n){var r=Cs(e,n.fileInfos);if(r){var a,s=[],i=[],c=r.documentIndex===(null===t||void 0===t?void 0:t.documentIndex),o=Object(pe.a)(n.fileInfos);try{for(o.s();!(a=o.n()).done;){var u=a.value;if("loaded"===u.status){var l,d=Object(pe.a)(u.pages);try{for(d.s();!(l=d.n()).done;){var p=l.value;Object(Vn.isPresent)(r.documentIndex)&&p.documentIndex===r.documentIndex&&s.push(p),Object(Vn.isPresent)(t)&&p.documentIndex===t.documentIndex&&!c&&i.push(p)}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){o.e(g)}finally{o.f()}s.sort(Object(Qa.a)((function(e,t){return e.documentOrder<t.documentOrder}))),i.sort(Object(Qa.a)((function(e,t){return e.documentOrder<t.documentOrder})));var f=r.documentIndex;if(Object(Vn.isPresent)(f)){var b=n.docs[f];s.splice(r.documentOrder,1),c?s.splice(t.documentOrder,0,r):(r.documentIndex=void 0,r.documentOrder=void 0);for(var h=0;h<s.length;h++)s[h].documentOrder=h;b&&(b.pages=s.map((function(e){return{fileIndex:e.fileIndex,filePageNumber:e.filePageNumber}})))}if(Object(Vn.isPresent)(t)&&!c){var v=t.documentIndex,j=t.documentOrder,O=n.docs[v];i.splice(j,0,r),r.documentIndex=v,r.documentOrder=j;for(var m=0;m<i.length;m++)i[m].documentOrder=m;O&&(O.pages=i.map((function(e){return{fileIndex:e.fileIndex,filePageNumber:e.filePageNumber}})))}}}));j(r.fileInfos),P("documents",r.docs)}),[n.documents,f,j,P]),L=Object(r.useCallback)((function(e){return Cs(e,f)}),[f]),F=Object(r.useCallback)((function(e){if(Object(Vn.isPresent)(n.documents[e])){var t=Object(qn.a)(n.documents);t.splice(e,1),setTimeout((function(){return P("documents",t)}),0),S((function(t){return Object(as.a)(e,1,t)})),j((function(t){return Object(ns.a)(t,(function(t){var n,r=Object(pe.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("loaded"===a.status){var s,i=Object(pe.a)(a.pages);try{for(i.s();!(s=i.n()).done;){var c=s.value;c.documentIndex===e&&(c.documentIndex=void 0,c.documentOrder=void 0)}}catch(o){i.e(o)}finally{i.f()}}}}catch(o){r.e(o)}finally{r.f()}}))})),x((function(t){return t.documentIndex===e?{}:t}))}}),[n.documents,j,P]),z=Object(r.useCallback)((function(e){var t=n.documents.length,r=[].concat(Object(qn.a)(n.documents),[e]);return P("documents",r),S((function(e){return[].concat(Object(qn.a)(e),[[]])})),e.pages.length>0&&j((function(n){return Object(ns.a)(n,(function(n){e.pages.forEach((function(e,r){var a=n[e.fileIndex];if("loaded"===(null===a||void 0===a?void 0:a.status)){var s=a.pages[e.filePageNumber];s&&(s.documentIndex=t,s.documentOrder=r)}}))}))})),t}),[n.documents,j,P]),J=Object(r.useCallback)((function(e,t){var r=Object(qn.a)(n.documents),a=r[e].schemaId,s=r[e].pages;r[e]=t,P("documents",r);var i=t.pages;if(s!==i&&j((function(t){return Object(ns.a)(t,(function(t){var n,r=Object(pe.a)(s.filter(Vn.isPresent));try{for(r.s();!(n=r.n()).done;){var a=n.value,c=t[a.fileIndex];if("loaded"===c.status){var o=c.pages[a.filePageNumber];o.documentIndex=void 0,o.documentOrder=void 0}}}catch(f){r.e(f)}finally{r.f()}for(var u=0;u<i.length;u++){var l=i[u];if(l){var d=t[l.fileIndex];if("loaded"===d.status){var p=d.pages[l.filePageNumber];p.documentIndex=e,p.documentOrder=u}}}}))})),a!==t.schemaId){var c=null===l||void 0===l?void 0:l.find((function(e){return e.$id===t.schemaId})),o=Ps(t,c);S((function(t){return Object(rs.a)(e,o,t)}))}return e}),[n.documents,l,j,P]),B=Object(r.useCallback)((function(e){return n.documents[e]}),[n.documents]),W=Object(r.useMemo)((function(){return{fileInfos:f,documentSchemas:l,loadingImages:v,documentInfos:T,currentDocumentLocation:g,setCurrentDocumentLocation:N,currentDocument:A,updateCurrentDocument:I,updateBatch:P,movePage:$,findByPageIndex:L,deleteDocument:F,addDocument:z,updateDocument:J,getDocument:B,currentDocumentEditionState:U,setCurrentDocumentEditionState:M,canModify:c}}),[z,c,A,U,g,F,T,l,f,B,L,M,N,v,$,P,I,J]);return Object(me.jsx)(ks.Provider,{value:W,children:i})},Ns=function(){return Object(r.useContext)(ks)},Is=function(e){return Object(me.jsx)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 512 512"},e),{},{children:Object(me.jsx)("path",{d:"M9.5 1.4C2.3 4.6 0 9.7 0 22.6V32h32V0h-9.7c-5.9.1-11 .6-12.8 1.4zM62 16v16h29V0H62v16zM121 16v16h29V0h-29v16zM180 16v16h29V0h-29v16zM239 16v16h29V0h-29v16zM298 16v16h29V0h-29v16zM357 16v16h29V0h-29v16zM416 15.9V32h32.2l-.4-10.9c-.2-9.2-.6-11.4-2.4-13.7-4.4-6-6.7-6.9-18.5-7.2L416-.2v16.1zM0 76.5V91h32V62H0v14.5zM416 76.5V91h32V62h-32v14.5zM0 135.5V150h32v-29H0v14.5zM416 135.5V150h32v-29h-32v14.5zM0 194.5V209h32v-29H0v14.5zM416 194.5V209h32v-29h-32v14.5zM297.5 225.4c-4.1 1.8-8.3 6.9-9 10.9-.3 1.8-.4 62.2-.3 134.4.3 130.7.3 131.2 2.4 133.9 4.9 6.7 13 9.1 19.5 6 1.9-.9 20.5-15.3 41.4-32.1l38-30.4 54.8-.1c59.9 0 58.9.1 64-5.9 3-3.7 4.2-8.5 3.2-13.9-.6-3.3-11.6-14.6-99.3-102.6-57.7-57.7-100-99.4-101.9-100.2-4-1.7-8.9-1.7-12.8 0zM417.7 416l-39.4.5-3.9 3c-2.1 1.6-15 11.8-28.6 22.7-13.6 10.9-25 19.8-25.3 19.8-.3 0-.5-41.3-.5-91.7v-91.8l68.5 68.5 68.5 68.5-39.3.5zM0 253.5V268h32v-29H0v14.5zM416 253.5V268h32v-29h-32v14.5zM0 312.5V327h32v-29H0v14.5zM0 371.5V386h32v-29H0v14.5zM.2 426.9c.3 11.8 1.2 14.1 7.2 18.5 2.3 1.8 4.5 2.2 13.7 2.4l10.9.4V416H-.2l.4 10.9zM62 432v16h29v-32H62v16zM121 432v16h29v-32h-29v16zM180 432v16h29v-32h-29v16z"})}))},Rs=function(e){return function(e){return"object"===typeof e&&"then"in e}(e)?e:Promise.resolve(e)},Us=n(1745),Es=n.n(Us),Ds=Object(j.a)((function(e){return Object(O.a)({listContainer:{width:"100%",height:"100%"},imageItem:{width:"100%",display:"flex",justifyContent:"center",position:"relative"},imageContainer:{width:"100%"},image:{padding:3,borderRadius:e.shape.borderRadius,boxShadow:e.shadows[4]},divider:{marginTop:20,marginBottom:10},name:{textAlign:"center",marginTop:e.spacing(2)},extractIcon:{position:"absolute",bottom:e.spacing(4),right:e.spacing(2)}})})),Ms=function(e){var t=e.page,n=e.onImageExtractionRequested,a=e.listWidth,s=e.readonly,i=Ds(),c=Object(p.a)().t,o=Object(r.useRef)(null),u=Object(r.useState)(),l=Object(b.a)(u,2),d=l[0],f=l[1],h=a-40,j=Object(r.useMemo)((function(){return h*t.height/t.width}),[t.height,t.width,h]),O=Object(r.useState)(new ImageData(t.width,t.height)),m=Object(b.a)(O,2),g=m[0],x=m[1],y=Object(r.useState)(new ImageData(h,j)),k=Object(b.a)(y,2),w=k[0],T=k[1],_=Object(r.useState)(!1),P=Object(b.a)(_,2),A=P[0],N=P[1];Object(r.useEffect)((function(){Rs(t.getImageData()).then((function(e){x(e)}))}),[t]),Object(r.useEffect)((function(){var e=function(e,t,n){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var a=r.getContext("2d");a.imageSmoothingEnabled=!1,a.putImageData(e,0,0);var s=document.createElement("canvas");s.width=t,s.height=n;var i=s.getContext("2d");return i.imageSmoothingEnabled=!1,i.drawImage(r,0,0,e.width,e.height,0,0,s.width,s.height),i.getImageData(0,0,t,n)}(g,h,j);T(e)}),[j,g,h]),Object(r.useEffect)((function(){var e=o.current;if(e){var n=e.getContext("2d"),r=null!==d&&void 0!==d?d:{x:0,y:0},a=r.x,s=r.y;if(d||A||n.putImageData(w,0,0),A){var i=a*t.width/e.width,c=s*t.height/e.height;n.putImageData(g,a-i,s-c)}else n.putImageData(w,0,0)}}),[g,d,t.height,t.width,w,A]);var I=Object(r.useCallback)((function(){}),[]),R=Object(r.useCallback)((function(){}),[]),U=Object(r.useCallback)((function(e){var t=o.current;if(t&&(null===e||void 0===e?void 0:e.altKey)){var n=t.getBoundingClientRect(),r=n.left,a=n.top;f({x:e.pageX-r,y:e.pageY-a})}}),[]),E=Object(r.useCallback)((function(e){(null===e||void 0===e?void 0:e.altKey)&&N(!0)}),[N]),D=Object(r.useCallback)((function(){N(!1)}),[N]),M=Object(r.useCallback)((function(){N(!1)}),[N]);return Object(me.jsx)(lt.a,{className:Object(v.default)(i.imageItem,"page-index-".concat(t.pageIndex)),children:Object(me.jsxs)("div",{className:i.imageContainer,children:[Object(me.jsx)(Es.a,{upHandler:D,downHandler:M,children:Object(me.jsx)("canvas",{tabIndex:0,onKeyDown:E,ref:o,width:h,height:j,className:i.image,onMouseOver:I,onMouseOut:R,onMouseMove:U})}),Object(me.jsx)(C.a,{className:i.name,children:t.name}),Object(me.jsx)(S.a,{variant:"fullWidth",className:i.divider}),Object(Vn.isPresent)(t.documentIndex)&&!s&&Object(me.jsx)(Ct.a,{title:c("ExtractImages"),children:Object(me.jsx)(Ka.a,{className:i.extractIcon,color:"secondary",size:"small",onClick:function(){return null===n||void 0===n?void 0:n(t.pageIndex)},children:Object(me.jsx)(Is,{})})})]})})},$s=a.a.memo((function(e){var t=e.filteredPages,n=e.width,a=e.height,s=e.onImageExtractionRequested,i=e.readonly,c=Ds(),o=Object(r.useCallback)((function(e){if(!Object(Vn.isPresent)(n))return 0;var r=t[e];return"loaded"!==r.status?100:(n-40)*r.height/r.width+100}),[t,n]);return Object(me.jsx)(ts.a,{height:a,itemCount:t.length,itemSize:o,width:n,children:function(e){var r=e.index,a=e.style,o=t[r];return"loaded"!==o.status?Object(me.jsxs)(lt.a,{className:c.imageItem,style:a,children:["loading"===o.status&&Object(me.jsx)(xe,{}),"failed"===o.status&&Object(me.jsx)(Xa.a,{color:"error"}),Object(me.jsx)(C.a,{style:{textAlign:"center"},children:o.name})]},r):Object(me.jsx)("div",{style:a,children:Object(me.jsx)(Ms,{page:o,onImageExtractionRequested:s,listWidth:n,readonly:i})},o.pageIndex)}})})),Ls=function(e){var t=e.onImageExtractionRequested,n=Ns(),a=n.fileInfos,s=n.currentDocumentLocation,i=n.currentDocument,c=Ds(),o=Object(es.a)({}),u=o.width,l=o.height,d=o.ref,p=Object(r.useMemo)((function(){var e=a.flatMap((function(e){return"loaded"!==e.status?[{finfo:e}]:e.pages.map((function(t,n){return{finfo:e,pinfo:t,pinfoOrder:n}}))}));return e.map((function(e){var t=e.finfo,n=e.pinfo,r=e.pinfoOrder;if("loaded"!==t.status)return{status:t.status,name:t.name};var a="".concat(n.pageIndex+1," - ").concat(t.name);return t.pages.length>1&&(a+=" / ".concat(r+1)),{status:t.status,name:a,getImageData:n.getImageData,width:n.width,height:n.height,fileInfoIndex:n.fileIndex,filePageNumber:n.filePageNumber,pageIndex:n.pageIndex,documentIndex:n.documentIndex,documentOrder:n.documentOrder}}))}),[a]),f=Object(r.useMemo)((function(){if(!s)return p;var e=s.pageIndex;if(Object(Vn.isPresent)(e))return p.filter((function(t){return"loaded"===t.status&&t.pageIndex===e}));var t=s.documentIndex,n=p.filter((function(e){return"loaded"===e.status&&e.documentIndex===t}));return Object(Vn.isPresent)(t)?n.sort(Object(Qa.a)((function(e,t){return e.documentOrder<t.documentOrder}))):n.sort(Object(Qa.a)((function(e,t){return e.pageIndex<t.pageIndex}))),n}),[p,s]);return Object(me.jsx)("div",{ref:d,className:c.listContainer,children:Object(Vn.isPresent)(u)&&Object(Vn.isPresent)(l)&&Object(me.jsx)($s,{filteredPages:f,width:u,height:l,onImageExtractionRequested:t,readonly:"dontSend"===(null===i||void 0===i?void 0:i.action)})})},Fs=n(305),zs=n.n(Fs),Js=n(479),Bs=n.n(Js),Ws=n(1077),qs=n.n(Ws),Vs=n(1776),Gs=n.n(Vs),Hs=n(1777),Ys=n.n(Hs),Ks=n(2319),Zs=n(1076),Xs=n.n(Zs),Qs=n(2413),ei=n(716),ti=n(2322),ni=["saveAsDraft","send","dontSend"];Object.freeze(ni);var ri,ai=n(2397),si=n(2398),ii=n(2399),ci=function(e){var t=e.error,n=e.stack;return Object(me.jsxs)(ai.a,{children:[Object(me.jsx)(ii.a,{expandIcon:Object(me.jsx)(F.a,{}),children:Object(me.jsx)(C.a,{variant:"h5",color:"error",children:t})}),Object(me.jsx)(si.a,{children:Object(me.jsx)("pre",{children:n})})]})},oi=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(Y.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(K.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,r=n.hasError,a=n.error,s=n.errorInfo;return r?Object(me.jsx)(ci,{error:null!==(e=null===a||void 0===a?void 0:a.message)&&void 0!==e?e:"",stack:null!==(t=null===s||void 0===s?void 0:s.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(r.Component),ui=function e(t){var n={};if(t)for(var r=function(){var r=s[a];Array.isArray(t[r])?t[r].forEach((function(t,a){var s=n[r];Object(Vn.isPresent)(s)||(n[r]=s=[]),s[a]=e(t)})):"object"===typeof t[r]&&null!==t[r]?n[r]=e(t[r]):n[r]=!0},a=0,s=Object.keys(t);a<s.length;a++)r();return n},li=["name","debounce","onChange","onBlur","helperText","error","disabled","controlValueAdapter"],di=function(e){var t=e.name,n=e.debounce,a=e.onChange,s=e.onBlur,i=e.helperText,c=(e.error,e.disabled),o=e.controlValueAdapter,u=Object(M.a)(e,li),l=Object(ei.d)().isSubmitting,d=Object(ei.c)({name:t}),p=Object(b.a)(d,3),f=p[0],v=p[1],j=p[2],O=v.error,m=v.touched&&!!O,g=Object(r.useState)(f.value),x=Object(b.a)(g,2),y=x[0],k=x[1],C=Object(r.useState)(),S=Object(b.a)(C,2),w=S[0],T=S[1];Object(r.useEffect)((function(){k(f.value)}),[f.value]);var _=Object(r.useCallback)((function(e){var t=e.target.value;j.setValue(o?o(t):t),null===a||void 0===a||a(e)}),[o,j,a]),P=Object(r.useCallback)((function(e){k((function(t){var n=e.target.value;return n||t})),Object(Vn.isPresent)(n)?(e.persist(),w&&clearTimeout(w),T(setTimeout((function(){return _(e)}),n))):_(e)}),[_,n,w]),A=Object(r.useCallback)((function(e){f.onBlur(e),null===s||void 0===s||s(e)}),[f,s]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)(ze.a,Object(h.a)(Object(h.a)({},f),{},{value:null!==y&&void 0!==y?y:"",onChange:P,onBlur:A,error:m,helperText:m?O:i,disabled:null!==c&&void 0!==c?c:l},u))})},pi=n(2447),fi=["name","controlValueAdapter","onChange","onBlur","renderInput","multiple","loading","disabled"],bi=function(e){var t,n=e.name,a=e.controlValueAdapter,s=e.onChange,i=e.onBlur,c=e.renderInput,o=e.multiple,u=e.loading,l=e.disabled,d=Object(M.a)(e,fi),p=Object(ei.d)(),f=p.isSubmitting,v=p.setFieldTouched,j=Object(ei.c)({name:n}),O=Object(b.a)(j,3),m=O[0],g=O[1],x=O[2],y=g.error,k=g.touched&&!!y,C=Object(r.useCallback)((function(e,t,n,r){var i=a?a(t):t;x.setValue(null!==i&&void 0!==i?i:void 0),null===s||void 0===s||s(e,t,n,r)}),[a,x,s]),S=Object(r.useCallback)((function(e){v(m.name),m.onBlur(e),null===i||void 0===i||i(e)}),[m,i,v]),w=Object(r.useCallback)((function(e){return c?c(Object(h.a)(Object(h.a)({},e),{},{error:k,helperText:k?y:void 0})):null}),[y,c,k]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)(pi.a,Object(h.a)(Object(h.a)({},m),{},{value:null!==(t=m.value)&&void 0!==t?t:null,onChange:C,onBlur:S,renderInput:w,disabled:null!==l&&void 0!==l?l:f,loading:u||f,multiple:o},d))})},hi=Object(j.a)((function(e){return Object(O.a)({dialogPaper:{},dialogContent:{}})})),vi=function(e){var t=Object(p.a)().t,n=Ns().documentSchemas,a=Object(r.useMemo)((function(){var e={};if(n){var t,r=Object(pe.a)(n);try{for(r.s();!(t=r.n()).done;){var a,s=t.value;s.$id&&(e[s.$id]={label:null!==(a=s.title)&&void 0!==a?a:s.$id,description:s.description})}}catch(i){r.e(i)}finally{r.f()}}return e}),[n]),s=Object(r.useMemo)((function(){var e=Object.keys(a);return Object(Ir.a)((function(e){return a[e].label}),e)}),[a]);return Object(me.jsxs)(je.a,{container:!0,spacing:3,children:[Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(bi,{name:"schemaId",options:s,getOptionLabel:function(e){var t;return null===(t=a[e])||void 0===t?void 0:t.label},renderInput:function(e){return Object(me.jsx)(ze.a,Object(h.a)(Object(h.a)({},e),{},{label:t("Schema"),InputLabelProps:{required:!0},required:!0,autoFocus:!0}))},fullWidth:!0})}),Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(di,{name:"pages",label:t("Pages"),fullWidth:!0})}),Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(di,{select:!0,name:"action",label:t("Action"),fullWidth:!0,children:ni.map((function(e){return Object(me.jsx)(J.a,{value:e,children:t("RecognizedDocumentAction.".concat(e))},e)}))})})]})},ji="(\\d+(\\s*-\\s*\\d+)?)",Oi="^\\s*".concat(ji,"(\\s*,\\s*").concat(ji,")*\\s*$"),mi=new RegExp(Oi),gi=function(e){var t=e.open,n=e.document,a=e.availablePageIndices,s=e.onChange,i=e.onClose,c=Object(p.a)().t,o=hi(),l=Ns(),d=l.documentSchemas,f=l.fileInfos,b=Object(r.useMemo)((function(){var e,t=n?function(e,t){return e.map((function(e){var n=t[e.fileIndex];return"loaded"===n.status?n.pages[e.filePageNumber].pageIndex:-1}))}(n.pages,f):a;return{schemaId:null===n||void 0===n?void 0:n.schemaId,pages:Ts(t),action:null!==(e=null===n||void 0===n?void 0:n.action)&&void 0!==e?e:"send"}}),[a,n,f]),h=Object(r.useRef)(),v=Object(r.useMemo)((function(){return function(e,t){return ti.a().shape({schemaId:ti.b().required().test({test:function(e){return!e||!("string"!==typeof e||!t.find((function(t){return t.$id===e})))||this.createError({path:this.path,message:u.a.t("UnknownDocumentSchema",{schemaId:e})})}}),pages:ti.b().test({test:function(t){if(!t)return!0;if("string"!==typeof t||!mi.test(t))return this.createError({path:this.path,message:u.a.t("InvalidPageRange",{range:t})});var n=Ss(t),r=Object(Qs.a)(n,e);return!(r.length>0)||(r.sort(),this.createError({path:this.path,message:u.a.t("PagesAlreadyUsedInOtherDocuments",{pages:r.map((function(e){return e+1})).join(", ")})}))}}),action:ti.b().required().oneOf(Object(qn.a)(ni))})}(a,null!==d&&void 0!==d?d:[])}),[a,d]),j=Object(r.useCallback)((function(){var e=h.current;e&&function(e){e.validateForm().then((function(t){Object.keys(t).length>0?e.setTouched(ui(t)):e.handleSubmit()}))}(e)}),[]),O=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r){var a,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a={schemaId:t.schemaId,pages:[],data:null===n||void 0===n?void 0:n.data,action:t.action},t.pages&&(c=Ss(t.pages),a.pages=_s(c,f)),null===s||void 0===s||s(a),null===i||void 0===i||i()}finally{r.setSubmitting(!1)}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[null===n||void 0===n?void 0:n.data,f,s,i]),m=Object(r.useCallback)((function(){null===i||void 0===i||i()}),[i]),g=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===i||void 0===i||i());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]);return Object(me.jsxs)(Me.a,{open:t,onClose:g,maxWidth:"sm",fullWidth:!0,classes:{paper:o.dialogPaper},children:[Object(me.jsx)(Fe.a,{children:c(n?"EditingDocument":"AddingDocument")}),Object(me.jsx)(Le.a,{className:o.dialogContent,children:Object(me.jsx)(oi,{children:Object(me.jsx)(ei.b,{innerRef:function(e){return h.current=e},initialValues:b,onSubmit:O,validationSchema:v,validateOnChange:!0,validateOnBlur:!0,children:Object(me.jsx)(ei.a,{autoComplete:"off",children:Object(me.jsx)(vi,{availablePageIndices:a})})})})}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(R.a,{onClick:j,color:"primary",children:c("Accept")}),Object(me.jsx)(R.a,{onClick:m,color:"primary",children:c("Cancel")})]})]})},xi=function(e){return Object(me.jsxs)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 1000 1000"},e),{},{children:[Object(me.jsx)("path",{d:"M808.3 950h-725C42.9 950 10 917.1 10 876.7V171.6c0-40.4 32.9-73.3 73.3-73.3h502.1c18.6 0 33.6 15.1 33.6 33.6 0 18.6-15.1 33.6-33.6 33.6H83.3c-3.4 0-6.1 2.7-6.1 6.1v705.1c0 3.4 2.7 6.1 6.1 6.1h724.9c3.4 0 6.1-2.7 6.1-6.1V492c0-18.6 15-33.6 33.6-33.6s33.6 15.1 33.6 33.6v384.7c.1 40.4-32.8 73.3-73.2 73.3z"}),Object(me.jsx)("path",{d:"M307.3 781.2c-16.1 0-31.1-8.1-40.1-21.7-8.9-13.5-10.5-30.4-4.1-45.3l83.4-196.8 431-431C801 62.9 832.3 50 865.5 50s64.5 13 88 36.5c48.5 48.6 48.5 127.5 0 176.1l-431 431-196.3 83.8c-6 2.5-12.4 3.8-18.9 3.8zm96-225.5-59.8 141.1 140.8-60.1L906 215c22.3-22.3 22.3-58.7 0-81-10.8-10.8-25.2-16.8-40.5-16.8s-29.7 6-40.5 16.8L403.3 555.7z"}),Object(me.jsx)("path",{d:"M398.4 502.3 530 633.8l-47.5 47.5-131.6-131.5 47.5-47.5zM800.2 100.5 931.8 232l-47.5 47.5L752.7 148l47.5-47.5z"})]}))},yi=Object(j.a)((function(e){return Object(O.a)({toolbar:{minHeight:"48px",paddingLeft:0,borderBottom:"solid 2px ".concat(e.palette.divider)},tree:{"& .rst__collapseButton":{backgroundColor:"dark"===e.palette.type?e.palette.background.paper:void 0,backgroundImage:"dark"===e.palette.type?"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiIGZpbGw9Im5vbmUiLz48ZyBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS45IiA+PHBhdGggZD0iTTQuNSA5aDkiLz48L2c+Cjwvc3ZnPg==)":void 0},"& .rst__expandButton":{backgroundColor:"dark"===e.palette.type?e.palette.background.paper:void 0,backgroundImage:"dark"===e.palette.type?"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiIGZpbGw9Im5vbmUiLz48ZyBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS45IiA+PHBhdGggZD0iTTQuNSA5aDkiLz48cGF0aCBkPSJNOSA0LjV2OSIvPjwvZz4KPC9zdmc+)":void 0},"& .rst__collapseButton:focus, & .rst__expandButton:focus":{boxShadow:"dark"===e.palette.type?"0 0 0 1px #000":void 0,outline:"initial"}},node:{"& .rst__rowContents":{cursor:"pointer",backgroundColor:e.palette.background.default},"& .rst__moveHandle":{backgroundColor:"dark"===e.palette.type?e.palette.background.paper:void 0}},selectedNode:{"& .rst__rowContents":{backgroundColor:e.palette.action.selected}},actionIcon:{marginLeft:5,verticalAlign:"bottom"},sendActionIcon:{marginLeft:5,color:Xs.a[500],verticalAlign:"bottom"},documentWithErrors:{textDecoration:"underline wavy ".concat(e.palette.error.main)}})})),ki=function(e){return Object(Vn.isPresent)(e.documentIndex)&&!Object(Vn.isPresent)(e.pageIndex)},Ci=function(e){return!Object(Vn.isPresent)(e.documentIndex)&&!Object(Vn.isPresent)(e.pageIndex)},Si=function(e){return Object(Vn.isPresent)(e.pageIndex)},wi=function(e){var t=e.node;return Si(t)?"p-".concat(t.pageIndex):ki(t)?"d-".concat(t.documentIndex):"o"},Ti=function(e){return!Si(e)},_i=function(e){return Si(e.node)},Pi=function(e){var t=e.node,n=e.nextParent,r=t;return!!n&&(!!Object(Vn.isPresent)(r.documentIndex)||!Ci(n))},Ai=function(){var e=Ns(),t=e.documentSchemas,n=e.fileInfos,a=e.documentInfos,s=e.canModify,i=Object(r.useState)([]),c=Object(b.a)(i,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){l((function(e){var r=s?function(e,t,n){var r,a=[],s=[],i=Object(pe.a)(e);try{var c=function(){var e=r.value;if("loaded"!==e.status)return"continue";e.pages.forEach((function(t,n){var r="".concat(t.pageIndex+1," - ").concat(e.name);e.pages.length>1&&(r+=" / ".concat(n+1));var i=t.documentIndex,c={title:r,pageIndex:t.pageIndex,documentIndex:i};if(Object(Vn.isPresent)(i)&&Object(Vn.isPresent)(t.documentOrder)){var o=s[i];o||(s[i]=o=[]),o[t.documentOrder]=c}else a.push(c)}))};for(i.s();!(r=i.n()).done;)c()}catch(o){i.e(o)}finally{i.f()}return[].concat(Object(qn.a)(s.map((function(e,r){var a=u.a.t("DocumentN",{index:r+1}),s=t[r].schemaId;if(s){var i=null===n||void 0===n?void 0:n.find((function(e){return e.$id===s}));if(i){var c=i.title;if(!c){var o=s.lastIndexOf("/");(c=s.substring(o+1)).toLocaleLowerCase().endsWith(".json")&&(c=c.substring(0,c.length-5))}a="".concat(r+1," - ").concat(c)}}return{documentIndex:r,title:a,action:t[r].action,errors:t[r].errors,children:null!==e&&void 0!==e?e:[]}}))),[{title:u.a.t("OrphanPages"),children:a}])}(n,a,t):function(e,t){return e.map((function(n,r){var a=u.a.t("DocumentN",{index:r+1}),s=e[r].schemaId;if(s){var i=null===t||void 0===t?void 0:t.find((function(e){return e.$id===s}));if(i){var c=i.title;if(!c){var o=s.lastIndexOf("/");(c=s.substring(o+1)).toLocaleLowerCase().endsWith(".json")&&(c=c.substring(0,c.length-5))}a="".concat(r+1," - ").concat(c)}}return{documentIndex:r,title:a,action:e[r].action,errors:e[r].errors,children:[]}}))}(a,t);if(e.length>0){for(var i=0;i<Math.min(r.length,e.length-1);i++)r[i].expanded=e[i].expanded;r[r.length-1].expanded=e[e.length-1].expanded}return r}))}),[s,a,t,n]),{treeData:o,setTreeData:l}},Ni=function(e){var t=e.node,n=Object(p.a)().t,r=yi(),a="send"===t.action?Object(me.jsx)(Gs.a,{className:r.sendActionIcon}):"dontSend"===t.action?Object(me.jsx)(Ys.a,{className:r.actionIcon,color:"error"}):Object(me.jsx)(xi,{className:r.actionIcon});return Object(me.jsx)(Ct.a,{title:n("RecognizedDocumentAction.".concat(t.action)),children:Object(me.jsx)("span",{children:a})})},Ii=function(e){var t=e.node,n=e.canModify,r=yi(),a="send"===t.action&&t.errors.length>0&&n?r.documentWithErrors:void 0;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("span",{className:a,children:t.title}),Object(me.jsx)(Ni,{node:t})]})},Ri=function(e){var t=e.description,n=e.onClick,r=e.icon;return Object(me.jsx)(Ct.a,{title:t,children:Object(me.jsx)(w.a,{size:"small",onClick:n,children:r})})},Ui=function(e){var t=e.node,n=e.unusedPageIndices,a=Object(p.a)().t,s=Object(r.useState)(),i=Object(b.a)(s,2),c=i[0],o=i[1],u=Ns(),l=u.updateDocument,d=u.getDocument,f=u.fileInfos,h=Object(r.useMemo)((function(){var e=n;if(Object(Vn.isPresent)(c)){var t=d(c).pages.map((function(e){var t=f[e.fileIndex];if("loaded"===t.status)return t.pages[e.filePageNumber].pageIndex})).filter(Vn.isPresent);t.push.apply(t,Object(qn.a)(e)),e=t.sort()}return e}),[c,f,d,n]),v=Object(r.useCallback)((function(e,t){o(t)}),[]),j=Object(r.useCallback)((function(e){d(c).schemaId!==e.schemaId&&(e.data={}),l(c,e)}),[c,d,l]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ri,{description:a("Edit"),icon:Object(me.jsx)(qs.a,{}),onClick:function(e){return v(e,t.documentIndex)}}),Object(Vn.isPresent)(c)&&Object(me.jsx)(gi,{open:Object(Vn.isPresent)(c),document:d(c),availablePageIndices:h,onChange:j,onClose:function(){return o(void 0)}})]})},Ei=function(e){var t=e.node,n=Object(p.a)().t,a=Bt(),s=Ns(),i=s.setCurrentDocumentEditionState,c=s.deleteDocument,o=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r,s){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,a({description:n("ConfirmDeleteBatchDocument",{name:s})});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:c(r),i(void 0);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[a,c,i,n]);return Object(me.jsx)(Ri,{description:n("Delete"),icon:Object(me.jsx)(zs.a,{}),onClick:function(e){return o(e,t.documentIndex,t.title)}})},Di=function(e){var t=e.unusedPageIndices,n=Object(p.a)().t,a=Object(r.useState)(!1),s=Object(b.a)(a,2),i=s[0],c=s[1],o=Ns(),u=o.setCurrentDocumentLocation,l=o.addDocument,d=Object(r.useCallback)((function(){c(!0)}),[]),f=Object(r.useCallback)((function(e){e.data={};var t=l(e);u({documentIndex:t})}),[l,u]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ct.a,{title:n("AddDocument"),children:Object(me.jsx)(w.a,{onClick:d,children:Object(me.jsx)(Bs.a,{})})}),i&&Object(me.jsx)(gi,{open:i,availablePageIndices:t,onChange:f,onClose:function(){return c(!1)}})]})},Mi=function(e){var t=yi(),n=Ns(),a=n.fileInfos,s=n.loadingImages,i=n.movePage,c=n.currentDocumentLocation,o=n.setCurrentDocumentLocation,u=n.canModify,l=Ai(),d=l.treeData,p=l.setTreeData,b=Object(r.useMemo)((function(){return a.flatMap((function(e){return"loaded"!==e.status?[]:e.pages.filter((function(e){return!Object(Vn.isPresent)(e.documentOrder)})).map((function(e){return e.pageIndex}))}))}),[a]),h=Object(r.useCallback)((function(e){!function(e){var t=e[e.length-1],n=t.children;Ci(t)&&Array.isArray(n)&&n.sort(Object(Qa.a)((function(e,t){return e.pageIndex<t.pageIndex})))}(e),p(e)}),[p]),j=Object(r.useCallback)((function(e){var t=e.node,n=e.nextParentNode,r=e.prevTreeIndex,a=e.nextTreeIndex;if(n&&r!==a){var s=t,c=n;if(!Ci(c)||Object(Vn.isPresent)(s.documentIndex))if(ki(c)){var o=c.documentIndex,u=c.children.findIndex((function(e){return e.pageIndex===s.pageIndex}));i(s.pageIndex,{documentIndex:o,documentOrder:u})}else Ci(c)&&i(s.pageIndex)}}),[i]),O=Object(r.useCallback)((function(e,t){var n,r,a=e.target;if(!0!==(null===(n=a.classList)||void 0===n?void 0:n.contains("rst__collapseButton"))&&!0!==(null===(r=a.classList)||void 0===r?void 0:r.contains("rst__expandButton"))){var s=t;o({documentIndex:s.documentIndex,pageIndex:s.pageIndex})}}),[o]),m=Object(r.useCallback)((function(e){var n=e.node,r=c&&n.documentIndex===c.documentIndex&&n.pageIndex===c.pageIndex,a={onClick:function(t){return O(t,e.node)},className:Object(v.default)(t.node,Object(f.a)({},t.selectedNode,r))};if(ki(n)){if(u){var s=Object(me.jsx)(Ui,{node:n,unusedPageIndices:b}),i=Object(me.jsx)(Ei,{node:n});a.buttons=[s,i]}a.title=function(){return Object(me.jsx)(Ii,{node:n,canModify:u})}}return a}),[u,t.node,t.selectedNode,c,O,b]);return s?null:Object(me.jsxs)(me.Fragment,{children:[u&&Object(me.jsx)(k.a,{className:t.toolbar,children:Object(me.jsx)(Di,{unusedPageIndices:b})}),Object(me.jsx)(Ks.a,{treeData:d,onChange:h,onMoveNode:j,getNodeKey:wi,canDrag:_i,canDrop:Pi,canNodeHaveChildren:Ti,isVirtualized:!1,generateNodeProps:m,className:t.tree})]})},$i=n(798),Li=n(2371),Fi=n(801),zi=n(481),Ji=Object(j.a)((function(e){return Object(O.a)({image:{marginTop:e.spacing(2),width:"max-content",maxWidth:"100%"},imagePlaceholder:{marginTop:e.spacing(6),height:50}})})),Bi=Object(wa.withJsonFormsControlProps)((function(e){var t=e.uischema,n=e.config,r=e.id,a=e.data,s=e.visible,i=e.errors,c=e.label,o=e.required,u=e.description,l=Ji(),d=0===i.length,p=Object(zi.merge)({},n,t.options),f=!Object(Sa.isDescriptionHidden)(s,null!==u&&void 0!==u?u:"",!1,p.showUnfocusedDescription),b=f?u:d?null:i,h=f&&!d?i:null;return Object(me.jsx)(Ca.a,{xsUp:!s,children:Object(me.jsxs)($i.a,{fullWidth:!p.trim,id:r,children:[Object(me.jsx)(Li.a,{htmlFor:r+"-input",error:!d,shrink:"string"===typeof a,children:Object(Sa.computeLabel)(Object(Sa.isPlainLabel)(c)?c:c.default,!!o,p.hideRequiredAsterisk)}),Object(me.jsxs)("div",{children:["string"===typeof a&&Object(me.jsx)("img",{src:a,alt:"",className:l.image}),"string"!==typeof a&&Object(me.jsx)("img",{src:"".concat(Object(we.a)(),"/images/image-placeholder.png"),alt:"placeholder",className:l.imagePlaceholder})]}),Object(me.jsx)(Fi.a,{error:!d&&!f,children:b}),Object(me.jsx)(Fi.a,{error:!d,children:h})]})})})),Wi=Object(Sa.rankWith)(4,Object(Sa.and)(Sa.isControl,(function(e,t){var n=Sa.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"image"===n.format}))),qi=n(2325),Vi=n(105),Gi=n.n(Vi),Hi=n(797),Yi=n(969),Ki=n.n(Yi),Zi=(ri=Hi.a,Object(qi.a)((function(e){return Object(me.jsx)(ri,Object(h.a)({},e))}))),Xi=a.a.memo((function(e){var t,n,a,s,i=Object(r.useState)(!1),c=Object(b.a)(i,2),o=c[0],u=c[1],l=e.data,d=e.config,p=e.className,f=e.id,h=e.enabled,v=e.uischema,j=e.isValid,O=e.path,g=e.handleChange,x=e.schema,y=e.muiInputProps,k=x.maxLength,C=Gi()({},d,v.options);s=C.restrict?{maxLength:k}:{};var S=Object(r.useMemo)((function(){return x.patternMask}),[x]);s=Gi()(s,y),C.trim&&void 0!==k&&(s.size=k);var T=Object(m.a)(),_=(null===(t=T.jsonforms)||void 0===t||null===(n=t.input)||void 0===n||null===(a=n.delete)||void 0===a?void 0:a.background)||T.palette.background.default,P=Object(r.useCallback)((function(e){g(O,e)}),[g,O]);return Object(me.jsx)(Zi,{mask:S,onAccept:P,type:"text",className:p,id:f,value:l,disabled:!h,autoFocus:C.focus,multiline:C.multi,fullWidth:!C.trim||void 0===k,inputProps:s,error:!j,onPointerEnter:function(){return u(!0)},onPointerLeave:function(){return u(!1)},endAdornment:Object(me.jsx)(kt.a,{position:"end",style:{display:o&&h&&void 0!==l?"flex":"none",position:"absolute",right:0},children:Object(me.jsx)(w.a,{"aria-label":"Clear input field",onClick:function(){return g(O,void 0)},children:Object(me.jsx)(Ki.a,{style:{background:_,borderRadius:"50%"}})})})})}),wa.areEqual),Qi=Object(wa.withJsonFormsControlProps)((function(e){return Object(me.jsx)(ka.MaterialInputControl,Object(h.a)(Object(h.a)({},e),{},{input:Xi}))})),ec=Object(Sa.rankWith)(4,Object(Sa.and)(Sa.isControl,(function(e,t){var n=Sa.Resolve.schema(t,e.scope);return n&&"string"===n.type&&"string"===typeof n.patternMask}))),tc=Object(j.a)((function(e){return Object(O.a)({content:{display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto",rowGap:"5px",height:"100%",overflowY:"hidden"},editorPane:{gridRow:"1 / 2",gridColumn:"1 / 2",overflow:"auto"},listPane:{gridRow:"2 / 3",gridColumn:"1 / 2",overflow:"auto",borderTop:"solid 2px ".concat(e.palette.divider),paddingTop:10},listPaneHeader:{display:"flex",flexDirection:"row",placeItems:"center"},list:{display:"flex",flexDirection:"row",padding:0},listItem:{width:"inherit",marginTop:10,marginLeft:10,marginRight:10,border:"solid 2px ".concat(e.palette.divider),height:125},imageItem:{},image:{maxWidth:300,maxHeight:100},grow:{flexGrow:1}})})),nc=function(e){var t,n=Ns(),a=n.documentSchemas,s=n.currentDocumentEditionState,i=n.setCurrentDocumentEditionState,c=n.canModify,o=tc(),u=Object(r.useRef)(null===s||void 0===s?void 0:s.document.data),l=Object(r.useRef)(!1);Object(r.useMemo)((function(){u.current=null===s||void 0===s?void 0:s.document.data}),[null===s||void 0===s?void 0:s.document.data]);var d=Object(r.useMemo)((function(){return[].concat(Object(qn.a)(Vc),[{tester:Wi,renderer:Bi},{tester:ec,renderer:Qi}])}),[]),p=Object(r.useCallback)((function(e){l.current=!!e.errors&&e.errors.length>0;var t=l.current?ta(e.errors.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{instancePath:e.dataPath})}))):void 0;l.current||u.current===e.data||(u.current=e.data,l.current=!1),i((function(n){var r,a;return Object(Ya.a)(e.data,null===n||void 0===n?void 0:n.document)&&Object(Ya.a)(t,null===n||void 0===n?void 0:n.errors)?n:{document:Object(h.a)(Object(h.a)({},n.document),{},{data:null!==(r=e.data)&&void 0!==r?r:null===n||void 0===n||null===(a=n.document)||void 0===a?void 0:a.data}),errors:t}}))}),[i]);if(!(null===s||void 0===s?void 0:s.document))return null;var f=null===a||void 0===a?void 0:a.find((function(e){return e.$id===(null===s||void 0===s?void 0:s.document.schemaId)}));return Object(me.jsx)("div",{className:o.content,children:Object(me.jsx)("div",{className:o.editorPane,children:Object(me.jsx)(wa.JsonForms,{data:null!==(t=null===s||void 0===s?void 0:s.document.data)&&void 0!==t?t:{},schema:f,onChange:p,renderers:d,cells:Gc,ajv:gs,readonly:!c||"dontSend"===(null===s||void 0===s?void 0:s.document.action)})})})},rc=n(1778),ac=n.n(rc),sc=n(1802),ic=n.n(sc),cc=n(1803),oc=n.n(cc),uc=n(2414),lc=[n(1822)],dc=Object(uc.a)((function(e){return e[0]}),Object(jt.a)((function(e){return e.$id}),lc)),pc={resolve:{nimflow:{order:1,canRead:function(e){return!!dc[e.url]},read:function(e){return Object(Yn.a)(["$id"],dc[e.url])}}}},fc=function(e){return oc.a.dereference(e,pc)},bc=Object(j.a)((function(e){return Object(O.a)({dialogPaper:{height:"90vh"},dialogContent:{display:"grid",gridTemplateColumns:"auto ".concat(400,"px"),gridTemplateRows:"auto",rowGap:"5px",height:"100%",overflowY:"hidden"},imagePane:{gridRow:"1 / 2",gridColumn:"1 / 2",overflow:"auto"},listPane:{gridRow:"1 / 2",gridColumn:"2 / 3",overflow:"auto",borderLeft:"solid 2px ".concat(e.palette.divider),paddingLeft:10},cropper:{height:"100%",width:"100%"},cropperDisabled:{"& .cropper-crop-box":{display:"none"},"& .cropper-drag-box":{opacity:0}},imageItem:{width:"100%",position:"relative"},imageTitle:{textDecoration:"underline"},image:{maxWidth:"100%",marginTop:10,marginBottom:10},imagePlaceholder:{marginTop:10,height:50},imageActions:{marginLeft:-10},deleteButton:{},grow:{flexGrow:1},degreesEdit:{marginLeft:20,width:"5em"}})})),hc=function(e){var t=null===e||void 0===e?void 0:e.current;return null===t||void 0===t?void 0:t.cropper},vc=function e(t,n,r,a,s,i){if("string"!==n.type||"image"!==n.format){if(!(i.includes(t)||"array"!==n.type&&"object"!==n.type))if("array"===n.type&&Array.isArray(t)&&"object"===typeof n.items){var c;if(Array.isArray(n.items)){var o=n.items.filter(He);if(1!==o.length)return;c=o[0]}else c=n.items;i.push(t);for(var u=0;u<t.length;u++)try{a.push(u),s.push(u.toString()),e(t[u],c,r,a,s,i)}finally{a.pop(),s.pop()}}else if("object"===n.type&&(He(t)||!Object(Vn.isPresent)(t))){if(t){i.push(t);for(var l=0,d=Object.entries(t);l<d.length;l++){var p,f,h=Object(b.a)(d[l],2),v=h[0],j=h[1],O=null!==(p=null===(f=n.properties)||void 0===f?void 0:f[v])&&void 0!==p?p:n.additionalProperties;if("object"===typeof O)try{var m;a.push(v),s.push(null!==(m=O.title)&&void 0!==m?m:v),e(j,O,r,a,s,i)}finally{a.pop(),s.pop()}}}if(n.properties)for(var g=0,x=Object.entries(n.properties);g<x.length;g++){var y=Object(b.a)(x[g],2),k=y[0],C=y[1];if("object"===typeof C&&(!t||!(k in t)))try{var S;a.push(k),s.push(null!==(S=C.title)&&void 0!==S?S:k),e(void 0,C,r,a,s,i)}finally{a.pop(),s.pop()}}}}else{var w=a.map((function(e){return e.toString()})).join(".");if(-1===r.findIndex((function(e){return e.id===w}))){var T=s.join(" -> ");r.push({id:w,path:Object(qn.a)(a),title:T,value:t,originalValue:t})}}},jc=function(e,t){var n=[];return vc(e,t,n,[],[],[]),n},Oc=function(e,t){Object(Vn.isPresent)(t.value)&&!e&&(e={});for(var n=e,r=0;r<t.path.length-1;r++){var a=t.path[r],s=n[a];if(!n){if(!t.value)return e;n[a]=s={}}n=s}if(Object(Vn.isPresent)(n)){var i=t.path[t.path.length-1];Object(Vn.isPresent)(t.value)?n[i]=t.value:delete n[i]}return e},mc=function(e){var t=e.open,n=e.pageIndex,a=e.onClose,s=Ns(),i=s.documentSchemas,c=s.currentDocumentEditionState,o=s.setCurrentDocumentEditionState,u=s.findByPageIndex,l=Object(p.a)().t,d=bc(),f=Object(r.useState)(180),v=Object(b.a)(f,2),j=v[0],O=v[1],m=Object(r.useRef)(null),g=Object(r.useRef)(),x=Object(r.useState)(!1),y=Object(b.a)(x,2),k=y[0],S=y[1],T=Object(r.useState)([]),_=Object(b.a)(T,2),P=_[0],A=_[1];Object(pt.a)(["documentSchema/".concat(null===c||void 0===c?void 0:c.document.schemaId),document],Object(D.a)(E.a.mark((function e(){var t,n,r,a,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===c||void 0===c?void 0:c.document.schemaId,n=null===i||void 0===i?void 0:i.find((function(e){return e.$id===t}))){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,fc(n);case 6:return r=e.sent,a=ac()(r,{ignoreAdditionalProperties:!0}),s=jc(null===c||void 0===c?void 0:c.document.data,a),A(s),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1});var N=Object(r.useMemo)((function(){return u(n)}),[u,n]),I=Object(r.useCallback)((function(){var e=hc(m);e&&e.clear(),g.current=void 0,S(!1)}),[]),U=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=P.filter((function(e){return e.originalValue!==e.value})),o((function(e){if(t.length>0&&e.document){var n=Object(ns.a)(e.document.data,(function(e){var n,r=Object(pe.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(0===a.path.length)return a.value;e=Oc(e,a)}}catch(s){r.e(s)}finally{r.f()}return e})),r=Object(h.a)(Object(h.a)({},e.document),{},{data:n});return Object(h.a)(Object(h.a)({},e),{},{document:r})}})),null===a||void 0===a||a();case 3:case"end":return e.stop()}}),e)}))),[P,a,o]),M=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===a||void 0===a||a();case 1:case"end":return e.stop()}}),e)}))),[a]),$=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===a||void 0===a||a());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),L=Object(r.useCallback)((function(e){g.current&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),I())}),[I]),F=Object(r.useCallback)((function(e){var t=g.current;t&&(I(),A((function(n){var r=Object(qn.a)(n);return r[e]=Object(h.a)(Object(h.a)({},n[e]),{},{value:t}),r})))}),[I]),z=Object(r.useCallback)((function(e){A((function(t){var n,r=Object(qn.a)(t);return null===(n=r[e])||void 0===n||delete n.value,r}))}),[]);Object(r.useEffect)((function(){var e=void 0;return N&&setTimeout((function(){var t=m.current;if(t){var n=t.getContext("2d");n&&Rs(N.getImageData()).then((function(r){n.putImageData(r,0,0),(e=new ic.a(t,{dragMode:"crop",initialAspectRatio:Number.NaN,guides:!1,crop:function(){S(!0),g.current=e.getCroppedCanvas().toDataURL()},viewMode:1,autoCrop:!1})).clear()}))}}),0),function(){var t;null===(t=e)||void 0===t||t.destroy()}}),[N]);var J=Object(r.useCallback)((function(e){var t=parseInt(e.target.value);isNaN(t)||O(t)}),[]),B=Object(r.useCallback)((function(){var e=hc(m);e&&!isNaN(j)&&e.rotate(j)}),[j]);return Object(me.jsxs)(Me.a,{open:t,onClose:$,maxWidth:"lg",fullWidth:!0,classes:{paper:d.dialogPaper},onKeyDown:L,children:[Object(me.jsx)(Fe.a,{children:l("ExtractingImages")}),Object(me.jsxs)(Le.a,{className:d.dialogContent,children:[Object(me.jsx)("div",{className:d.imagePane,children:!!N&&Object(me.jsx)("canvas",{ref:m,width:N.width,height:N.height,style:{visibility:"hidden"}})}),Object(me.jsx)("div",{className:d.listPane,children:Object(me.jsx)(ut.a,{children:P.map((function(e,t){return Object(me.jsx)(lt.a,{children:Object(me.jsxs)("div",{className:d.imageItem,children:[Object(me.jsx)(C.a,{variant:"subtitle1",className:d.imageTitle,children:e.title}),e.value&&Object(me.jsx)("img",{src:e.value,alt:"",className:d.image}),!e.value&&Object(me.jsx)("img",{src:"".concat(Object(we.a)(),"/images/image-placeholder.png"),alt:"placeholder",className:d.imagePlaceholder}),Object(me.jsxs)("div",{className:d.imageActions,children:[Object(me.jsx)(Ct.a,{title:l("CaptureCurrentSelection"),children:Object(me.jsx)("span",{children:Object(me.jsx)(w.a,{onClick:function(){return F(t)},disabled:!k,children:Object(me.jsx)(Is,{})})})}),Object(me.jsx)(Ct.a,{title:l("Delete"),children:Object(me.jsx)(w.a,{onClick:function(){return z(t)},children:Object(me.jsx)(zs.a,{})})})]})]})},t)}))})})]}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(ze.a,{type:"number",value:j,onChange:J,className:d.degreesEdit}),Object(me.jsx)(R.a,{onClick:B,color:"primary",children:l("Rotate")}),Object(me.jsx)("div",{className:d.grow}),Object(me.jsx)(R.a,{onClick:U,color:"primary",children:l("Accept")}),Object(me.jsx)(R.a,{onClick:M,color:"primary",children:l("Cancel")})]})]})},gc=Object(j.a)((function(e){return Object(O.a)({content:{height:"75vh",minWidth:900,display:"flex",flexDirection:"row"},treePane:{flexGrow:1,overflow:"auto",width:function(e){return e.canModify?"25%":"40%"}},imageListPane:{flexGrow:1,width:"41%",overflowY:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10},editorPane:{width:function(e){return e.canModify?"33%":"59%"},flexGrow:1,overflow:"auto",borderLeft:"2px solid ".concat(e.palette.divider),paddingLeft:10}})})),xc=function(e){var t=Object(p.a)().t,n=Ns(),a=n.loadingImages,s=n.documentSchemas,i=n.canModify,c=gc({canModify:i}),o=Object(r.useState)(),u=Object(b.a)(o,2),l=u[0],d=u[1],f=Object(r.useCallback)((function(e){d(e)}),[]),h=Object(r.useCallback)((function(){d(void 0)}),[]);return s?a?Object(me.jsx)(xe,{children:t("LoadingImages")}):Object(me.jsxs)("div",{className:c.content,children:[Object(me.jsx)("div",{className:c.treePane,children:Object(me.jsx)(Mi,{})}),i&&Object(me.jsx)("div",{className:c.imageListPane,children:Object(me.jsx)(Ls,{onImageExtractionRequested:f})}),Object(me.jsx)("div",{className:c.editorPane,children:Object(me.jsx)(nc,{})}),Object(Vn.isPresent)(l)&&Object(me.jsx)(mc,{open:Object(Vn.isPresent)(l),pageIndex:l,onClose:h})]}):null},yc=function(e){var t,n=Object(wa.useJsonForms)(),a=Object(Sa.mapStateToControlProps)({jsonforms:Object(h.a)({},n)},e),s=a.data,i=a.path,c=a.schema,o=a.visible,u=a.uischema,l=null===s||void 0===s?void 0:s.documents,d=Object(r.useMemo)((function(){return l?function(e){if(!Array.isArray(e))return[];for(var t=e,n=0;n<t.length;n++){var r=t[n];if(!Object(Vn.isPresent)(r.data)||!r.action){var a,s,i=Object(h.a)(Object(h.a)({},r),{},{data:null!==(a=r.data)&&void 0!==a?a:{},action:null!==(s=r.action)&&void 0!==s?s:"send"});t===e&&(t=Object(qn.a)(e)),t[n]=i}}return t}(l):[]}),[l]);if(Object(r.useEffect)((function(){var e;d===l||Object(Ya.a)(d,l)||(null===(e=n.dispatch)||void 0===e||e.call(n,Object(Sa.update)(Object(Ha.compose)(i,"documents"),(function(){return d}))))}),[n,l,d,i]),d!==l&&!Object(Ya.a)(d,l))return null;if("ImageBatchRecognition"!==u.type)return null;var p=u;return Object(me.jsx)(Ca.a,{xsUp:!o,children:Object(me.jsx)(oi,{children:Object(me.jsx)(As,{basePath:i,batch:s,documentSchemasSource:p.documentSchemasSource,readonly:null!==(t=p.readonly)&&void 0!==t&&t,children:Object(me.jsx)(xc,{path:i,schema:c,renderers:e.renderers,data:s})})})})},kc=Object(Sa.rankWith)(3,Object(Sa.uiTypeIs)("ImageBatchRecognition")),Cc=n(484),Sc=n.n(Cc),wc=n(485),Tc=n.n(wc),_c=n(486),Pc=n.n(_c),Ac=n(649),Nc=n(2415),Ic=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"render",value:function(){var e=this.props,t=e.description,n=e.id,r=e.errors,a=e.label,s=e.uischema,i=e.visible,c=e.enabled,o=e.required,l=e.path,d=e.handleChange,p=e.data,f=e.config,b=a,h=0===r.length,v=Gi()({},f,s.options),j=!Object(Sa.isDescriptionHidden)(i,null!==t&&void 0!==t?t:"",this.state.isFocused,v.showUnfocusedDescription),O=Object(Sa.isPlainLabel)(a)?a:b;return Object(me.jsx)(Ca.a,{xsUp:!i,children:Object(me.jsx)(Ac.b,{id:n+"-input",label:Object(Sa.computeLabel)(O,null!==o&&void 0!==o&&o,v.hideRequiredAsterisk),error:!h,fullWidth:!v.trim,helperText:h?j?t:" ":r,InputLabelProps:{shrink:!0},value:p?Object(Hn.default)(p):null,onChange:function(e){return d(l,e&&!isNaN(e.valueOf())?Object(Nc.a)(e,{representation:"date"}):"")},format:u.a.t("DATE_FORMAT"),clearable:!0,disabled:!c,autoFocus:v.focus,onFocus:this.onFocus,onBlur:this.onBlur,okLabel:u.a.t("OK"),cancelLabel:u.a.t("Cancel"),clearLabel:u.a.t("Clear"),leftArrowIcon:Object(me.jsx)(Sc.a,{}),rightArrowIcon:Object(me.jsx)(Tc.a,{}),keyboardIcon:Object(me.jsx)(Pc.a,{}),InputProps:{}})})}}]),n}(wa.Control),Rc=Object(Sa.rankWith)(10,Sa.isDateControl),Uc=Object(wa.withJsonFormsControlProps)(Ic),Ec=n(653),Dc=n.n(Ec),Mc=n(977),$c=n.n(Mc),Lc=n(652),Fc=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.description,r=e.errors,a=e.label,s=e.uischema,i=e.visible,c=e.enabled,o=e.required,l=e.path,d=e.handleChange,p=e.data,f=e.config,b=Gi()({},f,s.options),h=0===r.length;return Object(me.jsx)(Ca.a,{xsUp:!i,children:Object(me.jsx)(Lc.b,{id:t+"-input",label:Object(Sa.computeLabel)(Object(Sa.isPlainLabel)(a)?a:a.default,null!==o&&void 0!==o&&o,b.hideRequiredAsterisk),error:!h,fullWidth:!b.trim,onFocus:this.onFocus,onBlur:this.onBlur,helperText:h?n:r,InputLabelProps:{shrink:!0},value:p||null,onChange:function(e){return d(l,e&&!isNaN(e.valueOf())?e.toISOString():"")},format:u.a.t("DATETIME_FORMAT"),clearable:!0,disabled:!c,autoFocus:b.focus,okLabel:u.a.t("OK"),cancelLabel:u.a.t("Cancel"),clearLabel:u.a.t("Clear"),leftArrowIcon:Object(me.jsx)(Sc.a,{}),rightArrowIcon:Object(me.jsx)(Tc.a,{}),dateRangeIcon:Object(me.jsx)(Dc.a,{}),keyboardIcon:Object(me.jsx)(Pc.a,{}),timeIcon:Object(me.jsx)($c.a,{}),InputProps:{}})})}}]),n}(wa.Control),zc=Object(Sa.rankWith)(10,Sa.isDateTimeControl),Jc=Object(wa.withJsonFormsControlProps)(Fc),Bc=n(2436),Wc=["context","bindContext","uiSchemaLibrary","schema","onChange"],qc=function(e){var t=e.context,n=e.bindContext,a=e.uiSchemaLibrary,s=e.schema,i=e.onChange,c=Object(M.a)(e,Wc),o=function(e){var t=Object(Bc.a)(Object(D.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,fc(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[e]);return{resolvedSchema:t.value,loading:t.loading,error:t.error}}(s),u=o.resolvedSchema,l=o.loading,d=o.error,p=Object(r.useState)(),f=Object(b.a)(p,2),v=f[0],j=f[1],O=Object(r.useState)([]),m=Object(b.a)(O,2),g=m[0],x=m[1],y=Object(r.useState)(),k=Object(b.a)(y,2),C=k[0],S=k[1],w=Object(r.useCallback)((function(e){j(e)}),[]),T=Object(r.useCallback)((function(e){x(e)}),[]);if(Object(r.useEffect)((function(){if(v||0!==g.length){var e=function(e,t){var n={data:void 0};return t.length>0||(null===e||void 0===e?void 0:e.errors)&&e.errors.length>0?(n.errors=n.errors?[].concat(Object(qn.a)(n.errors),Object(qn.a)(t)):t,n.errors=Object(ft.a)([Object(Qa.a)((function(e,t){var n,r;return e.dataPath<t.dataPath||e.dataPath===t.dataPath&&(null!==(n=e.message)&&void 0!==n?n:"")<(null!==(r=t.message)&&void 0!==r?r:"")}))],n.errors)):n.data=null===e||void 0===e?void 0:e.data,n}(v,g);S((function(t){return Object(Ya.a)(t,e)?t:e}))}}),[g,v]),Object(r.useEffect)((function(){C&&(null===i||void 0===i||i(C))}),[C,i]),l)return Object(me.jsx)(xe,{});if(d)throw d;return Object(me.jsx)(Pa,{context:t,bindContext:n,uiSchemaLibrary:a,onErrorsChange:T,children:Object(me.jsx)(wa.JsonForms,Object(h.a)({renderers:Vc,cells:Gc,schema:u,onChange:w},c))})},Vc=[].concat(Object(qn.a)(ka.materialRenderers),[{tester:La,renderer:$a},{tester:Ja,renderer:za},{tester:qa,renderer:Wa},{tester:Ga,renderer:Va},{tester:kc,renderer:yc},{tester:Rc,renderer:Uc},{tester:zc,renderer:Jc}]),Gc=ka.materialCells,Hc=Object(j.a)((function(e){return Object(O.a)({root:{flexGrow:1,width:"100%",marginBottom:"20px"},textField:{width:"100%"},content:{padding:"8px 24px","&:first-child":{paddingTop:20}}})})),Yc=n(640),Kc=n(1824),Zc=n.n(Kc),Xc=n(571),Qc=Object(j.a)((function(e){return Object(O.a)({button:{marginRight:e.spacing(1)},icon:{textAlign:"center"}})})),eo=function(e){var t=e.icon,n=e.title,r=e.details,a=Qc();return Object(me.jsx)(Yc.a,{pt:"50px",pb:"50px",maxHeight:"60vh",children:Object(me.jsxs)(je.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:4,children:[!!t&&Object(me.jsx)(je.a,{item:!0,xs:12,className:a.icon,children:t}),Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(C.a,{variant:"h4",align:"center",children:n})}),!!r&&Object(me.jsx)(je.a,{item:!0,xs:12,children:"string"===typeof r?Object(me.jsx)(C.a,{variant:"h6",align:"center",children:r}):Object(me.jsx)("div",{children:r})})]})})},to=function(e){var t=e.action,n=e.onDispatchCompleted,r=e.onBack,a=Qc(),s=Object(p.a)().t,i=at().contexts_DispatchAction,c=Object(Bc.a)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[i,t]),o=c.loading,u=c.value,l=c.error;return o?Object(me.jsx)(xe,{children:s("ExecutingAction")}):Object(me.jsxs)(me.Fragment,{children:[!l&&Object(me.jsx)(eo,{icon:Object(me.jsx)(Zc.a,{style:{color:Xc.a[500],fontSize:60}}),title:s("ActionCompleted"),details:s("DispatchActionResult",{id:null===u||void 0===u?void 0:u.contextId})}),!!l&&Object(me.jsx)(eo,{icon:Object(me.jsx)(Xa.a,{color:"error",style:{fontSize:60}}),title:s("ActionFailed"),details:Object(me.jsx)(yt,{error:l})}),Object(me.jsx)(je.a,{container:!0,children:Object(me.jsxs)(je.a,{item:!0,xs:12,children:[!!l&&Object(me.jsx)(R.a,{onClick:r,className:a.button,children:s("Back")}),Object(me.jsx)(R.a,{onClick:n,className:a.button,children:s("Ok")})]})})]})},no=Object(j.a)((function(e){return Object(O.a)({root:{width:"100%"},button:{marginRight:e.spacing(1)},content:{maxHeight:"60vh",overflowY:"auto"}})})),ro=[function(e){var t=e.value,n=e.onNext,a=Lr(),s=Object(r.useState)(""),i=Object(b.a)(s,2),c=i[0],o=i[1],u=function(e){var t=at().contextTypes_Search,n=Object(pt.a)("/ContextTypes/Search",Object(D.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({limit:100});case 2:return n=e.sent,e.abrupt("return",Object(Ir.a)((function(e){return e.name}),n));case 4:case"end":return e.stop()}}),e)})))),a=n.data,s=n.error,i=n.isValidating,c=n.mutate;return Object(r.useMemo)((function(){return{data:Fr(a,e),isValidating:i,error:s,mutate:c}}),[a,e,i,s,c])}(c),l=u.data,d=u.error,p=u.isValidating,f=Object(r.useCallback)((function(e){t.contextTypeName===e?n(t):n({contextTypeName:e})}),[t,n]);return Object(me.jsxs)($r,{children:[Object(me.jsx)(Nr,{actions:Object(me.jsx)(At,{value:c,onChange:o})}),Object(me.jsx)(ut.a,{className:a.root,style:{maxHeight:"400",overflowY:"auto"},children:l.map((function(e,t){return Object(me.jsxs)(lt.a,{children:[Object(me.jsx)(Ln.a,{children:Object(me.jsx)(Dr,{})}),Object(me.jsx)(dt.a,{primary:e.name,secondary:e.description}),Object(me.jsx)(Rr.a,{children:Object(me.jsx)(w.a,{edge:"end",onClick:function(){return f(e.name)},children:Object(me.jsx)(Er.a,{})})})]},e.name)}))}),!p&&!!d&&Object(me.jsx)(fe.a,{severity:"error",children:d.toString()})]})},function(e){var t=e.value,n=e.onBack,a=e.onNext,s=zr(),i=function(e){var t=at().contextTypes_FindOne,n=Object(pt.a)("/ContextType/".concat(e),Object(D.a)(E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),a=n.data,s=n.error,i=n.isValidating,c=n.mutate;return Object(r.useMemo)((function(){return{contextType:a,isValidating:i,error:s,mutate:c}}),[a,i,c,s])}(t.contextTypeName),c=i.contextType,o=i.error,u=i.isValidating,l=Object(r.useMemo)((function(){return c?c.initialActions.map((function(e){return c.actions.find((function(t){return t.name===e}))})).filter(Vn.isPresent):[]}),[c]),d=Object(r.useCallback)((function(e){t.action===e?a(t):a({contextTypeName:t.contextTypeName,action:e})}),[t,a]);return!u&&o?Object(me.jsx)(fe.a,{severity:"error",children:o.toString()}):u||!c?null:Object(me.jsx)($r,{onBack:n,children:Object(me.jsx)(je.a,{container:!0,direction:"column",alignItems:"center",spacing:3,className:s.root,children:l.map((function(e){return Object(me.jsx)(je.a,{item:!0,xs:10,children:Object(me.jsx)(R.a,{variant:"outlined",onClick:function(){return d(e.name)},children:e.name})},e.name)}))})})},function(e){var t,n=e.value,a=e.onBack,s=e.onNext,i=Hc(),c=Object(p.a)().t,o=function(e){var t=at().contextTypes_FindOne,n=Object(pt.a)("/ContextType/".concat(e),Object(D.a)(E.a.mark((function n(){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),a=n.data,s=n.error,i=n.isValidating,c=n.mutate;return Object(r.useMemo)((function(){return{contextType:a,isValidating:i,error:s,revalidate:c}}),[a,i,c,s])}(n.contextTypeName),u=o.contextType,l=o.error,d=o.isValidating,f=Object(r.useState)({reference:n.reference,contextId:n.contextId}),v=Object(b.a)(f,2),j=v[0],O=v[1],m=Object(r.useState)(null!==(t=n.payload)&&void 0!==t?t:{}),g=Object(b.a)(m,2),x=g[0],y=g[1],k=Object(r.useRef)(),C=Object(r.useRef)(),S=Object(r.useMemo)((function(){return null===u||void 0===u?void 0:u.actions.find((function(e){return e.name===n.action}))}),[u,n]),w=Object(r.useCallback)((function(){S&&u&&(k.current&&k.current.length>0||C.current&&C.current.length>0||s(Object(h.a)(Object(h.a)(Object(h.a)({},n),j),{},{payload:x})))}),[s,S,u,j,x,n]),T=Object(r.useMemo)((function(){return{type:"object",properties:{reference:{type:"string"}},required:["reference"]}}),[]),_=Object(r.useMemo)((function(){return function(e,t){if(e&&t&&e.payloadSchemaDefinitionName)return qr(t,e.name)}(S,u)}),[S,u]),P=Object(r.useMemo)((function(){var e,t=S?null===(e=ca(S))||void 0===e?void 0:e.uiSchema:void 0;if(t)return JSON.parse(t)}),[S]),A=Object(r.useCallback)((function(e){e.errors&&e.errors.length>0?(ta(e.errors.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{instancePath:e.dataPath})}))),k.current=Object(Jr.a)(e.errors)):(O(e.data),k.current=void 0)}),[O]),N=Object(r.useCallback)((function(e){e.errors&&e.errors.length>0?(ta(e.errors.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{instancePath:e.dataPath})}))),C.current=Object(Jr.a)(e.errors)):(y(e.data),C.current=void 0)}),[y]),I=Object(r.useMemo)((function(){var e;if(u){var t=null===(e=ca(u))||void 0===e?void 0:e.uiSchemaCommon;if(t)return JSON.parse(t)}}),[u]);return!d&&l?Object(me.jsx)(fe.a,{severity:"error",children:l.toString()}):u&&S?Object(me.jsx)($r,{onBack:a,onNext:w,nextActionCaption:c("ExecuteAction"),children:Object(me.jsxs)(je.a,{container:!0,spacing:2,className:i.root,children:[Object(me.jsx)(je.a,{item:!0,xs:12,className:i.content,children:Object(me.jsx)(qc,{schema:T,data:j,onChange:A,uiSchemaLibrary:I})}),Object(me.jsx)(je.a,{item:!0,xs:12,className:i.content,children:!!_&&Object(me.jsx)(qc,{schema:_,uischema:P,data:x,onChange:N,uiSchemaLibrary:I})})]})}):null}],ao=function(){var e=Object(p.a)().t,t=no(),n=Object(r.useState)(0),a=Object(b.a)(n,2),s=a[0],i=a[1],c=Object(r.useState)({}),o=Object(b.a)(c,2),u=o[0],l=o[1],d=Object(r.useMemo)((function(){return[s>0?e("SelectedContextType",{name:u.contextTypeName}):e("SelectContextType"),s>1?e("SelectedActionType",{name:u.action}):e("SelectActionType"),e("CompleteActionData")]}),[s,u,e]),f=Object(r.useCallback)((function(e){l(e),i((function(e){return e+1}))}),[i]),h=Object(r.useCallback)((function(){i((function(e){return e+1}))}),[i]),v=Object(r.useCallback)((function(){i((function(e){return e-1}))}),[i]),j=Object(r.useCallback)((function(){i(0),l({})}),[]),O=function(){var e=ro[s];return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(kr.a,{activeStep:s,alternativeLabel:!0,children:d.map((function(e,t){return Object(me.jsx)(Cr.a,{children:Object(me.jsx)(Sr.a,{children:e})},t)}))}),!!e&&Object(me.jsx)(e,{value:u,onNext:f,onBack:v,onSkip:h})]})};return Object(me.jsx)(je.a,{container:!0,spacing:3,justifyContent:"center",children:Object(me.jsx)(je.a,{item:!0,xs:9,children:Object(me.jsxs)(_r,{className:t.root,children:[Object(me.jsx)(Nr,{title:e("DispatchingAction")}),s<3?Object(me.jsx)(O,{}):Object(me.jsx)(to,{action:u,onDispatchCompleted:j,onBack:v})]})})})},so=n(500),io=n.n(so),co=n(1179),oo=function(){var e=Object(p.a)().t,t=Object(W.g)(it),n=ct().permissions_Set,a=function(){var e=at().users_GetUsersWithPermission,t=Object(pt.a)("/users_GetUsersWithPermission/",Object(D.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({pageSize:100,pageNumber:0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))),n=t.data,a=t.isValidating,s=t.mutate,i=t.error;return Object(r.useMemo)((function(){return{users:null!==n&&void 0!==n?n:[],isValidating:a,error:i,mutate:s}}),[n,a,s,i])}().users,s=function(e){var t=ct().permissions_Search,n=mt(t,e),a=Object(pt.a)(n,Object(D.a)(E.a.mark((function n(){var r,a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:return n.next=4,t({entityType:"Unit",entityId:e});case 4:return r=n.sent,a=Object(uc.a)((function(e){return e[0]}),Object(jt.a)((function(e){var t;return null!==(t=e.userId)&&void 0!==t?t:""}),r)),n.abrupt("return",a);case 7:case"end":return n.stop()}}),n)})))),s=a.data,i=a.mutate,c=a.isValidating,o=a.error;return Object(r.useMemo)((function(){return{permissions:null!==s&&void 0!==s?s:{},isValidating:c,error:o,revalidate:i,mutatePermissionsSearch:i}}),[s,o,c,i])}(t),i=s.permissions,c=s.mutatePermissionsSearch,o=Object(r.useCallback)((function(e){if(null==(null===e||void 0===e?void 0:e.id))return[];var t=i[e.id];return t?Object.values(Dn).filter((function(e){return e.permissions.find((function(e){return t.actions&&t.actions.indexOf(e)>=0}))})):[]}),[i]),u=Object(r.useMemo)((function(){return a.map((function(e){return{user:e,roles:o(e)}}))}),[a,o]),l=Object.values(Dn),d=Object(r.useState)(!1),f=Object(b.a)(d,2),h=f[0],v=f[1],j=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(r,a,s){var i,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.roles.filter((function(e){return e.name!==a.name})),s&&(i=[].concat(Object(qn.a)(i),[a])),o=Object(ra.a)(i.flatMap((function(e){return e.permissions}))),v(!0),e.prev=4,e.next=7,n({userIds:[r.user.id],entityType:"Unit",entityId:t,actions:o});case 7:return e.prev=7,c(),v(!1),e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[4,,7,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,c]),O=[{field:"user.fullName",render:function(e){return function(e){var t;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)($.a,{alt:e.fullName,src:null===(t=e.props)||void 0===t?void 0:t.Picture}),Object(me.jsx)("p",{children:e.fullName}),e.email!==e.fullName&&Object(me.jsx)("p",{children:e.email})]})}(e.user)},title:e("User")}].concat(Object(qn.a)(l.map((function(t){return{render:function(e){return function(e,t){return Object(me.jsx)(co.a,{disabled:h,checked:null!=e.roles.find((function(e){return e.name===t.name})),onChange:function(n){return j(e,t,n.target.checked)},color:"primary"})}(e,t)},title:e(t.name)}})))),m=Object(r.useMemo)((function(){return[]}),[]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)(io.a,{columns:O,data:u,title:e("UnitMembers"),actions:m})})},uo=n(380),lo=n.n(uo),po=function(){throw new Error("You forgot to wrap your component in <TasksViewTaskServiceProvider>.")},fo={task:{},addResponse:po,refreshTasks:po,taskBlocked:!1},bo=Object(r.createContext)(fo),ho=Object(W.c)({key:"taskBlockedState",default:!1}),vo=(bo.Consumer,function(){throw new Error("You forgot to wrap your component in <TasksViewServiceProvider>.")}),jo=Object.freeze({data:[],page:0,totalCount:0}),Oo=Object.freeze({}),mo={data:jo,contextTypes:Oo,currentState:{currentPage:0,pageSize:0},updateTask:vo,refreshTasks:vo,addResponse:vo,setCurrentState:vo,canCreateReponses:vo,canReassignUsers:vo,canCreateResponsesTo:vo,getColumnCandidates:vo},go=Object(r.createContext)(mo),xo=function e(t,n){switch(t.type){case"or":case"and":return Object(f.a)({},"$".concat(t.type),t.filters.map((function(t){return e(t,n)})));case"boolean":case"textMatch":case"selection":return Object(Vn.isPresent)(t.value)?{$eq:["$".concat(n),t.value]}:{$in:[{$type:"$".concat(n)},["missing","null"]]};case"prefixTextMatch":return{$regexMatch:{input:"$".concat(n),regex:"^".concat(t.prefix,".*")}};case"dateRange":var r=[];return Object(Vn.isPresent)(t.from)&&r.push(Object(f.a)({},t.includeFrom?"$gte":"$gt",["$".concat(n),{$dateFromString:{dateString:t.from}}])),Object(Vn.isPresent)(t.to)&&r.push({$lt:["$".concat(n),{$dateFromString:{dateString:t.includeTo?(s=new Date(t.to),new Date(s.getFullYear(),s.getMonth(),s.getDate(),24)).toISOString():t.to}}]}),r;case"numberRange":var a=[];return Object(Vn.isPresent)(t.from)&&a.push(Object(f.a)({},t.includeFrom?"$gte":"$gt",["$".concat(n),t.from])),Object(Vn.isPresent)(t.to)&&a.push(Object(f.a)({},t.includeTo?"$lte":"$lt",["$".concat(n),t.to])),a;default:return}var s},yo=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(b.a)(r[n],2),s=a[0],i=a[1];if(i){var c=xo(i,s);Array.isArray(c)?t.push.apply(t,Object(qn.a)(c)):t.push(c)}}return{$match:{$expr:1===t.length?t[0]:{$and:t}}}},ko=function(e,t){var n=[{$set:{id:"$_id"}},{$unset:"_id"}];t&&n.push(yo(t)),e.filters&&Object.keys(e.filters).length>0&&n.push(yo(e.filters)),e.sortInfo&&n.push({$sort:Object(f.a)({},e.sortInfo.column,"desc"===e.sortInfo.direction?-1:1)});var r=[];return e.currentPage>0&&r.push({$skip:e.currentPage*e.pageSize}),r.push({$limit:e.pageSize}),n.push({$facet:{data:r,totalCount:[{$count:"count"}]}}),n.push({$project:{data:1,totalCount:{$arrayElemAt:[{$map:{input:"$totalCount",as:"cnt",in:"$$cnt.count"}},0]}}}),n},Co=function(e){var t=e.initialState,n=e.enforcedFilter,a=at(),s=a.tasks_Aggregate,i=a.tasks_Update,c=a.tasks_AddResponse,o=a.contextTypes_FindOne,u=tt().authenticatedUser,l=Object(r.useRef)([]),d=Object(r.useState)(t),p=Object(b.a)(d,2),f=p[0],v=p[1],j=Object(r.useRef)(jo),O=Object(r.useRef)(Oo),m=$n().can,g=Object(r.useState)(0),x=Object(b.a)(g,2),y=x[0],k=x[1],C=Object(pt.a)(["/Tasks/Search",f],Object(D.a)(E.a.mark((function e(){var t,r,a,i,c,u,l,d,p,b,h,v,m;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ko(f,n),e.next=3,s({stages:t});case 3:return r=e.sent,a=r[0],i=a.data,c=a.totalCount,u={data:i,page:f.currentPage,totalCount:c},l=Object(ra.a)(i.map((function(e){return e.contextTypeName}))),e.next=9,Promise.allSettled(l.map((function(e){return o({name:e})})));case 9:d=e.sent,p={},b=Object(pe.a)(d);try{for(b.s();!(h=b.n()).done;)"fulfilled"===(v=h.value).status&&(m=v.value)&&(p[m.name]=m)}catch(g){b.e(g)}finally{b.f()}return j.current=u,O.current=p,e.abrupt("return",{data:u,contextTypes:p});case 16:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),S=C.data,w=(S=void 0===S?{}:S).data,T=S.contextTypes,_=C.mutate,P=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,v((function(e){return Object(h.a)({},e)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[_]),A=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,c,o,u,d,p,f,v,j;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){for(var t=0,r=Object.entries(n);t<r.length;t++){var a=Object(b.a)(r[t],2),s=a[0],i=a[1];if(!Object(Ya.a)(e[s],i))return!0}return!1},a=!1,_((function(e){if(e){var s=e.data.data.map((function(e){return e.id!==t.id?e:(a=r(e),Object(h.a)(Object(h.a)({},e),n))}));return a?Object(h.a)(Object(h.a)({},e),{},{data:Object(h.a)(Object(h.a)({},e.data),{},{data:s})}):e}}),!1),a){e.next=5;break}return e.abrupt("return");case 5:for(s={},c={},o=0,u=Object.entries(n);o<u.length;o++)d=Object(b.a)(u[o],2),p=d[0],f=d[1],(Object(Vn.isPresent)(f)?s:c)[p]=null!==f&&void 0!==f?f:"";v=[],Object.keys(s).length>0&&v.push({$set:s}),Object.keys(c).length>0&&v.push({$unset:c}),j=i({id:t.id,update:v,returnTask:!0}),l.current.push(j),j.finally((function(){var e=l.current.indexOf(j);e>=-1&&l.current.splice(e,1)})).then((function(e){e.task&&!r(e.task)||_(),k((function(e){return e+1}))})).catch((function(){return _()}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[_,i]),N=Object(W.d)((function(e){var t=e.set;return function(){var e=Object(D.a)(E.a.mark((function e(n,r,a,s){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ho(n.id),!0),e.prev=1,e.next=4,c({contextId:n.contextId,contextTypeName:n.contextTypeName,taskTypeName:n.typeName,responseTypeName:r.name,payload:a,startedOn:null===s||void 0===s?void 0:s.toISOString(),sentOn:(new Date).toISOString(),sentBy:null===u||void 0===u?void 0:u.name});case 4:return e.next=6,P();case 6:return e.prev=6,t(ho(n.id),!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()}),[P,c,null===u||void 0===u?void 0:u.name]),I=Object(r.useCallback)((function(){return m([Un])}),[m]),R=Object(r.useCallback)((function(){return m([An,Rn])}),[m]),U=Object(r.useCallback)((function(e){return I()&&(e.assignedTo===(null===u||void 0===u?void 0:u.name)||e.assignedTo===(null===u||void 0===u?void 0:u.email)||"*"===e.assignedTo)}),[I,u]),M=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r){var a,i,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.filterCandidates,!Array.isArray(a)){e.next=3;break}return e.abrupt("return",a);case 3:return i=[],c=!!r&&Object.keys(r).length>0,(n||c)&&(i.push({$set:{name:"$_id"}},{$unset:"_id"}),n&&i.push(yo(n)),c&&i.push(yo(r))),i.push({$group:{_id:"$"+t.field,value:{$sum:1}}},{$set:{name:"$_id"}},{$unset:"_id"},{$sort:{name:1}}),e.next=9,s({stages:i});case 9:return o=e.sent,y.toString(),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,y,s]),$=Object(r.useMemo)((function(){return{data:null!==w&&void 0!==w?w:j.current,contextTypes:null!==T&&void 0!==T?T:O.current,updateTask:A,refreshTasks:P,addResponse:N,currentState:f,setCurrentState:v,canCreateReponses:I,canReassignUsers:R,canCreateResponsesTo:U,getColumnCandidates:M}}),[N,I,U,R,T,f,w,M,P,A]);return Object(me.jsx)(go.Provider,{value:$,children:e.children})},So=(go.Consumer,function(){return Object(r.useContext)(go)}),wo=n(1882),To=n.n(wo),_o=n(1883),Po=n.n(_o),Ao=n(1886),No=n.n(Ao),Io=n(1885),Ro=n.n(Io),Uo=n(1884),Eo=n.n(Uo),Do=n(2416),Mo=function(e){var t=new Date(e);return t.getFullYear()<=1?"":Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(t)},$o=n(951),Lo=n(950),Fo=n(643),zo=n.n(Fo),Jo=n(1876),Bo=n.n(Jo),Wo=n(1877),qo=n.n(Wo),Vo=n(1878),Go=n.n(Vo),Ho=n(1879),Yo=n.n(Ho),Ko=n(1875),Zo=n.n(Ko),Xo=n(1880),Qo=n.n(Xo),eu=["forwardedRef"],tu={Add:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Bs.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Er.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(_t.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(zs.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(I.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(qs.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Zo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Bo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(qo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Go.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(I.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(A.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(_t.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(wt.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(zo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Yo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(me.jsx)(Qo.a,Object(h.a)(Object(h.a)({},e),{},{ref:t}))}))},nu=function e(t,n){for(var r={},a=0,s=Object.entries(t);a<s.length;a++){var i=Object(b.a)(s[a],2),c=i[0],o=i[1];"object"===typeof o?(n.push(c),r[c]=e(o,n),n.pop()):r[c]=u.a.t("".concat(n.join("."),".").concat(c))}return r}({body:{emptyDataSourceMessage:"",filterRow:{filterTooltip:""},editRow:{saveTooltip:"",cancelTooltip:"",deleteText:""},addTooltip:"",deleteTooltip:"",editTooltip:""},header:{actions:""},grouping:{groupedBy:"",placeholder:""},pagination:{firstTooltip:"",firstAriaLabel:"",previousTooltip:"",previousAriaLabel:"",nextTooltip:"",nextAriaLabel:"",labelDisplayedRows:"",labelRowsPerPage:"",lastTooltip:"",lastAriaLabel:"",labelRowsSelect:""},toolbar:{addRemoveColumns:"",nRowsSelected:function(e){return""},showColumnsTitle:"",showColumnsAriaLabel:"",exportTitle:"",exportAriaLabel:"",searchTooltip:"",searchPlaceholder:""}},["MaterialTable"]),ru={padding:0,width:24,marginLeft:24},au=function(e){var t=e.forwardedRef,n=Object(M.a)(e,eu);return Object(me.jsxs)($i.a,{error:Boolean(n.error),ref:t,component:"fieldset",children:[Object(me.jsx)($o.a,{children:Object(me.jsx)(Lo.a,{label:"",control:Object(me.jsx)(co.a,Object(h.a)(Object(h.a)({},n),{},{value:String(n.value),checked:Boolean(n.value),onChange:function(e){return n.onChange(e.target.checked)},style:ru,color:"default",inputProps:{"aria-label":n.columnDef.title}}))})}),Object(me.jsx)(Fi.a,{children:n.helperText})]})},su=function(e){return"boolean"===e.columnDef.type?Object(me.jsx)(au,Object(h.a)({},e)):Object(me.jsx)(so.MTableEditField,Object(h.a)({},e))},iu={EditField:function(e){return Object(me.jsx)(su,Object(h.a)({},e))}},cu=function(e){var t=Object(m.a)(),n=Object(r.useMemo)((function(){return e.icons?Object(h.a)(Object(h.a)({},tu),e.icons):tu}),[e.icons]),a=Object(r.useMemo)((function(){return e.localization?Object(h.a)(Object(h.a)({},nu),e.localization):nu}),[e.localization]),s=Object(r.useMemo)((function(){var n=function(e){return{actionsCellStyle:{color:e.palette.text.secondary},actionsColumnIndex:-1,padding:"dense"}}(t);return e.options&&(n=Object(ie.a)(n,e.options)),n}),[t,e.options]),i=Object(r.useMemo)((function(){return e.components?Object(h.a)(Object(h.a)({},iu),e.components):iu}),[e.components]);return Object(me.jsx)(io.a,Object(h.a)(Object(h.a)({},e),{},{icons:n,options:s,components:i,localization:a}))},ou=n(2442),uu=function(){throw new Error("You forgot to wrap your component in <TasksViewGroupServiceProvider>.")},lu={representativeTask:{},tasks:[],addResponse:uu,updateAssignedTo:uu},du=Object(r.createContext)(lu),pu=function(){var e=Object(D.a)(E.a.mark((function e(t,n,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.jsInitialPayloadBuilder){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,r({contextId:t.contextId,contextTypeName:t.contextTypeName,responseTypeName:n.name,taskTypeName:t.typeName});case 4:if(!(a=e.sent).defined){e.next=7;break}return e.abrupt("return",a.payload);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),fu=function e(t,n,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!s.includes(n))if(s.push(n),t===n)a.push(r);else if("object"===typeof n&&null!==n&&"object"===typeof t&&null!==t)for(var i=0,c=Object.keys(n);i<c.length;i++){var o=c[i];e(t[o],n[o],[].concat(Object(qn.a)(r),[o]),a,s)}},bu=function(e,t,n){var r,a=Object(Jr.a)(e),s=Object(pe.a)(n);try{for(s.s();!(r=s.n()).done;){var i,c,o=r.value,u=t,l=a,d=Object(pe.a)(Object(ou.a)(o));try{for(d.s();!(c=d.n()).done;){var p,f=c.value;l=a[f],u=null===(p=u)||void 0===p?void 0:p[f]}}catch(b){d.e(b)}finally{d.f()}l[Object(ve.a)(o)]=null===(i=u)||void 0===i?void 0:i[Object(ve.a)(o)]}}catch(b){s.e(b)}finally{s.f()}return a},hu=function(e){var t=e.tasks,n=e.children,a=at(),s=a.tasks_AddResponse,i=a.tasks_BuildInitialResponsePayload,c=a.tasks_UpdateMany,o=tt().authenticatedUser,u=So().refreshTasks,l=Object(r.useMemo)((function(){if(0===t.length)throw new Error("tasks.length === 0");return t[0]}),[t]),d=function(e){var t=at().contextTypes_FindOne,n=Object(pt.a)("/ContextType/".concat(e),Object(D.a)(E.a.mark((function n(){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),a=n.data,s=n.isValidating,i=n.mutate,c=n.error;return Object(r.useMemo)((function(){return{contextType:a,isValidating:s,error:c,mutate:i}}),[a,s,i,c])}(l.contextTypeName).contextType,p=Object(r.useMemo)((function(){var e,t=null===d||void 0===d?void 0:d.tasks.find((function(e){return e.name===l.typeName})),n=[];if(t){var r,a=null===(r=ca(t))||void 0===r?void 0:r.taskDetailsTemplate;a&&(e=Ma(a,{task:l})),t.validResponses&&(n=t.validResponses)}return[n,e]}),[d,l]),f=Object(b.a)(p,2),h=f[0],v=f[1],j=Object(W.d)((function(e){var n=e.set;return function(){var e=Object(D.a)(E.a.mark((function e(r,a){var c,d,p,f,b,h,v,j;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(){return(d=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pu(t,r,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e){return d.apply(this,arguments)},e.next=4,c(l);case 4:p=e.sent,fu(a,p,[],f=[]),b=[],h=Object(pe.a)(t),e.prev=9,j=E.a.mark((function e(){var t,i,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=v.value)!==l&&0!==f.length){e.next=5;break}e.t0=a,e.next=12;break;case 5:return e.t1=bu,e.t2=a,e.next=9,c(t);case 9:e.t3=e.sent,e.t4=f,e.t0=(0,e.t1)(e.t2,e.t3,e.t4);case 12:i=e.t0,n(ho(t.id),!0),u=s({contextId:t.contextId,contextTypeName:t.contextTypeName,taskTypeName:t.typeName,responseTypeName:r.name,payload:i,sentBy:null===o||void 0===o?void 0:o.name}).catch((function(e){throw n(ho(t.id),!1),e})),b.push(u);case 16:case"end":return e.stop()}}),e)})),h.s();case 12:if((v=h.n()).done){e.next=16;break}return e.delegateYield(j(),"t0",14);case 14:e.next=12;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),h.e(e.t1);case 21:return e.prev=21,h.f(),e.finish(21);case 24:return e.next=26,Promise.allSettled(b);case 26:u();case 27:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}()}),[l,i,u,t,s,o]),O=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n?r.push({$set:{assignedTo:n}}):r.push({$unset:{assignedTo:""}}),e.next=4,c({filter:{_id:{$in:t.map((function(e){return e.id}))}},update:r,returnTasks:!1});case 4:u();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,t,c]),m={representativeTask:l,tasks:t,contextType:d,responses:h,taskDetails:v,addResponse:j,updateAssignedTo:O};return Object(me.jsx)(du.Provider,{value:m,children:n})},vu=du.Consumer,ju=n(1193),Ou=function(e){var t=e.response,n=e.title,r=e.icon,a=Object(M.a)(e,["response","title","icon"]);return Object(me.jsx)(ju.a,Object(h.a)({icon:null!==r&&void 0!==r?r:Object(me.jsx)(yn.a,{}),label:null!==n&&void 0!==n?n:oa(t)},a))},mu=function(){var e=Object(p.a)().t,t=Object(l.b)().enqueueSnackbar,n=function(){var e=Object(r.useContext)(Ft),t=e.confirm,n=e.getDefaultOptions;return Object(r.useCallback)((function(e){var r=Jt(n(),e);return t(Object(Et.a)(["title","description","dialogProps","actions","mapCloseTo"],r))}),[t,n])}();return Object(r.useCallback)((function(r,a,s){var i,c,o=null!==(i=null===s||void 0===s?void 0:s.variant)&&void 0!==i?i:"error",u=null!==(c=null===s||void 0===s?void 0:s.dialogTitle)&&void 0!==c?c:e("Error");if(Be(a)&&"string"===typeof r){var l,d=!1===(null===(l=window.navigator)||void 0===l?void 0:l.onLine);r=e(d?"BrowserOfflineMessage":"NetworkErrorMessage",{message:r})}t(r,{variant:o,action:Object(me.jsx)(R.a,{onClick:function(){n({title:u,description:Object(me.jsx)(yt,{error:a})})},children:e("ShowDetails")})})}),[n,t,e])},gu=n(200),xu=n(16),yu=function(e){Object(V.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(Y.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).columnCount=0,e}return Object(K.a)(n,[{key:"visit",value:function(e){return this.columnCount=1,Object(gu.a)(Object(xu.a)(n.prototype),"visit",this).call(this,e)}},{key:"processLayoutElements",value:function(e){var t=this;this.columnCount=e.elements.reduce((function(e,n){return t.visit(n),Math.max(e,t.columnCount)}),0)}},{key:"visitHorizontalLayout",value:function(e){var t=this;return this.columnCount=e.elements.reduce((function(e,n){return t.visit(n),e+t.columnCount}),0),e}},{key:"visitImageBatchRecognitionElement",value:function(e){return this.columnCount=!0===e.readonly?2:10,e}}]),n}(function(){function e(t){Object(Y.a)(this,e),this.schemaLibrary=t}return Object(K.a)(e,[{key:"visit",value:function(e){if(e)switch(e.type){case"VerticalLayout":return this.visitVerticalLayout(e);case"HorizontalLayout":return this.visitHorizontalLayout(e);case"Group":return this.visitGroupLayout(e);case"Label":return this.visitLabelElement(e);case"Control":return this.visitControlElement(e);case"Category":return this.visitCategory(e);case"Categorization":return this.visitCategorization(e);case"ListWithDetails":return this.visitListWithDetails(e);case"Markdown":return this.visitMarkdownElement(e);case"Pdf":return this.visitPdfElement(e);case"Use":return this.visitUseElement(e);case"ImageBatchRecognition":return this.visitImageBatchRecognitionElement(e)}}},{key:"processDetailElement",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.detail;"object"===typeof n&&n&&"string"===typeof n.type&&this.visit(n)}},{key:"processLayoutElements",value:function(e){var t,n=Object(pe.a)(e.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.visit(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"visitVerticalLayout",value:function(e){return this.processLayoutElements(e),e}},{key:"visitHorizontalLayout",value:function(e){return this.processLayoutElements(e),e}},{key:"visitGroupLayout",value:function(e){return this.processLayoutElements(e),e}},{key:"visitLabelElement",value:function(e){return e}},{key:"visitControlElement",value:function(e){return this.processDetailElement(e),e}},{key:"visitCategory",value:function(e){return e}},{key:"visitCategorization",value:function(e){return this.processLayoutElements(e),e}},{key:"visitListWithDetails",value:function(e){return e}},{key:"visitMarkdownElement",value:function(e){return e}},{key:"visitPdfElement",value:function(e){return e}},{key:"visitUseElement",value:function(e){var t,n=null===(t=this.schemaLibrary)||void 0===t?void 0:t[e.name];return n&&this.visit(n),e}},{key:"visitImageBatchRecognitionElement",value:function(e){return e}}]),e}()),ku=function(e,t){var n,r=null===(n=ca(t))||void 0===n?void 0:n.uiSchemaCommon,a=r?JSON.parse(r):void 0,s=e?function(e,t){var n=new yu(t);return n.visit(e),n.columnCount}(e,a):1;return s>=3?"xl":2===s?"lg":"md"},Cu=Object(j.a)((function(e){return Object(O.a)({dialogPaper:{maxHeight:"90vh",minHeight:"60vh"},dialogContent:{},grow:{flexGrow:1},content:{padding:"8px 24px","&:first-child":{paddingTop:20}},loading:{position:"absolute",top:"50%",left:"50%"}})}));var Su=function(e){var t=e.task,n=e.contextType,a=e.responseType,s=e.open,i=e.taskGroupSize,c=void 0===i?1:i,o=e.onAddResponse,u=e.onClose,d=Cu(),f=Object(p.a)().t,v=Object(l.b)().enqueueSnackbar,j=mu(),O=at().tasks_BuildInitialResponsePayload,m=Object(r.useState)(),g=Object(b.a)(m,2),x=g[0],y=g[1],k=Object(r.useState)(),S=Object(b.a)(k,2),w=S[0],T=S[1],_=Object(r.useRef)(),P=Object(Bc.a)(Object(D.a)(E.a.mark((function e(){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!(null===a||void 0===a?void 0:a.jsInitialPayloadBuilder)){e.next=14;break}return e.prev=2,e.next=5,O({contextId:t.contextId,contextTypeName:t.contextTypeName,responseTypeName:a.name,taskTypeName:t.typeName});case 5:(r=e.sent).defined&&(n=r.payload),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),I(f("ServerErrorInitializingResponsePayload"),e.t0),u(!0),e.abrupt("return");case 14:y(n);case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),[]),A=P.loading,N=P.error,I=Object(r.useCallback)((function(e,t){!function(e){var t;if(null==(null===e||void 0===e?void 0:e.response))return!1;var n=null===(t=JSON.parse(null===e||void 0===e?void 0:e.response))||void 0===t?void 0:t.detail;return"string"===typeof n&&n.startsWith("Active")}(t)?j(e,t):v(f("TaskIsNoLongerActive"),{variant:"warning",action:Object(me.jsx)(R.a,{onClick:function(){u(!0)},children:f("Refresh")})})}),[v,f,u,j]),U=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(_.current&&_.current.length>0)){e.next=2;break}return e.abrupt("return");case 2:n="".concat(t.title,": ").concat(oa(a)),o(x,w).catch((function(e){I(f("ErrorSendingResponse",{description:n}),e)})),u(!1);case 5:case"end":return e.stop()}}),e)}))),[t,a,o,x,u,I,w,f]),M=Object(r.useCallback)((function(e){e.errors&&e.errors.length>0?ta(e.errors.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{instancePath:e.dataPath})}))):y(e.data),_.current=Object(Jr.a)(e.errors)}),[y]),$=Object(r.useMemo)((function(){if(t&&n)return Wr(n,t.typeName,a.name)}),[t,n,a]),L=Object(r.useMemo)((function(){var e;if(t&&n){var r=a?null===(e=ca(a))||void 0===e?void 0:e.uiSchema:void 0;return r?JSON.parse(r):void 0}}),[t,n,a]),F=Object(r.useMemo)((function(){if(t&&x)return{task:t,payload:x}}),[t,x]);Object(r.useEffect)((function(){A||T(new Date)}),[A]);var z=Object(r.useMemo)((function(){return a?function(e,t,n){var r,a=e.tasks.find((function(e){return e.name===t})),s=null===a||void 0===a?void 0:a.validResponses.find((function(e){return e.name===n})),i=s?null===(r=ca(s))||void 0===r?void 0:r.uiSchema:void 0,c=i?JSON.parse(i):void 0;if(!c&&s){var o=Wr(e,t,n);o&&(c=Object(Sa.generateDefaultUISchema)(o))}return ku(c,e)}(n,t.typeName,a.name):"md"}),[n,a,t.typeName]),J=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&u(!1)}),[u]),B=Object(r.useMemo)((function(){var e,t=null===(e=ca(n))||void 0===e?void 0:e.uiSchemaCommon;if(t)return JSON.parse(t)}),[n]);return A?Object(me.jsx)(xe,{className:d.loading,children:f("Loading")}):N||!x?null:Object(me.jsxs)(Me.a,{open:s,onClose:J,maxWidth:z,fullWidth:!0,classes:{paper:d.dialogPaper},children:[Object(me.jsxs)(Fe.a,{disableTypography:!0,children:[Object(me.jsxs)(C.a,{component:"h2",variant:"h6",children:[null===t||void 0===t?void 0:t.title," ",c>1?f("AndNOtherResponses",{othersCount:c-1}):""]}),Object(me.jsx)(C.a,{variant:"subtitle1",children:ua(a)})]}),Object(me.jsxs)(Le.a,{className:d.dialogContent,children:[A&&Object(me.jsx)(xe,{children:f("Loading")}),!!t&&!A&&!N&&Object(me.jsx)(qc,{schema:$,uischema:L,data:x,onChange:M,context:F,uiSchemaLibrary:B})]}),Object(me.jsxs)($e.a,{children:[!!t&&Object(me.jsx)(R.a,{onClick:U,disabled:A||!!N,color:"primary",children:f("Accept")}),Object(me.jsx)(R.a,{onClick:function(){return u(!1)},color:"primary",children:f("Cancel")})]})]})},wu=Object(j.a)((function(e){return Object(O.a)({responses:{textAlign:"center",marginBottom:10,marginLeft:10},response:{marginRight:5}})})),Tu=function(e){var t=e.taskGroupService,n=e.onResponsesAdded,a=wu(),s=t.representativeTask,i=t.tasks,c=t.responses,o=t.contextType,u=t.addResponse,l=Object(r.useContext)(bo).refreshTasks,d=Object(r.useState)(),p=Object(b.a)(d,2),f=p[0],h=p[1],v=Object(r.useCallback)((function(e){h(e)}),[]),j=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(void 0),!t){e.next=4;break}return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),O=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(f,t);case 2:null===n||void 0===n||n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,n,f]);return c&&o?Object(me.jsxs)("div",{className:a.responses,children:[null===c||void 0===c?void 0:c.map((function(e,t){return Object(me.jsx)(Ou,{response:e,onClick:function(){return v(e)},className:a.response,variant:"outlined"},t)})),!!f&&Object(me.jsx)(Su,{task:s,contextType:o,responseType:f,open:!!f,taskGroupSize:i.length,onAddResponse:O,onClose:j})]}):null},_u=function(e){var t=e.data,n=e.onResponsesAdded;return Object(me.jsx)(hu,{tasks:t,children:Object(me.jsx)(vu,{children:function(e){return Object(me.jsx)(Tu,{taskGroupService:e,onResponsesAdded:n})}})})},Pu=n(1881),Au=n.n(Pu),Nu=["value","onChange","onBlur","users","digitalWorkers","renderInput","freeSolo"],Iu="13rem",Ru=Object(j.a)((function(e){return Object(O.a)({small:{width:e.spacing(3),height:e.spacing(3)},view:{width:Iu,borderRadius:e.shape.borderRadius,padding:e.spacing(1),overflowX:"hidden","&:hover":{borderWidth:1,borderStyle:"solid",borderColor:e.palette.divider}},textFieldRoot:{width:Iu,"& .MuiInput-root":{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}},container:{position:"relative","&:hover .clear-button":{visibility:"visible"}},clearButton:{position:"absolute",left:-40,top:0,visibility:"hidden"}})}));function Uu(e){if(e)switch(e.type){case"any-user":return"*";case"digital-worker":return"dw:".concat(e.digitalWorker.id);case"user":return e.user.email;case"unknown":return e.id}}var Eu=function(e){var t;switch(null===e||void 0===e?void 0:e.type){case"any-user":return u.a.t("AnyUser");case"digital-worker":return e.digitalWorker.name;case"user":return null!==(t=e.user.fullName)&&void 0!==t?t:e.user.email;case"unknown":return e.id}return""},Du=function(e){var t,n,r=e.taskAssignment,a=e.onClick,s=Ru();return Object(me.jsxs)(je.a,{container:!0,spacing:1,alignItems:"center",onClick:a,wrap:"nowrap",children:["user"===r.type&&Object(me.jsx)(je.a,{item:!0,children:Object(me.jsx)(Ct.a,{title:null!==(t=r.user.email)&&void 0!==t?t:"",children:Object(me.jsx)($.a,{alt:r.user.fullName,src:null===(n=r.user.props)||void 0===n?void 0:n.Picture,className:s.small})})}),Object(me.jsx)(je.a,{item:!0,xs:!0,children:Eu(r)})]})},Mu=a.a.forwardRef((function(e,t){var n=e.value,a=e.onChange,s=(e.onBlur,e.users),i=e.digitalWorkers,c=e.renderInput,o=e.freeSolo,u=Object(M.a)(e,Nu),l=Ru(),d=Object(r.useMemo)((function(){var e=[];if(s){var t=s.filter((function(e){return e.id&&e.email})).map((function(e){return{type:"user",user:e}}));e.push.apply(e,Object(qn.a)(t))}if(i){var n=i.filter((function(e){return e.id})).map((function(e){return{type:"digital-worker",digitalWorker:e}}));e.push.apply(e,Object(qn.a)(n))}return e.unshift({type:"any-user"}),e}),[s,i]),p=Object(r.useMemo)((function(){return d.find((function(e){switch(e.type){case"any-user":return"any-user"===(null===n||void 0===n?void 0:n.type);case"digital-worker":return"digital-worker"===(null===n||void 0===n?void 0:n.type)&&e.digitalWorker.id===n.digitalWorker.id;case"user":return"user"===(null===n||void 0===n?void 0:n.type)&&e.user.id===n.user.id}return!1}))}),[d,n]),f=Object(r.useCallback)((function(e){e.preventDefault();var t=e.target;setTimeout((function(){return t.setSelectionRange(0,t.value.length)}),0)}),[]);return Object(me.jsx)(pi.a,Object(h.a)({ref:t,freeSolo:null===o||void 0===o||o,blurOnSelect:!0,options:null!==d&&void 0!==d?d:[],value:p,onChange:function(e,t,n){var r;"object"===typeof t&&"select-option"===n&&(null===a||void 0===a||a(null!==(r=t)&&void 0!==r?r:void 0))},getOptionLabel:function(e){var t;return null!==(t=Eu(e))&&void 0!==t?t:""},filterOptions:function(e,t){var n,r=(n=t.inputValue,n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).toLowerCase();return r?e.filter((function(e){return function(e,t){switch(e.type){case"any-user":return"*"===t;case"digital-worker":var n=e.digitalWorker.name;return n&&n.includes(t);case"user":var r=e.user.fullName,a=e.user.email;return r&&r.includes(t)||a&&a.includes(t)}return!1}(e,r)})):e},renderInput:null!==c&&void 0!==c?c:function(e){return Object(me.jsx)(ze.a,Object(h.a)(Object(h.a)({},e),{},{autoFocus:!0,margin:"dense",onFocus:f,classes:{root:l.textFieldRoot}}))},renderOption:function(e){return Object(me.jsx)(Du,{taskAssignment:e})}},u))})),$u=["data","users","digitalWorkers","onAssignmentChange"],Lu=Object(j.a)((function(e){return Object(O.a)({grow:{flexGrow:1},assignmentEditorContainer:{justifyContent:"center"}})})),Fu=function(e){var t=e.taskGroupService,n=e.users,a=e.digitalWorkers,s=e.open,i=e.onClose,c=e.onChange,o=Lu(),u=Object(p.a)().t,l=t.updateAssignedTo,d=Object(r.useState)(),f=Object(b.a)(d,2),h=f[0],v=f[1],j=mu(),O=Object(r.useCallback)((function(e){v(e)}),[]),m=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(Uu(h));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),j(u("CouldNotAssignUser"),e.t0),e.abrupt("return");case 9:null===c||void 0===c||c(Uu(h)),i();case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))),[c,i,j,h,u,l]),g=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(void 0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),j(u("CouldNotClearAssignments"),e.t0),e.abrupt("return");case 9:null===c||void 0===c||c(void 0),i();case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))),[c,i,j,u,l]),x=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&(null===i||void 0===i||i())}),[i]);return Object(me.jsxs)(Me.a,{open:s,onClose:x,maxWidth:"sm",fullWidth:!0,children:[Object(me.jsx)(Fe.a,{children:u("AssigningUser")}),Object(me.jsx)(Le.a,{className:o.assignmentEditorContainer,children:Object(me.jsxs)(je.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[Object(me.jsx)(je.a,{item:!0,children:Object(me.jsx)(Li.a,{children:u("User")})}),Object(me.jsx)(je.a,{item:!0,xs:6,children:Object(me.jsx)(Mu,{users:n,digitalWorkers:a,value:h,onChange:O})})]})}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(R.a,{onClick:g,color:"primary",children:u("ClearAssignments")}),Object(me.jsx)("div",{className:o.grow}),Object(me.jsx)(R.a,{onClick:m,color:"primary",disabled:!h,children:u("Accept")}),Object(me.jsx)(R.a,{onClick:i,color:"primary",children:u("Cancel")})]})]})},zu=function(e){var t=e.data,n=e.users,a=e.digitalWorkers,s=e.onAssignmentChange,i=Object(M.a)(e,$u),c=Object(p.a)().t,o=Object(r.useState)(!1),u=Object(b.a)(o,2),l=u[0],d=u[1],f=Object(r.useCallback)((function(){d(!0)}),[]),v=Object(r.useCallback)((function(){d(!1)}),[]),j=Object(r.useCallback)((function(e){null===s||void 0===s||s(e)}),[s]);return Object(me.jsx)(hu,{tasks:t,children:Object(me.jsx)(vu,{children:function(e){return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(ju.a,Object(h.a)({icon:Object(me.jsx)(Au.a,{}),label:c("AssignUser"),clickable:!0,onClick:f,variant:"outlined"},i)),l&&Object(me.jsx)(Fu,{taskGroupService:e,users:n,digitalWorkers:a,open:l,onClose:v,onChange:j})]})}})})},Ju=n(2357),Bu=["value","onChange","users","digitalWorkers"],Wu=Object(j.a)((function(e){return Object(O.a)({view:{width:"13rem",borderRadius:e.shape.borderRadius,padding:e.spacing(1),overflowX:"hidden",borderWidth:1,borderStyle:"solid",borderColor:"transparent","&:hover":{borderColor:e.palette.divider}},container:{position:"relative","&:hover .clear-button":{visibility:"visible"}},clearButton:{position:"absolute",left:-40,top:0,visibility:"hidden"}})})),qu=function(e){var t=e.value,n=e.onChange,a=e.users,s=e.digitalWorkers,i=Object(M.a)(e,Bu),c=Object(p.a)().t,o=Wu(),u=Bt(),l=Object(r.useState)(!1),d=Object(b.a)(l,2),f=d[0],v=d[1],j=Object(r.useMemo)((function(){return t?function(e,t,n){if("*"===e)return{type:"any-user"};if(e.startsWith("dw:")){var r=e.substring(3),a=null===n||void 0===n?void 0:n.find((function(e){return e.id===r}));if(a)return{type:"digital-worker",digitalWorker:a}}else{var s=null===t||void 0===t?void 0:t.find((function(t){return t.id===e||t.email===e}));if(s)return{type:"user",user:s}}return e?{type:"unknown",id:e}:void 0}(t,a,s):void 0}),[t,a,s]),O=Object(r.useCallback)((function(){v(!0)}),[v]),m=Object(r.useCallback)((function(){v(!1)}),[v]),g=Object(r.useCallback)((function(e){"Escape"===e.key&&v(!1)}),[v]),x=Object(r.useCallback)((function(e){v(!1),null===n||void 0===n||n(e?Uu(e):void 0)}),[n]),y=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),t=Eu(j),e.next=4,u({description:c("ConfirmClearAssignment",{name:t})});case 4:e.sent&&(null===n||void 0===n||n(void 0));case 6:case"end":return e.stop()}}),e)}))),[n,j,u,c]);return f?Object(me.jsx)(Ju.a,{onClickAway:m,children:Object(me.jsx)(Mu,Object(h.a)({value:j,onChange:x,users:a,digitalWorkers:s,onKeyUp:g,disableClearable:!0},i))}):Object(me.jsxs)("div",{className:o.container,children:[Object(me.jsx)("div",{className:o.view,children:Object(me.jsx)(Du,{taskAssignment:null!==j&&void 0!==j?j:{type:"unknown",id:null!==t&&void 0!==t?t:"\xa0"},onClick:O})}),!!t&&Object(me.jsx)(w.a,{onClick:y,className:"".concat(o.clearButton," clear-button"),children:Object(me.jsx)(_t.a,{})})]})},Vu=Object(j.a)((function(e){return Object(O.a)({paper:{backgroundColor:e.palette.background.default,height:"100%",width:"100%",maxHeight:"50vh"},dialogTitle:{height:64},dialogContent:{height:"calc(100% - ".concat(64,"px - ").concat(52,"px)"),width:"100%"},dialogFooter:{height:52}})})),Gu=function(e){var t=e.open,n=e.task,a=e.contextType,s=e.onClose,i=Vu(),c=Object(p.a)().t,o=Object(r.useMemo)((function(){var e,t=null===a||void 0===a?void 0:a.tasks.find((function(e){return e.name===n.typeName})),r=t?null===(e=ca(t))||void 0===e?void 0:e.taskDetailsTemplate:void 0,s=void 0;return r&&(s=Ma(r,{task:n})),s}),[null===a||void 0===a?void 0:a.tasks,n]);return Object(me.jsxs)(Me.a,{open:t,onClose:s,fullWidth:!0,maxWidth:"md",classes:{paper:i.paper},children:[Object(me.jsx)(Fe.a,{className:i.dialogTitle,children:c("TaskDetails")}),Object(me.jsx)(Le.a,{className:i.dialogContent,children:Object(me.jsx)(je.a,{container:!0,spacing:2,children:Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(gt.a,{children:null!==o&&void 0!==o?o:""})})})}),Object(me.jsx)($e.a,{className:i.dialogFooter,children:Object(me.jsx)(R.a,{onClick:s,color:"primary",children:c("Close")})})]})},Hu=n(952),Yu=["family","className"],Ku=function(e){switch(e){case"Outlined":return"material-icons-outlined";case"Rounded":return"material-icons-round";case"Sharp":return"material-icons-sharp";case"Two tone":return"material-icons-two-tone";default:return}},Zu=function(e){var t=e.family,n=e.className,r=Object(M.a)(e,Yu);return Object(me.jsx)(Hu.a,Object(h.a)({className:Object(v.default)(Ku(t),n)},r))},Xu={padding:"dense",showSelectAllCheckbox:!1,search:!1},Qu=function(e){var t,n={currentPage:e.page,pageSize:e.pageSize};if(e.filters&&e.filters.length>0){n.filters={};var r,a=Object(pe.a)(e.filters);try{for(a.s();!(r=a.n()).done;){var s=r.value;n.filters[s.column.field]=null===s||void 0===s?void 0:s.value}}catch(i){a.e(i)}finally{a.f()}}return(null===(t=e.orderBy)||void 0===t?void 0:t.field)&&(n.sortInfo={column:e.orderBy.field,direction:e.orderDirection}),n},el=function(e){return function(t,n){Array.isArray(n)&&(n=n[0]),e(n)}},tl=function(){return Object(me.jsx)(To.a,{})},nl=function(){return Object(me.jsx)(Po.a,{})},rl=a.a.memo((function(e){var t=e.columns,n=e.pageSizeOptions,a=e.initialState,s=e.allowResponseCreation,i=e.allowTaskReassignment,c=e.allowFocusing,o=e.onResponseRequested,l=So(),d=l.data,f=l.contextTypes,v=l.canCreateResponsesTo,j=l.currentState,O=l.setCurrentState,m=l.refreshTasks,g=l.updateTask,x=Object(p.a)().t,y=mu(),k=Object(r.useRef)(),C=Object(r.useState)(),S=Object(b.a)(C,2),w=S[0],T=S[1],_=Object(r.useRef)(),P=Object(r.useRef)(),A=Object(r.useRef)(),N=Object(r.useRef)(),I=Object(r.useCallback)((function(e){T(e),_.current=e}),[]),R=Bt(),U=function(e){var t=at().users_GetUsersWithPermission,n=mt(t,In,e),a=Object(pt.a)(n,Object(D.a)(E.a.mark((function n(){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return n.next=4,t({action:In,pageSize:100,pageNumber:0});case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))),s=a.data,i=a.isValidating,c=a.mutate,o=a.error;return Object(r.useMemo)((function(){return{users:null!==s&&void 0!==s?s:[],isValidating:i,error:o,mutate:c}}),[s,i,c,o])}(i).users,M=function(e){var t=at().digitalWorkers_SearchData,n=mt(t,e),a=Object(pt.a)(n,Object(D.a)(E.a.mark((function n(){var r;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return n.next=4,t({active:!0});case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))),s=a.data,i=a.isValidating,c=a.mutate,o=a.error;return Object(r.useMemo)((function(){return{digitalWorkers:null!==s&&void 0!==s?s:[],isValidating:i,error:o,mutate:c}}),[s,i,c,o])}(i).digitalWorkers,$=Object(r.useState)(),L=Object(b.a)($,2),F=L[0],W=L[1],q=function(){var e=Object(B.usePopupState)({variant:"popover",popupId:"actionMenu"}),t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useCallback)((function(t,n,r){for(var a=t.target;a&&!(a instanceof HTMLElement);)a=a.parentNode;if(a){var i=r.tasks.find((function(e){return e.name===n.typeName}));(null===i||void 0===i?void 0:i.validResponses)&&u(i.validResponses),s(n),setTimeout((function(){e.open(a)}),0)}}),[e]),d=Object(r.useCallback)((function(){e.close(),s(void 0),u(void 0)}),[e]);return{popupState:e,openMenu:l,closeMenu:d,currentTask:a,responseTypes:o}}(),V=q.popupState,G=q.openMenu,H=q.closeMenu,Y=q.currentTask,K=q.responseTypes,Z=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t,{assignedTo:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),y(x("TaskAssignmentFailed"),e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),[y,x,g]),X=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t,{focused:!t.focused});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),y(x("TaskAssignmentFailed"),e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[y,x,g]),Q=Object(r.useMemo)((function(){return t.map((function(e){var t,n,r,s={field:e.field,title:null!==(t=e.title)&&void 0!==t?t:x(e.field.toUpperCase()[0]+e.field.substring(1)),sorting:"focused"!==e.field&&(null===(n=e.allowSorting)||void 0===n||n),hidden:e.hidden};return"dueDate"===e.field&&(s.render=function(e){return e.dueDate?Mo(e.dueDate):""}),"dateCreated"===e.field&&(s.render=function(e){return e.dateCreated?Mo(e.dateCreated):""}),"assignedTo"===e.field&&i&&(s.render=function(e){return Object(me.jsx)(qu,{value:e.assignedTo,users:U,digitalWorkers:M,onChange:function(t){return Z(e,t)}})}),"typeName"===e.field&&(s.render=function(e){return x(e.typeName,{ns:Ea})}),"contextTypeName"===e.field&&(s.render=function(e){return x(e.contextTypeName,{ns:Ea})}),(null===a||void 0===a||null===(r=a.sortInfo)||void 0===r?void 0:r.column)===e.field&&(s.defaultSort=a.sortInfo.direction),s}))}),[i,t,M,Z,a.sortInfo,x,U]);Object(r.useEffect)((function(){Object(Ya.a)(N.current,j.filters)||(N.current=j.filters,t.forEach((function(e,t){var n,r;null===(n=k.current)||void 0===n||n.onFilterChange(t,null===(r=j.filters)||void 0===r?void 0:r[e.field])})))}),[t,j.filters]),Object(r.useEffect)((function(){var e;(P.current=d,A.current)?A.current(d):null===(e=k.current)||void 0===e||e.onQueryChange()}),[d]);var ee=Object(r.useCallback)((function(e,t){if(0===e.length)I(void 0),_.current=void 0;else{var n={taskTypeName:e[0].typeName,contextTypeName:e[0].contextTypeName,selectedTasks:e};I(n)}}),[I]),te=Object(r.useCallback)((function(){I(void 0)}),[I]),ne=Object(r.useCallback)((function(e,t){I(void 0)}),[I]),re=Object(r.useCallback)((function(e){}),[]),ae=Object(r.useCallback)((function(e){W(e)}),[]),se=Object(r.useCallback)((function(e){if(H(),Y){var t=f[Y.contextTypeName];null===o||void 0===o||o(t,Y,e)}}),[H,f,Y,o]),ie=Object(r.useMemo)((function(){var e={onChange:function(e,t){var n=k.current,r=null===n||void 0===n?void 0:n.dataManager;r&&(0===r.selectedCount&&s?R({title:null,description:u.a.t("SelectAtLeastOneRowToDetermineType"),cancellationButtonProps:{style:{display:"none"}}}):(r.changeAllSelected(t),n.setState(r.getRenderState(),(function(){return n.onSelectionChange()}))))}};return Object(h.a)(Object(h.a)({},Xu),{},{selectionProps:function(e){if(!s)return{};var t=_.current,n=!!t&&(t.taskTypeName!==e.typeName||t.contextTypeName!==e.contextTypeName)||!v(e);return e.tableData.disabled=n,{disabled:n}},headerSelectionProps:e,selection:s||i,showSelectAllCheckbox:s||i,pageSizeOptions:n,pageSize:j.pageSize,initialPage:a.currentPage})}),[s,i,n,j.pageSize,a.currentPage,v,R]),ce=Object(r.useMemo)((function(){var e,t=[(e=function(){return m()},{icon:lo.a,tooltip:u.a.t("RefreshData"),isFreeAction:!0,onClick:e})];return c&&t.push({action:function(e){return function(e,t){return{icon:e.focused?nl:tl,tooltip:u.a.t(e.focused?"Unfocus":"Focus"),onClick:el(t)}}(e,(function(){return X(e)}))},position:"row"}),s&&(t.push({action:function(e){return function(e,t,n){var r,a=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),s=a?null===(r=ca(a))||void 0===r?void 0:r.taskDetailsTemplate:void 0,i=void 0;return s&&(i=Ma(s.trimStart().split("\n")[0],{task:e})),{icon:Eo.a,tooltip:i,onClick:el(n),disabled:!i}}(e,f[e.contextTypeName],(function(){ae(e)}))},position:"row"}),t.push.apply(t,Object(qn.a)(Object(Do.a)((function(e){return{action:function(t){var n=f[t.contextTypeName];return function(e,t,n,r){var a,s=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),i=null===s||void 0===s?void 0:s.validResponses.filter((function(e){var t;return!!(null===(t=ca(e))||void 0===t?void 0:t.icon)}))[n],c=i?null===(a=ca(i))||void 0===a?void 0:a.icon:void 0;return{icon:function(){return Object(me.jsx)(Zu,{family:null===c||void 0===c?void 0:c.family,children:null===c||void 0===c?void 0:c.name})},tooltip:i?oa(i):"",onClick:el((function(e){return r(e,i)})),position:"row",hidden:!i}}(t,n,e,(function(e,t){null===o||void 0===o||o(n,e,t)}))},position:"row"}}),3))),t.push({action:function(e){return function(e,t,n){var r=null===t||void 0===t?void 0:t.tasks.find((function(t){return t.name===e.typeName})),a=!1,s=!1;if(r){var i,c=Object(pe.a)(r.validResponses);try{for(c.s();!(i=c.n()).done;){var o;(null===(o=ca(i.value))||void 0===o?void 0:o.icon)?a=!0:s=!0}}catch(l){c.e(l)}finally{c.f()}}return{icon:a?Ro.a:No.a,tooltip:u.a.t(a?"MoreResponses":"SendResponse"),onClick:function(e,r){return n(e,Array.isArray(r)?r[0]:r,t)},position:"row",hidden:!s}}(e,f[e.contextTypeName],(function(e,t,n){G(e,t,n)}))},position:"row"})),t}),[c,s,f,X,ae,o,G,m]),oe=Object(r.useMemo)((function(){return{Container:function(e){return Object(me.jsx)("div",Object(h.a)({},e))},Actions:function(e){return w&&Array.isArray(e.data)?Object(me.jsxs)(me.Fragment,{children:[i&&Object(me.jsx)(zu,Object(h.a)({onAssignmentChange:te,users:U,digitalWorkers:M},e)),s&&Object(me.jsx)(_u,Object(h.a)({onResponsesAdded:te},e))]}):Object(me.jsx)(so.MTableActions,Object(h.a)({},e))},Toolbar:function(e){return w&&Array.isArray(e.data)?Object(me.jsx)(so.MTableToolbar,Object(h.a)({},e)):Object(me.jsx)("div",{})}}}),[s,i,te,M,w,U]),ue=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,O((function(e){var n=Qu(t);return n.filters=e.filters,(r=!Object(Ya.a)(e,n))?n:e})),!r){e.next=4;break}return e.abrupt("return",new Promise((function(e,t){A.current=function(t){e(t),A.current=void 0}})));case 4:return e.abrupt("return",Promise.resolve(null!==(n=P.current)&&void 0!==n?n:jo));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O]),le=Object(r.useMemo)((function(){return!!K&&K.some((function(e){var t;return!!(null===(t=ca(e))||void 0===t?void 0:t.icon)}))}),[K]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(cu,{tableRef:k,columns:Q,data:ue,options:ie,title:" ",components:oe,actions:ce,onSelectionChange:ee,onPageChange:ne,onRowsPerPageChange:re}),Object(me.jsx)(z.a,Object(h.a)(Object(h.a)({},Object(B.bindMenu)(V)),{},{children:null===K||void 0===K?void 0:K.map((function(e){var t,n,r=null===(t=ca(e))||void 0===t?void 0:t.icon;return Object(me.jsxs)(J.a,{onClick:function(){return se(e)},children:[le&&Object(me.jsx)(Ln.a,{children:Object(me.jsx)(Zu,{fontSize:"small",family:null===r||void 0===r?void 0:r.family,children:null===r||void 0===r?void 0:r.name})}),Object(me.jsx)(dt.a,{primary:null!==(n=oa(e))&&void 0!==n?n:""})]},e.name)}))})),!!F&&Object(me.jsx)(Gu,{open:!!F,task:F,contextType:f[F.contextTypeName],onClose:function(){return W(void 0)}})]})})),al=n(1887),sl=n(683),il=n(393),cl=n(1177),ol=(n(1897),n(1898),{en:il.default,es:cl.a}),ul=il.default,ll=sl.defaultStaticRanges,dl=sl.defaultInputRanges;function pl(e){var t,n=ol[e];if(!n){var r=e.indexOf("-");r>0&&(n=ol[e.substring(0,r)])}ul=null!==(t=n)&&void 0!==t?t:il.default,e.startsWith("en")?(ll=sl.defaultStaticRanges,dl=sl.defaultInputRanges):(ll=sl.defaultStaticRanges.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{label:u.a.t(e.label)})})),dl=sl.defaultInputRanges.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{label:u.a.t(e.label)})})))}u.a.language&&pl(u.a.language),u.a.on("languageChanged",(function(e){pl(e)}));var fl=function(e){var t=Object(p.a)().t;return Object(me.jsx)(al.DateRangePicker,Object(h.a)({locale:ul,staticRanges:ll,inputRanges:dl,startDatePlaceholder:t("From"),endDatePlaceholder:t("To")},e))},bl=function(e){var t=e.open,n=e.onClose,a=e.from,s=e.to,i=e.onChange,c=Object(p.a)().t,o=Object(r.useState)((function(){return{startDate:a,endDate:s,key:"selection"}})),u=Object(b.a)(o,2),l=u[0],d=u[1],f=Object(r.useCallback)((function(){null===i||void 0===i||i(l.startDate,l.endDate),n()}),[i,n,l]),h=Object(r.useCallback)((function(e){d(e.selection)}),[]),v=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&(null===n||void 0===n||n())}),[n]);return Object(me.jsxs)(Me.a,{open:t,onClose:v,maxWidth:"md",children:[Object(me.jsx)(Fe.a,{children:c("EditingDateRange")}),Object(me.jsx)(Le.a,{children:Object(me.jsx)(fl,{format:c("DATE_FORMAT"),ranges:[l],onChange:h,editableDateInputs:!0,dateDisplayFormat:c("DATE_FORMAT")})}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(R.a,{onClick:f,color:"primary",children:c("Accept")}),Object(me.jsx)(R.a,{onClick:n,color:"primary",children:c("Cancel")})]})]})},hl=function(e){var t=e.value,n=e.onChange,a=Object(p.a)().t,s=Object(r.useState)(!1),i=Object(b.a)(s,2),c=i[0],o=i[1],u=Object(r.useCallback)((function(){o(!0)}),[]),l=Object(r.useCallback)((function(){o(!1)}),[]),d=Object(r.useCallback)((function(e,t){var r=void 0;(Object(Vn.isPresent)(e)||Object(Vn.isPresent)(t))&&(r={type:"dateRange",from:void 0,to:void 0,includeFrom:!0,includeTo:!0},e&&(r.from=e.toISOString()),t&&(r.to=t.toISOString())),null===n||void 0===n||n(r)}),[n]),f=Object(r.useCallback)((function(e){var t=Object(Gn.default)(null!==e&&void 0!==e?e:new Date,a("DATE_FORMAT"));return e||(t=t.replaceAll(/[0-9]/g,"_")),t}),[a]),h=Object(r.useMemo)((function(){var e=void 0,n=void 0;return"dateRange"===(null===t||void 0===t?void 0:t.type)&&(e=t.from?Object(Hn.default)(t.from):void 0,n=t.to?Object(Hn.default)(t.to):void 0),[e,n]}),[t]),v=Object(b.a)(h,2),j=v[0],O=v[1];return Object(me.jsxs)(me.Fragment,{children:[f(j)," -- ",f(O)," ",Object(me.jsx)(w.a,{onClick:u,children:Object(me.jsx)(Dc.a,{})}),c&&Object(me.jsx)(bl,{from:j,to:O,onChange:d,open:c,onClose:l})]})},vl=n(1172),jl=u.a.t("NullValueText"),Ol={$schema:"https://vega.github.io/schema/vega-lite/v5.json",data:{name:"data"},width:{step:80},height:100,mark:{type:"bar",stroke:"#0099cc",cursor:"pointer"},params:[{name:"select",select:{type:"point",resolve:"global"}},{name:"highlight",select:{type:"point",on:"mouseover"}}],encoding:{x:{field:"name",type:"ordinal",axis:{title:null,labelAngle:-45,labelFontSize:14,labelLimit:100}},y:{field:"value",type:"quantitative",axis:{title:null}},tooltip:{field:"value",type:"quantitative"},fillOpacity:{condition:{param:"select",value:1},value:.4},strokeWidth:{condition:[{param:"highlight",empty:!1,value:1}],value:0}},config:{scale:{bandPaddingInner:.2}}},ml="mark_x_axis_labels",gl=function(e){var t,n,r,a,s=e.signals;s||(e.signals=s=[]);var i=s.find((function(e){return"highlight_tuple"===e.name}));if(i){var c,o=i.on;o||(i.on=o=[]);var u,l=null!==(c=o.map((function(e){return e.events})))&&void 0!==c?c:[],d=Object(pe.a)(l);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(Array.isArray(p)){var f=p.find((function(e){return"type"in e&&"mouseover"===e.type}));f&&(f.filter="!item().mark || item().mark.name !== '".concat(ml,"'"))}}}catch(S){d.e(S)}finally{d.f()}o.push({events:"@".concat(ml,":mouseover"),update:'{unit: "", fields: select_tuple_fields, values: [datum.value]}'})}var b=s.find((function(e){return"select_tuple"===e.name}));if(b){var h,v=b.on;v||(b.on=v=[]);var j,O=null!==(h=v.map((function(e){return e.events})))&&void 0!==h?h:[],m=Object(pe.a)(O);try{for(m.s();!(j=m.n()).done;){var g=j.value;if(Array.isArray(g)){var x=g.find((function(e){return"type"in e&&"click"===e.type}));x&&(x.filter="!item().mark || item().mark.name !== '".concat(ml,"'"))}}}catch(S){m.e(S)}finally{m.f()}v.push({events:"@".concat(ml,":click"),update:'{unit: "", fields: select_tuple_fields, values: [datum.value]}',force:!0})}var y=null!==(t=null===(n=e.marks)||void 0===n||null===(r=n[0].from)||void 0===r?void 0:r.data)&&void 0!==t?t:"data_0";s.push({name:"select_extended",on:[{events:{signal:"select"},update:"{select: select, data: data('data_0')}"}]});var k,C=null===(a=e.axes)||void 0===a?void 0:a.find((function(e){return"x"===e.scale}));C&&(C.encode=Object.assign(null!==(k=C.encode)&&void 0!==k?k:{},{labels:{name:ml,interactive:!0,update:{tooltip:{signal:'datum.value + ": " + format(data(\''.concat(y,"')[indexof(pluck(data('").concat(y,"'), 'name'), datum.value)].value, \"\")")}}}}));return e},xl=function(e){var t=e.column,n=e.value,a=e.onChange,s=e.getCandidates,i=Object(m.a)(),c=function(e,t){var n=Object(r.useRef)(),a=Object(pt.a)("/ColumnCandidates/".concat(e),Object(D.a)(E.a.mark((function e(){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return(a=e.sent).forEach((function(e){null===e.name&&(e.name=jl)})),Object(Ya.a)(null===(r=n.current)||void 0===r?void 0:r.data,a)||(n.current={data:a}),e.abrupt("return",n.current);case 6:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),s=a.data,i=a.isValidating,c=a.mutate,o=Object(r.useRef)({isValidating:i,revalidate:c});return o.current={isValidating:i,revalidate:c},Object(r.useEffect)((function(){o.current.isValidating||o.current.revalidate()}),[t]),{data:s,isValidating:i}}(t.field,s),o=c.data,u=c.isValidating,l=Object(r.useMemo)((function(){var e;return o&&0!==o.data.length&&"selection"===(null===n||void 0===n?void 0:n.type)?Object(h.a)(Object(h.a)({},Ol),{},{params:null===(e=Ol.params)||void 0===e?void 0:e.map((function(e){var t;return"select"!==e.name?e:Object(h.a)(Object(h.a)({},e),{},{value:{x:null!==(t=n.value)&&void 0!==t?t:jl}})}))}):Ol}),[o,n]),d=Object(r.useMemo)((function(){return{select_extended:function(e,t){var n=t.select,r=void 0;if("name"in n&&Array.isArray(n.name)&&"string"===typeof n.name[0])r=n.name[0];else if("_vgsid_"in n&&Array.isArray(n._vgsid_)&&n._vgsid_.length>0){var s=n._vgsid_[0];if("string"===typeof s)r=s;else{var i,c=t.data;if(Array.isArray(c))r=null===(i=c.find((function(e){return e._vgsid_===s})))||void 0===i?void 0:i.name}}null===a||void 0===a||a(void 0!==r?{type:"selection",value:r===jl?null:r}:void 0)}}}),[a]);if(!o&&u||!l)return Object(me.jsx)(xe,{});var p="dark"===i.palette.type?"dark":void 0;return Object(me.jsx)(vl.a,{variant:"verticalBarChart",spec:l,data:o,theme:p,signalListeners:d,actions:!1,patch:gl})},yl=Object(j.a)((function(e){return Object(O.a)({size:{width:"7em"}})})),kl=function(e){return Object(me.jsx)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 247.46 247.46"},e),{},{children:Object(me.jsx)("path",{d:"M246.744,13.984c-1.238-2.626-3.881-4.301-6.784-4.301H7.5c-2.903,0-5.545,1.675-6.784,4.301\r c-1.238,2.626-0.85,5.73,0.997,7.97l89.361,108.384v99.94c0,2.595,1.341,5.005,3.545,6.373c1.208,0.749,2.579,1.127,3.955,1.127\r c1.137,0,2.278-0.259,3.33-0.78l50.208-24.885c2.551-1.264,4.165-3.863,4.169-6.71l0.098-75.062l89.366-108.388\r C247.593,19.714,247.982,16.609,246.744,13.984z M143.097,122.873c-1.105,1.34-1.711,3.023-1.713,4.761l-0.096,73.103\r l-35.213,17.453v-90.546c0-1.741-0.605-3.428-1.713-4.771L23.404,24.682h200.651L143.097,122.873z"})}))},Cl=n(2444),Sl=function(e){var t=e.value,n=e.onChange,a=Object(r.useState)("textMatch"===(null===t||void 0===t?void 0:t.type)?t.value:void 0),s=Object(b.a)(a,2),i=s[0],c=s[1],o=Object(r.useRef)(!1),u=Object(r.useRef)();Object(r.useEffect)((function(){var e;u.current&&!o.current&&(null===t||void 0===t?void 0:t.value)!==i&&(c(null===t||void 0===t?void 0:t.value),u.current.value=null!==(e=null===t||void 0===t?void 0:t.value)&&void 0!==e?e:"")}),[i,t]),Object(Cl.a)((function(){o.current=!1,null===n||void 0===n||n(i?{type:"textMatch",value:i}:void 0)}),2e3,[i,n]);var l=Object(r.useCallback)((function(e){o.current=!0,c(e.target.value)}),[]);return Object(me.jsx)(ze.a,{value:i,onChange:l,inputRef:u})},wl=function(e){var t=e.value,n=e.onChange,a=Object(M.a)(e,["value","onChange"]),s=Object(r.useMemo)((function(){if(t)return{type:"textMatch",value:t.prefix}}),[t]),i=Object(r.useCallback)((function(e){var t=void 0;e&&(t={type:"prefixTextMatch",prefix:e.value}),null===n||void 0===n||n(t)}),[n]);return Object(me.jsx)(Sl,Object(h.a)({value:s,onChange:i},a))},Tl=function(e){switch(null===e||void 0===e?void 0:e.type){case"boolean":return u.a.t(e.value?"Yes":"No");case"textMatch":return e.value;case"selection":return null!==e.value?e.value:u.a.t("NullValueText");case"prefixTextMatch":return"".concat(e.prefix,"*");case"dateRange":var t="";return Object(Vn.isPresent)(e.from)?(t+=e.includeFrom?"[":"(",t+=Object(Gn.default)(Object(Hn.default)(e.from),u.a.t("DATE_FORMAT"))):t+="(-\u221e",t+=", ",Object(Vn.isPresent)(e.to)?(t+=Object(Gn.default)(Object(Hn.default)(e.to),u.a.t("DATE_FORMAT")),t+=e.includeTo?"]":")"):t+="\u221e)",t;case"numberRange":var n="";return Object(Vn.isPresent)(e.from)?(n+=e.includeFrom?"[":"(",n+=e.from):n+="(-\u221e",n+=", ",Object(Vn.isPresent)(e.to)?(n+=e.to,n+=e.includeTo?"]":")"):n+="\u221e)",n;default:return"??"}},_l=function(e){var t=e.field,n=e.title,a=e.value,s=e.onClearFilter,i=e.size,c=e.variant,o=Object(M.a)(e,["field","title","value","onClearFilter","size","variant"]),u=Object(r.useCallback)((function(){null===s||void 0===s||s(t)}),[t,s]);return Object(me.jsx)(ju.a,Object(h.a)({onDelete:u,label:"".concat(n,": ").concat(Tl(a)),size:null!==i&&void 0!==i?i:"small",variant:null!==c&&void 0!==c?c:"outlined"},o))},Pl={width:20,height:20},Al=Object(j.a)((function(e){return Object(O.a)({filter:{marginRight:20},filterIconContainer:{position:"relative"},filteringActiveIcon:{position:"absolute",fontSize:12,right:-5,top:-20},filterAppliedIcon:Object(h.a)({fontSize:"1rem",verticalAlign:"text-bottom"},Pl),clearIconContainer:{position:"relative"},clearButton:{position:"absolute",right:-35},appliedFilterMarker:Object(h.a)({display:"inline-block"},Pl),appliedFilterMarkerClearButton:Object(h.a)({padding:0},Pl),chip:{marginRight:5}})})),Nl={contextReference:wl,title:wl,assignedTo:xl,dueDate:hl,contextTypeName:xl,typeName:xl,focused:function(e){var t=e.value,n=e.onChange,a=Object(p.a)().t,s=yl(),i="boolean"===(null===t||void 0===t?void 0:t.type)?!0===t.value?1:0:void 0,c=Object(r.useCallback)((function(e){var t=e.target.value;null===n||void 0===n||n(1===t?{type:"boolean",value:!0}:0===t?{type:"boolean",value:!1}:void 0)}),[n]);return Object(me.jsxs)(ze.a,{select:!0,value:i,onChange:c,className:s.size,children:[Object(me.jsx)(J.a,{value:void 0,children:"\xa0"}),Object(me.jsx)(J.a,{value:1,children:a("Yes")}),Object(me.jsx)(J.a,{value:0,children:a("No")})]})},status:xl,dateCreated:hl},Il=function(e){var t,n;return null!==(t=null!==(n=e.title)&&void 0!==n?n:u.a.t(e.field.toUpperCase()[0]+e.field.substring(1)))&&void 0!==t?t:""},Rl=function(e){var t,n=e.columns,a=Al(),s=So(),i=s.currentState,c=s.setCurrentState,o=s.getColumnCandidates,u=Object(r.useState)(n[0]),l=Object(b.a)(u,2),d=l[0],p=l[1],v=Object(r.useCallback)((function(e){var t;p(null!==(t=n.find((function(t){return t.field===e.target.value})))&&void 0!==t?t:n[0])}),[n]),j=Object(r.useCallback)((function(e,t){c((function(n){var r=n.filters;Object(Vn.isPresent)(t)?r=Object(h.a)(Object(h.a)({},r),{},Object(f.a)({},e,t)):Object(Vn.isPresent)(r)&&delete r[e];var a=Object(h.a)(Object(h.a)({},n),{},{filters:r});return Object(Vn.isPresent)(r)&&0===Object.keys(r).length&&delete a.filters,a}))}),[c]),O=Object(r.useCallback)((function(e){j(d.field,e)}),[j,d.field]),m=Object(r.useCallback)((function(e){j(e,void 0),d.field}),[j,d]),g=Object(r.useRef)({}),x=Object(r.useMemo)((function(){var e,t=Object(h.a)({},null!==(e=i.filters)&&void 0!==e?e:{});return delete t[d.field],Object(Ya.a)(g.current,t)||(g.current=t),g.current}),[i.filters,d.field]),y=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,o(d,x);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),[o,d,x]),k=Nl[d.field],C=null!==(t=i.filters)&&void 0!==t?t:{},S=C[d.field],w=Object(r.useMemo)((function(){return{startAdornment:Object(me.jsx)(kt.a,{position:"start",className:a.filterIconContainer,children:Object(me.jsx)(kl,{fontSize:"small"})})}}),[a]);return Object(me.jsxs)(je.a,{container:!0,spacing:3,alignItems:"flex-start",children:[Object(me.jsx)(je.a,{item:!0,xs:12,children:n.filter((function(e){return e.field in C})).map((function(e){return Object(me.jsx)(_l,{title:Il(e),field:e.field,value:C[e.field],onClearFilter:m,className:a.chip},e.field)}))}),Object(me.jsx)(je.a,{item:!0,xs:2,children:Object(me.jsx)(ze.a,{select:!0,value:d.field,onChange:v,fullWidth:!0,InputProps:w,className:a.filter,children:n.map((function(e){return Object(me.jsx)(J.a,{value:e.field,children:Il(e)},e.field)}))})}),Object(me.jsx)(je.a,{item:!0,xs:10,children:Object(me.jsx)(oi,{children:!!k&&Object(me.jsx)(k,{column:d,value:S,onChange:O,getCandidates:y})})})]})},Ul=["onStateChanged","allowResponseCreation","allowTaskReassignment"],El=["initialState","pageSizeOptions","allowResponseCreation","allowTaskReassignment","allowFocusing","enforcedFilter"],Dl=Object(j.a)((function(e){return Object(O.a)({root:{position:"relative"},refreshButton:{position:"absolute",right:10,top:10}})})),Ml=function(e){var t=e.onStateChanged,n=e.allowResponseCreation,a=e.allowTaskReassignment,s=Object(M.a)(e,Ul),i=Object(p.a)().t,c=Dl(),o=So(),u=o.addResponse,l=o.refreshTasks,d=o.currentState,f=o.canCreateReponses,v=o.canReassignUsers,j=Object(r.useState)(),O=Object(b.a)(j,2),m=O[0],g=O[1];Object(r.useEffect)((function(){null===t||void 0===t||t(d)}),[d,t]);var x=Object(r.useCallback)((function(e,t,n){g({contextType:e,task:t,responseType:n})}),[]),y=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u(m.task,m.responseType,t,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[u,m]),k=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(void 0),!t){e.next=4;break}return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),C=Object(r.useMemo)((function(){return n&&f()}),[f,n]),S=Object(r.useMemo)((function(){return a&&v()}),[v,a]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("div",{className:c.root,children:Object(me.jsx)(Ct.a,{title:i("RefreshData"),children:Object(me.jsx)(w.a,{className:c.refreshButton,onClick:l,children:Object(me.jsx)(lo.a,{})})})}),Object(me.jsx)(Rl,Object(h.a)({},s)),Object(me.jsx)("div",{style:{height:10}}),Object(me.jsx)(rl,Object(h.a)({allowResponseCreation:C,allowTaskReassignment:S,onResponseRequested:x},s)),!!m&&Object(me.jsx)(Su,{task:m.task,contextType:m.contextType,responseType:m.responseType,open:!!m,onAddResponse:y,onClose:k})]})},$l=function(e){var t=e.initialState,n=e.pageSizeOptions,a=e.allowResponseCreation,s=void 0!==a&&a,i=e.allowTaskReassignment,c=void 0!==i&&i,o=e.allowFocusing,u=void 0!==o&&o,l=e.enforcedFilter,d=Object(M.a)(e,El),p=Object(r.useMemo)((function(){var e=n;return e&&0!==e.length||(e=[5,10,20,100]),e}),[n]),f=Object(r.useMemo)((function(){return Object(h.a)({currentPage:0,pageSize:p[0]},t)}),[t,p]);return Object(me.jsx)(Co,{initialState:f,enforcedFilter:l,children:Object(me.jsx)(Ml,Object(h.a)({pageSizeOptions:p,initialState:f,allowResponseCreation:s,allowTaskReassignment:c,allowFocusing:u},d))})},Ll=[5,10,20,100],Fl=[{field:"title"},{field:"typeName"},{field:"contextTypeName"},{field:"contextReference"},{field:"dueDate"},{field:"assignedTo"},{field:"status"},{field:"focused"}],zl={currentPage:0,pageSize:10},Jl={archived:{type:"boolean",value:!1}},Bl=function(){return Object(me.jsx)($l,{columns:Fl,initialState:zl,pageSizeOptions:Ll,allowResponseCreation:!0,allowTaskReassignment:!0,enforcedFilter:Jl})},Wl=[5,10,20,100],ql=[{field:"title"},{field:"typeName"},{field:"contextTypeName",hidden:!0},{field:"contextReference"},{field:"dueDate"},{field:"status",hidden:!0},{field:"dateCreated"},{field:"focused",hidden:!0}],Vl={currentPage:0,pageSize:10},Gl=function(){var e=tt().authenticatedUser,t=Object(r.useMemo)((function(){var t={archived:{type:"boolean",value:!1},assignedTo:{type:"textMatch",value:"*"}},n=null===e||void 0===e?void 0:e.email;return n&&(t.assignedTo={type:"or",filters:[t.assignedTo,{type:"prefixTextMatch",prefix:n}]}),t}),[e]);return Object(me.jsx)($l,{columns:ql,initialState:Vl,pageSizeOptions:Wl,allowResponseCreation:!0,allowFocusing:!0,enforcedFilter:t})},Hl=[5,10,20,100],Yl=[{field:"title"},{field:"typeName"},{field:"contextTypeName"},{field:"contextReference"},{field:"dueDate"},{field:"status"},{field:"assignedTo"}],Kl={currentPage:0,pageSize:10},Zl={archived:{type:"boolean",value:!1}},Xl=function(){return Object(me.jsx)($l,{columns:Yl,initialState:Kl,pageSizeOptions:Hl,allowTaskReassignment:!0,enforcedFilter:Zl})},Ql=["number","string","boolean","datetime","stringList"];Object.freeze(Ql);var ed=["contexts","events","tasks"];Object.freeze(ed);var td=["count","sum","average","max","min"];Object.freeze(td);var nd=["years","months","weeks","days","hours","minutes","seconds"];Object.freeze(nd);var rd="NimflowDashboardWidgets",ad=function e(t){if(void 0!==t){if(null===t)return"null";if(Array.isArray(t)){var n=t.map(e).join(", ");return"[".concat(n,"]")}if("object"===typeof t){if("$parameter"in t&&1===Object.keys(t).length)return"params.".concat(t.$parameter);var r=Object.entries(t).filter((function(e){return void 0!==Object(b.a)(e,2)[1]})).map((function(t){var n=Object(b.a)(t,2),r=n[0],a=n[1];return"".concat(r,": ").concat(e(a))})).join(",");return"{".concat(r,"}")}return t instanceof Date&&(t=t.toISOString()),"string"===typeof t||"number"===typeof t||"boolean"===typeof t?JSON.stringify(t):void 0}},sd=function(e){if(He(e)){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(b.a)(r[n],2),s=a[0],i=a[1],c=ad(i);c&&t.push("".concat(s,": ").concat(c))}if(0!==t.length)return"queryFilter = {\n        ".concat(t.join(",\n"),"\n    }")}},id=function(e){switch(e.type){case"CalculateTable":return function(e){var t={type:"CalculateTable"},n=sd(e.filter);return n&&(t.filter=n),"string"===typeof e.sortProperty&&(t.sortProperty=e.sortProperty,"asc"===e.sortDirection?t.sortDirection=se.Ascending:"desc"===e.sortDirection&&(t.sortDirection=se.Descending)),"number"===typeof e.skip&&(t.skip=e.skip),"number"===typeof e.limit&&(t.limit=e.limit),t}(e);case"Calculate":return function(e){if(td.includes(e.aggregation)){var t={type:"Calculate",aggregation:e.aggregation},n=sd(e.filter);return n&&(t.filter=n),"string"===typeof e.property&&(t.property=e.property,"string"===typeof e.value&&(t.value=e.value)),t}}(e);case"Summarize":return function(e){if(Array.isArray(e.groupings)){var t,n=[],r=Object(pe.a)(e.groupings);try{for(r.s();!(t=r.n()).done;){var a=t.value;if("string"!==typeof a.property)return;var s={property:a.property};"string"===typeof a.value&&(s.value=a.value),nd.includes(a.timeGranularity)&&(s.timeGranularity=a.timeGranularity),n.push(s)}}catch(f){r.e(f)}finally{r.f()}var i={type:"Summarize",groupings:n},c=sd(e.filter);if(c&&(i.filter=c),Array.isArray(e.aggregates)){var o,u=[],l=Object(pe.a)(e.aggregates);try{for(l.s();!(o=l.n()).done;){var d=o.value;if("string"===typeof d.name&&td.includes(d.aggregation)){var p={name:d.name,aggregation:d.aggregation};"string"===typeof d.property&&(p.property=d.property,"string"===typeof d.value&&(p.value=d.value)),u.push(p)}}}catch(f){l.e(f)}finally{l.f()}i.aggregates=u}return i}}(e)}},cd=function(e,t){if(ed.includes(t.sourceCollection)&&He(t.query)&&"string"===typeof t.query.type){var n=id(t.query);if(n){var r={type:"query",name:e,sourceCollection:t.sourceCollection,query:n};return"string"===typeof t.contextTypeName&&(r.contextTypeName=t.contextTypeName),r}}},od=function(e,t){if(He(t)&&"string"===typeof t.functionName){var n=t.functionName.split("/");if(2===n.length){var r={type:"function",name:e,moduleName:n[0],functionName:n[1]};if(He(t.args)){for(var a=[],s=0,i=Object.entries(t.args);s<i.length;s++){var c=Object(b.a)(i[s],2),o=c[0],u=c[1],l=ad(u);l&&a.push("".concat(o,": ").concat(l))}a.length>0&&(r.jsArguments="args = {\n                ".concat(a.join(",\n"),"\n            }"))}return r}}},ud=function(e){return"widgetJsSpec"in e},ld={id:"string",typeName:"string",reference:"string",active:"boolean",excludeContextTypeVersion:"number",created:"Date",modified:"Date",reachedMilestones:"string[]",milestones:"DateMap",tags:"StringMap",metrics:"NumberMap"},dd={contextId:"string",contextTypeName:"string",contextReference:"string",typeName:"string",title:"string",assignedTo:"string",unassigned:"boolean",status:"string",archived:"boolean",focused:"boolean",importance:"number",dueDate:"Date",labels:"string[]"},pd={event:"string",timestamp:"Date",requestTypeName:"string",contextTypeName:"string",sentBy:"string",reference:"string",subject:"string",contextIsNew:"boolean",action:"string",message:"string",dueDate:"Date",taskTypeName:"string",assignedTo:"string",importance:"number",responseTypeName:"string",oldImportance:"number",oldLabels:"string[]",oldDueDate:"Date",oldAssignedTo:"string",milestoneName:"string",milestoneValue:"Date",eventName:"string",tags:"StringMap",metrics:"NumberMap"},fd=n(1929),bd=n(2422),hd=n(2417),vd=Object(j.a)({root:{height:"100%",width:"100%",overflow:"hidden"}}),jd={autosize:"fit"},Od=function(e){var t="layer"in e,n="facet"in e;if("encoding"in e){var r=e.encoding;r&&(n=n||"facet"in r||"row"in r||"column"in r)}return!t&&!n&&!("concat"in e||"hconcat"in e||"vconcat"in e||"repeat"in e)},md=function(e){var t=e.data,n=e.spec,r=e.variant,a=e.width,s=e.height,i=Object(m.a)(),c=vd(),o="dark"===i.palette.type?"dark":void 0;if(!n||!Object(Vn.isPresent)(a)||!Object(Vn.isPresent)(s))return null;var u={className:c.root,renderer:"svg",spec:n,data:t,theme:o,actions:!1,width:a-30,height:s-30};return r?Object(me.jsx)(vl.a,Object(h.a)({tooltip:!0,variant:r},u)):Object(me.jsx)(hd.a,Object(h.a)({},u))},gd=n(2419),xd=n(2445),yd=n(2420),kd=n(2418),Cd={milestoneValue:"value"},Sd=function(e,t){return e instanceof Date&&(e=e.toISOString()),"Date"===t&&e&&(e={$dateFromString:{dateString:e}}),e},wd=function(e,t,n,r){var a=[];return t&&a.push({$gte:["$".concat(e),Sd(t,r)]}),n&&a.push({$lt:["$".concat(e),Sd(n,r)]}),2===a.length?{$and:a}:a[0]},Td=function(e,t,n){var r;switch(n){case"string":var a;if(Array.isArray(t))return{$in:["$".concat(null!==(a=Cd[e])&&void 0!==a?a:e),t]};break;case"Date":case"number":if(Array.isArray(t))return wd(e,t[0],t[1],n)}return{$eq:["$".concat(null!==(r=Cd[e])&&void 0!==r?r:e),Sd(t,n)]}},_d=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(b.a)(r[n],2),s=a[0],i=a[1];if(i){var c={$filter:{input:{$ifNull:["$milestones",[]]},as:"ms",cond:{$and:[{$eq:["$$ms.name",s]},Td("$ms.lastReached",i,"Date")]}}};t.push({$gt:[{$size:c},0]})}}return t},Pd=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(b.a)(r[n],2),s=a[0],i=a[1];if(i){var c={$filter:{input:{$ifNull:["$tags",[]]},as:"tag",cond:{$and:[{$eq:["$$tag.name",s]},Td("$tag.value",i,"string")]}}};t.push({$gt:[{$size:c},0]})}}return t},Ad=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Object(b.a)(r[n],2),s=a[0],i=a[1];if(Object(Vn.isPresent)(i)){var c={$filter:{input:{$ifNull:["$metrics",[]]},as:"metric",cond:{$and:[{$eq:["$$metric.name",s]},Td("$metric.value",i,"number")]}}};t.push({$gt:[{$size:c},0]})}}return t},Nd=function(){var e=Object(D.a)(E.a.mark((function e(t,n,r,a){var s,i,c,o,u,l,d,p,f,h,v,j,O,m,g,x,y,k,C,S;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],e.t0=n,e.next="contexts"===e.t0?4:"tasks"===e.t0?40:"events"===e.t0?57:72;break;case 4:r&&s.push(Td("typeName",r,"string")),i=0,c=Object.entries(t);case 6:if(!(i<c.length)){e.next=39;break}o=Object(b.a)(c[i],2),u=o[0],l=o[1],e.t1=u,e.next="excludeContextTypeVersion"===e.t1?11:"created"===e.t1?13:"modified"===e.t1?15:"reachedMilestones"===e.t1||"active"===e.t1?17:"milestones"===e.t1?29:"tags"===e.t1?31:"metrics"===e.t1?33:35;break;case 11:return s.push({$ne:["$contextTypeVersion",l]}),e.abrupt("break",36);case 13:return s.push(Td("dateCreated",l,ld.created)),e.abrupt("break",36);case 15:return s.push(Td("dateModified",l,ld.modified)),e.abrupt("break",36);case 17:if(d=void 0,"active"!==u){e.next=26;break}if(!t.typeName){e.next=24;break}return e.next=22,a(t.typeName).catch((function(){}));case 22:(p=e.sent)&&(d=p.milestones.filter((function(e){return e.final})).map((function(e){return e.name})));case 24:e.next=27;break;case 26:d=l;case 27:return Array.isArray(d)&&d.length>0&&(f={$size:{$setIntersection:[{$map:{input:{$filter:{input:"$milestones",as:"ms",cond:{$ne:["$$ms.lastReached",null]}}},as:"ms",in:"$$ms.name"}},Object(ra.a)(d)]}},s.push(!0===l?{$eq:[f,0]}:{$gt:[f,0]})),e.abrupt("break",36);case 29:return s.push.apply(s,Object(qn.a)(_d(l))),e.abrupt("break",36);case 31:return s.push.apply(s,Object(qn.a)(Pd(l))),e.abrupt("break",36);case 33:return s.push.apply(s,Object(qn.a)(Ad(l))),e.abrupt("break",36);case 35:s.push(Td(u,l,ld[u]));case 36:i++,e.next=6;break;case 39:return e.abrupt("break",72);case 40:h=0,v=Object.entries(t);case 41:if(!(h<v.length)){e.next=56;break}j=Object(b.a)(v[h],2),O=j[0],m=j[1],e.t2=O,e.next="unassigned"===e.t2?46:"labels"===e.t2?50:52;break;case 46:return g={$in:[{$type:"$assignedTo"},["missing","null"]]},m||(g={$not:g}),s.push(g),e.abrupt("break",53);case 50:return s.push({$eq:[{$size:{$setIntersection:["$labels",Object(ra.a)(m)]}},Object(ra.a)(m).length]}),e.abrupt("break",53);case 52:s.push(Td(O,m,dd[O]));case 53:h++,e.next=41;break;case 56:return e.abrupt("break",72);case 57:x=0,y=Object.entries(t);case 58:if(!(x<y.length)){e.next=71;break}k=Object(b.a)(y[x],2),C=k[0],S=k[1],e.t3=C,e.next="tags"===e.t3?63:"metrics"===e.t3?65:67;break;case 63:return s.push.apply(s,Object(qn.a)(Pd(S))),e.abrupt("break",68);case 65:return s.push.apply(s,Object(qn.a)(Ad(S))),e.abrupt("break",68);case 67:s.push(Td(C,S,pd[C]));case 68:x++,e.next=58;break;case 71:return e.abrupt("break",72);case 72:return e.abrupt("return",{$expr:{$and:s}});case 73:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Id=function(e,t){switch(e){case"average":return{$avg:t};case"count":return{$sum:1};case"max":return{$max:t};case"min":return{$min:t};case"sum":return{$sum:t}}},Rd=function(e){var t=[],n="$".concat(e.property);return e.value&&(t.push({$project:{_id:0,value:n}},{$unwind:"$value"},{$match:{$expr:{$eq:["$value.name",e.value]}}}),n="$value.".concat("milestones"===e.property?"lastReached":"value")),t.push({$group:{_id:null,value:Id(e.aggregation,n)}}),t},Ud=function(e){var t=[];return e.sortProperty&&t.push({$sort:Object(f.a)({},e.sortProperty,e.sortDirection===se.Descending?-1:1)}),e.skip&&t.push({$skip:e.skip}),e.limit&&t.push({$limit:e.limit}),t},Ed=function(e){var t=nd.indexOf(e);-1===t&&(t=5);var n="";if(2===t)n="%G-%V";else{for(var r=["%Y","-%m",null,"-%d","T%H",":%M",":%S"],a=0;a<r.length;a++)2!==a&&(n+=a<=t?r[a]:a<4?"-01":4===a?"T00":":00");n+="%z"}return n},Dd=function(e,t){var n,r=[],a={_id:0},s={},i=Object(pe.a)(e.groupings.filter((function(e){return e.value})));try{for(i.s();!(n=i.n()).done;){var c=n.value;c.property in s||(s[c.property]="$$REMOVE"),s["".concat(c.property,"_").concat(c.value)]={$first:{$map:{input:{$filter:{input:"$".concat(c.property),as:"item",cond:{$eq:["$$item.name",c.value]}}},as:"item",in:"$$item.".concat("milestones"===c.property?"lastReached":"value")}}},a["".concat(c.property,"_").concat(c.value)]="$".concat(c.property,"_").concat(c.value)}}catch(y){i.e(y)}finally{i.f()}Object.keys(s).length>0&&r.push({$set:s});var o,u=[],l=[],d={},p=Object(pe.a)(e.groupings);try{for(p.s();!(o=p.n()).done;){var b=o.value;a[b.property]="$".concat(b.property);var v=b.property;if(b.value&&(v="".concat(b.property,"_").concat(b.value)),b.timeGranularity){var j=Ed(b.timeGranularity);u.push({$set:Object(f.a)({},v,{$dateToString:{date:"$".concat(v),format:j,timezone:t}})})}l.push(v)}}catch(y){p.e(y)}finally{p.f()}if(e.aggregates){var O,m=Object(pe.a)(e.aggregates);try{for(m.s();!(O=m.n()).done;){var g=O.value;g.property&&(a[g.property]="$".concat(g.property));var x=g.property;g.value&&(x="".concat(g.property,"_").concat(g.value),u.push({$unwind:{path:"$".concat(g.property),preserveNullAndEmptyArrays:!0}},{$match:{$expr:{$or:[{$eq:["$".concat(g.property,".name"),g.value]},{$eq:["$".concat(g.property),null]}]}}},{$set:Object(f.a)({},x,{$cond:{if:{$eq:["$".concat(g.property),null]},then:null,else:"$".concat(g.property,".").concat("milestones"===g.property?"lastReached":"value")}})})),d[g.name]=Id(g.aggregation,"$".concat(x))}}catch(y){m.e(y)}finally{m.f()}}return u.length>0&&r.push.apply(r,[{$project:a}].concat(u)),r.push({$group:Object(h.a)({_id:Object(kd.a)(l.map((function(e){return[e,"$".concat(e)]})))},d)},{$set:Object(h.a)({_id:"$$REMOVE"},Object(kd.a)(l.map((function(e){return[e,"$_id.".concat(e)]}))))}),r},Md=function(){throw new Error("You forgot to wrap your component in <DashboardContextProvider>.")},$d={getParameterState:Md,setParameterState:Md,getWidgetDefinition:Md,getVariableValue:Md,updateDynamicVariableValues:Md,getWidgetData:Md,getWidgetVariables:Md,registerWidgetRefreshTrigger:Md,unregisterWidgetRefreshTrigger:Md,refreshWidgetData:Md,refreshAllWidgetData:Md,dashboard:{name:"",title:"",widgets:[]},variableDefinitions:[]},Ld=Object(r.createContext)($d),Fd={selectAll:!1,values:[]},zd=function(e){var t=new Date,n=new Date;switch(e.range.unit){case"minutes":n=Object(gd.a)(n,e.range.count);break;case"hours":n=Object(xd.a)(n,e.range.count);break;case"days":n=Object(yd.a)(n,e.range.count)}return[n,t]},Jd=function(e,t,n){switch(t.selectionType){case"freeText":var r;return null===(r=n.values[0])||void 0===r?void 0:r.value;case"multiple":if(n.selectAll)return;return n.values.map((function(e){return e.value}));case"single":var a;if(n.selectAll)return;return null===(a=n.values[0])||void 0===a?void 0:a.value;case"timeRange":var s,i=null===(s=n.values[0])||void 0===s?void 0:s.value;if(!i)return;if("static"===i.type)return t.beginVariableName===e?i.range.start:i.range.end;var c=zd(i),o=Object(b.a)(c,2),u=o[0],l=o[1];return t.beginVariableName===e?u.toISOString():l.toISOString()}},Bd=function(e,t){var n={};switch(e.selectionType){case"timeRange":n[e.beginVariableName]=Jd(e.beginVariableName,e,t),n[e.endVariableName]=Jd(e.endVariableName,e,t);break;default:n[e.variableName]=Jd(e.variableName,e,t)}return n},Wd=function(e){var t=e.dashboard,n=e.widgets,a=e.children,s=Object(r.useState)((function(){var e={};if(t.parameters){var n,r=Object(pe.a)(t.parameters);try{for(r.s();!(n=r.n()).done;){var a,s=n.value;e[s.id]=null!==(a=Object(Jr.a)(s.defaultValue))&&void 0!==a?a:Fd}}catch(i){r.e(i)}finally{r.f()}}return e})),i=Object(b.a)(s,2),c=i[0],o=i[1],u=Object(r.useMemo)((function(){return t.parameters?function(e){var t,n=[],r=Object(pe.a)(e);try{for(r.s();!(t=r.n()).done;){var a,s=t.value,i=Object(pe.a)(Qn(s));try{for(i.s();!(a=i.n()).done;){var c=a.value;n.push({name:c,declaringParameterId:s.id,type:"timeRange"===s.selectionType?"datetime":s.dataType})}}catch(o){i.e(o)}finally{i.f()}}}catch(o){r.e(o)}finally{r.f()}return n}(t.parameters):[]}),[t.parameters]),l=Object(r.useState)((function(){var e={};if(t.parameters){var n,r=Object(pe.a)(t.parameters);try{for(r.s();!(n=r.n()).done;){var a=n.value;e=Object(h.a)(Object(h.a)({},e),Bd(a,c[a.id]))}}catch(s){r.e(s)}finally{r.f()}}return e})),d=Object(b.a)(l,2),p=d[0],v=d[1],j=Object(r.useState)({}),O=Object(b.a)(j,2),m=O[0],g=O[1],x=function(){var e=at(),t=e.contexts_Aggregate,n=e.tasks_Aggregate,a=e.events_AggregateEvents,s=e.contextTypes_FindOne,i=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.query.filter){e.next=3;break}return e.abrupt("return",void 0);case 3:return Zn(r,{inputValues:n,outputValues:a={queryFilter:void 0}}),e.abrupt("return",a.queryFilter);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{evaluateQueryDataSource:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(r,c,o){var u,l,d,p;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],e.next=3,i(r,{params:c});case 3:if(l=e.sent,!He(l)){e.next=11;break}return e.t0=u,e.next=8,Nd(l,r.sourceCollection,r.contextTypeName,(function(e){return s({name:e})}));case 8:e.t1=e.sent,e.t2={$match:e.t1},e.t0.push.call(e.t0,e.t2);case 11:d=r.query,e.t3=d.type,e.next="Calculate"===e.t3?15:"CalculateTable"===e.t3?17:"Summarize"===e.t3?19:21;break;case 15:return u.push.apply(u,Object(qn.a)(Rd(d))),e.abrupt("break",21);case 17:return u.push.apply(u,Object(qn.a)(Ud(d))),e.abrupt("break",21);case 19:return u.push.apply(u,Object(qn.a)(Dd(d,o))),e.abrupt("break",21);case 21:e.t4=r.sourceCollection,e.next="contexts"===e.t4?24:"tasks"===e.t4?28:"events"===e.t4?32:36;break;case 24:return e.next=26,t({stages:u});case 26:return p=e.sent,e.abrupt("break",36);case 28:return e.next=30,n({stages:u});case 30:return p=e.sent,e.abrupt("break",36);case 32:return e.next=34,a({stages:u});case 34:return p=e.sent,e.abrupt("break",36);case 36:return"Calculate"===d.type&&Array.isArray(p)&&p.length>0&&(p=p[0].value),e.abrupt("return",p);case 38:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[s,t,i,a,n])}}().evaluateQueryDataSource,y=function(){var e=Xn().call,t=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.jsArguments){e.next=3;break}return e.abrupt("return",void 0);case 3:return Zn(r,{inputValues:n,outputValues:a={args:void 0}}),e.abrupt("return",a.args);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{evaluateFunctionDataSource:Object(r.useCallback)(function(){var n=Object(D.a)(E.a.mark((function n(r,a){var s,i;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(r,{params:a});case 2:return s=n.sent,n.next=5,e(r.moduleName,r.functionName,s);case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e,t])}}().evaluateFunctionDataSource,k=Object(r.useCallback)((function(e){return c[e]}),[c]),C=Object(r.useCallback)((function(e,n){o((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(f.a)({},e,n))}));var r=t.parameters.find((function(t){return t.id===e}));v((function(e){return Object(h.a)(Object(h.a)({},e),Bd(r,n))}))}),[t.parameters]),S=Object(r.useCallback)((function(e){return n.find((function(t){return t.name===e}))}),[n]),w=Object(r.useCallback)((function(e){return p[e]}),[p]),T=Object(r.useCallback)((function(){if(t.parameters){var e,n={},r=Object(pe.a)(t.parameters.filter((function(e){return"timeRange"===e.selectionType})));try{for(r.s();!(e=r.n()).done;){var a=e.value;n=Object(h.a)(Object(h.a)({},n),Bd(a,c[a.id]))}}catch(s){r.e(s)}finally{r.f()}Object.keys(n).length>0&&v((function(e){return Object(h.a)(Object(h.a)({},e),n)}))}return Promise.resolve()}),[t.parameters,c]),_=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(r){var a,s,i,c,o,u,l,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.widgets.find((function(e){return e.instantiationId===r})),s=n.find((function(e){return e.name===(null===a||void 0===a?void 0:a.widgetName)})),a&&(null===s||void 0===s?void 0:s.dataSources)){e.next=4;break}return e.abrupt("return",{});case 4:i=Object(uc.a)((function(e){return w(e)}),a.parametersBindings),c={},o=[],u=Object(pe.a)(s.dataSources);try{for(d=function(){var e=l.value,t=Promise.resolve([]);switch(e.type){case"query":var n=Object(Gn.default)(new Date,"XXX");t=x(e,i,n);break;case"function":t=y(e,i)}t=t.then((function(t){return c[e.name]=t})),o.push(t)},u.s();!(l=u.n()).done;)d()}catch(p){u.e(p)}finally{u.f()}return e.next=11,Promise.all(o);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t.widgets,y,x,w,n]),P=Object(r.useCallback)((function(e){var r=t.widgets.find((function(t){return t.instantiationId===e})),a=n.find((function(e){return e.name===(null===r||void 0===r?void 0:r.widgetName)})),s={};if(r&&(null===a||void 0===a?void 0:a.dataSources))for(var i=function(){var e,t=Object(b.a)(o[c],2),n=t[0],r=t[1],i=null===(e=a.parameters)||void 0===e?void 0:e.find((function(e){return e.name===n}));if(i){var u=w(r);"stringList"===i.type&&u&&!Array.isArray(u)&&(u=[u]),s[n]=u}},c=0,o=Object.entries(r.parametersBindings);c<o.length;c++)i();return Promise.resolve(s)}),[t.widgets,w,n]),A=Object(r.useCallback)((function(e,t){g((function(n){return Object(h.a)(Object(h.a)({},n),{},Object(f.a)({},e,t))}))}),[]),N=Object(r.useCallback)((function(e,t){g((function(n){return n[e]===t?Object(Yn.a)([e],n):n}))}),[]),I=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(!(n=m[t])){e.next=7;break}return e.next=6,n();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,T]),R=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t,n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:for(t=[],n=0,r=Object.values(m);n<r.length;n++)a=r[n],t.push(a());return e.next=6,Promise.allSettled(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[m,T]),U={getParameterState:k,setParameterState:C,getWidgetDefinition:S,updateDynamicVariableValues:T,getVariableValue:w,getWidgetData:_,getWidgetVariables:P,registerWidgetRefreshTrigger:A,unregisterWidgetRefreshTrigger:N,refreshWidgetData:I,refreshAllWidgetData:R,dashboard:t,variableDefinitions:u};return Object(me.jsx)(Ld.Provider,{value:U,children:a})},qd=function(){return Object(r.useContext)(Ld)},Vd=n(1175),Gd=n(1941),Hd=n(1942),Yd=n(1943),Kd=n(1944),Zd=n(1945),Xd=n(1946),Qd="en_US",ep=["en_US","zh_CN"],tp=function(e,t){Object(Vd.c)(e,t),ep.push(e)};function np(e){if(ep.includes(e))Qd=e;else{var t=e.indexOf("_");t>0?np(e.substring(0,t)):Qd="en_US"}}function rp(e){"en"===e&&(e="en_US"),np(e=e.replace("-","_"))}tp("de",Gd.a),tp("es",Hd.a),tp("fr",Yd.a),tp("it",Kd.a),tp("pt_BR",Zd.a),tp("ru",Xd.a),u.a.language&&rp(u.a.language),u.a.on("languageChanged",(function(e){rp(e)}));var ap=function(e,t){return Object(Vd.b)(e,Qd,t)},sp=function(e){var t=e.datetime,n=e.live,a=e.opts,s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e,r=s.current;if(r)return!1!==n&&(r.setAttribute("datetime",""+((e=t)instanceof Date?e.getTime():e)),function(e,t){Object(Vd.d)(e,Qd,t)}(r,a)),function(){return Object(Vd.a)(r)}}),[t,n,a]),Object(me.jsx)("time",{ref:s,children:ap(t,a)})},ip=n(1947),cp=n(1956),op=n.n(cp),up={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},lp=function(e){var t=Object(m.a)(),n=Object(h.a)({theme:up,hideRoot:!0,invertTheme:"light"===t.palette.type},e);return Object(me.jsx)(op.a,Object(h.a)({},n))},dp=Object(j.a)((function(e){return Object(O.a)({widget:{display:"flex",overflow:"hidden",position:"relative",flexDirection:"column",zIndex:0,backgroundColor:e.palette.background.paper,borderWidth:1,borderStyle:"solid",borderColor:e.palette.divider,height:"100%",borderRadius:10},widgetHeader:{paddingLeft:8,minHeight:36,display:"flex",alignItems:"center"},widgetContent:{position:"relative",flex:"1 1",overflow:"auto",padding:"0 8px 8px",zIndex:0},widgetTitle:{flex:"0 1 auto",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",lineHeight:"20px"},widgetTimeago:{flex:"0 1 auto",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis",lineHeight:"20px",opacity:.4},spaceFiller:{flex:"1 1"}})})),pp={markdown:function(e){var t=e.visualization,n=e.params,a=e.data,s=Object(r.useMemo)((function(){return Ma(t.template,{params:n,data:a})}),[a,n,t.template]);return Object(me.jsx)(gt.a,{children:s})},"vega-lite":function(e){var t=e.visualization,n=e.params,a=e.data,s=vd(),i=Object(r.useState)(),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zn(t,{inputValues:{params:n},outputValues:r={vegaLiteSpec:void 0}}),!Od(r.vegaLiteSpec)){e.next=4;break}return e.abrupt("return",Object(h.a)(Object(h.a)({},jd),r.vegaLiteSpec));case 4:return e.abrupt("return",r.vegaLiteSpec);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),d=Object(es.a)(),p=d.width,f=d.height,v=d.ref;return Object(r.useEffect)((function(){l(t.jsSpecification,n).then((function(e){u(e)}))}),[n,l,t.jsSpecification]),Object(me.jsx)("div",{ref:v,className:s.root,children:Object(me.jsx)(md,{variant:t.variant,spec:o,data:a,width:p,height:f})})},tabular:function(e){var t=e.visualization,n=e.params,a=e.data,s=Object(r.useState)(),i=Object(b.a)(s,2),c=i[0],o=i[1];Object(r.useEffect)((function(){var e={tabularConfig:void 0};Zn(t.jsConfiguration,{inputValues:{params:n},outputValues:e});var r=e.tabularConfig;if(r){r.title||(r.title="");var a=r.options;a||(r.options=a={}),Object(Vn.isPresent)(a.exportMenu)||(a.exportMenu=[{label:u.a.t("ExportCSV"),exportFunc:function(e,t){return Object(ip.ExportCsv)(e,t,"myCsvFileName")}}]),Object(Vn.isPresent)(a.exportAllData)||(a.exportAllData=!0),o(r)}}),[n,t.jsConfiguration]);var l=Object(r.useMemo)((function(){var e,t;if(!c)return[];var n=null!==(e=null===a||void 0===a?void 0:a[c.dataSourceName])&&void 0!==e?e:[];if(Array.isArray(n)&&n.length>0&&(null===(t=c.columns)||void 0===t?void 0:t.length)>0){var r,s=Object(pe.a)(c.columns.filter((function(e){return e.field})));try{var i=function(){var e=r.value,t=n[0][e.field];"object"!==typeof t||null===t||t instanceof Date||(e.render=function(t){return Object(me.jsx)(lp,{data:t[e.field]})})};for(s.s();!(r=s.n()).done;)i()}catch(o){s.e(o)}finally{s.f()}}return n}),[a,c]);return c?Object(me.jsx)(io.a,{components:{Container:function(e){return Object(me.jsx)("div",Object(h.a)({},e))}},columns:c.columns,data:l,title:c.title,options:c.options}):null}},fp={minInterval:60},bp=function(e){var t=e.instantiation,n=dp(),a=Object(p.a)().t,s=qd(),i=s.getWidgetDefinition,c=s.refreshWidgetData,o=i(t.widgetName),u=function(e){var t=Object(r.useState)(new Date),n=Object(b.a)(t,2),a=n[0],s=n[1],i=qd(),c=i.getWidgetData,o=i.getWidgetVariables,u=i.registerWidgetRefreshTrigger,l=i.unregisterWidgetRefreshTrigger,d=Object(r.useRef)(c),p=Object(r.useRef)(o),f=Object(pt.a)("/WidgetInstanceData/".concat(e),Object(D.a)(E.a.mark((function t(){var n,r,a,i,c,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.current(e),r=p.current(e),t.next=4,Promise.all([n,r]);case 4:return a=t.sent,i=Object(b.a)(a,2),c=i[0],o=i[1],s(new Date),t.abrupt("return",{data:c,params:o});case 10:case"end":return t.stop()}}),t)}))),{revalidateOnFocus:!1}),h=f.data,v=f.error,j=f.isValidating,O=f.mutate;return Object(r.useEffect)((function(){d.current=c,p.current=o}),[c,o]),Object(r.useEffect)((function(){return u(e,O),function(){return l(e,O)}}),[e,u,O,l]),Object(r.useMemo)((function(){return{widgetData:h,isValidating:j,error:v,revalidate:O,lastRefresh:a}}),[h,j,v,O,a])}(t.instantiationId),l=u.widgetData,d=u.error,f=u.isValidating,h=u.lastRefresh,v=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t.instantiationId);case 2:case"end":return e.stop()}}),e)}))),[t.instantiationId,c]);if(!o)return null;var j=pp[o.visualization.type];return Object(me.jsxs)(wr.a,{className:n.widget,elevation:3,children:[Object(me.jsxs)("div",{className:n.widgetHeader,children:[Object(me.jsx)(C.a,{className:n.widgetTitle,variant:"subtitle2",noWrap:!0,display:"block",children:null===o||void 0===o?void 0:o.title}),Object(me.jsx)("div",{className:n.spaceFiller}),Object(me.jsx)(Ct.a,{title:Object(Gn.default)(h,a("DATETIME_FORMAT")),children:Object(me.jsx)(C.a,{className:n.widgetTimeago,variant:"caption",noWrap:!0,display:"block",children:Object(me.jsx)(sp,{datetime:h,opts:fp})})}),!f&&Object(me.jsx)(Ct.a,{title:a("Refresh"),children:Object(me.jsx)(w.a,{size:"small",onClick:v,children:Object(me.jsx)(lo.a,{})})}),f&&Object(me.jsx)(Oe.a,{size:20})]}),Object(me.jsxs)("div",{className:n.widgetContent,children:[!!l&&j&&Object(me.jsx)(j,{visualization:o.visualization,data:l.data,params:l.params}),!!d&&Object(me.jsx)(yt,{error:d})]})]})},hp=n(2015),vp=n.n(hp),jp=n(2437),Op=n(2401),mp=function(e){var t=Object(p.a)().t,n=Object(d.h)(),r=qd().dashboard;return Object(me.jsxs)(jp.a,{separator:Object(me.jsx)(vp.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,children:">"}),"aria-label":"breadcrumb",children:[Object(me.jsx)(vp.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,children:t("Dashboards")}),Object(me.jsx)(Op.a,{color:"inherit",href:"#",onClick:function(){return n("../".concat(r.id))},children:Object(me.jsx)(vp.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,children:r.name})})]})},gp=n(128),xp=n(2373),yp=n(2368),kp=n(1122),Cp=n.n(kp),Sp=n(2037),wp=n.n(Sp),Tp=n(2038),_p=n.n(Tp),Pp=n(2434),Ap=Object(j.a)((function(e){return Object(O.a)({chip:{margin:"6px 4px"},parameterTitle:{display:"flex",flexDirection:"row"},parameterName:{display:"inline",flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis"},parameterSeparator:{flex:"0 0 auto",padding:"0 4px"},parameterValueWidth:{maxWidth:256},parameterValue:{display:"inline-block",flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis"}})})),Np=function(e){var t=e.parameter,n=e.valueDescription,a=Object(M.a)(e,["parameter","valueDescription"]),s=Ap(),i=Object(r.useMemo)((function(){var e=n,r=s.parameterValue;return"timeRange"!==t.selectionType&&(r+=" "+s.parameterValueWidth),Object(me.jsxs)("div",{className:s.parameterTitle,children:[Object(me.jsx)("span",{className:s.parameterName,children:t.displayName}),Object(me.jsx)("span",{className:s.parameterSeparator,children:":"}),Object(me.jsx)("div",{className:r,children:e})]})}),[s,t,n]);return Object(me.jsx)(ju.a,Object(h.a)({label:i,variant:"outlined",size:"small",className:s.chip},a))},Ip={description:u.a.t("SelectAll"),selectAll:!0},Rp=function(e){var t=function(e){var t=Xn().evaluateArgsAndCall,n=mt(e),a=Object(pt.a)(n,Object(D.a)(E.a.mark((function n(){var r,a,s,i,c,o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=[],"static"!==e.type){n.next=5;break}r.push.apply(r,Object(qn.a)(e.options)),n.next=11;break;case 5:if("function"!==e.type){n.next=11;break}if(!e.moduleName||!e.functionName){n.next=11;break}return n.next=9,t(e.moduleName,e.functionName,e.jsArguments);case 9:if(a=n.sent,Array.isArray(a)){s=Object(pe.a)(a);try{for(s.s();!(i=s.n()).done;)o=i.value,r.push({value:o[e.columns.value],displayText:o[null!==(c=e.columns.label)&&void 0!==c?c:e.columns.value]})}catch(u){s.e(u)}finally{s.f()}}case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),s=a.data,i=a.error,c=a.isValidating,o=a.mutate;return Object(r.useMemo)((function(){return{data:null!==s&&void 0!==s?s:[],error:i,isValidating:c,mutate:o}}),[s,i,c,o])}(e.dataSource),n=t.data,a=t.error,s=t.isValidating,i=t.mutate;return Object(r.useMemo)((function(){var t=n.map((function(t){return{selectAll:!1,description:er(t,e),value:t}}));return e.allowEmptySelection&&t.unshift(Ip),{options:t,error:a,isValidating:s,mutate:i}}),[n,a,s,i,e])},Up=function(e,t,n){if(!e)return[n,[]];if(e.selectAll)return[n,[Ip]];var r,a=n,s=[],i=Object(qn.a)(e.values),c=Object(pe.a)(a);try{var o=function(){var t=r.value,n=i.findIndex((function(e){var n;return Object(Ya.a)(e.value,null===(n=t.value)||void 0===n?void 0:n.value)}));(n>=0||e.selectAll)&&(n>=0&&i.splice(n,1),s.push(t))};for(c.s();!(r=c.n()).done;)o()}catch(f){c.e(f)}finally{c.f()}if(i.length>0){var u,l=Object(pe.a)(i);try{for(l.s();!(u=l.n()).done;){var d=u.value,p={description:er(d,t),selectAll:!1,value:d,isAdHoc:!0};a=[].concat(Object(qn.a)(a),[p]),s.push(p)}}catch(f){l.e(f)}finally{l.f()}}return[a,s]},Ep=Object(j.a)((function(e){return Object(O.a)({popper:{border:"1px solid rgba(27,31,35,.15)",boxShadow:"0 3px 12px rgba(27,31,35,.15)",borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper},header:{borderBottom:"1px solid #e1e4e8",padding:"8px 10px",fontWeight:600},inputBase:{padding:10,width:"100%",borderBottom:"1px solid #dfe2e5","& input":{borderRadius:4,padding:8,transition:e.transitions.create(["border-color","box-shadow"]),border:"1px solid #ced4da",fontSize:14,"&:focus":{boxShadow:"".concat(Object(gp.a)(e.palette.primary.main,.25)," 0 0 0 0.2rem"),borderColor:e.palette.primary.main}}},paper:{boxShadow:"none",margin:0,fontSize:13},option:{minHeight:"auto",alignItems:"flex-start",padding:8,'&[aria-selected="true"]':{backgroundColor:"transparent"},'&[data-focus="true"]':{backgroundColor:e.palette.action.hover}},popperDisablePortal:{position:"relative"},iconSelected:{width:17,height:17,marginRight:5,marginLeft:-2},color:{width:14,height:14,flexShrink:0,borderRadius:3,marginRight:8,marginTop:2},text:{flexGrow:1},close:{opacity:.6,width:18,height:18},checkbox:{marginRight:8,padding:0}})})),Dp=Object(me.jsx)(wp.a,{fontSize:"small"}),Mp=Object(me.jsx)(_p.a,{fontSize:"small"}),$p=function(e,t,n){if(!e)return"";if(e.selectAll||0===e.values.length)return u.a.t("All");var r=e.values.map((function(e){return er(e,t)}));return Object(Pp.a)(r.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0})))+2*(r.length-1)>15?u.a.t("CountOfTotalSelected",{count:r.length,total:n}):r.join(", ")},Lp=Object(j.a)((function(e){return Object(O.a)({inputBase:{width:"100%",borderBottom:"1px solid #dfe2e5",borderWidth:0,"& input":{borderRadius:4,padding:8,transition:e.transitions.create(["border-color","box-shadow"]),border:"1px solid #ced4da",fontSize:14,"&:focus":{boxShadow:"".concat(Object(gp.a)(e.palette.primary.main,.25)," 0 0 0 0.2rem"),borderColor:e.palette.primary.main}}},paper:{padding:"8px 10px",boxShadow:"none",margin:0,color:"#586069",fontSize:13}})})),Fp=n(1124),zp=n.n(Fp),Jp=n(376),Bp=n(650),Wp=n(1893),qp=n(2421),Vp=n(1940),Gp=n(319),Hp=Object(j.a)((function(e){return Object(O.a)({paper:{backgroundColor:e.palette.background.default,width:"100%",minHeight:"30em"},dialogTitle:{height:64},dialogContent:{height:"calc(100% - ".concat(64,"px - ").concat(52,"px)"),width:"100%"},dialogFooter:{height:52}})})),Yp=function(e,t,n){var r=Object(Wp.default)(t,e);return 0===r?(r=Object(qp.a)(t,e),Object(Vp.a)(n,r)):Object(Gp.default)(n,r)},Kp=function(e){var t=e.open,n=e.value,a=e.onChange,s=e.onClose,i=Hp(),c=Object(p.a)().t,o=Object(r.useState)((function(){return Object(Hn.default)(n.range.start)})),u=Object(b.a)(o,2),l=u[0],d=u[1],f=Object(r.useState)((function(){return Object(Hn.default)(n.range.end)})),h=Object(b.a)(f,2),v=h[0],j=h[1],O=Object(r.useCallback)((function(e){e&&(e>v&&j((function(t){return Yp(l,e,t)})),d(e))}),[l,v]),m=Object(r.useCallback)((function(e){e&&(e<l&&d((function(t){return Yp(v,e,t)})),j(e))}),[l,v]),g=Object(r.useCallback)((function(){null===a||void 0===a||a({type:"static",range:{start:l.toISOString(),end:v.toISOString()}}),null===s||void 0===s||s()}),[l,a,s,v]);return Object(me.jsxs)(Me.a,{open:t,fullWidth:!0,maxWidth:"md",classes:{paper:i.paper},children:[Object(me.jsx)(Fe.a,{className:i.dialogTitle,children:c("CustomTimeRange")}),Object(me.jsx)(Le.a,{className:i.dialogContent,children:Object(me.jsx)(oi,{children:Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsxs)(je.a,{container:!0,spacing:2,children:[Object(me.jsx)(je.a,{item:!0,xs:6,children:Object(me.jsx)(Ac.b,{margin:"normal",label:c("StartTime"),format:c("DATE_FORMAT"),required:!0,fullWidth:!0,value:l,onChange:O,KeyboardButtonProps:{"aria-label":"change date"}})}),Object(me.jsx)(je.a,{item:!0,xs:6,children:Object(me.jsx)(Bp.a,{margin:"normal",label:" ",fullWidth:!0,value:l,onChange:O,KeyboardButtonProps:{"aria-label":"change time"}})}),Object(me.jsx)(je.a,{item:!0,xs:6,children:Object(me.jsx)(Ac.b,{margin:"normal",label:c("EndTime"),format:c("DATE_FORMAT"),fullWidth:!0,required:!0,value:v,onChange:m,KeyboardButtonProps:{"aria-label":"change date"}})}),Object(me.jsx)(je.a,{item:!0,xs:6,children:Object(me.jsx)(Bp.a,{margin:"normal",label:" ",fullWidth:!0,value:v,onChange:m,KeyboardButtonProps:{"aria-label":"change time"}})})]})})})}),Object(me.jsxs)($e.a,{className:i.dialogFooter,children:[Object(me.jsx)(R.a,{onClick:g,color:"primary",children:c("Accept")}),Object(me.jsx)(R.a,{onClick:s,color:"primary",children:c("Cancel")})]})]})},Zp=Object(j.a)((function(e){return Object(O.a)({listItemIcon:{minWidth:30}})})),Xp=function(e,t){return{id:"Last".concat(e).concat(t),label:u.a.t("Last".concat(t),{count:e}),value:{type:"dynamic",range:{count:e,unit:t}}}},Qp=[{id:"CustomTimeRange",label:u.a.t("CustomTimeRange"),value:{type:"static",range:{start:"",end:""}}},Xp(15,"minutes"),Xp(30,"minutes"),Xp(1,"hours"),Xp(3,"hours"),Xp(6,"hours"),Xp(12,"hours"),Xp(24,"hours"),Xp(2,"days"),Xp(7,"days"),Xp(14,"days"),Xp(30,"days"),Xp(60,"days")],ef=Object(j.a)((function(e){return Object(O.a)({header:{borderBottom:"1px solid #e1e4e8",padding:"8px 10px",fontWeight:600},inputBase:{padding:10,width:"100%",borderBottom:"1px solid #dfe2e5","& input":{borderRadius:4,padding:8,transition:e.transitions.create(["border-color","box-shadow"]),border:"1px solid #ced4da",fontSize:14,"&:focus":{boxShadow:"".concat(Object(gp.a)(e.palette.primary.main,.25)," 0 0 0 0.2rem"),borderColor:e.palette.primary.main}}},paper:{boxShadow:"none",margin:0,fontSize:13},option:{minHeight:"auto",alignItems:"flex-start",padding:8,'&[aria-selected="true"]':{backgroundColor:"transparent"},'&[data-focus="true"]':{backgroundColor:e.palette.action.hover}},popperDisablePortal:{position:"relative"},iconSelected:{width:17,height:17,marginRight:5,marginLeft:-2},color:{width:14,height:14,flexShrink:0,borderRadius:3,marginRight:8,marginTop:2},text:{flexGrow:1},close:{opacity:.6,width:18,height:18}})})),tf=function(e,t){if(e.selectAll)return u.a.t("SelectAll");var n=e.values[0];return er(n,t)},nf={freeText:function(e){var t=e.parameter,n=e.value,a=e.onChange,s=Lp(),i=Object(r.useState)((function(){var e,r=null===(e=n.values[0])||void 0===e?void 0:e.value;return null!==r&&void 0!==r?r:"string"===t.dataType?"":0})),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useState)(o),d=Object(b.a)(l,2),p=d[0],f=d[1],v=Object(B.usePopupState)({variant:"popover",popupId:"paramPopup_".concat(t.id)}),j=Object(r.useCallback)((function(e){var n=e.target.value;"number"===t.dataType&&(n=parseFloat(n)),f(n)}),[t]),O=Object(B.bindPopover)(v),m=O.onClose;return O.onClose=function(){u(p),null===a||void 0===a||a({selectAll:!1,values:[{value:p}]},t),m()},Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Np,Object(h.a)({parameter:t,valueDescription:o.toString()},Object(B.bindTrigger)(v))),Object(me.jsx)(xp.a,Object(h.a)(Object(h.a)({anchorOrigin:{vertical:"bottom",horizontal:"left"}},O),{},{children:Object(me.jsx)(wr.a,{className:s.paper,children:Object(me.jsx)(ze.a,{type:"number"===t.dataType?"number":"text",value:p,onChange:j,variant:"outlined",size:"small",autoFocus:!0,InputProps:{className:s.inputBase}})})}))]})},timeRange:function(e){var t=e.parameter,n=e.value,a=e.onChange,s=Zp(),i=Object(r.useState)((function(){var e,t=null===(e=n.values[0])||void 0===e?void 0:e.value;return null!==t&&void 0!==t?t:{type:"dynamic",range:{count:15,unit:"minutes"}}})),c=Object(b.a)(i,2),o=c[0],l=c[1],d=Object(r.useState)((function(){var e=o;if("static"===e.type)return Qp[0];for(var t=e.range,n=1;n<Qp.length;n++){var r=Qp[n],a=r.value.range;if(Object(Ya.a)(t,a))return r}return Qp[1]})),p=Object(b.a)(d,2),f=p[0],v=p[1],j=Object(r.useState)(),O=Object(b.a)(j,2),m=O[0],g=O[1],x=Object(B.usePopupState)({variant:"popover",popupId:"paramPopup_".concat(t.id)}),y=Object(r.useCallback)((function(e,n){if(x.close(),n!==Qp[0]){if(f!==n){v(n);var r=function(e){var t=Object(Jr.a)(e.value);if("static"===t.type){var n=new Date,r=Object(gd.a)(n,15);t.range={start:r.toISOString(),end:n.toISOString()}}return t}(n);l(r),null===a||void 0===a||a({selectAll:!1,values:[{value:r}]},t)}}else{var s=function(e){if("static"===e.type)return Object(Jr.a)(e);var t=zd(e),n=Object(b.a)(t,2),r=n[0],a=n[1];return{type:"static",range:{start:r.toISOString(),end:a.toISOString()}}}(o);g(s)}}),[a,t,x,f,o]),k=Object(r.useCallback)((function(e){l(e),v(Qp[0]),null===a||void 0===a||a({selectAll:!1,values:[{value:e}]},t)}),[a,t]),C=Object(r.useCallback)((function(){g(void 0)}),[]),S=Object(r.useMemo)((function(){return function(e){if("dynamic"===e.type)return Xp(e.range.count,e.range.unit).label;var t=[Object(Hn.default)(e.range.start),Object(Hn.default)(e.range.end)],n=t[0],r=t[1],a=u.a.t("DATE_FORMAT"),s=u.a.t("TIME_FORMAT");return Object(Jp.default)(n,r)?u.a.t("SameDateTimeRangeDescription",{date:Object(Gn.default)(n,a),startTime:Object(Gn.default)(n,s),endTime:Object(Gn.default)(r,s)}):u.a.t("TimeRangeDescription",{startDate:Object(Gn.default)(n,a),startTime:Object(Gn.default)(n,s),endDate:Object(Gn.default)(r,a),endTime:Object(Gn.default)(r,s)})}(o)}),[o]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Np,Object(h.a)({parameter:t,valueDescription:S},Object(B.bindTrigger)(x))),Object(me.jsx)(xp.a,Object(h.a)(Object(h.a)({anchorOrigin:{vertical:"bottom",horizontal:"left"}},Object(B.bindPopover)(x)),{},{children:Object(me.jsx)(ut.a,{component:"nav",children:Qp.map((function(e){return Object(me.jsxs)(lt.a,{button:!0,selected:e===f,onClick:function(t){return y(t,e)},dense:!0,children:[Object(me.jsx)(Ln.a,{className:s.listItemIcon,children:e===f?Object(me.jsx)(zp.a,{}):null}),Object(me.jsx)(dt.a,{primary:e.label,primaryTypographyProps:{variant:"body2"}})]},e.id)}))})})),!!m&&Object(me.jsx)(Kp,{open:!!m,value:m,onChange:k,onClose:C})]})},single:function(e){var t=e.parameter,n=e.value,a=e.onChange,s=Object(p.a)().t,i=ef(),c=Rp(t).options,o=Object(r.useMemo)((function(){var e,r=Up(n,t,c),a=Object(b.a)(r,2),s=a[0];return[s,null!==(e=a[1][0])&&void 0!==e?e:s[0]]}),[c,n,t]),u=Object(b.a)(o,2),l=u[0],d=u[1],f=Object(B.usePopupState)({variant:"popover",popupId:"paramPopup_".concat(t.id)}),v=Object(r.useCallback)((function(e,n,r){null!==n&&"select-option"===r&&(f.close(),null===a||void 0===a||a({selectAll:n.selectAll,values:n.value?[n.value]:[]},t))}),[a,t,f]),j=Object(r.useCallback)((function(e,t){"toggleInput"!==t&&f.close()}),[f]),O=Object(r.useCallback)((function(e){return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(zp.a,{className:i.iconSelected,style:{visibility:e===d?"visible":"hidden"}}),Object(me.jsx)("div",{className:i.text,children:Object(me.jsx)(C.a,{variant:"body2",color:"textPrimary",children:e.description})})]})}),[i,d]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Np,Object(h.a)({parameter:t,valueDescription:tf(n,t)},Object(B.bindTrigger)(f))),Object(me.jsx)(xp.a,Object(h.a)(Object(h.a)({anchorOrigin:{vertical:"bottom",horizontal:"left"}},Object(B.bindPopover)(f)),{},{children:Object(me.jsx)(Cp.a,{open:!0,onClose:j,classes:{paper:i.paper,option:i.option,popperDisablePortal:i.popperDisablePortal},value:void 0,onChange:v,disableCloseOnSelect:!0,disablePortal:!0,renderTags:function(){return null},noOptionsText:s("NoLabels"),renderOption:O,options:l,getOptionLabel:function(e){return e.description},renderInput:function(e){return Object(me.jsx)(yp.a,{ref:e.InputProps.ref,inputProps:e.inputProps,autoFocus:!0,className:i.inputBase})}})}))]})},multiple:function(e){var t=e.parameter,n=e.value,a=e.onChange,s=Object(p.a)().t,i=Ep(),c=Object(B.usePopupState)({variant:"popover",popupId:"paramPopup_".concat(t.id)}),o=Rp(t).options,u=Object(r.useMemo)((function(){return Up(n,t,o)}),[n,t,o]),l=Object(b.a)(u,2),d=l[0],f=l[1],v=Object(r.useCallback)((function(e,r,s,i){"remove-option"===s?r=(null===i||void 0===i?void 0:i.option.selectAll)?[]:r.filter((function(e){return!e.selectAll})):"select-option"===s&&((null===i||void 0===i?void 0:i.option.selectAll)||r.length===d.length-1?r=d:i&&!i.option.selectAll&&2===r.length&&r.some((function(e){return e.selectAll}))&&(r=[i.option]));var c=function(e,t,n){return t.some((function(e){return e.selectAll}))?{selectAll:!e.selectAll,values:[]}:t.length===n.length-1?{selectAll:!0,values:[]}:{selectAll:!1,values:t.map((function(e){return e.value})).filter(Vn.isPresent)}}(n,r,d);null===a||void 0===a||a(c,t)}),[a,d,t,n]),j=Object(r.useCallback)((function(e,t){return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(co.a,{icon:Dp,checkedIcon:Mp,className:i.checkbox,checked:t.selected,color:"default"}),Object(me.jsx)(C.a,{variant:"body2",children:e.description})]})}),[i]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Np,Object(h.a)({parameter:t,valueDescription:$p(n,t,d.length-1)},Object(B.bindTrigger)(c))),Object(me.jsx)(xp.a,Object(h.a)(Object(h.a)({anchorOrigin:{vertical:"bottom",horizontal:"left"}},Object(B.bindPopover)(c)),{},{children:Object(me.jsx)(Cp.a,{open:!0,multiple:!0,classes:{paper:i.paper,option:i.option,popperDisablePortal:i.popperDisablePortal},value:f,onChange:v,disableCloseOnSelect:!0,disablePortal:!0,renderTags:function(){return null},noOptionsText:s("NoLabels"),renderOption:j,options:d,getOptionLabel:function(e){return e.description},renderInput:function(e){return Object(me.jsx)(yp.a,{ref:e.InputProps.ref,inputProps:e.inputProps,autoFocus:!0,className:i.inputBase})}})}))]})}},rf=function(e){var t=e.parameter,n=e.value,a=e.onChange,s=Object(r.useCallback)((function(e,t){null===a||void 0===a||a(e,t)}),[a]),i=nf[t.selectionType];return i?Object(me.jsx)(i,{parameter:t,value:n,onChange:s}):null},af=function(e){var t,n=qd(),a=n.dashboard,s=n.getParameterState,i=n.setParameterState,c=Object(r.useCallback)((function(e,t){i(t.id,e)}),[i]);return Object(me.jsx)("div",{children:null===(t=a.parameters)||void 0===t?void 0:t.map((function(e){return Object(me.jsx)(rf,{parameter:e,value:s(e.id),onChange:c},e.id)}))})},sf=Object(j.a)((function(e){return Object(O.a)({title:{display:"flex",overflow:"hidden",flexDirection:"row"},layout:{backgroundColor:e.palette.background.default},spaceFiller:{flex:"1 1"}})})),cf=function(e){var t=Object(p.a)().t,n=qd().refreshAllWidgetData,a=Object(r.useCallback)((function(){n()}),[n]);return Object(me.jsx)(R.a,{startIcon:Object(me.jsx)(lo.a,{}),onClick:a,children:t("Refresh")})},of=function(e){var t,n=e.autoRefresh,a=Object(p.a)().t,s=qd().refreshAllWidgetData,i=Object(r.useState)(null!==(t=n.defaultInterval)&&void 0!==t?t:""),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(r.useMemo)((function(){if(!n.minInterval)return tr;var e=tr.indexOf(n.minInterval);return-1===e?tr:tr.slice(e)}),[n.minInterval]),d=Object(r.useMemo)((function(){var e;return o&&null!==(e=function(e){switch(e){case"30s":return 3e4;case"1m":return nr;case"5m":return 3e5;case"15m":return 9e5;case"30m":return 18e5;case"1h":return rr;case"2h":return 72e5;case"1d":return 864e5;default:return}}(o))&&void 0!==e?e:null}),[o]);Object(bd.a)((function(){s()}),d);var f=Object(r.useCallback)((function(e){var t=e.target.value;u(t)}),[]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(S.a,{orientation:"vertical",style:{height:40},variant:"middle"}),Object(me.jsxs)(ze.a,{select:!0,value:o,onChange:f,children:[Object(me.jsx)(J.a,{value:"",children:a("DisableAutoRefresh")}),l.map((function(e){return Object(me.jsx)(J.a,{value:e,children:a(e)},e)}))]})]})},uf=function(e){var t,n=e.dashboard,a=e.widgets,s=sf(),i=Object(r.useMemo)((function(){var e=n.layoutSet;return e?function(e){var t=null===e||void 0===e?void 0:e.layouts;if(!t)return{};var n,r={},a={},s={},i={},c=Object(pe.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;o.widgetsLayouts&&(r[o.name]=o.widgetsLayouts),a[o.name]=o.breakpoint,s[o.name]=o.cols,o.margin&&(i[o.name]=o.margin)}}catch(u){c.e(u)}finally{c.f()}return{layouts:r,breakpoints:a,cols:s,margin:Object(Vn.isPresent)(e.margin)?e.margin:Object.keys(i).length>0?i:void 0}}(e):{}}),[n.layoutSet]),c=Object(es.a)({handleHeight:!1}),o=c.width,u=c.ref;return Object(me.jsxs)(Wd,{dashboard:n,widgets:a,children:[Object(me.jsxs)("div",{className:s.title,children:[Object(me.jsx)(mp,{}),Object(me.jsx)("div",{className:s.spaceFiller}),Object(me.jsx)(cf,{}),!!(null===(t=n.autoRefresh)||void 0===t?void 0:t.enabled)&&Object(me.jsx)(of,{autoRefresh:n.autoRefresh})]}),Object(me.jsx)(af,{}),Object(me.jsx)(S.a,{ref:u}),Object(Vn.isPresent)(o)&&Object(me.jsx)(fd.Responsive,Object(h.a)(Object(h.a)({className:s.layout},i),{},{isDraggable:!1,isResizable:!1,width:o,children:n.widgets.map((function(e){return Object(me.jsx)("div",{children:Object(me.jsx)(bp,{instantiation:e})},e.instantiationId)}))}))]})},lf=function(e){var t=sr().dashboards_FindOne,n=function(){var e=at(),t=e.collections_Aggregate,n=e.collections_FindById,a=e.collections_InsertOne,s=e.collections_DeleteOne,i=e.collections_Replace,c=e.collections_Find,o=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(n,r){var a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{$project:{_id:!1,id:"$_id",name:1,title:1}},{$sort:{name:1}}],(s=null===n||void 0===n?void 0:n.name)&&(a=[{$match:{name:s}}].concat(Object(qn.a)(a))),e.next=5,t({collectionName:rd,stages:a},r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),u=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,r){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({collectionName:rd,id:t},r);case 2:return(a=e.sent).id||(a.id=a._id),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),l=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({collectionName:rd,filter:{name:t}},n);case 2:r=e.sent,a=Object(pe.a)(r);try{for(a.s();!(s=a.n()).done;)(i=s.value).id||(i.id=i._id)}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),d=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({collectionName:rd,filter:{_id:{$in:t}}},n);case 2:r=e.sent,a=Object(pe.a)(r);try{for(a.s();!(s=a.n()).done;)(i=s.value).id||(i.id=i._id)}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),p=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a,s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({collectionName:rd,filter:{name:{$in:t}}},n);case 2:r=e.sent,a=Object(pe.a)(r);try{for(a.s();!(s=a.n()).done;)(i=s.value).id||(i.id=i._id)}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]);return{dashboardWidgets_GetInfos:o,dashboardWidgets_FindOne:u,dashboardWidgets_FindOneByName:l,dashboardWidgets_InsertOne:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({collectionName:rd,document:t},n);case 2:return r=e.sent,e.abrupt("return",r.id);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a]),dashboardWidgets_Replace:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({id:null!==(r=t.id)&&void 0!==r?r:t._id,collectionName:rd,replacement:t},n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[i]),dashboardWidgets_Delete:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({collectionName:rd,id:t},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s]),dashboardWidgets_FindAllById:d,dashboardWidgets_FindAllByName:p,getWidgetDefinition:Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){var n,r,a,s,i,c,o,u,l,d,p,f,h,v,j,O,m,g,x,y,k;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ud(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(n={parameters:void 0,dataSources:void 0,visualization:void 0},Zn(t.widgetJsSpec,{outputValues:n}),r=[],!He(n.parameters)){e.next=16;break}a=0,s=Object.entries(n.parameters);case 7:if(!(a<s.length)){e.next=16;break}if(i=Object(b.a)(s[a],2),c=i[0],o=i[1],He(o)&&Ql.includes(o.type)){e.next=11;break}return e.abrupt("continue",13);case 11:u={name:c,type:o.type,required:"boolean"===typeof o.required&&o.required},r.push(u);case 13:a++,e.next=7;break;case 16:if(l=[],!He(n.dataSources)){e.next=35;break}d=0,p=Object.entries(n.dataSources);case 19:if(!(d<p.length)){e.next=35;break}if(f=Object(b.a)(p[d],2),h=f[0],v=f[1],He(v)&&"string"===typeof v.type){e.next=23;break}return e.abrupt("continue",32);case 23:e.t0=v.type,e.next="query"===e.t0?26:"function"===e.t0?29:32;break;case 26:return(j=cd(h,v))&&l.push(j),e.abrupt("break",32);case 29:return(O=od(h,v))&&l.push(O),e.abrupt("break",32);case 32:d++,e.next=19;break;case 35:if(m=n.visualization,g={type:"markdown",template:"VISUALIZATION NOT DEFINED"},!He(m)||"string"!==typeof m.type){e.next=53;break}e.t1=m.type,e.next="markdown"===e.t1?41:"vega-lite"===e.t1?43:"tabular"===e.t1?48:53;break;case 41:return g.template=m.template,e.abrupt("break",53);case 43:return x="vegaLiteSpec = ",x+=ad(He(m.specification)?m.specification:{}),g={type:"vega-lite",jsSpecification:x+=";",variant:m.variant},e.abrupt("break",53);case 48:return y="tabularConfig = ",y+=ad(He(m.configuration)?m.configuration:{}),g={type:"tabular",jsConfiguration:y+=";"},e.abrupt("break",53);case 53:return k={id:t.id,name:t.name,title:t.title,description:t.description,parameters:r,dataSources:l,visualization:g},e.abrupt("return",k);case 55:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])}}(),a=n.dashboardWidgets_FindAllByName,s=n.getWidgetDefinition,i=mt(t,a,e),c=Object(pt.a)(i,Object(D.a)(E.a.mark((function n(){var r,i,c,o,u,l,d,p;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:return r=n.sent,i=Object(ra.a)(r.widgets.map((function(e){return e.widgetName}))),n.next=6,a(i);case 6:c=n.sent,o=[],u=Object(pe.a)(c);try{for(u.s();!(l=u.n()).done;)d=l.value,o.push(s(d))}catch(f){u.e(f)}finally{u.f()}return n.next=12,Promise.all(o);case 12:return p=n.sent,n.abrupt("return",{dashboard:r,widgets:p});case 14:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),o=c.data,u=c.isValidating,l=c.error,d=c.mutate;return Object(r.useMemo)((function(){return{definitions:o,isValidating:u,error:l,mutate:d}}),[o,u,d,l])},df=function(){var e=Object(p.a)().t,t=Object(d.i)().dashboardId,n=lf(t),r=n.definitions,a=n.isValidating,s=n.error;return s?Object(me.jsx)(yt,{error:s}):a?Object(me.jsx)(xe,{children:e("LoadingDashboardDefinition")}):r?Object(me.jsx)(uf,{dashboard:r.dashboard,widgets:r.widgets}):null},pf=n(2041),ff=n.n(pf),bf=n(2372),hf="https://portal.nimflow.com/",vf="https://studio.nimflow.com/";var jf=["Worker","Maker","Owner"];Object.freeze(jf);var Of=function(){throw new Error("You forgot to wrap your component in <SecurityServiceProvider>.")},mf={users:[],isRefreshingUsers:!1,refreshUsers:Of,inviteUser:Of,updateUserRoles:Of},gf=Object(r.createContext)(mf),xf=function(e){var t=e.children,n=at(),a=n.users_GetUnitUsers,s=n.users_SearchRoles,i=n.users_InviteUsersOrRequestToVerifyEmails,c=n.users_SetRoles,o=Object(pt.a)("users",Object(D.a)(E.a.mark((function e(){var t,n,r,i,c,o,u,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a(),s({})]);case 2:t=e.sent,n=Object(b.a)(t,2),r=n[0],i=n[1],c=r.map((function(e){var t,n;return{fullName:e.fullName,email:e.email,emailVerified:null!==(t=e.emailVerified)&&void 0!==t&&t,picture:null===(n=e.props)||void 0===n?void 0:n.Picture,isWorker:!1,isMaker:!1,isOwner:!1}})),c=Object(Ir.a)((function(e){return e.fullName}),c),o=Object(pe.a)(i),e.prev=9,l=function(){var e=u.value,t=e.roleNames;if(!t||0===t.length)return"continue";var n=c.find((function(t){return t.email===e.emailAddress}));n&&(n.isWorker=t.includes("Worker"),n.isMaker=t.includes("Maker"),n.isOwner=t.includes("Owner"))},o.s();case 12:if((u=o.n()).done){e.next=18;break}if("continue"!==l()){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),o.e(e.t0);case 23:return e.prev=23,o.f(),e.finish(23);case 26:return e.abrupt("return",c);case 27:case"end":return e.stop()}}),e,null,[[9,20,23,26]])}))),{revalidateOnFocus:!1}),u=o.data,l=o.error,d=o.isValidating,p=o.mutate,f=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({emailAddress:t,roleNames:Object.keys(n).filter((function(e){return!!n[e]}))});case 2:return r=[{description:"nimFlow Portal",url:hf}],n.Maker&&r.push({description:"nimFlow Studio",url:vf}),e.next=6,i({invitations:[{apps:r,email:t}]});case 6:return e.next=8,p();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[p,i,c]),v=Object(r.useCallback)(function(){var e=Object(D.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.isWorker&&n.push("Worker"),t.isMaker&&n.push("Maker"),t.isOwner&&n.push("Owner"),e.next=6,c({emailAddress:t.email,roleNames:n});case 6:p((function(e){return e?e.map((function(e){return e.email===t.email?Object(h.a)(Object(h.a)({},e),{},{isWorker:t.isWorker,isMaker:t.isMaker,isOwner:t.isOwner}):e})):e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,c]),j={users:null!==u&&void 0!==u?u:[],userLoadError:l,isRefreshingUsers:d,refreshUsers:p,inviteUser:f,updateUserRoles:v};return Object(me.jsx)(gf.Provider,{value:j,children:t})},yf=function(){return Object(r.useContext)(gf)},kf=Object(j.a)((function(e){return Object(O.a)({formControl:{},formGroup:{marginTop:e.spacing(1)}})})),Cf=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Sf=function(e){var t=void 0;return e?function(e){return Cf.test(String(e).toLowerCase())}(e)||(t=u.a.t("InvalidEmail")):t=u.a.t("EmailRequired"),t},wf=function(e){var t=void 0;return Object.values(e).some((function(e){return!!e}))||(t=u.a.t("AtLeastOneRoleRequired")),t},Tf=function(e){var t=e.open,n=e.onClose,a=Object(p.a)().t,s=kf(),i=Object(r.useState)(),c=Object(b.a)(i,2),o=c[0],u=c[1],d=Object(r.useState)({}),v=Object(b.a)(d,2),j=v[0],O=v[1],m=Object(r.useRef)(!1),g=Object(r.useRef)(!1),x=Object(r.useState)(),y=Object(b.a)(x,2),k=y[0],C=y[1],S=Object(r.useState)(),w=Object(b.a)(S,2),T=w[0],_=w[1],P=mu(),A=Object(l.b)().enqueueSnackbar,N=yf().inviteUser,I=Object(r.useCallback)((function(e){var t=e.target.value;u(t),m.current=!0,C(Sf(t))}),[]),U=Object(r.useCallback)((function(){m.current=!0,C(Sf(o))}),[o]),M=Object(r.useCallback)((function(e){var t=void 0;O((function(n){var r=Object(h.a)(Object(h.a)({},n),{},Object(f.a)({},e.target.name,e.target.checked));return t=wf(r),r})),g.current=!0,_(t)}),[]),$=Object(r.useCallback)((function(){g.current=!0}),[]),L=Object(r.useCallback)(Object(D.a)(E.a.mark((function e(){var t,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current=!0,g.current=!0,t=Sf(o),r=wf(j),!t&&!r){e.next=8;break}return C(t),_(r),e.abrupt("return");case 8:return e.prev=8,e.next=11,N(o,j);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),P(a("CouldNotInviteUser"),e.t0),e.abrupt("return",!1);case 17:A(a("InvitationSucessful"),{variant:"success"}),u(void 0),O({}),null===n||void 0===n||n(!0);case 21:case"end":return e.stop()}}),e,null,[[8,13]])}))),[o,A,N,n,P,j,a]),F=Object(r.useCallback)((function(){null===n||void 0===n||n(!1)}),[n]),z=Object(r.useCallback)((function(e,t){"backdropClick"!==t&&(null===n||void 0===n||n(!1))}),[n]),J=!!k&&m.current,B=!!T&&g.current;return Object(me.jsx)(oi,{children:Object(me.jsxs)(Me.a,{open:t,onClose:z,maxWidth:"sm",fullWidth:!0,children:[Object(me.jsx)(Fe.a,{children:a("InvitingUser")}),Object(me.jsx)(Le.a,{children:Object(me.jsxs)(je.a,{container:!0,spacing:3,children:[Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsx)(ze.a,{label:a("Email"),value:o,onChange:I,onBlur:U,required:!0,fullWidth:!0,InputProps:{required:!0},error:J,helperText:k})}),Object(me.jsx)(je.a,{item:!0,xs:12,children:Object(me.jsxs)($i.a,{required:!0,error:B,component:"fieldset",className:s.formControl,margin:"none",children:[Object(me.jsx)(bf.a,{component:"legend",children:a("Roles")}),Object(me.jsx)($o.a,{className:s.formGroup,children:jf.map((function(e){return Object(me.jsx)(Lo.a,{control:Object(me.jsx)(co.a,{checked:j[e],onBlur:$,onChange:M,name:e,color:"default"}),label:e},e)}))}),Object(me.jsx)(Fi.a,{children:T})]})})]})}),Object(me.jsxs)($e.a,{children:[Object(me.jsx)(R.a,{onClick:L,color:"primary",children:a("Invite")}),Object(me.jsx)(R.a,{onClick:F,color:"primary",children:a("Close")})]})]})})},_f=function(e){return Object(me.jsxs)(Tn.a,Object(h.a)(Object(h.a)({viewBox:"0 0 413.435 365.722"},e),{},{children:[Object(me.jsx)("defs",{children:Object(me.jsxs)("radialGradient",{id:"a",cx:"173.781",cy:"150.833",r:"206.904",gradientTransform:"matrix(-.6101 .66198 -.68292 -.6294 402.986 80.15)",gradientUnits:"userSpaceOnUse",children:[Object(me.jsx)("stop",{"stop-color":"#fff","stop-opacity":".629",offset:"0"}),Object(me.jsx)("stop",{"stop-color":"#fff","stop-opacity":"0",offset:"1"})]})}),Object(me.jsx)("path",{d:"M222.264 25.585s-5.09-11.01-15.546-11.008c-10.457 0-15.56 11.007-15.56 11.007L17.76 325.936s-6.988 9.912-1.76 18.969c5.23 9.056 17.313 7.97 17.313 7.97l346.813.01s12.078 1.097 17.306-7.96c5.229-9.055-1.753-18.976-1.753-18.976z",fill:"#ff0",stroke:"#df1800","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"21.656"}),Object(me.jsx)("path",{d:"M242.837 138.137c-1.03 4.049-19.715 77.85-22.036 86.526-2.32 8.676-4.512 16.898-6.579 24.665 0 0-1.074 4.9-6.691 4.9h-1.694c-5.617 0-6.691-4.9-6.691-4.9-2.067-7.767-4.259-15.989-6.58-24.665-2.319-8.676-21.001-82.477-22.034-86.526-13.239-51.866 85.913-53.3 72.305 0z"}),Object(me.jsx)("circle",{cx:"206.718",cy:"301.477",r:"25.594"}),Object(me.jsx)("path",{d:"M207.422 3.749c-16.633 0-23.865 14.115-24.948 16.426L9.072 320.531h.03c-1.483 2.128-10.085 15.395-1.784 29.777 8.323 14.413 24.173 13.598 26.701 13.38.042-.003.151.004.185 0l346.62.032v-.031c2.576.22 18.396 1.037 26.701-13.35 8.332-14.429-.346-27.75-1.784-29.808h.031L232.462 20.39l-.123-.216c-1.097-2.341-8.304-16.428-24.917-16.426z",fill:"url(#a)",transform:"translate(-.706)"})]}))},Pf=Object(j.a)((function(e){return Object(O.a)({small:{width:e.spacing(3),height:e.spacing(3)}})})),Af=function(){var e=Object(p.a)().t,t=Pf(),n=yf(),a=n.users,s=n.userLoadError,i=n.isRefreshingUsers,c=n.refreshUsers,o=n.updateUserRoles,l=Object(r.useState)(!1),d=Object(b.a)(l,2),f=d[0],h=d[1],v=tt().authenticatedUser,j=Bt(),O=Object(r.useMemo)((function(){return[{field:"picture",title:"",width:50,render:function(e){return Object(me.jsx)($.a,{alt:e.fullName,src:e.picture,className:t.small})},editable:"never"},{field:"fullName",title:u.a.t("FullName"),editable:"never"},{field:"email",title:u.a.t("Email"),editable:"never"},{field:"emailVerified",title:u.a.t("EmailVerified"),type:"boolean",editable:"never"},{field:"isWorker",title:u.a.t("IsWorker"),type:"boolean"},{field:"isMaker",title:u.a.t("IsMaker"),type:"boolean"},{field:"isOwner",title:u.a.t("IsOwner"),type:"boolean",validate:function(t){if(!t.isOwner){var n=a.filter((function(e){return e.isOwner}));if(1===n.length&&n[0].email===t.email)return e("ThereMustBeAtLeastOneOwnerInUnit")}return!0}}]}),[t.small,e,a]),m=Object(r.useMemo)((function(){return e=c,{icon:lo.a,tooltip:u.a.t("RefreshData"),isFreeAction:!0,onClick:e};var e}),[c]),g=Object(r.useMemo)((function(){return e=function(){return h(!0)},{icon:ff.a,tooltip:u.a.t("InviteUser"),isFreeAction:!0,onClick:e};var e}),[]),x=Object(r.useMemo)((function(){return{onRowUpdate:function(){var t=Object(D.a)(E.a.mark((function t(n,r){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!n.isOwner&&(null===v||void 0===v?void 0:v.email)===n.email)){t.next=7;break}return t.next=4,j({title:Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(_f,{style:{verticalAlign:"text-bottom"}})," ",e("LosingOwnershipTitle")]}),description:e("LosingOwnershipDescription")});case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,o(n);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),[v,j,e,o]);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(cu,{columns:O,data:a,title:e("Users"),editable:x,actions:[g,m]}),!i&&!!s&&Object(me.jsx)(fe.a,{severity:"error",children:s.toString()}),!!f&&Object(me.jsx)(Tf,{open:!!f,onClose:function(e){return h(!1)}})]})},Nf=function(){return Object(me.jsx)(oi,{children:Object(me.jsx)(xf,{children:Object(me.jsx)(Af,{})})})},If=In,Rf=Mn.workMyTasks,Uf=Mn.manageTeamTasks,Ef=Mn.dispatchActions,Df=Mn.manage,Mf=function(){var e=Object(p.a)().t,t=Kt().isFeatureSupported,n=Object(me.jsx)(xe,{children:e("SuspenseLoading")});return Object(me.jsx)(r.Suspense,{fallback:n,children:Object(me.jsx)(d.d,{basename:"/portal",children:Object(me.jsxs)(d.b,{path:"/",element:Object(me.jsx)(hr,{}),children:[Object(me.jsx)(yr,{permissions:Rf,path:"tasks",element:Object(me.jsx)(Gl,{})}),Object(me.jsx)(yr,{permissions:Uf,path:"team-tasks",element:Object(me.jsx)(Xl,{})}),Object(me.jsx)(yr,{permissions:If,path:"unassigned-tasks",element:Object(me.jsx)("div",{})}),Object(me.jsx)(yr,{permissions:Ef,path:"dispatch-action",element:Object(me.jsx)(ao,{})}),Object(me.jsx)(yr,{permissions:Df,path:"unit-security",element:Object(me.jsx)(oo,{})}),Object(me.jsx)(yr,{permissions:Rf,path:"tasks-page",element:Object(me.jsx)(Bl,{})}),Object(me.jsx)(d.b,{path:"dashboard/:dashboardId",element:Object(me.jsx)(df,{})}),t(de.Security)&&Object(me.jsx)(yr,{permissions:Df,path:"security",element:Object(me.jsx)(Nf,{})})]})})})},$f=function(e){var t=localStorage.getItem(e);if(Object(Vn.isPresent)(t)&&0!==t.length){var n=JSON.parse(t);if("object"===typeof n&&!Array.isArray(n)&&null!==n)return n}},Lf=function(e){var t=e.storageKey,n=e.persistedAtoms,r=e.children;return Object(W.f)((function(e){for(var r=e.snapshot,a=void 0,s=Array.from(r.getNodes_UNSTABLE({isModified:!0})),i=n.map((function(e){return e.key})),c=0,o=s;c<o.length;c++){var u=o[c];if(i.includes(u.key)){var l=r.getLoadable(u);if("hasValue"===l.state){var d;if(!Object(Vn.isPresent)(a))a=null!==(d=$f(t))&&void 0!==d?d:{};a[u.key]=l.contents}}}if(Object(Vn.isPresent)(a)){var p=JSON.stringify(a);localStorage.setItem(t,p)}})),Object(me.jsx)(me.Fragment,{children:r})},Ff=function(e){var t=e.storageKey,n=e.persistedAtoms,a=e.children,s=Object(r.useCallback)((function(t){var n,r=$f(e.storageKey);if(r)for(var a=function(){var n=Object(b.a)(i[s],2),r=n[0],a=n[1],c=e.persistedAtoms.find((function(e){return e.key===r}));c&&t.set(c,a)},s=0,i=Object.entries(r);s<i.length;s++)a();e.override&&(null===(n=e.initializeState)||void 0===n||n.call(e,t))}),[e]);return Object(me.jsxs)(W.a,{initializeState:s,children:[Object(me.jsx)(Lf,{storageKey:t,persistedAtoms:n}),a]})},zf=n(163),Jf=n(719),Bf={en:il.default,es:cl.a},Wf=function(e){var t,n=e.children,r=null!==(t=u.a.languages.map((function(e){return Bf[e]})).find(Vn.isDefined))&&void 0!==t?t:il.default;return Object(me.jsx)(zf.a,{utils:Jf.default,locale:r,children:n})},qf=[it],Vf=function(){var e=Object(me.jsx)(xe,{});return Object(me.jsx)(r.Suspense,{fallback:e,children:Object(me.jsx)(o.a,{i18n:u.a,children:Object(me.jsx)(Ff,{storageKey:Se.e,persistedAtoms:qf,children:Object(me.jsx)(jn,{persistKey:"theme",children:Object(me.jsx)(zt,{defaultOptions:{title:u.a.t("AreYouSure"),confirmationText:u.a.t("Ok"),cancellationText:u.a.t("Cancel")},children:Object(me.jsx)(l.a,{maxSnack:3,children:Object(me.jsx)(Wf,{children:Object(me.jsx)(c.a,{children:Object(me.jsx)(et,{children:Object(me.jsxs)(Yt,{children:[Object(me.jsx)(Da,{}),Object(me.jsx)(Mf,{})]})})})})})})})})})})};i.a.render(Object(me.jsx)(Vf,{}),document.getElementById("root"))}}]);
//# sourceMappingURL=5.60009870.chunk.js.map