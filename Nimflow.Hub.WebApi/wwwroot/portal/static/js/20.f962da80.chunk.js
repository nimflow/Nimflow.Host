(this["webpackJsonpnimflow-portal"]=this["webpackJsonpnimflow-portal"]||[]).push([[20],{2477:function(e,a,t){"use strict";t.r(a),t.d(a,"SelectionFilter",(function(){return _}));var n=t(2),i=t(5),r=t.n(i),l=t(32),u=t(0),c=t(3),o=t(136),s=t(99),d=t(33),v=t(1294),f=t(1299),m=t(114),p=t(31),g=d.a.t("NullValueText"),h={$schema:"https://vega.github.io/schema/vega-lite/v5.json",data:{name:"data"},width:{step:80},height:100,mark:{type:"bar",stroke:"#0099cc",cursor:"pointer"},params:[{name:"select",select:{type:"point",resolve:"global"}},{name:"highlight",select:{type:"point",on:"mouseover"}}],encoding:{x:{field:"name",type:"ordinal",axis:{title:null,labelAngle:-45,labelFontSize:14,labelLimit:100}},y:{field:"value",type:"quantitative",axis:{title:null}},tooltip:{field:"value",type:"quantitative"},fillOpacity:{condition:{param:"select",value:1},value:.4},strokeWidth:{condition:[{param:"highlight",empty:!1,value:1}],value:0}},config:{scale:{bandPaddingInner:.2}}},y="mark_x_axis_labels",b=function(e){var a,t,n,i,r=e.signals;r||(e.signals=r=[]);var l=r.find((function(e){return"highlight_tuple"===e.name}));if(l){var c,o=l.on;o||(l.on=o=[]);var s,d=null!==(c=o.map((function(e){return e.events})))&&void 0!==c?c:[],v=Object(u.a)(d);try{for(v.s();!(s=v.n()).done;){var f=s.value;if(Array.isArray(f)){var m=f.find((function(e){return"type"in e&&"mouseover"===e.type}));m&&(m.filter="!item().mark || item().mark.name !== '".concat(y,"'"))}}}catch(V){v.e(V)}finally{v.f()}o.push({events:"@".concat(y,":mouseover"),update:'{unit: "", fields: select_tuple_fields, values: [datum.value]}'})}var p=r.find((function(e){return"select_tuple"===e.name}));if(p){var g,h=p.on;h||(p.on=h=[]);var b,_=null!==(g=h.map((function(e){return e.events})))&&void 0!==g?g:[],j=Object(u.a)(_);try{for(j.s();!(b=j.n()).done;){var O=b.value;if(Array.isArray(O)){var k=O.find((function(e){return"type"in e&&"click"===e.type}));k&&(k.filter="!item().mark || item().mark.name !== '".concat(y,"'"))}}}catch(V){j.e(V)}finally{j.f()}h.push({events:"@".concat(y,":click"),update:'{unit: "", fields: select_tuple_fields, values: [datum.value]}',force:!0})}var x=null!==(a=null===(t=e.marks)||void 0===t||null===(n=t[0].from)||void 0===n?void 0:n.data)&&void 0!==a?a:"data_0";r.push({name:"select_extended",on:[{events:{signal:"select"},update:"{select: select, data: data('data_0')}"}]});var A,w=null===(i=e.axes)||void 0===i?void 0:i.find((function(e){return"x"===e.scale}));w&&(w.encode=Object.assign(null!==(A=w.encode)&&void 0!==A?A:{},{labels:{name:y,interactive:!0,update:{tooltip:{signal:'datum.value + ": " + format(data(\''.concat(x,"')[indexof(pluck(data('").concat(x,"'), 'name'), datum.value)].value, \"\")")}}}}));return e},_=function(e){var a=e.column,t=e.value,i=e.onChange,u=e.getCandidates,d=Object(o.a)(),y=function(e,a){var t=Object(c.useRef)(),n=Object(s.a)("/ColumnCandidates/".concat(e),Object(l.a)(r.a.mark((function e(){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return(i=e.sent).forEach((function(e){null===e.name&&(e.name=g)})),Object(f.a)(null===(n=t.current)||void 0===n?void 0:n.data,i)||(t.current={data:i}),e.abrupt("return",t.current);case 6:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}),i=n.data,u=n.isValidating,o=n.mutate,d=Object(c.useRef)({isValidating:u,revalidate:o});return d.current={isValidating:u,revalidate:o},Object(c.useEffect)((function(){d.current.isValidating||d.current.revalidate()}),[a]),{data:i,isValidating:u}}(a.field,u),_=y.data,j=y.isValidating,O=Object(c.useMemo)((function(){var e;return _&&0!==_.data.length&&"selection"===(null===t||void 0===t?void 0:t.type)?Object(n.a)(Object(n.a)({},h),{},{params:null===(e=h.params)||void 0===e?void 0:e.map((function(e){var a;return"select"!==e.name?e:Object(n.a)(Object(n.a)({},e),{},{value:{x:null!==(a=t.value)&&void 0!==a?a:g}})}))}):h}),[_,t]),k=Object(c.useMemo)((function(){return{select_extended:function(e,a){var t=a.select,n=void 0;if("name"in t&&Array.isArray(t.name)&&"string"===typeof t.name[0])n=t.name[0];else if("_vgsid_"in t&&Array.isArray(t._vgsid_)&&t._vgsid_.length>0){var r=t._vgsid_[0];if("string"===typeof r)n=r;else{var l,u=a.data;if(Array.isArray(u))n=null===(l=u.find((function(e){return e._vgsid_===r})))||void 0===l?void 0:l.name}}null===i||void 0===i||i(void 0!==n?{type:"selection",value:n===g?null:n}:void 0)}}}),[i]);if(!_&&j||!O)return Object(p.jsx)(m.b,{});var x="dark"===d.palette.type?"dark":void 0;return Object(p.jsx)(v.a,{variant:"verticalBarChart",spec:O,data:_,theme:x,signalListeners:k,actions:!1,patch:b})};a.default=_}}]);
//# sourceMappingURL=20.f962da80.chunk.js.map