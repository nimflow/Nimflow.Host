(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[89],{3128:function(e,t,n){"use strict";n.r(t),n.d(t,"CollectionDefinitionUpdater",(function(){return m}));var r=n(22),a=n(3),c=n(8),i=n.n(c),u=n(6),o=n(3161),s=n(537),l=n(9),f=n(1285),p=n(2138),b=n(2028),d=n(136),m=function(){var e=Object(s.i)().id,t=Object(o.a)().t,n=Object(u.useState)(),c=Object(a.a)(n,2),m=c[0],v=c[1],h=Object(f.a)(),j=h.searchCollectionDefinitions,O=h.updateCollectionDefinition,w=h.getCollectionDefinition;Object(u.useEffect)((function(){e&&w(e).then((function(e){v(e)}))}),[w,e]);var x=Object(u.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:return n=e.sent,v(n),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O]),k=Object(u.useMemo)((function(){return b.a.shape({collectionName:b.a.fields.collectionName.concat(l.m().defined().test({message:function(e){var n=e.value;return t("CollectionDefinitionNameAlreadyExists",{name:n})},test:function(){var t=Object(r.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,j({collectionName:n});case 4:return r=t.sent,t.abrupt("return",0===r.filter((function(t){return t.collectionName===n&&t.id!==e})).length);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))})}),[e,j,t]);return m?Object(d.jsx)(p.a,{value:m,schema:k,onSave:x}):null};t.default=m}}]);
//# sourceMappingURL=89.1c5a8001.chunk.js.map