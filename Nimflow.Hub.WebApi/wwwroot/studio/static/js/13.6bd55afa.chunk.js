(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[13],{1093:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3303),i=n(129),c=function(e){return Object(i.jsxs)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 200 200"},e),{},{children:[Object(i.jsx)("path",{d:"M136 12.9V20h3.3c5.2 0 11.9 3.9 14 8.2 1.8 3.7 1.8 4.1-.3 18-4 26.1-2 38.7 8.1 50.2l4.1 4.6-4.2 4.6c-10 10.8-12.1 23.8-8.1 50 2.4 15.6 2.2 17.5-2.8 21.7-3.3 2.7-4.3 3.1-10.3 4.2l-3.8.6v6.9c0 3.9.4 7 .8 7 3.5 0 13.6-2.6 17.8-4.6 5.9-2.8 12.8-9.7 15.2-15.2 2.3-5.3 1.9-19.3-.8-32.1-2.9-13.9-3.1-24.5-.4-29.1 2.5-4.4 7.6-7 13.7-7h4.7V94.1l-6.1-.7c-14.4-1.6-17.2-10.8-11.5-37.9 2.4-11.7 2.9-18.9 1.6-24.9-2.7-13.2-13.9-22.2-30.2-24.3l-4.8-.6v7.2zM51 8.4c-10.6 3-20.4 11.3-22.8 19.4-1.9 6.2-1.4 17.6 1.3 31.2 3 15.1 3.1 22.1.6 27.7-2.4 5.1-4.9 6.6-12.6 7.3l-6 .5-.3 7.1-.3 7.2 6.1.4c6.9.5 10.6 2.7 13.2 7.9 2.5 4.7 2.3 12.4-.7 27.3-2.8 13.9-3.2 26-1.1 31.9 3.9 10.8 14.3 17.7 30.4 20.2l4.3.7-.3-7.4-.3-7.3-5.3-.6c-5.8-.8-9.3-2.7-11.8-6.4-1.9-2.8-1.7-5.7 1.1-27.4 1.5-10.7 1.6-14.7.8-20.2-1.4-8.5-4.8-16.1-10.1-22l-4.1-4.6 3.5-3.4c10.9-10.5 13.4-25.1 8.9-51-2.2-12.5-2-16.2 1.2-20 3.2-3.7 7.8-5.9 12.8-5.9H63V7l-3.7.1c-2.1 0-5.8.6-8.3 1.3z"}),Object(i.jsx)("path",{d:"M112 27.2c-3.3 1.7-5.7 4.1-9.2 9.3-4.9 7.3-15.9 31-19.7 42.7-1.3 3.8-2.6 6.8-2.9 6.8-.4 0-2-2.3-3.7-5.1C72 73.2 66.9 69 62 69c-4.2 0-9 1.7-9 3.3 0 .5 2.2 3.4 5 6.4 5 5.4 14.8 19.8 20.9 30.6 1.8 3.2 3.5 5.7 3.6 5.5.2-.2 3.1-7.9 6.5-17.3 13.6-37.1 19.8-48.8 33.1-62.9 8.7-9.2 8.7-9.6-.5-9.6-3.4 0-6.7.8-9.6 2.2zM141.5 92c-.4.6-2 .8-3.9.5-3-.6-3.5-.2-12.5 10.4-5.2 6.1-9.8 11.1-10.2 11.1-.4 0-2.8-4.3-5.4-9.6-4.1-8.5-4.9-9.5-6.8-9-1.2.3-3.4.6-4.9.6-4.6 0-4.4 3.2 1 18.5l4.9 13.9-10.8 14.2c-13.5 17.9-16.9 23.6-16.9 29 0 5.7 2.8 9.2 6.9 8.6 2.6-.4 3.9-1.8 9.2-10.6C100 156.8 110 142 110.9 142c.3.1 3.8 4.9 7.6 10.8 8.1 12.4 9.6 13.1 13.3 6.2l2.4-4.5-6.1-13.3c-3.4-7.3-6.1-13.7-6.1-14.2 0-.4 5.2-7.5 11.5-15.7 6.3-8.1 11.4-15.5 11.5-16.4 0-2.2-2.6-4.4-3.5-2.9z"})]}))}},1213:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return D}));var a=n(0),r=n(1),i=n(14),c=n(3),o=n(70),s=n(9),u=n(532),l=n(49),d=n(2671),f=n.n(d),j=n(2672),b=n.n(j),v=n(18),h=n(2104),m=n(2105),p=n(3303),O=n(129),y=function(e){return Object(O.jsx)(p.a,Object(c.a)(Object(c.a)({viewBox:"0 0 512 512"},e),{},{children:Object(O.jsx)("path",{d:"M369,262.5H143a6.5,6.5,0,0,1,0-13H369a6.5,6.5,0,0,1,0,13Z"})}))},g=["taggingType"],x=["milestone","final","tag","metric"],k=function(e){var t=e.taggingType,n=Object(o.a)(e,g);return"milestone"===t?Object(O.jsx)(h.a,Object(c.a)({},n)):"final"===t?Object(O.jsx)(m.a,Object(c.a)({},n)):"tag"===t?Object(O.jsx)(f.a,Object(c.a)({},n)):"metric"===t?Object(O.jsx)(b.a,Object(c.a)({},n)):Object(O.jsx)(y,Object(c.a)({},n))},C=function(e){var t,n,a=null!==(t=null===(n=e.selectors)||void 0===n?void 0:n.map((function(e){return e.key})).filter(l.isDefined))&&void 0!==t?t:[],r=e.actions.flatMap((function(e){return Object.keys(e.jsSetters)})),c=e.tasks.flatMap((function(e){return e.validResponses})).flatMap((function(e){return Object.keys(e.jsSetters)})),o=[].concat(Object(i.a)(a),Object(i.a)(r),Object(i.a)(c));return[e.milestones.filter((function(e){return o.includes(e.name)})),e.tags?e.tags.filter((function(e){return o.includes(e.name)})):[],e.metrics?e.metrics.filter((function(e){return o.includes(e.name)})):[]]},S=function(e){return v.a.t("milestone"===e?"Milestone":"final"===e?"FinalMilestone":"tag"===e?"Tag":"metric"===e?"Metric":"Standard")},N="milestones",T="tags",w="metrics",D=function(){var e=Object(u.f)(),t=e.register,n=e.watch,c=e.getValues,o=e.setValue,l=e.control,d=n(N),f=n(T),j=n(w);Object(s.useEffect)((function(){l.fieldsRef.current.milestones||t(N),l.fieldsRef.current.tags||t(T),l.fieldsRef.current.metrics||t(w)}));var b=Object(s.useCallback)((function(e){if(0!==(e=Array.isArray(e)?e:[e]).length){var t=f.filter((function(t){return!e.includes(t.name)}));t.length<f.length&&o(T,t);var n=d.filter((function(t){return!e.includes(t.name)}));n.length<d.length&&o(N,n);var a=j.filter((function(t){return!e.includes(t.name)}));a.length<j.length&&o(w,a)}}),[d,f,j,o]),v=Object(s.useCallback)((function(e){if(f?f.find((function(t){return t.name===e})):void 0)return"tag";if(j?j.find((function(t){return t.name===e})):void 0)return"metric";var t=d.find((function(t){return t.name===e}));return t?t.final?"final":"milestone":void 0}),[d,f,j]),h=Object(s.useCallback)((function(e,t){var n=f?f.find((function(t){return t.name===e})):void 0,a=j?j.find((function(t){return t.name===e})):void 0,r=d.find((function(t){return t.name===e})),c="tag"===t?{name:e}:void 0,s="metric"===t?{name:e}:void 0,u="milestone"===t||"final"===t?{name:e,final:"final"===t}:void 0;if(!(n&&c||a&&s||r&&u&&r.final===u.final)){var l=f,b=j,v=d;n&&(l=f?f.filter((function(e){return e!==n})):[]),a&&(b=j?j.filter((function(e){return e!==a})):[]),r&&(v=d.filter((function(e){return e!==r}))),c&&(l=[].concat(Object(i.a)(l),[c])),s&&(b=[].concat(Object(i.a)(b),[s])),u&&(v=[].concat(Object(i.a)(v),[u])),l!==f&&o(T,l,{shouldDirty:!0}),b!==j&&o(w,b,{shouldDirty:!0}),v!==d&&o(N,v,{shouldDirty:!0})}}),[d,o,f,j]),m=Object(s.useCallback)((function(e){var t=v(e);switch(t){case"milestone":t="final";break;case"final":t="tag";break;case"tag":t="metric";break;case"metric":t=void 0;break;default:t="milestone"}h(e,t)}),[v,h]),p=Object(s.useCallback)((function(){var e=c(),t=C(e),n=Object(r.a)(t,3),a=n[0],i=n[1],s=n[2];a.length!==e.milestones.length&&o(N,a,{shouldDirty:!0}),e.tags&&i.length!==e.tags.length&&o(T,i,{shouldDirty:!0}),e.metrics&&s.length!==e.metrics.length&&o(w,s,{shouldDirty:!0})}),[c,o]);return{taggings:Object(s.useMemo)((function(){var e,t={},n=Object(a.a)(d);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.name]=r.final?"final":"milestone"}}catch(u){n.e(u)}finally{n.f()}if(f){var i,c=Object(a.a)(f);try{for(c.s();!(i=c.n()).done;){t[i.value.name]="tag"}}catch(u){c.e(u)}finally{c.f()}}if(j){var o,s=Object(a.a)(j);try{for(s.s();!(o=s.n()).done;){t[o.value.name]="metric"}}catch(u){s.e(u)}finally{s.f()}}return t}),[d,f,j]),getTaggingType:v,setTaggingType:h,toggleTagging:m,removeTaggings:b,removeInvalidTaggings:p}}},1257:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return j}));var a=n(3),r=n(2),i=n(8),c=n(19),o=n(13),s=n(16),u=n(17),l=n(1443),d=n(1985),f=function(e){return"responseName"in e},j=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,a,i,c){var o;return Object(r.a)(this,n),(o=t.call(this,{type:e})).instance=a,o.instanceId=i,o.title=c,o.inPort=void 0,o.outPort=void 0,o.hasInPort()&&(o.inPort=o.addContextTypePort(!0,"in")),o.hasOutPort()&&(o.outPort=o.addContextTypePort(!1,"out")),o}return Object(i.a)(n,[{key:"addContextTypePort",value:function(e,t,n){var a=new d.a(e,t,n);return this.addPort(a),a.setLocked(!0),a}},{key:"hasInPort",value:function(){return!0}},{key:"hasOutPort",value:function(){return!0}},{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{instance:this.instance,instanceId:this.instanceId})}},{key:"deserialize",value:function(e){Object(c.a)(Object(o.a)(n.prototype),"deserialize",this).call(this,e),this.instance=e.data.instance}},{key:"dispatchCommand",value:function(e){this.fireEvent({command:e,node:this},"commandInvoked")}}]),n}(l.NodeModel)},1441:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3303),i=n(129),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 16 16",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.414"},e),{},{children:Object(i.jsx)("path",{d:"M8.017 16c.32-.003.636-.02.952-.062.72-.092 1.43-.29 2.1-.576.94-.402 1.8-.982 2.53-1.698.67-.66 1.23-1.436 1.63-2.287.34-.732.58-1.518.68-2.32.1-.774.09-1.565-.03-2.335-.1-.64-.28-1.265-.53-1.86-.16-.374-.35-.735-.57-1.08C14 2.556 12.87 1.57 11.57.912c-.463-.237-.95-.43-1.45-.58h-.003c.08.042.16.088.23.134.08.05.16.098.234.15.38.257.73.552 1.04.888.71.763 1.2 1.7 1.48 2.696.19.656.29 1.334.33 2.014.03.496.03.995-.03 1.488-.1.847-.37 1.675-.82 2.4-.33.535-.76 1.013-1.27 1.39-.83.62-1.92.99-2.96.744-.17-.04-.34-.098-.5-.172-.18-.083-.36-.185-.52-.3-.31-.207-.59-.457-.83-.738-.29-.347-.53-.742-.7-1.166-.21-.538-.32-1.116-.33-1.695-.02-.85.15-1.704.57-2.45.28-.496.66-.932 1.11-1.28.15-.118.31-.222.47-.32l.01-.004c-.31-.07-.64-.1-.96-.08-.28.02-.55.07-.82.16-.24.08-.47.18-.68.3-.17.1-.34.21-.49.33-.14.12-.28.24-.41.37-.75.77-1.18 1.79-1.35 2.84-.1.65-.1 1.31-.06 1.97.07.93.26 1.86.63 2.71.23.53.53 1.02.9 1.45.57.66 1.29 1.17 2.09 1.49.45.18.93.31 1.41.36.05.01.1.01.14.01zm-1.958-.265c-.11-.047-.21-.1-.3-.152-.1-.055-.2-.113-.3-.173-.39-.242-.74-.525-1.06-.852-.73-.758-1.22-1.712-1.5-2.723-.19-.69-.29-1.402-.33-2.116-.03-.47-.02-.93.03-1.39.09-.84.33-1.67.75-2.39.3-.53.71-1 1.19-1.37.33-.25.7-.46 1.09-.6.55-.2 1.14-.26 1.71-.18.22.03.44.08.64.15.02 0 .02 0 .03.02.01.01.03.01.04.02.03.01.07.03.11.05.16.08.32.18.47.28.6.42 1.09 1 1.4 1.67.28.61.41 1.29.42 1.96.01.72-.12 1.44-.43 2.1-.37.79-1 1.46-1.76 1.89.06.02.12.03.18.05.15.03.3.05.46.05.98.03 1.93-.44 2.63-1.1.13-.12.25-.25.36-.39.15-.18.29-.36.41-.55.16-.25.29-.5.41-.77.15-.36.27-.73.34-1.11.13-.67.14-1.35.1-2.02-.09-1.35-.45-2.7-1.23-3.82-.12-.17-.24-.33-.37-.48-.22-.25-.46-.48-.71-.69-.28-.23-.59-.44-.91-.61C9.6.34 9.21.19 8.8.09L8.6.05C8.46.03 8.32.02 8.177.01 7.96 0 7.73.003 7.5.02c-.47.03-.943.106-1.41.224-2.24.578-4.2 2.14-5.243 4.21-.334.66-.57 1.366-.708 2.09-.16.83-.18 1.684-.07 2.52.08.68.25 1.35.52 1.987.15.38.34.75.55 1.1.73 1.19 1.79 2.16 3.01 2.83.46.26.94.46 1.44.63.15.05.3.1.46.14z"})}))}},1442:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3303),i=n(129),c=function(e){return Object(i.jsxs)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 150 100"},e),{},{children:[Object(i.jsxs)("g",{transform:"translate(0.000000,95.000000) scale(0.100000,-0.100000)",stroke:"none",id:"g6",children:[Object(i.jsx)("path",{d:"M161 937 c-49 -24 -62 -65 -70 -221 -7 -156 -15 -177 -67 -190 -18 -5 -24 -13 -24 -35 0 -22 7 -31 30 -41 48 -20 57 -50 62 -212 4 -121 8 -152 24 -180 25 -42 91 -67 131 -49 36 16 28 52 -14 63 -18 5 -36 14 -40 21 -4 6 -10 75 -13 152 -6 151 -22 208 -69 231 l-22 11 25 17 c47 30 59 70 65 219 6 146 10 157 58 157 28 0 37 14 29 46 -5 20 -12 24 -44 24 -20 0 -48 -6 -61 -13z",id:"path8"}),Object(i.jsx)("path",{d:"M1204 936 c-11 -29 1 -51 28 -54 49 -6 58 -33 58 -172 0 -141 13 -185 64 -209 l29 -14 -25 -13 c-46 -24 -61 -75 -68 -229 -3 -77 -9 -146 -13 -152 -4 -7 -22 -16 -40 -21 -22 -6 -33 -15 -35 -30 -5 -32 33 -47 86 -32 66 17 74 38 83 210 8 162 23 214 66 231 36 13 32 64 -6 77 -46 16 -54 44 -60 202 -7 158 -17 191 -67 210 -38 15 -94 12 -100 -4z",id:"path10"}),Object(i.jsx)("path",{d:"M467 923 c-15 -2 -43 -20 -62 -38 -45 -45 -47 -71 -43 -450 4 -430 -23 -400 368 -400 395 0 365 -37 365 445 0 479 27 444 -345 446 -140 1 -268 0 -283 -3z m553 -73 c19 -19 20 -33 20 -372 0 -313 -2 -353 -17 -370 -15 -17 -37 -18 -290 -18 -260 0 -274 1 -293 20 -19 19 -20 33 -20 370 0 337 1 351 20 370 19 19 33 20 290 20 257 0 271 -1 290 -20z",id:"path12"}),Object(i.jsx)("path",{d:"M500 740 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path14"}),Object(i.jsx)("path",{d:"M500 590 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path16"}),Object(i.jsx)("path",{d:"M500 410 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path18"}),Object(i.jsx)("path",{d:"M500 240 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path20"})]})," "]}))}},1984:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n(3),i=n(427),c=function(e){var t,n=Object(r.a)({$schema:"http://nimflow.com/schemas/context-type.schema.json",name:e.name},Object(i.a)(e));e.jsonSchema&&(n.jsonSchema=JSON.parse(e.jsonSchema)),(null===(t=e.settings)||void 0===t?void 0:t.uiSchemaCommon)&&(n.settings.uiSchemaCommon=JSON.parse(e.settings.uiSchemaCommon));var c,o=Object(a.a)(n.actions);try{for(o.s();!(c=o.n()).done;){var s=c.value.settings,u=null===s||void 0===s?void 0:s.uiSchema;"string"===typeof u&&(s.uiSchema=JSON.parse(u))}}catch(b){o.e(b)}finally{o.f()}var l,d=Object(a.a)(n.tasks.flatMap((function(e){return e.validResponses})));try{for(d.s();!(l=d.n()).done;){var f=l.value.settings,j=null===f||void 0===f?void 0:f.uiSchema;"string"===typeof j&&(f.uiSchema=JSON.parse(j))}}catch(b){d.e(b)}finally{d.f()}return n}},1985:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(2),r=n(8),i=n(16),c=n(17),o=n(1443),s=n(1996),u=10,l=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var c;return Object(a.a)(this,n),(c=t.call(this,e,r,i)).height=u,c.width=u,c}return Object(r.a)(n,[{key:"createLinkModel",value:function(){return new s.a}}]),n}(o.DefaultPortModel)},1996:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(3),r=n(2),i=n(8),c=n(19),o=n(13),s=n(16),u=n(17),l=n(1443),d=n(1257),f=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,n),t.call(this,{type:"contextTypeLink",width:2,selectedOutgoingColor:e.selectedOutgoingColor||"lime"})}return Object(i.a)(n,[{key:"getInstanceId",value:function(){var e,t,n=null===(e=this.sourcePort)||void 0===e?void 0:e.getNode(),a=null===(t=this.sourcePort)||void 0===t?void 0:t.getNode();return n instanceof d.a&&a instanceof d.a?"edge:".concat(n.instanceId,"->").concat(a.instanceId):"UnknownEdge"}},{key:"getSelectedOutgoingColor",value:function(){return this.options.selectedOutgoingColor}},{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{selectedOutgoingColor:this.getSelectedOutgoingColor()})}},{key:"deserialize",value:function(e){Object(c.a)(Object(o.a)(n.prototype),"deserialize",this).call(this,e),this.options.selectedOutgoingColor=e.data.selectedOutgoingColor}}]),n}(l.DefaultLinkModel)},1997:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(8),c=n(19),o=n(13),s=n(16),u=n(17),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(r.a)(this,n),(a=t.call(this,"actionType",i,c,null!==(e=i.name)&&void 0!==e?e:"")).isInitialAction=o,a}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{isInitialAction:this.isInitialAction})}},{key:"hasInPort",value:function(){return!1}}]),n}(n(1257).a)},1998:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(2),i=n(8),c=n(16),o=n(17),s=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e,i){var c,o;if(Object(r.a)(this,n),o=t.call(this,"taskType",e,i,null!==(c=e.name)&&void 0!==c?c:""),e.validResponses){var s,u=Object(a.a)(e.validResponses.filter((function(e){return e.name})));try{for(u.s();!(s=u.n()).done;){var l=s.value;o.addContextTypePort(!1,"response-".concat(l.name))}}catch(d){u.e(d)}finally{u.f()}}return o}return Object(i.a)(n,[{key:"getResponsePort",value:function(e){var t;return null!==(t=this.getPort("response-".concat(e.name)))&&void 0!==t?t:void 0}},{key:"hasOutPort",value:function(){return!1}}]),n}(n(1257).a)},1999:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(8),c=n(19),o=n(13),s=n(16),u=n(17),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return Object(r.a)(this,n),(a=t.call(this,"selector",i,c,null!==(e=i.key)&&void 0!==e?e:"")).taggingType=o,a}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{taggingType:this.taggingType})}}]),n}(n(1257).a)},2e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=/(?:^|[^a-zA-Z0-9_.]|\.\.\.)state\.([a-zA-Z_][a-zA-Z0-9_]*)/g,i=function(e){var t,n=[];if(!e)return n;Array.isArray(e)||(e=[e]);var i,c=Object(a.a)(e);try{for(c.s();!(i=c.n()).done;)for(var o=i.value;null!==(t=r.exec(o));)n.includes(t[1])||n.push(t[1])}catch(s){c.e(s)}finally{c.f()}return n}},2104:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3303),i=n(129),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsx)("path",{d:"M19,14V4H6V3H5v18H4v1h3v-1H6v-7H19z M6,5h12v8H6V5z M14.6569214,6.5l0.7070312,0.7071533l-4.2426147,4.2426758   L9,9.3284912l0.7070923-0.7070923l1.4143066,1.4142456L14.6569214,6.5z"})}))}},2105:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3303),i=n(129),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsxs)("g",{children:[Object(i.jsx)("path",{d:"M15,6V4H6V3H5v19h1v-8h5v2h8V6H15z M18,11h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v-2H8v2H6v-2h2V9H6V7h2V5h2v2h2V5h2v2h2v2h2V11z"}),Object(i.jsx)("rect",{x:"8",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"10",y:"9",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"11",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"14",y:"9",width:"2",height:"2"})]})}))}},2106:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return g}));var a=n(1),r=n(0),i=n(3),c=n(2),o=n(8),s=n(16),u=n(17),l=n(1985),d=n(1996),f=n(1443),j=n(201),b=n(1997),v=n(1998),h=n(2123),m=n(1999),p=n(2e3),O=["actionTypes","states","selectors","taskTypes"];Object.freeze(O);var y=function(e){return"string"===typeof e?"state-".concat(e):"key"in e?"selector-".concat(e.key):"validResponses"in e?"task-".concat(e.name):"jsSetters"in e?"action-".concat(e.name):"UNKNOWN"};Object.freeze(["pinned","fixed"]);var g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),(e=t.call(this,a)).pinStatuses={},e}return Object(o.a)(n,[{key:"addContextTypeNode",value:function(e){var t=this;this.addNode(e);var n={selectionChanged:function(n){t.fireEvent(Object(i.a)(Object(i.a)({},n),{},{node:e}),"nodeSelectionChanged")},commandInvoked:function(e){t.fireEvent(e,"contextTypeNodeCommandInvoked")}};e.registerListener(n)}},{key:"removeContextTypeNode",value:function(e){e.clearListeners(),this.removeNode(e)}},{key:"reconcileNodeList",value:function(e,t,n){var a,i=this,c=new Map,o=Object(r.a)(t);try{var s=function(){var t=a.value,r=e.findIndex((function(e){return e.instance===t}));if(r>=0)c.set(t,e[r]),e.splice(r,1);else{var o=n(t);c.set(t,o),i.addContextTypeNode(o)}};for(o.s();!(a=o.n()).done;)s()}catch(f){o.e(f)}finally{o.f()}var u,l=Object(r.a)(e);try{for(l.s();!(u=l.n()).done;){var d=u.value;this.removeContextTypeNode(d)}}catch(f){l.e(f)}finally{l.f()}return c}},{key:"inferReferencedState",value:function(e,t,n){var a={};function i(e){return e in a||(a[e]={actionTypes:new Set,taskTypes:new Set,responses:new Map,selectors:new Set}),a[e]}var c,o=Object(r.a)(e);try{for(o.s();!(c=o.n()).done;){var s=c.value;if(s.jsSetters)for(var u=0,l=Object.keys(s.jsSetters);u<l.length;u++){i(l[u]).actionTypes.add(s)}}}catch(E){o.e(E)}finally{o.f()}var d,f=Object(r.a)(t);try{for(f.s();!(d=f.n()).done;){var j=d.value,b=[];j.jsCondition&&b.push(j.jsCondition);var v,h=Object(r.a)(Object(p.a)(b));try{for(h.s();!(v=h.n()).done;){i(v.value).taskTypes.add(j)}}catch(E){h.e(E)}finally{h.f()}if(j.validResponses){var m,O=Object(r.a)(j.validResponses);try{for(O.s();!(m=O.n()).done;)for(var y=m.value,g=0,x=Object.keys(y.jsSetters);g<x.length;g++){i(x[g]).responses.set(y,j)}}catch(E){O.e(E)}finally{O.f()}}}}catch(E){f.e(E)}finally{f.f()}if(n){var k,C=Object(r.a)(n);try{for(C.s();!(k=C.n()).done;){var S=k.value;if(S.dependencies){var N,T=Object(r.a)(S.dependencies);try{for(T.s();!(N=T.n()).done;){i(N.value).selectors.add(S)}}catch(E){T.e(E)}finally{T.f()}}var w,D=Object(r.a)(Object(p.a)(S.jsExpression));try{for(D.s();!(w=D.n()).done;){i(w.value).selectors.add(S)}}catch(E){D.e(E)}finally{D.f()}}}catch(E){C.e(E)}finally{C.f()}}return a}},{key:"classifyNodes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,i=t.map((function(){return[]})),c=Object(r.a)(this.getNodes());try{for(c.s();!(a=c.n()).done;)for(var o=a.value,s=0;s<i.length;s++)o instanceof t[s]&&i[s].push(o)}catch(u){c.e(u)}finally{c.f()}return i}},{key:"buildContextTypeGraph",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,u=[],l=[],d=this.inferReferencedState(e,t,i),f=[],j={},b=Object(r.a)(e);try{for(b.s();!(n=b.n()).done;){var v=n.value;if(v.name){var h={type:"actionTypes",actionType:v},m=!1!==(null===s||void 0===s?void 0:s.includes("actionTypes"))?u:f;m.push(h),j[v.name]=h}}}catch(W){b.e(W)}finally{b.f()}var p,O=Object.keys(d).filter((function(e){return-1===i.findIndex((function(t){return t.key===e}))})),y={},g=Object(r.a)(O);try{for(g.s();!(p=g.n()).done;){var x=p.value,k={type:"states",name:x,tagging:c[x]},C=!1!==(null===s||void 0===s?void 0:s.includes("states"))?u:f;C.push(k),y[x]=k}}catch(W){g.e(W)}finally{g.f()}var S,N={},T=Object(r.a)(i);try{for(T.s();!(S=T.n()).done;){var w=S.value;if(w.key){var D={type:"selectors",selector:w,tagging:c[w.key]},E=!1!==(null===s||void 0===s?void 0:s.includes("selectors"))?u:f;E.push(D),N[w.key]=D}}}catch(W){T.e(W)}finally{T.f()}var P,M={},z=Object(r.a)(t);try{for(z.s();!(P=z.n()).done;){var A=P.value;if(A.name){var V={type:"taskTypes",taskType:A},I=!1!==(null===s||void 0===s?void 0:s.includes("taskTypes"))?u:f;I.push(V),M[A.name]=V}}}catch(W){z.e(W)}finally{z.f()}for(var R=function(){var e,t=Object(a.a)(q[J],2),n=t[0],r=t[1],i=null!==(e=y[n])&&void 0!==e?e:N[n];if(!i)return"continue";Array.from(r.actionTypes).forEach((function(e){(null===e||void 0===e?void 0:e.name)&&l.push({fromNode:j[e.name],toNode:i})})),Array.from(r.responses).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];(null===r||void 0===r?void 0:r.name)&&n.name&&l.push({fromNode:M[r.name],fromPort:n.name,toNode:i})})),Array.from(r.taskTypes).forEach((function(e){(null===e||void 0===e?void 0:e.name)&&l.push({fromNode:i,toNode:M[e.name]})})),Array.from(r.selectors).forEach((function(e){(null===e||void 0===e?void 0:e.key)&&l.push({fromNode:i,toNode:N[e.key]})}))},J=0,q=Object.entries(d);J<q.length;J++)R();var L=function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){for(var a=t.value,i=[],c=[],o=l.length-1;o>=0;o--){var s=l[o],d=void 0;s.fromNode===a?d=i:s.toNode===a&&(d=c),d&&(d.push(s),l.splice(o,1))}for(var f=0,b=i;f<b.length;f++){var v,h=b[f],m=Object(r.a)(c);try{var p=function(){var e=v.value,t={fromNode:e.fromNode,fromPort:e.fromPort,toNode:h.toNode};t.fromNode!==t.toNode&&-1===l.findIndex((function(e){return e.fromNode===t.fromNode&&e.fromPort===t.fromPort&&e.toNode===t.toNode}))&&l.push(t)};for(m.s();!(v=m.n()).done;)p()}catch(W){m.e(W)}finally{m.f()}}var O=u.indexOf(a);switch(O>=0&&u.splice(O,1),a.type){case"actionTypes":delete j[a.actionType.name];break;case"selectors":delete N[a.selector.key];break;case"states":delete y[a.name];break;case"taskTypes":delete M[a.taskType.name]}}}catch(W){n.e(W)}finally{n.f()}},H={},K=[];do{L(K=Object.values(N).filter((function(e){return"final"===e.tagging||l.findIndex((function(t){return t.fromNode===e&&("selectors"!==t.toNode.type||!o.includes(t.toNode.selector.key))}))>-1?(H[e.selector.key]="fixed",!1):o.includes(e.selector.key)?(H[e.selector.key]="pinned",!1):(delete H[e.selector.key],!0)})))}while(K.length>0);var B=Object.values(y).filter((function(e){return"final"===e.tagging||l.findIndex((function(t){return t.fromNode===e&&("selectors"!==t.toNode.type||!o.includes(t.toNode.selector.key))}))>-1?(H[e.name]="fixed",!1):o.includes(e.name)?(H[e.name]="pinned",!1):(delete H[e.name],!0)}));L(B),L(f);var F={nodes:u,links:l};return[F,H]}},{key:"updateData",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6?arguments[6]:void 0,f=this.classifyNodes(b.a,v.a,h.a,m.a),p=Object(a.a)(f,4),O=p[0],g=p[1],x=p[2],k=p[3],C=!1,S=this.buildContextTypeGraph(e,t,i,c,s,u),N=Object(a.a)(S,2),T=N[0],w=N[1];Object(j.a)(this.pinStatuses,w)||(this.pinStatuses=w);var D,E=[],P=[],M=[],z=[],A=Object(r.a)(T.nodes);try{for(A.s();!(D=A.n()).done;){var V=D.value;switch(V.type){case"actionTypes":E.push(V.actionType);break;case"selectors":z.push(V.selector);break;case"states":M.push(V.name);break;case"taskTypes":P.push(V.taskType)}}}catch(be){A.e(be)}finally{A.f()}for(var I=this.reconcileNodeList(O,E,(function(e){var t;return C=!0,new b.a(e,y(e),o.includes(null!==(t=e.name)&&void 0!==t?t:""))})),R=0,J=Array.from(I.values());R<J.length;R++){var q,L=J[R];L.isInitialAction=o.includes(null!==(q=L.instance.name)&&void 0!==q?q:"")}var H,K=this.reconcileNodeList(g,P,(function(e){return C=!0,new v.a(e,y(e))})),B=new Map,F=Object(r.a)(P.filter((function(e){return!!e.validResponses})));try{for(F.s();!(H=F.n()).done;){var W,_=H.value,U=Object(r.a)(_.validResponses);try{for(U.s();!(W=U.n()).done;){var G=W.value;B.set(G,_)}}catch(be){U.e(be)}finally{U.f()}}}catch(be){F.e(be)}finally{F.f()}for(var Z=this.reconcileNodeList(k,z,(function(e){return C=!0,new m.a(e,y(e),e.key?c[e.key]:void 0)})),$=0,Q=Array.from(Z.values());$<Q.length;$++){var X=Q[$];X.taggingType=c[X.instance.key]}for(var Y=this.reconcileNodeList(x,M,(function(e){return C=!0,new h.a(e,y(e),c[e])})),ee=0,te=Array.from(Y.values());ee<te.length;ee++){var ne=te[ee];ne.taggingType=c[ne.instance]}var ae,re=this.getLinks().filter((function(e){return e instanceof d.a})),ie=function(e,t){var a=e instanceof l.a?e:e.outPort,r=t instanceof l.a?t:t.inPort,i=re.findIndex((function(e){return e.getSourcePort()===a&&e.getTargetPort()===r}));if(-1===i&&a&&r){var c=a.link(r);n.addLink(c)}else i>=0&&re.splice(i,1)},ce=function(e,t){var n;switch(e.type){case"actionTypes":return I.get(e.actionType);case"selectors":return Z.get(e.selector);case"states":return Y.get(e.name);case"taskTypes":var a=K.get(e.taskType);if(!t)return a;var r=null===(n=e.taskType.validResponses)||void 0===n?void 0:n.find((function(e){return e.name===t}));return r?null===a||void 0===a?void 0:a.getResponsePort(r):void 0}},oe=Object(r.a)(T.links);try{for(oe.s();!(ae=oe.n()).done;){var se=ae.value,ue=ce(se.fromNode,se.fromPort),le=ce(se.toNode);ue&&le&&ue!==le&&ie(ue,le)}}catch(be){oe.e(be)}finally{oe.f()}var de,fe=Object(r.a)(re);try{for(fe.s();!(de=fe.n()).done;){var je=de.value;je.remove(),this.removeLink(je)}}catch(be){fe.e(be)}finally{fe.f()}return C}}]),n}(f.DiagramModel)},2123:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(8),c=n(19),o=n(13),s=n(16),u=n(17),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,a,i){var c;return Object(r.a)(this,n),(c=t.call(this,"state",e,a,e)).taggingType=i,c}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{taggingType:this.taggingType})}}]),n}(n(1257).a)},2198:function(e,t,n){"use strict";n.d(t,"a",(function(){return $e}));var a=n(68),r=n(3),i=n(14),c=n(4),o=n.n(c),s=n(21),u=n(1),l=n(9),d=n.n(l),f=n(2261),j=n(2255),b=n(3397),v=n(2281),h=n(2310),m=n(2271),p=n(557),O=n.n(p),y=n(730),g=n.n(y),x=n(694),k=n.n(x),C=n(2272),S=n(731),N=n.n(S),T=n(2769),w=n.n(T),D=n(1258),E=n.n(D),P=n(3306),M=n(3333),z=n(2290),A=n(2768),V=n.n(A),I=n(613),R=n.n(I),J=n(532),q=n(1204),L=n(137),H=n(1078),K=n(635),B=n(531),F=n(657),W=n(732),_=n(244),U=n(3336),G=n(201),Z=n(49),$=n(659),Q=n(554),X=n(903),Y=n(740),ee=n(682),te=n(1093),ne=n(3303),ae=n(129),re=function(e){return Object(ae.jsx)(ne.a,Object(r.a)(Object(r.a)({viewBox:"0 0 50 50"},e),{},{children:Object(ae.jsx)("path",{d:"M6.668 4A2.684 2.684 0 004 6.668v36.664A2.684 2.684 0 006.668 46h36.664A2.682 2.682 0 0046 43.332V6.668A2.682 2.682 0 0043.332 4zm0 2h36.664c.371 0 .668.297.668.668v36.664a.665.665 0 01-.668.668H6.668A.665.665 0 016 43.332V6.668C6 6.297 6.297 6 6.668 6zM23 23v12.574c0 1.93-.73 2.426-2 2.426-1.328 0-2.25-.828-2.86-1.902L15 38c.91 1.926 3.14 4 6.234 4C24.656 42 27 40.18 27 36.184V23zm12.453 0c-3.406 0-5.59 2.18-5.59 5.043 0 3.105 1.832 4.574 4.586 5.746l.953.41c1.739.762 2.598 1.227 2.598 2.535 0 1.09-.828 1.88-2.41 1.88-1.883 0-2.774-1.278-3.59-2.614l-3 2c1.121 2.215 3.133 4 6.676 4C39.3 42 42 40.117 42 36.684c0-3.188-1.828-4.606-5.074-5.996l-.953-.407c-1.637-.71-2.348-1.172-2.348-2.316 0-.926.71-1.637 1.828-1.637 1.098 0 1.8.465 2.453 1.637l2.973-1.906c-1.254-2.215-3-3.059-5.426-3.059z"})}))},ie=n(701),ce=n(544),oe=n(483),se=n(130),ue=n(545),le=n(499),de=n(2313),fe=n(514),je=n(2093),be=n(1984),ve=n(3309),he=n(3325),me=n(3315),pe=n(3314),Oe=n(2276),ye=n(6),ge=Object(f.a)((function(e){return Object(j.a)({paper:{backgroundColor:e.palette.background.default},content:{minWidth:"500px"}})})),xe=function(e){var t=e.open,n=e.defaultValue,a=e.onChange,r=e.onClose,i=Object(b.a)().t,c=ge(),d=Object(le.c)().contextTypes_FindOne,f=Object(l.useState)(),j=Object(u.a)(f,2),h=j[0],m=j[1],p=Object(l.useState)(n),O=Object(u.a)(p,2),y=O[0],g=O[1],x=Object(l.useMemo)((function(){var e;return null===(e=Q.c.fields)||void 0===e?void 0:e.name.concat(ye.m().required().test({message:function(e){var t=e.value;return i("ContextTypeNameAlreadyExists",{name:t})},test:function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({name:t});case 2:return n=e.sent,e.abrupt("return",null==n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}),[d,i]),k=Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(se.b)(x,y);case 2:if(!((t=e.sent).length>0)){e.next=6;break}return m(t[0].message),e.abrupt("return");case 6:y&&(a(y),r());case 7:case"end":return e.stop()}}),e)}))),[y,a,r,x]),C=Object(l.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===r||void 0===r||r());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r]);return Object(ae.jsxs)(ve.a,{open:t,onClose:C,fullWidth:!0,maxWidth:"md",classes:{paper:c.paper},children:[Object(ae.jsx)(pe.a,{children:i("SaveAs")}),Object(ae.jsx)(me.a,{className:c.content,children:Object(ae.jsx)(Oe.a,{type:"text",defaultValue:y,onChange:function(e){return g(e.target.value)},label:i("NewName"),fullWidth:!0,required:!0,error:!!h,helperText:h})}),Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(v.a,{onClick:k,color:"primary",children:i("Accept")}),Object(ae.jsx)(v.a,{onClick:r,color:"primary",children:i("Cancel")})]})]})},ke=n(1213),Ce=n(597),Se=n(1441),Ne=n(1442),Te=n(2106),we=n(464),De=n(3405),Ee=n(3340),Pe=n(2124),Me=n.n(Pe),ze=n(2125),Ae=n.n(ze),Ve=n(2387),Ie=n.n(Ve),Re=Object(f.a)((function(e){return Object(j.a)({group:{marginLeft:5},fixHeight:{height:24}})})),Je=Object(we.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(De.a),qe=function(e){var t=e.value,n=e.onChange,a=Object(b.a)().t,r=Re(),i=Object(l.useCallback)((function(e,t){null===n||void 0===n||n(t)}),[n]);return Object(ae.jsxs)(Je,{value:t,onChange:i,size:"small",className:r.group,children:[Object(ae.jsx)(Ee.a,{value:"actionTypes",children:Object(ae.jsx)(z.a,{title:a("ActionTypes"),children:Object(ae.jsx)("div",{className:r.fixHeight,children:Object(ae.jsx)(Me.a,{})})})}),Object(ae.jsx)(Ee.a,{value:"states",children:Object(ae.jsx)(z.a,{title:a("States"),children:Object(ae.jsx)("div",{className:r.fixHeight,children:Object(ae.jsx)(Ie.a,{})})})}),Object(ae.jsx)(Ee.a,{value:"selectors",children:Object(ae.jsx)(z.a,{title:a("Selectors"),children:Object(ae.jsx)("div",{className:r.fixHeight,children:Object(ae.jsx)(Ae.a,{})})})}),Object(ae.jsx)(Ee.a,{value:"taskTypes",children:Object(ae.jsx)(z.a,{title:a("TaskTypes"),children:Object(ae.jsx)("div",{className:r.fixHeight,children:Object(ae.jsx)(k.a,{})})})})]})},Le=n(112),He=n(650),Ke=Object(l.lazy)((function(){return Promise.all([n.e(1),n.e(6),n.e(8),n.e(55)]).then(n.bind(null,3375))})),Be=Object(l.lazy)((function(){return Promise.all([n.e(1),n.e(60)]).then(n.bind(null,894))})),Fe=Object(l.lazy)((function(){return Promise.all([n.e(1),n.e(56)]).then(n.bind(null,3376))})),We=Object(l.lazy)((function(){return Promise.all([n.e(1),n.e(58)]).then(n.bind(null,3377))})),_e=Object(l.lazy)((function(){return n.e(70).then(n.bind(null,3378))})),Ue=Object(l.lazy)((function(){return Promise.all([n.e(49),n.e(61)]).then(n.bind(null,3379))})),Ge=Object(f.a)((function(e){return Object(j.a)({root:{flexGrow:1},toolbar:{minHeight:"48px",paddingLeft:0},grow:{flexGrow:1},actionToolbarButtons:{display:"flex"},fileInput:{opacity:0,position:"absolute",top:0,left:0,right:0,bottom:0},textField:{width:"40ch"},form:{height:"100%"},button:{margin:e.spacing(1),whiteSpace:"nowrap"},diagram:{marginTop:20,marginBottom:20,height:"calc(100% - 40px)"},table:{},tableRow:{},diagramTableRow:{height:"max(calc(100vh - 150px), 600px)"},saveAsEllipsis:{position:"absolute",left:17,bottom:4,fontWeight:"bold"},divider:{margin:e.spacing(1,.5)}})})),Ze=function(e){var t=e.name,n=e.canSave,a=e.onSaveAs,r=Ge(),i=Object(b.a)().t,c=Object(J.f)().trigger,d=Object(l.useState)(!1),f=Object(u.a)(d,2),j=f[0],v=f[1],h=Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:v(!0);case 6:case"end":return e.stop()}}),e)}))),[c]),p=Object(l.useCallback)((function(e){null===a||void 0===a||a(e)}),[a]),O=Object(l.useCallback)((function(){v(!1)}),[]);return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(z.a,{title:i("SaveAs"),children:Object(ae.jsxs)(m.a,{onClick:h,disabled:!n,children:[Object(ae.jsx)(g.a,{}),Object(ae.jsx)(C.a,{className:r.saveAsEllipsis,children:"..."})]})}),j&&Object(ae.jsx)(xe,{open:j,defaultValue:t,onChange:p,onClose:O})]})},$e=function(e){var t=e.value,n=e.schema,c=void 0===n?Q.c:n,f=e.onApplyChanges,j=e.onSaveAs,p=e.isPersistent,y=void 0!==p&&p,x=Object(b.a)().t,C=Ge(),S=Object(B.h)(),T=Object(l.useState)(!1),D=Object(u.a)(T,2),A=D[0],I=D[1],ne=Object(l.useState)(!1),ve=Object(u.a)(ne,2),he=ve[0],me=ve[1],pe=Object(l.useState)(!1),Oe=Object(u.a)(pe,2),ye=Oe[0],ge=Oe[1],xe=Object(l.useState)(!1),we=Object(u.a)(xe,2),De=we[0],Ee=we[1],Pe=Object(l.useState)(!1),Me=Object(u.a)(Pe,2),ze=Me[0],Ae=Me[1],Ve=d.a.useState((function(){return Object(i.a)(Te.b)})),Ie=Object(u.a)(Ve,2),Re=Ie[0],Je=Ie[1],$e=Object(K.b)().enqueueSnackbar,Qe=Object(l.useState)(!1),Xe=Object(u.a)(Qe,2),Ye=Xe[0],et=Xe[1],tt=!Ye,nt=Object(de.b)().jobAdded,at=Object(le.c)().contexts_BeginActiveContextRecalculation,rt=Object(L.f)(je.b),it=Object(u.a)(rt,2),ct=it[0],ot=it[1],st=Object(Ce.a)(),ut=Object(oe.b)(),lt=Object(oe.c)(),dt=Object(l.useMemo)((function(){var e,n;return Object(r.a)(Object(r.a)({},t),{},{version:null!==(e=t.version)&&void 0!==e?e:0,description:null!==(n=t.description)&&void 0!==n?n:""})}),[t]),ft=Object(J.e)({mode:"onChange",reValidateMode:"onChange",defaultValues:dt,resolver:Object(X.a)((function(){return Object(H.a)(c,{strict:!0,abortEarly:!1})}),(function(e){var t;return t={},Object(a.a)(t,Q.j,e.jsCommon),Object(a.a)(t,Q.k,e.jsonSchema),t}))}),jt=ft.control,bt=ft.handleSubmit,vt=ft.getValues,ht=ft.setValue,mt=ft.errors,pt=ft.trigger,Ot=ft.register,yt=ft.formState,gt=ft.reset,xt=Object(l.useMemo)((function(){return{description:x("ExitingContextTypeEditorWithoutSavingWarning")}}),[x]);Object(Y.a)(yt.isDirty,xt),Object(l.useEffect)((function(){gt(dt)}),[dt,gt]),Object(l.useMemo)((function(){Ot("jsCommon"),Ot("jsonSchema"),Ot("version"),Ot("initialActions"),Ot("actions"),Ot("tasks"),Ot("selectors"),Ot("settings")}),[Ot]),Object(l.useEffect)((function(){var e=vt("selectors");if(e)for(var t=0;t<e.length;t++);}),[vt]);var kt=Object(l.useCallback)((function(){var e=vt(),t=Object(ke.c)(e),n=Object(u.a)(t,2),a=n[0],r=n[1];a.length!==e.milestones.length&&ht("milestones",a,{shouldDirty:!0}),e.tags&&r.length!==e.tags.length&&ht("tags",r,{shouldDirty:!0})}),[vt,ht]),Ct=Object(W.a)(Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kt(),e.next=3,pt();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:bt(function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=22;break}return et(!0),e.prev=2,e.next=5,f(t);case 5:if(e.sent){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n=Object(ae.jsx)(ue.a,{error:e.t0});case 13:return e.prev=13,et(!1),e.finish(13);case 16:if(!n){e.next=21;break}return e.next=19,ut({title:x("ErrorSavingContextType"),description:n,mapCloseTo:"ok",actions:[{type:"ok",text:x("Ok")}]});case 19:e.next=22;break;case 21:$e(x("ContextTypeSaved"),{variant:"success"});case 22:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}())();case 7:case"end":return e.stop()}}),e)}))),[ut,$e,bt,f,kt,x,pt])),St=Object(l.useCallback)(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bt(function(){var e=Object(s.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=22;break}return et(!0),e.prev=2,e.next=5,j(n,t);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a=Object(ae.jsx)(ue.a,{error:e.t0});case 13:return e.prev=13,et(!1),e.finish(13);case 16:if(!a){e.next=21;break}return e.next=19,ut({title:x("ErrorSavingContextType"),description:a,mapCloseTo:"ok",actions:[{type:"ok",text:x("Ok")}]});case 19:e.next=22;break;case 21:$e(x("ContextTypeSaved"),{variant:"success"});case 22:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}())();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[bt,j,ut,x,$e]),Nt=Object(l.useCallback)((function(){var e=vt();Object($.a)(Object(be.a)(e),"".concat(e.name,".context.json"))}),[vt]),Tt=Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kt(),n=vt(),e.next=4,Object(se.b)(c,n,{context:(t={},Object(a.a)(t,Q.j,n.jsCommon),Object(a.a)(t,Q.k,n.jsonSchema),t)});case 4:return r=e.sent,e.next=7,pt();case 7:r.length>0?st(x("ContextTypeHasValidationErrors"),r,{dialogProps:{maxWidth:"lg"}}):$e(x("ContextTypeIsValid"),{variant:"success"});case 8:case"end":return e.stop()}}),e)}))),[kt,vt,c,pt,st,x,$e]),wt=Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ot(!ct);case 1:case"end":return e.stop()}}),e)}))),[ct,ot]),Dt=Object(l.useCallback)((function(){me(!0)}),[]),Et=Object(l.useCallback)((function(){ge(!0)}),[]),Pt=Object(l.useCallback)((function(){Ee(!0)}),[]),Mt=Object(l.useCallback)((function(){S(-1)}),[S]),zt=Object(l.useCallback)(Object(s.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt({description:x("ConfirmContextRecalculation")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,at({contextTypeName:t.name,ignoreMilestones:!1,allVersions:!0,continueOnError:!0});case 7:n=e.sent,a=n.backgroundJobId,nt(a);case 10:case"end":return e.stop()}}),e)}))),[at,nt,lt,x,t.name]),At=Object(l.useMemo)((function(){return function(e){return{state:function(){var t,n=e("actions"),a=e("tasks"),r=e("selectors"),i=Object(_.a)(Object(U.a)(Object(U.a)(n.flatMap((function(e){return Object.keys(e.jsSetters)})),a.flatMap((function(e){return e.validResponses})).flatMap((function(e){return Object.keys(e.jsSetters)}))),null!==(t=null===r||void 0===r?void 0:r.map((function(e){return e.key})).filter(Z.isPresent))&&void 0!==t?t:[]));return"declare const state: {\n                ".concat(i.map((function(e){return e+": any;"})).join("\n"),"\n            }")},task:function(){return"\n            interface ContextTask {\n                id: string;\n                contextId: string;\n                contextTypeName: string;\n                contextReference?: string | undefined;\n                typeName: string;\n                title: string;\n                data: { [key: string]: any; };\n                props?: { [key: string]: any; } | undefined;\n                dateCreated: string;\n                dateUpdated: string;\n                assignedTo?: string | undefined;\n                status?: string | undefined;\n                archived: boolean;\n                dueDate?: string | undefined;\n                /** 1 = high, 0 = normal, -1 = low */\n                importance: 1 | 0 | -1;\n                focused: boolean;\n            }\n\n            declare const task: ContextTask;"}}}(vt)}),[vt]),Vt=Object(l.useMemo)((function(){return function(e){return function(){var t;return null!==(t=e("jsCommon"))&&void 0!==t?t:""}}(vt)}),[vt]),It=Object(l.useCallback)((function(e){var t;return Object(se.b)(null===(t=Q.c.fields)||void 0===t?void 0:t.jsCommon,e)}),[]),Rt=Object(l.useCallback)((function(){Ae(!0)}),[]),Jt=Object(l.useCallback)((function(e){var t=jt.fieldsRef.current;if(t)for(var n=0,a=Object.keys(t);n<a.length;n++){var r=a[n],i=vt(r),c=Object(X.b)(e,r);Object(G.a)(i,c)||ht(r,c,{shouldDirty:!0,shouldValidate:!0})}}),[jt.fieldsRef,vt,ht]),qt=Object(l.useCallback)((function(e){Je(e)}),[]);return Object(ae.jsx)(fe.a,{children:Object(ae.jsxs)(ce.a,{freeVariableTypingProviders:At,jsCommonTypingProvider:Vt,children:[Object(ae.jsx)(J.b,Object(r.a)(Object(r.a)({},ft),{},{children:Object(ae.jsx)("form",{className:C.form,children:Object(ae.jsx)(ee.a,{control:jt,children:Object(ae.jsxs)("div",{className:C.table,children:[Object(ae.jsx)("div",{className:C.tableRow,children:Object(ae.jsxs)(P.a,{container:!0,spacing:1,children:[Object(ae.jsx)(P.a,{item:!0,xs:12,children:Object(ae.jsxs)(h.a,{className:C.toolbar,children:[Object(ae.jsx)(z.a,{title:x("GoBack"),children:Object(ae.jsx)(m.a,{onClick:Mt,disabled:Ye,children:Object(ae.jsx)(N.a,{})})}),Object(ae.jsx)(z.a,{title:x("SaveChanges"),children:Object(ae.jsx)(m.a,{onClick:Ct,disabled:!tt,children:Object(ae.jsx)(g.a,{})})}),y&&Object(ae.jsx)(Ze,{name:vt("name"),canSave:tt,onSaveAs:St}),Object(ae.jsx)(z.a,{title:x("Export"),children:Object(ae.jsx)(m.a,{onClick:Nt,children:Object(ae.jsx)(O.a,{})})}),Object(ae.jsx)(z.a,{title:x("Validate"),children:Object(ae.jsx)(m.a,{onClick:Tt,children:Object(ae.jsx)(k.a,{})})}),Le.e&&Object(ae.jsx)(ae.Fragment,{children:ct?Object(ae.jsx)(z.a,{title:x("StandardView"),children:Object(ae.jsx)(m.a,{onClick:wt,children:Object(ae.jsx)(R.a,{})})}):Object(ae.jsx)(z.a,{title:x("DiagramView"),children:Object(ae.jsx)(m.a,{onClick:wt,children:Object(ae.jsx)(V.a,{})})})}),Object(ae.jsx)(z.a,{title:x("EditContextTypeAsJson"),children:Object(ae.jsx)(m.a,{onClick:Rt,children:Object(ae.jsx)(Se.a,{})})}),ct&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(M.a,{flexItem:!0,orientation:"vertical",className:C.divider}),Object(ae.jsx)(qe,{value:Re,onChange:qt})]}),Object(ae.jsx)("div",{className:C.grow}),y&&Le.f&&Object(ae.jsx)(v.a,{variant:"outlined",onClick:zt,startIcon:Object(ae.jsx)(w.a,{}),className:C.button,size:"small",children:x("Recalculate")}),y&&Object(ae.jsx)(F.b,{to:"/simulator?contextTypeName=".concat(t.name),style:{textDecoration:"none"},children:Object(ae.jsx)(v.a,{variant:"outlined",startIcon:Object(ae.jsx)(E.a,{}),className:C.button,size:"small",children:x("Simulate")})}),Object(ae.jsx)(v.a,{variant:"outlined",onClick:Dt,startIcon:Object(ae.jsx)(re,{}),className:C.button,size:"small",children:x("EditJsCommon")}),Object(ae.jsx)(v.a,{variant:"outlined",onClick:Et,startIcon:Object(ae.jsx)(te.a,{}),className:C.button,size:"small",children:x("EditJsonSchema")}),Object(ae.jsx)(v.a,{variant:"outlined",onClick:Pt,startIcon:Object(ae.jsx)(Ne.a,{}),className:C.button,size:"small",children:x("EditUiSchemaCommon")})]})}),!ct&&Object(ae.jsx)(l.Suspense,{fallback:Object(ae.jsx)(P.a,{item:!0,xs:12,children:Object(ae.jsx)(He.a,{})}),children:Object(ae.jsx)(_e,{onDialogVisibilityChanged:I})})]})}),Object(ae.jsx)(ie.a,{errors:mt,names:["jsCommon","jsonSchema"],className:C.tableRow}),ct&&Object(ae.jsx)("div",{className:C.diagramTableRow,children:Object(ae.jsx)(l.Suspense,{fallback:Object(ae.jsx)(He.a,{}),children:Object(ae.jsx)(Ue,{className:C.diagram,visibleElementTypes:Re,onEditJsCommon:Dt,onEditJsonSchema:Et})})})]})})})})),!A&&Object(ae.jsx)(q.DevTool,{control:jt}),he&&Object(ae.jsx)(l.Suspense,{fallback:null,children:Object(ae.jsx)(Ke,{open:he,onClose:function(){return me(!1)},defaultValue:vt("jsCommon"),onChange:function(e){return ht("jsCommon",null!==e&&void 0!==e?e:void 0,{shouldDirty:!0})},validator:It})}),ye&&Object(ae.jsx)(l.Suspense,{fallback:null,children:Object(ae.jsx)(Be,{open:ye,onClose:function(){return ge(!1)},defaultValue:vt("jsonSchema"),onChange:function(e){return ht("jsonSchema",null!==e&&void 0!==e?e:void 0,{shouldDirty:!0})}})}),De&&Object(ae.jsx)(l.Suspense,{fallback:null,children:Object(ae.jsx)(Fe,{open:De,onClose:function(){return Ee(!1)},defaultValue:function(){var e=vt("settings");return null===e||void 0===e?void 0:e.uiSchemaCommon}(),onChange:function(e){return function(e){var t,n=null!==(t=vt("settings"))&&void 0!==t?t:{};ht("settings",Object(r.a)(Object(r.a)({},n),{},{uiSchemaCommon:e}),{shouldDirty:!0})}(null!==e&&void 0!==e?e:void 0)}})}),ze&&Object(ae.jsx)(l.Suspense,{fallback:null,children:Object(ae.jsx)(We,{open:ze,onClose:function(){return Ae(!1)},defaultValue:vt(),onChange:Jt})})]})})}},514:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(2),r=n(8),i=n(16),c=n(17),o=n(9),s=n(2261),u=n(2255),l=n(2272),d=n(835),f=n(836),j=n(837),b=n(652),v=n.n(b),h=n(129),m=Object(s.a)((function(e){return Object(u.a)({errorDetails:{overflow:"auto"}})})),p=function(e){var t=e.error,n=e.stack,a=m();return Object(h.jsxs)(d.a,{children:[Object(h.jsx)(j.a,{expandIcon:Object(h.jsx)(v.a,{}),children:Object(h.jsx)(l.a,{variant:"h5",color:"error",children:t})}),Object(h.jsx)(f.a,{className:a.errorDetails,children:Object(h.jsx)("pre",{children:n})})]})},O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(r.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,a=n.hasError,r=n.error,i=n.errorInfo;return a?Object(h.jsx)(p,{error:null!==(e=null===r||void 0===r?void 0:r.message)&&void 0!==e?e:"",stack:null!==(t=null===i||void 0===i?void 0:i.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(o.Component)},544:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(9),r=n(129),i={freeVariableTypingProviders:{},getTypingForFreeVariable:function(){return""},getJsCommonTypings:function(){return""}},c=Object(a.createContext)(i),o=function(){return Object(a.useContext)(c)},s=function(e){var t=e.freeVariableTypingProviders,n=e.jsCommonTypingProvider,s=e.children,u=o(),l=u!==i?u:void 0,d=Object(a.useCallback)((function(){return n?n():l?l.getJsCommonTypings():void 0}),[n,l]),f=Object(a.useCallback)((function(e){return t&&e in t?t[e]():l?l.getTypingForFreeVariable(e):void 0}),[t,l]),j=Object(a.useMemo)((function(){return{parentContext:l,freeVariableTypingProviders:t,jsCommonTypingProvider:n,getTypingForFreeVariable:f,getJsCommonTypings:d}}),[l,t,n,f,d]);return Object(r.jsx)(c.Provider,{value:j,children:s})}},554:function(e,t,n){"use strict";n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"i",(function(){return S})),n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return P})),n.d(t,"g",(function(){return z})),n.d(t,"h",(function(){return A})),n.d(t,"f",(function(){return q})),n.d(t,"c",(function(){return L}));var a=n(0),r=n(68),i=n(3),c=n(2),o=n(8),s=n(19),u=n(13),l=n(16),d=n(17),f=n(6),j=n(18),b=n(428),v=n(244),h=n(430),m=n(839),p=n(155),O=n(916),y="jsCommon",g="jsonSchema",x="uiSchemaJsonSchema",k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a,r){var i;return Object(c.a)(this,n),(i=t.call(this)).definitionNameKey=e,i.contextKey=a,i.jsonSchemaKey=r,i}return Object(o.a)(n,[{key:"_validate",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,o=a,l=null===(t=o.context)||void 0===t?void 0:t[this.jsonSchemaKey],d=e[this.definitionNameKey];if(l&&"string"===typeof d){var f;"function"===typeof l&&(l=l()),"string"===typeof l&&(l=JSON.parse(l));var j=Object(O.a)(l,d),b=Object(i.a)(Object(i.a)({},null===(f=o)||void 0===f?void 0:f.context),{},Object(r.a)({},this.contextKey,j));o=Object(i.a)(Object(i.a)({},o),{},{context:b})}return Object(s.a)(Object(u.a)(n.prototype),"_validate",this).call(this,e,o,c)}},{key:"clone",value:function(e){var t=Object(s.a)(Object(u.a)(n.prototype),"clone",this).call(this,e);return t.definitionNameKey=this.definitionNameKey,t.contextKey=this.contextKey,t.jsonSchemaKey=this.jsonSchemaKey,t}}]),n}(f.b),C=function(e,t,n){return new k(e,t,n)},S=f.k().shape({jsValidator:f.m().required().jsExpression({paramNames:["state","payload","task"],scriptContextKey:y}),errorMessageTemplate:f.m().required()}),N=f.k().shape({uiSchema:f.m().uiSchema(x)}),T=Object(m.a)(f.m().required().identifier(),f.m().required().jsExpression({paramNames:["state","payload"],scriptContextKey:y})),w=C("payloadSchemaDefinitionName",x,g).shape({name:f.m().required().identifier().min(3).max(50),payloadSchemaDefinitionName:f.m().jsonSchemaDefinitionName(g),validators:f.e().of(S.required()),jsSetters:T,settings:N}),D=(f.k().shape({name:f.m().required(),family:f.m()}),f.k().shape({uiSchema:f.m().uiSchema(x),commandText:f.m(),actionInProgressText:f.m(),actionCompletedText:f.m(),icon:f.i()})),E=Object(m.a)(f.m().required().identifier(),f.m().required().jsExpression({paramNames:["state","payload","task"],scriptContextKey:y})).required(),P=C("payloadSchemaDefinitionName",x,g).shape({name:f.m().required().identifier().min(3),payloadSchemaDefinitionName:f.m().jsonSchemaDefinitionName(g),validators:f.e().of(S.required()),jsSetters:E,settings:D,jsInitialPayloadBuilder:f.m().jsExpression({paramNames:["state","task"],scriptContextKey:y})}),M=f.k(),z=Object(m.a)(f.m().required().identifier(),f.m().required().jsExpression({paramNames:["state"],scriptContextKey:y})).required(),A=f.k().shape({name:f.m().required().identifier().min(3),titleTemplate:f.m().required(),jsCondition:f.m().jsExpression({paramNames:["state"],scriptContextKey:y}),jsTaskDataSetters:z,jsAssignedTo:f.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsDueDate:f.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsImportance:f.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),validResponses:f.e().of(P.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return j.a.t("DuplicateResponseTypeNames",{names:t.join(", ")})})),settings:M}),V=f.k().shape({name:f.m().required(),final:f.g()}),I=f.k().shape({name:f.m().required()}),R=f.k().shape({name:f.m().required()}),J=f.k().shape({uiSchemaCommon:f.m().uiSchema("uiSchemaCommon")}),q=f.k().shape({key:f.m().required().identifier(),jsExpression:f.m().required().jsExpression({paramNames:["state"],scriptContextKey:y}),dependencies:f.e().of(f.m())}),L=f.k().shape({version:f.j(),name:f.m().required().identifier().min(3).max(50),description:f.m(),actions:f.e().of(w.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return j.a.t("DuplicateActionNames",{names:t.join(", ")})})),jsInitializers:Object(m.a)(f.m().required().identifier(),f.m().required()),selectors:f.e().of(q).test({message:function(){return j.a.t("SelectorCircularDependencyFound")},test:function(e){var t=e;if(!t||0===t.length)return!0;for(var n=Object(b.a)((function(e){return Object(v.a)(e.flatMap((function(e){var t;return null!==(t=e.dependencies)&&void 0!==t?t:[]})))}),Object(h.a)((function(e){return e.key}),t.filter((function(e){return e.key})))),a=0,r=Object.keys(n);a<r.length;a++){var i=r[a],c=Object(p.b)(i,{getNeighbors:function(e){var t;return null!==(t=n[e])&&void 0!==t?t:[]}});if(c)return this.createError({path:this.path,message:j.a.t("SelectorCircularDependencyFound",{cycle:c.join(" -> ")})})}return!0}}),tasks:f.e().of(A.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return j.a.t("DuplicateTaskTypeNames",{names:t.join(", ")})})),initialActions:f.e().of(f.m().required()).defined().test({message:function(){return j.a.t("InvalidInitialActions")},test:function(e){var t,n=this,r=e,i=null===(t=this.parent)||void 0===t?void 0:t.actions;if(Array.isArray(i)){var c,o=Object(a.a)(r);try{var s=function(){var e=c.value;if(!i.find((function(t){return t.name===e})))return{v:n.createError({path:n.path,message:j.a.t("InvalidActionName",{actionName:r})})}};for(o.s();!(c=o.n()).done;){var u=s();if("object"===typeof u)return u.v}}catch(l){o.e(l)}finally{o.f()}}return!0}}),milestones:f.e().of(V.required()),tags:f.e().of(I),metrics:f.e().of(R),jsCommon:f.m().jsModule(),jsonSchema:f.m().jsonSchema(),settings:J})},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(9),r=n(2281),i=n(635),c=n(3397),o=n(483),s=n(545),u=n(850),l=n(129),d=function(){var e=Object(c.a)().t,t=Object(i.b)().enqueueSnackbar,n=Object(o.b)();return Object(a.useCallback)((function(a,i,c){var o=null!==c&&void 0!==c?c:{},d=o.variant,f=void 0===d?"error":d,j=o.dialogTitle,b=void 0===j?e("Error"):j,v=o.dialogProps;if(Object(u.b)(i)&&"string"===typeof a){var h,m=!1===(null===(h=window.navigator)||void 0===h?void 0:h.onLine);a=e(m?"BrowserOfflineMessage":"NetworkErrorMessage",{message:a})}t(a,{variant:f,action:Object(l.jsx)(r.a,{onClick:function(){n({dialogProps:v,title:b,description:Object(l.jsx)(s.a,{error:i})}).catch((function(){}))},children:e("ShowDetails")})})}),[n,t,e])}},659:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);r(n,t,"application/json")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,a=new Blob([e]);i(a,t,n)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,n&&(r.type=n),document.body.appendChild(r);try{r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(r),setTimeout((function(){return URL.revokeObjectURL(r.href)}),0)}}},c=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){var a,r=null===(a=e.target)||void 0===a?void 0:a.result;if("string"===typeof r){var i=JSON.parse(r);t(i)}n("Invalid data type in blob ".concat(typeof r))},a.onerror=function(e){n("Error reading blob")},a.readAsText(e)}))}},682:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j}));var a=n(68),r=n(1),i=n(0),c=n(9),o=n.n(c),s=n(539),u=n(129),l=function(){throw new Error("Forgot to wrap component in `ContextTypeContextProvider`")},d=Object(c.createContext)({getJsonSchemaDefinition:l,getJsonSchemaDefinitions:l,setJsonSchemaDefinition:l,setJsonSchemaDefinitions:l,updateTaskJsonSchemaDefinitions:l,updateActionJsonSchemaDefinition:l,updateResponseJsonSchemaDefinition:l}),f=function(e){var t=e.control,n=t.watchInternal,o=t.setValue,l=e.children,f=n("jsCommon"),j=n("jsonSchema"),b=n("settings"),v=Object(c.useMemo)((function(){var e=null===b||void 0===b?void 0:b.uiSchemaCommon;return"string"===typeof e?JSON.parse(e):e}),[b]),h=Object(c.useCallback)((function(e){var t;if(j){var n=null===(t=JSON.parse(j).definitions)||void 0===t?void 0:t[e];return n?JSON.stringify(n,void 0,4):void 0}}),[j]),m=Object(c.useCallback)((function(e){if(!j)return{};var t,n=JSON.parse(j),a={},r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var c,o=t.value,s=null===(c=n.definitions)||void 0===c?void 0:c[o];a[o]=s?JSON.stringify(s,void 0,4):void 0}}catch(u){r.e(u)}finally{r.f()}return a}),[j]),p=Object(c.useCallback)((function(e,t){var n=j?JSON.parse(j):{},a=n.definitions;a||(n.definitions=a={}),t?a[e]=JSON.parse(t):(delete a[e],0===Object.keys(a).length&&delete n.definitions),o("jsonSchema",Object.keys(n).length>0?JSON.stringify(n,void 0,4):void 0)}),[j,o]),O=Object(c.useCallback)((function(e){var t=j?JSON.parse(j):{},n=t.definitions;n||(t.definitions=n={});for(var a=0,i=Object.entries(e);a<i.length;a++){var c=Object(r.a)(i[a],2),s=c[0],u=c[1];u?n[s]=JSON.parse(u):(delete n[s],0===Object.keys(n).length&&delete t.definitions)}o("jsonSchema",Object.keys(t).length>0?JSON.stringify(t,void 0,4):void 0)}),[j,o]),y=Object(c.useCallback)((function(e,t){if(e.validResponses){var n,a=Object(i.a)(e.validResponses.filter((function(e){return e.payloadSchemaDefinitionName})));try{for(a.s();!(n=a.n()).done;){var r=n.value,c=Object(s.r)(e.name,r.name);c!==r.payloadSchemaDefinitionName&&(r.payloadSchemaDefinitionName in t?t[c]=t[r.payloadSchemaDefinitionName]:t[c]=h(r.payloadSchemaDefinitionName),t[r.payloadSchemaDefinitionName]=void 0,r.payloadSchemaDefinitionName=c)}}catch(o){a.e(o)}finally{a.f()}}O(t)}),[h,O]),g=Object(c.useCallback)((function(e,t){if(e.payloadSchemaDefinitionName){var n,r=Object(s.o)(e.name);if(e.payloadSchemaDefinitionName!==r)O((n={},Object(a.a)(n,e.payloadSchemaDefinitionName,void 0),Object(a.a)(n,r,t),n)),e.payloadSchemaDefinitionName=r;else p(e.payloadSchemaDefinitionName,t)}}),[p,O]),x=Object(c.useCallback)((function(e,t,n){var r,i=Object(s.r)(t,e.name);e.payloadSchemaDefinitionName!==i?(O((r={},Object(a.a)(r,e.payloadSchemaDefinitionName,void 0),Object(a.a)(r,i,n),r)),e.payloadSchemaDefinitionName=i):p(e.payloadSchemaDefinitionName,n)}),[p,O]),k=Object(c.useMemo)((function(){return{jsCommon:f,jsonSchema:j?JSON.parse(j):void 0,uiSchemaCommon:v,getJsonSchemaDefinition:h,getJsonSchemaDefinitions:m,setJsonSchemaDefinition:p,setJsonSchemaDefinitions:O,updateActionJsonSchemaDefinition:g,updateResponseJsonSchemaDefinition:x,updateTaskJsonSchemaDefinitions:y}}),[h,m,f,j,v,p,O,g,x,y]);return Object(u.jsx)(d.Provider,{value:k,children:l})},j=function(){return o.a.useContext(d)}},701:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2280),r=n(129),i=function e(t,n,a){var r,i;if("object"===typeof(i=t)&&"type"in i&&"message"in i)a.push({dataPath:n,message:t.type?"".concat(t.type,": ").concat(t.message):null!==(r=t.message)&&void 0!==r?r:"Error"});else if(Array.isArray(t))t.forEach((function(t,r){e(t,"".concat(n,"[").concat(r,"]"),a)}));else if("object"===typeof t){n.length>0&&(n+=".");for(var c=0,o=Object.keys(t);c<o.length;c++){var s=o[c];e(t[s],n+s,a)}}},c=function(e){var t=e.errors,n=e.names,c=[];if(i(t,"",c),n){var o=Array.isArray(n)?n:[n];c=c.filter((function(e){return o.some((function(t){return e.dataPath&&(e.dataPath===t||e.dataPath.startsWith(t+".")||e.dataPath.startsWith(t+"["))}))}))}return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(a.a,{component:"span",error:!0,children:c.map((function(e){return Object(r.jsx)("p",{children:"".concat(e.dataPath,": ").concat(e.message)},e.dataPath)}))})})}},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(4),r=n.n(a),i=n(21),c=n(3),o=n(9),s=n(3397),u=n(531),l=n(483),d=function(e,t){var n=Object(l.c)(),a=Object(s.a)().t,d=Object(o.useMemo)((function(){return Object(c.a)({description:a("ExitingWithoutSavingWarning"),confirmationText:a("Continue")},t)}),[t,a]),f=Object(o.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(d);case 2:e.sent&&t.retry();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,d]);Object(u.e)(f,e)}},839:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(3),r=n(1),i=n(2),c=n(8),o=n(19),s=n(13),u=n(16),l=n(17),d=n(6),f=n(915),j=n.n(f);function b(e,t){return new v(e,t)}var v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.m(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.i();return Object(i.a)(this,n),(e=t.call(this,{type:"map"})).key=a,e.value=r,e}return Object(c.a)(n,[{key:"_typeCheck",value:function(e){return e&&"object"===typeof e}},{key:"_cast",value:function(e,t){var a=this,i=Object(o.a)(Object(s.a)(n.prototype),"_cast",this).call(this,e,t),c={};return Object.entries(i).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];c[a.key.cast(n)]=a.value.cast(i)})),c}},{key:"_validate",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,u=[],l=i.abortEarly,f=i.sync,b=i.path,v=void 0===b?"":b,h=null!=i.originalValue?i.originalValue:e,m=this.key,p=this.value;Object(o.a)(Object(s.a)(n.prototype),"_validate",this).call(this,e,i,(function(e,n){var o;if(e){if(!d.c.isError(e)||l)return c(e,n);u.push(e)}if(!t._typeCheck(n))return u.length&&c(u[0]),void c(null,n);h=null!==(o=h)&&void 0!==o?o:n;for(var s=[],b=function(){var e=Object(r.a)(y[O],2),t=e[0],c=e[1],o=Object(a.a)(Object(a.a)({},i),{},{strict:!0,parent:n,path:v?"".concat(v,".").concat(t):t,originalValue:h[t]});s.push((function(e,n){m.validate(t,o).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))})),s.push((function(e,t){p.validate(c,o).then((function(e){return t(null,e)})).catch((function(e){return t(e)}))}))},O=0,y=Object.entries(n);O<y.length;O++)b();return j()({sync:f,path:v,value:n,errors:u,tests:s,endEarly:l},c)}))}},{key:"clone",value:function(e){var t,a,r=Object(o.a)(Object(s.a)(n.prototype),"clone",this).call(this,e);return r.key=null===(t=this.key)||void 0===t?void 0:t.clone(),r.value=null===(a=this.value)||void 0===a?void 0:a.clone(),r}}]),n}(d.a);function h(e,t){return b(e,t)}b.prototype=v.prototype},903:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(4),r=n.n(a),i=n(21),c=n(49),o=function(e,t){return t.split(/[,[\].]+?/).filter((function(e){return!!e})).reduce((function(e,t){return Object(c.isPresent)(e)?e[t]:e}),e)},s=function(e,t){return Array.from(e).some((function(e){return function(e,t){return RegExp("^".concat(t,"[\\d+]").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)}(t,e)}))},u=function(e,t){return o(e,t)},l=function(e,t){return function(){var n=Object(i.a)(r.a.mark((function n(a,i){var c,o,s,u=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=u.length>2&&void 0!==u[2]&&u[2],o=e(a),s=t(a),n.abrupt("return",o(a,Object.assign({},i,s),c));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},916:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(3),r=n(49),i=n(427),c=function(e,t){var n,c=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(r.isPresent)(c))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof c)throw new Error("Invalid definition ".concat(t));var o=Object(i.a)(c);return delete o.definitions,e=Object(a.a)(Object(a.a)({},e),o)},o=function(e,t,n){if(e.jsonSchema){var a=JSON.parse(e.jsonSchema),r=e.tasks.find((function(e){return e.name===t})),i=null===r||void 0===r?void 0:r.validResponses.find((function(e){return e.name===n})),o=null===i||void 0===i?void 0:i.payloadSchemaDefinitionName;if(o)return c(a,o)}},s=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),a=e.actions.find((function(e){return e.name===t})),r=null===a||void 0===a?void 0:a.payloadSchemaDefinitionName;if(r)return c(n,r)}}}}]);
//# sourceMappingURL=13.6bd55afa.chunk.js.map