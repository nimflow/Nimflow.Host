(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[68],{2998:function(e,t,n){"use strict";n.r(t),n.d(t,"PackageImporter",(function(){return ge}));var a=n(19),i=n(3),c=n(8),r=n.n(c),o=n(1967),l=n(2968),s=n(2937),u=n(2440),d=n(2407),j=n(3019),b=n(2439),f=n(2459),v=n(2930),O=n(2418),h=n(2763),x=n.n(h),m=n(1514),p=n.n(m),g=n(741),k=n.n(g),w=n(768),C=n.n(w),y=n(2419),P=n(2999),S=n(5),D=n(3006),I=n(601),V=n(573),N=n(877),E=n(2444),T=n(2618),L=n(2986),R=n(689),B=n(485),F=n(464),M=n(484),U=n.n(M),W=n(540),J=n(629),z=n(128),A=function(){throw new Error("You forgot to wrap your component in <ImportPackageContextProvider>.")},Y={isBusy:!1,setIsBusy:A,setPck:A,simulateInstallation:A,setInstalledPackageSimulation:A,install:A},q=Object(S.createContext)(Y),G=function(e){var t=e.children,n=Object(S.useState)(!1),a=Object(F.a)(n,2),i=a[0],c=a[1],r=Object(S.useState)(),o=Object(F.a)(r,2),l=o[0],s=o[1],u=Object(S.useState)(),d=Object(F.a)(u,2),j=d[0],b=d[1],f=Object(D.a)().t,v=Object(J.a)(),O=Object(W.c)().packages_InstallPackage,h=Object(S.useCallback)(function(){var e=Object(B.a)(U.a.mark((function e(t,n){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}return e.abrupt("return");case 3:return c(!0),e.next=6,O({simulate:t,package:l});case 6:a=e.sent,b(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),v(f(n),e.t0,{dialogProps:{maxWidth:"lg"}});case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[O,l,v,f]),x=Object(S.useCallback)((function(){return h(!0,"ErrorReviewingPackageChanges")}),[h]),m=Object(S.useCallback)((function(){return h(!1,"ErrorReviewingPackageChanges")}),[h]);return Object(z.jsx)(q.Provider,{value:{isBusy:i,setIsBusy:c,pck:l,setPck:s,installedPackageSimulation:j,setInstalledPackageSimulation:b,simulateInstallation:x,install:m},children:t})},_=n(2764),H=n.n(_),K=n(2252),Q=n.n(K),X=n(738),Z=n.n(X),$=n(2458),ee=n(2457),te=n(2456),ne=n(2455),ae=n(781),ie=n(2923),ce=n(3018),re=n(3017),oe=n(2929),le=n(2550),se=n(688),ue=n(597),de=n(639),je=Object(L.a)((function(e){return Object(T.a)({dialogPaper:{height:"80vh"},dialogContent:{display:"grid",gridTemplateColumns:"auto",placeItems:"stretch",height:"100%",overflowY:"hidden"},editorContainer:{}})})),be=function(e){e.focus()},fe=function(e){var t=e.open,n=e.original,i=e.value,c=e.onClose,o=e.title,l=Object(D.a)().t,s=Object(ae.a)(),u=je({}),d=Object(S.useMemo)((function(){return n?JSON.stringify(n,void 0,2):""}),[n]),j=Object(S.useMemo)((function(){return i?JSON.stringify(i,void 0,2):""}),[i]),b=Object(S.useCallback)(Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}}),e)}))),[c]),f=Object(S.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===c||void 0===c||c());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),v=Object(S.useCallback)((function(e){!function(e,t){e.languages.json.jsonDefaults.setDiagnosticsOptions({})}(e)}),[]);return Object(z.jsxs)(ie.a,{open:t,onClose:f,maxWidth:"xl",fullWidth:!0,classes:{paper:u.dialogPaper},children:[Object(z.jsx)(oe.a,{children:null!==o&&void 0!==o?o:l("ShowingDifferences")}),Object(z.jsx)(re.a,{className:u.dialogContent,children:Object(z.jsx)("div",{className:u.editorContainer,children:Object(z.jsx)(ue.a,{children:function(e){var t=e.height,n=e.width;return Object(z.jsx)(se.a,{width:n,height:t,language:"json",theme:"light"===s.palette.mode?"vs-light":"vs-dark",original:d,value:j,options:de.a,editorWillMount:v,editorDidMount:be})}})})}),Object(z.jsx)(ce.a,{children:Object(z.jsx)(le.a,{onClick:b,color:"primary",children:l("Close")})})]})},ve=n(2445),Oe=Object(L.a)((function(e){return Object(T.a)({fileInput:{opacity:0,position:"absolute",width:"100%"},title:{margin:0},installedPackageDetailList:{width:"100%"}})})),he=function(e){var t=e.value,n=Object(D.a)().t,a=Object(S.useCallback)((function(){switch(t){case 0:return Object(z.jsx)(o.a,{label:n("Unmodified"),variant:"outlined",color:"default"});case 1:return Object(z.jsx)(o.a,{label:n("New"),variant:"outlined",color:"primary"});case 2:return Object(z.jsx)(o.a,{label:n("Modified"),variant:"outlined",color:"warning"});case 3:return Object(z.jsx)(o.a,{label:n("Deleted"),variant:"outlined",color:"error"})}return Object(z.jsx)(z.Fragment,{children:"?"})}),[n,t]);return Object(z.jsx)(z.Fragment,{children:a()})},xe=function(e){var t=e.title,n=e.icon,a=e.list,c=e.itemText,r=Object(D.a)().t,o=Object(S.useState)(!0),f=Object(i.a)(o,2),v=f[0],h=f[1],m=Object(S.useState)(!1),p=Object(i.a)(m,2),g=p[0],k=p[1],w=Object(S.useState)(),C=Object(i.a)(w,2),y=C[0],I=C[1];return Object(z.jsx)(z.Fragment,{children:a&&Object(z.jsxs)(P.a,{item:!0,xs:6,children:[Object(z.jsxs)(l.a,{onClick:function(){h(!v)},children:[Object(z.jsx)(s.a,{children:n&&n()}),Object(z.jsx)(u.a,{primary:t&&r(t)}),v?Object(z.jsx)(Q.a,{}):Object(z.jsx)(Z.a,{})]}),a.map((function(e){return Object(z.jsx)(d.a,{in:v,timeout:"auto",unmountOnExit:!0,children:Object(z.jsx)(j.a,{component:"div",disablePadding:!0,children:Object(z.jsxs)(l.a,{sx:{pl:12},children:[Object(z.jsx)(u.a,{primary:c&&c(e)}),Object(z.jsx)(he,{value:e.actionResult}),Object(z.jsx)(b.a,{title:r("ShowDifferences"),children:Object(z.jsx)(O.a,{onClick:function(){return function(e){I(e),k(!0)}(e)},disabled:2!==e.actionResult,color:"primary","aria-label":r("ShowDifferences"),children:Object(z.jsx)(x.a,{})})}),g&&y&&Object(z.jsx)(fe,{open:g,onClose:function(){return k(!1)},original:y.oldValue,value:y.newValue})]})})})}))]})})},me=function(e){var t,n,a,i,c,r,o,l,s=e.installedPackage,u=Oe();return Object(z.jsx)(z.Fragment,{children:s&&Object(z.jsxs)(j.a,{className:u.installedPackageDetailList,component:"nav","aria-labelledby":"nested-list-subheader",children:[Object(z.jsx)(xe,{title:"ContextTypes",icon:function(){return Object(z.jsx)(H.a,{})},list:s.contextTypes,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name}}),Object(z.jsx)(xe,{title:"ContextSimulations",icon:function(){return Object(z.jsx)(E.a,{})},list:null===(t=s.customCollections)||void 0===t||null===(n=t.find((function(e){return"NimflowContextSimulations"===e.name})))||void 0===n?void 0:n.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(z.jsx)(xe,{title:"Localizations",icon:function(){return Object(z.jsx)(ve.a,{})},list:null===(a=s.customCollections)||void 0===a||null===(i=a.find((function(e){return"NimflowLocalizations"===e.name})))||void 0===i?void 0:i.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.id)}}),Object(z.jsx)(xe,{title:"Widgets",icon:function(){return Object(z.jsx)(ne.a,{})},list:null===(c=s.customCollections)||void 0===c||null===(r=c.find((function(e){return"NimflowDashboardWidgets"===e.name})))||void 0===r?void 0:r.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(z.jsx)(xe,{title:"Dashboards",icon:function(){return Object(z.jsx)(te.a,{})},list:null===(o=s.customCollections)||void 0===o||null===(l=o.find((function(e){return"NimflowDashboards"===e.name})))||void 0===l?void 0:l.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(z.jsx)(xe,{title:"UdFunctions",icon:function(){return Object(z.jsx)($.a,{})},list:s.userDefinedFunctions,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name}}),Object(z.jsx)(xe,{title:"Automation",icon:function(){return Object(z.jsx)(ee.a,{})},list:s.eventListeners,itemText:function(e){var t,n,a,i,c;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.event," => ").concat(null===(a=null!==(c=e.oldValue)&&void 0!==c?c:e.newValue)||void 0===a||null===(i=a.call)||void 0===i?void 0:i.functionName)}}),Object(z.jsx)(xe,{title:"CollectionDefinitions",icon:function(){return Object(z.jsx)($.a,{})},list:s.collectionDefinitions,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.collectionName}})]})})},pe=function(){var e=Object(S.useContext)(q),t=e.isBusy,n=e.pck,i=e.setPck,c=e.installedPackageSimulation,o=e.setInstalledPackageSimulation,l=e.simulateInstallation,s=e.install,u=Object(I.h)(),d=Object(D.a)().t,j=Oe(),h=Object(S.useRef)(null),x=Object(S.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(c=null===(n=t.target)||void 0===n||null===(a=n.files)||void 0===a?void 0:a[0])||void 0===c||!c.type.match(/.+\/json/)){e.next=6;break}return e.next=4,Object(R.c)(c);case 4:(l=e.sent)&&(i(l),o(void 0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,i]);Object(S.useEffect)((function(){n||null!==h&&void 0!==h&&h.current&&h.current.click()}),[h,n]),Object(S.useEffect)((function(){return n&&l(),function(){}}),[l,n]);var m=Object(S.useCallback)((function(){u(-1)}),[u]),g=!t&&n,w=!t&&n;return Object(z.jsx)(G,{children:Object(z.jsx)(V.a,{children:Object(z.jsxs)(P.a,{container:!0,spacing:0,children:[Object(z.jsx)(P.a,{item:!0,xs:12,children:Object(z.jsx)(y.a,{variant:"h6",className:j.title,children:d("ImportingPackage")})}),Object(z.jsx)(P.a,{item:!0,xs:12,children:Object(z.jsxs)(f.a,{children:[Object(z.jsx)(b.a,{title:d("GoBack"),children:Object(z.jsx)(O.a,{onClick:m,disabled:t,size:"large",children:Object(z.jsx)(k.a,{})})}),Object(z.jsx)(b.a,{title:d("Upload"),children:Object(z.jsxs)(O.a,{children:[Object(z.jsx)(v.a,{type:"file",title:"",inputProps:{accept:".nfpck.json"},onChange:x,className:j.fileInput,ref:h,id:"upload-package-file"}),Object(z.jsx)(p.a,{})]})}),Object(z.jsx)(b.a,{title:d("ReviewChanges"),children:Object(z.jsx)(O.a,{onClick:l,disabled:!g,size:"large",children:Object(z.jsx)(E.a,{})})}),Object(z.jsx)(b.a,{title:d("Install"),children:Object(z.jsx)(O.a,{onClick:s,disabled:!w,size:"large",children:Object(z.jsx)(C.a,{})})})]})}),n&&!c&&Object(z.jsx)(P.a,{item:!0,xs:6,children:Object(z.jsx)(N.b,{data:n})}),Object(z.jsx)(me,{installedPackage:c})]})})})},ge=function(){return Object(z.jsx)(G,{children:Object(z.jsx)(pe,{})})};t.default=ge},573:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(2),i=n(1),c=n(12),r=n(15),o=n(5),l=n(2618),s=n(2986),u=n(2419),d=n(1270),j=n(1272),b=n(1271),f=n(738),v=n.n(f),O=n(128),h=Object(s.a)((function(e){return Object(l.a)({errorDetails:{overflow:"auto"}})})),x=function(e){var t=e.error,n=e.stack,a=h();return Object(O.jsxs)(d.a,{children:[Object(O.jsx)(b.a,{expandIcon:Object(O.jsx)(v.a,{}),children:Object(O.jsx)(u.a,{variant:"h5",color:"error",children:t})}),Object(O.jsx)(j.a,{className:a.errorDetails,children:Object(O.jsx)("pre",{children:n})})]})},m=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,a=n.hasError,i=n.error,c=n.errorInfo;return a?Object(O.jsx)(x,{error:null!==(e=null===i||void 0===i?void 0:i.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(o.Component)},629:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(5),i=n(2550),c=n(637),r=n(3006),o=n(529),l=n(595),s=n(922),u=n(128),d=function(){var e=Object(r.a)().t,t=Object(c.b)().enqueueSnackbar,n=Object(o.b)();return Object(a.useCallback)((function(a,c,r){var o=null!==r&&void 0!==r?r:{},d=o.variant,j=void 0===d?"error":d,b=o.dialogTitle,f=void 0===b?e("Error"):b,v=o.dialogProps;if(Object(s.b)(c)&&"string"===typeof a){var O,h=!1===(null===(O=window.navigator)||void 0===O?void 0:O.onLine);a=e(h?"BrowserOfflineMessage":"NetworkErrorMessage",{message:a})}t(a,{variant:j,action:Object(u.jsx)(i.a,{onClick:function(){n({dialogProps:v,title:f,description:Object(u.jsx)(l.a,{error:c})}).catch((function(){}))},children:e("ShowDetails")})})}),[n,t,e])}},639:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={selectOnLineNumbers:!0,automaticLayout:!0,minimap:{enabled:!1},fixedOverflowWidgets:!0}},689:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);i(n,t,"application/json")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,a=new Blob([e]);c(a,t,n)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var a=URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download=t,n&&(i.type=n),document.body.appendChild(i);try{i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(i),setTimeout((function(){return URL.revokeObjectURL(i.href)}),0)}}},r=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){var a,i=null===(a=e.target)||void 0===a?void 0:a.result;if("string"===typeof i){var c=JSON.parse(i);t(c)}n("Invalid data type in blob ".concat(typeof i))},a.onerror=function(e){n("Error reading blob")},a.readAsText(e)}))}},877:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),i=(n(5),n(1248)),c=n(781),r=n(128),o={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},l=function(e){var t=Object(c.a)(),n=Object(a.a)({theme:o,hideRoot:!0,invertTheme:"light"===t.palette.mode},e);return Object(r.jsx)(i.a,Object(a.a)({},n))};t.b=l}}]);
//# sourceMappingURL=68.cb1bfc24.chunk.js.map