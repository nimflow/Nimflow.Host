(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[72],{1181:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(7),a=n(103),c=n(2305),i=n(2986),u=n(2618),o=n(128),l=["children","className"],s=Object(i.a)((function(e){return Object(u.a)({paper:{padding:e.spacing(2),color:e.palette.text.secondary}})})),d=function(e){var t=e.children,n=e.className,i=Object(a.a)(e,l),u=s();return Object(o.jsx)(c.a,Object(r.a)(Object(r.a)({className:"".concat(u.paper," ").concat(n),elevation:3},i),{},{children:t}))}},1515:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),a=n(103),c=n(2419),i=n(128),u=["children"],o=function(e){var t=e.children,n=Object(a.a)(e,u);return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({variant:"h5"},n),{},{children:t}))}},1990:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(518),a=n(130),c=n(5),i=n.n(c),u=n(14),o=n(38),l=n(1582),s=function(e,t){var n,r=null!==(n=e.getValue())&&void 0!==n?n:[],a=null!==r&&void 0!==r?r:[],c=t(a);a!==c&&e.setValue(c,{shouldDirty:!0})},d=function(e){var t,n=e.control,d=e.name,j=(e.keyName,e.defaultValue),f=n.register,b=n.unregister,p=n.fieldsRef,O=n.setValue,v=n.updateFormState,g=n.readFormStateRef,h=n.fieldArrayNamesRef,x=n.shallowFieldsStateRef,m=n.defaultValuesRef,y=n.validateResolver,k=i.a.useMemo((function(){return{getValue:function(){var e,t=null===(e=p.current)||void 0===e?void 0:e[d];if(t)return t.ref.value},setValue:function(e,t){O(d,e,t),g.current.isValid&&y&&y(Object(a.a)({},d,e)),v()}}}),[p,O,d,g,y,v]),C=Object(c.useCallback)((function(){var e,t=!Object(l.d)(h.current,d);return Object(o.isPresent)(x.current[d])&&t?x.current[d]:null!==(e=null!==j&&void 0!==j?j:Object(l.b)(m.current,d))&&void 0!==e?e:[]}),[d,h,x,m,j]),w=null!==(t=k.getValue())&&void 0!==t?t:C(),S=Object(c.useCallback)((function(){if(f({name:d,type:"array-field"}),!k.getValue()){var e=C();k.setValue(e)}return v(),function(){return b(d)}}),[f,b,v,k,d,C]);return i.a.useEffect((function(){S()}),[S]),i.a.useEffect((function(){p.current[d]||S()})),{fields:w,swap:i.a.useCallback((function(e,t){s(k,(function(n){if(n.length<=1)return n;var r=n[e],a=n[t];return n.map((function(n,c){return c===e?a:c===t?r:n}))}))}),[k]),move:i.a.useCallback((function(e,t){s(k,(function(n){return n.length<=1?n:Object(u.v)(e,t,n)}))}),[k]),prepend:i.a.useCallback((function(e){s(k,(function(t){return Array.isArray(e)?Object(u.e)(e,t):Object(u.y)(e,t)}))}),[k]),append:i.a.useCallback((function(e){s(k,(function(t){return Array.isArray(e)?Object(u.e)(t,e):Object(u.a)(e,t)}))}),[k]),remove:i.a.useCallback((function(e){s(k,(function(t){if(0===t.length)return t;if(!Object(o.isDefined)(e))return[];if(t){for(var n=[],r=Array.isArray(e)?e:[e],a=0;a<t.length;a++)r.includes(a)||n.push(t[a]);return n}return t}))}),[k]),insert:i.a.useCallback((function(e,t){s(k,(function(n){return Array.isArray(t)?Object(u.n)(e,t,n):Object(u.m)(e,t,n)}))}),[k]),setAt:i.a.useCallback((function(e,t){s(k,(function(n){if(Array.isArray(t)){var a=Object(r.a)(n);return a.splice.apply(a,[e,t.length].concat(Object(r.a)(t))),a}return Object(u.K)(e,t,n)}))}),[k])}}},2372:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(25),a=n(464),c=n(5),i=n(2618),u=n(2986),o=n(2923),l=n(3018),s=n(3017),d=n(2929),j=n(3019),f=n(3020),b=n(2937),p=n(2440),O=n(2550),v=n(2549),g=n(2988),h=n(3006),x=n(14),m=n(162),y=n(128),k=Object(u.a)((function(e){return Object(i.a)({paper:{backgroundColor:e.palette.background.default},list:{width:"100%",backgroundColor:e.palette.background.paper}})})),C=function(e){var t,n=e.open,i=e.selector,u=e.availableSelectors,C=e.onChange,w=e.onClose,S=k(),V=Object(h.a)().t,N=Object(c.useState)(null!==(t=null===i||void 0===i?void 0:i.dependencies)&&void 0!==t?t:[]),A=Object(a.a)(N,2),T=A[0],E=A[1],R=Object(c.useState)(),D=Object(a.a)(R,2),F=D[0],M=D[1],z=Object(c.useCallback)((function(){var e=Object(r.a)(Object(r.a)({},i),{},{dependencies:T}),t=function(e,t){var n=e.key;if(n&&e.dependencies&&0!==e.dependencies.length){var r=Object(x.r)((function(e){return Object(x.I)(e.flatMap((function(e){var t;return null!==(t=e.dependencies)&&void 0!==t?t:[]})))}),Object(x.j)((function(e){return e.key}),Object(x.a)(e,t).filter((function(e){return e.key}))));return Object(m.b)(n,{getNeighbors:function(e){var t;return null!==(t=r[e])&&void 0!==t?t:[]}})}}(e,u);t?M(V("SelectorCircularDependencyFound",{cycle:t.join(" -> ")})):(M(void 0),null===C||void 0===C||C(e),null===w||void 0===w||w())}),[T,C,w,u,i,V]),W=Object(c.useCallback)((function(e){E((function(t){var n=t.indexOf(e);return-1===n?Object(x.a)(e,t):Object(x.z)(n,1,t)}))}),[E]);return Object(y.jsxs)(o.a,{open:n,onClose:w,fullWidth:!0,maxWidth:"xs",classes:{paper:S.paper},children:[Object(y.jsx)(d.a,{children:V("EditingSelectorDependencies")}),Object(y.jsxs)(s.a,{children:[Object(y.jsx)(j.a,{className:S.list,children:u.map((function(e){return Object(y.jsxs)(f.a,{role:void 0,dense:!0,button:!0,onClick:function(){return W(e.key)},children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(v.a,{edge:"start",checked:T.includes(e.key),tabIndex:-1,disableRipple:!0,color:"primary"})}),Object(y.jsx)(p.a,{primary:e.key})]},e.key)}))}),!!F&&Object(y.jsx)(g.a,{severity:"error",children:F})]}),Object(y.jsxs)(l.a,{children:[Object(y.jsx)(O.a,{onClick:z,color:"primary",children:V("Accept")}),Object(y.jsx)(O.a,{onClick:w,color:"primary",children:V("Cancel")})]})]})}},2857:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextTypeSelectorsEditor",(function(){return J}));var r=n(485),a=n(130),c=n(464),i=n(25),u=n(484),o=n.n(u),l=n(5),s=n(2618),d=n(2986),j=n(2418),f=n(2422),b=n(2439),p=n(862),O=n(3006),v=n(17),g=n(14),h=n(38),x=n(9),m=n(1181),y=n(1515),k=n(1996),C=n(924),w=n(1544),S=n(1507),V=n(132),N=n(1876),A=n(1303),T=n(2534),E=n(2372),R=n(2551),D=n(128),F=Object(d.a)((function(e){return Object(s.a)({icon:{width:"15px",verticalAlign:"middle"}})})),M=function(){var e=Object(O.a)().t,t=F();return Object(D.jsx)(b.a,{title:e("Tagging"),children:Object(D.jsxs)(R.a,{whiteSpace:"nowrap",fontSize:"10px",display:"inline",children:[Object(D.jsx)(w.a,{taggingType:"milestone",className:t.icon}),"/",Object(D.jsx)(w.a,{taggingType:"final",className:t.icon}),"/",Object(D.jsx)(w.a,{taggingType:"tag",className:t.icon}),"/",Object(D.jsx)(w.a,{taggingType:"metric",className:t.icon})]})})},z=n(1944),W=n(162),I=Object(d.a)((function(e){return Object(s.a)({textField:{width:"40ch"},name:{maxWidth:"15ch",maxHeight:"10ch",overflowY:"auto",wordWrap:"break-word"},jsExpression:{maxWidth:"40ch",overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},taggingButton:{textAlign:"center"},fixTaggingColSize:{"& .MuiTableCell-head:first-child":{width:"40px !important"}}})})),P={Container:function(e){return Object(D.jsx)("div",Object(i.a)({},e))}},B=[N.a.state],J=function(e){var t=e.path,n=e.defaultValue,u=Object(O.a)().t,s=I(),d=Object(p.f)(),N=d.getValues,R=d.setValue,F=d.errors,J=Object(w.e)(),K=J.getTaggingType,L=J.toggleTagging,H=J.removeTaggings,U=J.removeInvalidTaggings,X=Object(S.b)().jsCommon,Y=Object(l.useState)(),q=Object(c.a)(Y,2),G=q[0],Q=q[1],Z=N(t),$=Object(l.useCallback)((function(e){return R(t,e)}),[R,t]),_=Object(l.useCallback)((function(e){var t,n=null===(t=C.h.fields)||void 0===t?void 0:t.key.concat(x.m().defined().test({message:function(e){var t=e.value;return v.a.t("SelectorKeyAlreadyExists",{name:t})},test:function(e){return!Z.some((function(t){return t.key===e}))}}));return Object(V.b)(n,e)}),[Z]),ee=Object(l.useCallback)((function(e,n){var r,c=null===(r=C.h.fields)||void 0===r?void 0:r.jsExpression.concat(x.m().defined().test({message:function(){return v.a.t("SelectorCircularDependencyFound")},test:function(e){var r=N(t),a=[];n.jsExpression&&(a=Object(z.a)(e));var c=function(e,t){var n=e.key;if(n&&e.dependencies&&0!==e.dependencies.length){var r=Object(g.r)((function(e){return Object(g.I)(e.flatMap((function(e){var t;return null!==(t=e.dependencies)&&void 0!==t?t:[]})))}),Object(g.j)((function(e){return e.key}),Object(g.a)(e,t).filter((function(e){return e.key}))));return Object(W.b)(n,{getNeighbors:function(e){var t;return null!==(t=r[e])&&void 0!==t?t:[]}})}}(Object(i.a)(Object(i.a)({},n),{},{dependencies:a}),r.filter((function(e){return e.key!==n.key})));return!c||this.createError({path:"jsExpression",message:v.a.t("SelectorCircularDependencyFound",{cycle:c.join(" -> ")})})}}));return Object(V.b)(c,e,{context:Object(a.a)({},C.l,X)})}),[X,N,t]),te=Object(l.useMemo)((function(){return[{title:Object(D.jsx)(M,{}),width:"5ch",render:function(e){var t,n=!e||!(null===(t=e.tableData)||void 0===t||!t.editing),r=null===e||void 0===e?void 0:e.key;if(!r)return null;var a=K(r);return Object(D.jsx)("div",{className:s.taggingButton,children:Object(D.jsx)(b.a,{title:Object(w.b)(a),children:Object(D.jsx)(j.a,{onClick:function(){return L(r)},disabled:n,size:"large",children:Object(D.jsx)(w.a,{taggingType:a})})})})},editable:"never",sorting:!1,headerStyle:{width:"30px",paddingRight:"2px",paddingLeft:"8px"},cellStyle:{width:"30px",paddingRight:"2px",paddingLeft:"0"}},{field:"key",title:u("Name"),width:"20ch",validateValue:_,defaultSort:"asc",render:function(e){return Object(D.jsx)("div",{className:s.name,children:Object(D.jsx)("span",{children:e.key})})},editComponent:function(e){var t=e.value,n=e.onChange,r=e.errorMessage;return Object(D.jsx)(f.a,{defaultValue:t,onChange:function(e){return n(e.target.value)},autoFocus:!0,fullWidth:!0,variant:"standard",error:!!r,helperText:r})}},{field:"jsExpression",title:u("Expression"),width:"20ch",render:function(e){return Object(D.jsx)("div",{className:s.jsExpression,children:Object(D.jsx)("span",{children:e.jsExpression})})},editComponent:function(e){var t=e.value,n=e.onChange,r=e.errorMessage,a=e.rowData;return Object(D.jsx)(k.a,{defaultValue:t,onChange:n,className:s.textField,error:!!r,helperText:r,validator:function(e){return ee(e,a)},freeVariables:B})},validateValue:function(e,t,n){return ee(e,n)},sorting:!1}]}),[s,K,ee,_,u,L]),ne=Object(l.useMemo)((function(){var e=function(e){if(e.jsExpression){var t=Z.map((function(e){return e.key})).filter(h.isPresent);e.dependencies=Object(g.o)(t,Object(z.a)(e.jsExpression))}else e.dependencies=[]},t=function(e,t){var n=!1,r=Z.map((function(r){var a,c=null===(a=r.dependencies)||void 0===a?void 0:a.indexOf(e);if(!Object(h.isPresent)(c)||c<0)return r;n=!0;var u=Object(g.z)(c,1,r.dependencies);return t&&(u=Object(g.m)(c,t,u)),Object(i.a)(Object(i.a)({},r),{},{dependencies:u})}));n&&$(r)},n={onRowAdd:function(){var t=Object(r.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowUpdate:function(){var n=Object(r.a)(o.a.mark((function n(r,a){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(r),(c=null===a||void 0===a?void 0:a.key)&&c!==r.key&&(H(c),t(c,r.key),U());case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),onRowDelete:function(){var e=Object(r.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=n.key)&&(H(r),t(r),U());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return n}),[U,H,Z,$]),re=Object(l.useCallback)((function(e){var t=Z.map((function(t,n){return n!==(null===G||void 0===G?void 0:G.selectorIndex)?t:e}));$(t)}),[Z,G,$]),ae=Object(l.useCallback)((function(){Q(void 0)}),[Q]);return Object(D.jsxs)(m.a,{children:[Object(D.jsx)("div",{className:s.fixTaggingColSize,children:Object(D.jsx)(T.a,{path:t,defaultValue:n,columns:te,title:Object(D.jsx)(y.a,{children:u("CalculatedFields")}),editable:ne,components:P})}),Object(D.jsx)(A.a,{errors:F,names:t}),Object(h.isDefined)(G)&&Object(D.jsx)(E.a,{open:Object(h.isDefined)(G),onClose:ae,selector:G.selector,availableSelectors:G.availableSelectors,onChange:re})]})};t.default=J}}]);
//# sourceMappingURL=72.15da1377.chunk.js.map