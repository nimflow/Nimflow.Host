(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[76],{3194:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextSimulationCreator",(function(){return T}));var r=n(5),a=n.n(r),c=n(21),s=n(1),u=n(3),i=n(830),o=n(952),p=n(810),b=n(7),m=n(3232),f=n(52),l=n(1606),j=n(2281),O=n(735),d=n(1875),v=n(1132),x=n(1133),h=n(1788),y=n(847),w=n(2237),g=n(133),k=function(e){var t=e.contextTypeName,n=Object(i.h)(),r=Object(m.a)().t,k=Object(h.b)(),T=k.simulations_InsertOne,S=k.simulations_FindIdFromName,C=function(e){var t=Object(O.c)().contextTypes_FindOne,n=Object(u.useState)(),r=Object(s.a)(n,2),i=r[0],o=r[1],b=Object(u.useState)(),m=Object(s.a)(b,2),f=m[0],l=m[1],j=Object(u.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pendingEvents:[],contextTypeName:n.name,history:[]},e.next=3,Object(d.c)(n.name,(function(e){return t({name:e})}),n);case 3:c=e.sent,o(r),l(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,l,t]),v=Object(y.a)(t,e),x=Object(p.a)(v,Object(c.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({name:e});case 2:return r=n.sent,j(r),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)}))),{revalidateOnFocus:!1}),h=x.isValidating,w=x.error;return Object(u.useMemo)((function(){return{simulation:i,contextTypeProvider:f,isValidating:h,error:w}}),[i,f,h,w])}(t),N=C.simulation,F=C.contextTypeProvider,P=C.isValidating,I=C.error,V=Object(u.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:r=e.sent,n("../../edit/".concat(r),{replace:!0}),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),c=e.t0.toString(),v.a.isApiException(e.t0)&&(c=e.t0.message,"status"in e.t0&&(c+=" (status: ".concat(e.t0.status,")"))),e.abrupt("return",[{message:c}]);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[n,T]),_=Object(u.useMemo)((function(){return w.a.shape({name:w.a.fields.name.concat(b.m().defined().test({message:function(e){var t=e.value;return r("ContextSimulationNameAlreadyInUse",{name:t})},test:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,S(t);case 4:return n=e.sent,e.abrupt("return",!Object(f.isPresent)(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))})}),[S,r]);return P?Object(g.jsx)(x.b,{}):I?Object(g.jsx)(o.a,{severity:"error",children:I.toString()}):F?Object(g.jsx)(l.a,{contextTypeProvider:F,simulation:N,schema:_,children:Object(g.jsx)(j.a,{onSaveChanges:V})}):null},T=function(e){var t=Object(i.i)().contextTypeName;return t?Object(g.jsx)(k,{contextTypeName:t}):null};t.default=T}}]);
//# sourceMappingURL=76.d2ba91d7.chunk.js.map