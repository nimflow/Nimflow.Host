(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[77],{3007:function(e,t,n){"use strict";n.r(t),n.d(t,"PackageImporter",(function(){return he}));var a=n(19),i=n(4),c=n(8),r=n.n(c),o=n(630),l=n(2979),s=n(2948),u=n(2080),d=n(2046),j=n(3026),b=n(2079),f=n(2099),v=n(2940),O=n(2058),h=n(2747),x=n.n(h),m=n(1e3),p=n.n(m),g=n(577),k=n.n(g),w=n(598),C=n.n(w),y=n(2059),P=n(3008),S=n(6),D=n(3013),I=n(503),V=n(497),N=n(642),E=n(2084),T=n(2344),L=n(2997),R=n(556),B=n(482),F=n(523),M=n(124),U=function(){throw new Error("You forgot to wrap your component in <ImportPackageContextProvider>.")},W={isBusy:!1,setIsBusy:U,setPck:U,simulateInstallation:U,setInstalledPackageSimulation:U,install:U},J=Object(S.createContext)(W),z=function(e){var t=e.children,n=Object(S.useState)(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],s=Object(S.useState)(),u=Object(i.a)(s,2),d=u[0],j=u[1],b=Object(S.useState)(),f=Object(i.a)(b,2),v=f[0],O=f[1],h=Object(D.a)().t,x=Object(F.a)(),m=Object(B.c)().packages_InstallPackage,p=Object(S.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d){e.next=3;break}return e.abrupt("return");case 3:return l(!0),e.next=6,m({simulate:t,package:d});case 6:a=e.sent,O(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),x(h(n),e.t0,{dialogProps:{maxWidth:"lg"}});case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[m,d,x,h]),g=Object(S.useCallback)((function(){return p(!0,"ErrorReviewingPackageChanges")}),[p]),k=Object(S.useCallback)((function(){return p(!1,"ErrorReviewingPackageChanges")}),[p]);return Object(M.jsx)(J.Provider,{value:{isBusy:o,setIsBusy:l,pck:d,setPck:j,installedPackageSimulation:v,setInstalledPackageSimulation:O,simulateInstallation:g,install:k},children:t})},A=n(2748),Y=n.n(A),q=n(1493),G=n.n(q),_=n(568),H=n.n(_),K=n(2098),Q=n(2097),X=n(2096),Z=n(2095),$=n(686),ee=n(2932),te=n(3025),ne=n(3024),ae=n(2939),ie=n(2275),ce=n(562),re=n(511),oe=n(502),le=Object(L.a)((function(e){return Object(T.a)({dialogPaper:{height:"80vh"},dialogContent:{display:"grid",gridTemplateColumns:"auto",placeItems:"stretch",height:"100%",overflowY:"hidden"},editorContainer:{}})})),se=function(e){e.focus()},ue=function(e){var t=e.open,n=e.original,i=e.value,c=e.onClose,o=e.title,l=Object(D.a)().t,s=Object($.a)(),u=le({}),d=Object(S.useMemo)((function(){return n?JSON.stringify(n,void 0,2):""}),[n]),j=Object(S.useMemo)((function(){return i?JSON.stringify(i,void 0,2):""}),[i]),b=Object(S.useCallback)(Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}}),e)}))),[c]),f=Object(S.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===c||void 0===c||c());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]),v=Object(S.useCallback)((function(e){!function(e,t){e.languages.json.jsonDefaults.setDiagnosticsOptions({})}(e)}),[]);return Object(M.jsxs)(ee.a,{open:t,onClose:f,maxWidth:"xl",fullWidth:!0,classes:{paper:u.dialogPaper},children:[Object(M.jsx)(ae.a,{children:null!==o&&void 0!==o?o:l("ShowingDifferences")}),Object(M.jsx)(ne.a,{className:u.dialogContent,children:Object(M.jsx)("div",{className:u.editorContainer,children:Object(M.jsx)(re.a,{children:function(e){var t=e.height,n=e.width;return Object(M.jsx)(ce.a,{width:n,height:t,language:"json",theme:"light"===s.palette.mode?"vs-light":"vs-dark",original:d,value:j,options:oe.a,editorWillMount:v,editorDidMount:se})}})})}),Object(M.jsx)(te.a,{children:Object(M.jsx)(ie.a,{onClick:b,color:"primary",children:l("Close")})})]})},de=n(2085),je=Object(L.a)((function(e){return Object(T.a)({fileInput:{opacity:0,position:"absolute",width:"100%"},title:{margin:0},installedPackageDetailList:{width:"100%"}})})),be=function(e){var t=e.value,n=Object(D.a)().t,a=Object(S.useCallback)((function(){switch(t){case 0:return Object(M.jsx)(o.a,{label:n("Unmodified"),variant:"outlined",color:"default"});case 1:return Object(M.jsx)(o.a,{label:n("New"),variant:"outlined",color:"primary"});case 2:return Object(M.jsx)(o.a,{label:n("Modified"),variant:"outlined",color:"warning"});case 3:return Object(M.jsx)(o.a,{label:n("Deleted"),variant:"outlined",color:"error"})}return Object(M.jsx)(M.Fragment,{children:"?"})}),[n,t]);return Object(M.jsx)(M.Fragment,{children:a()})},fe=function(e){var t=e.title,n=e.icon,a=e.list,c=e.itemText,r=Object(D.a)().t,o=Object(S.useState)(!0),f=Object(i.a)(o,2),v=f[0],h=f[1],m=Object(S.useState)(!1),p=Object(i.a)(m,2),g=p[0],k=p[1],w=Object(S.useState)(),C=Object(i.a)(w,2),y=C[0],I=C[1];return Object(M.jsx)(M.Fragment,{children:a&&Object(M.jsxs)(P.a,{item:!0,xs:6,children:[Object(M.jsxs)(l.a,{onClick:function(){h(!v)},children:[Object(M.jsx)(s.a,{children:n&&n()}),Object(M.jsx)(u.a,{primary:t&&r(t)}),v?Object(M.jsx)(G.a,{}):Object(M.jsx)(H.a,{})]}),a.map((function(e){return Object(M.jsx)(d.a,{in:v,timeout:"auto",unmountOnExit:!0,children:Object(M.jsx)(j.a,{component:"div",disablePadding:!0,children:Object(M.jsxs)(l.a,{sx:{pl:12},children:[Object(M.jsx)(u.a,{primary:c&&c(e)}),Object(M.jsx)(be,{value:e.actionResult}),Object(M.jsx)(b.a,{title:r("ShowDifferences"),children:Object(M.jsx)(O.a,{onClick:function(){return function(e){I(e),k(!0)}(e)},disabled:2!==e.actionResult,color:"primary","aria-label":r("ShowDifferences"),children:Object(M.jsx)(x.a,{})})}),g&&y&&Object(M.jsx)(ue,{open:g,onClose:function(){return k(!1)},original:y.oldValue,value:y.newValue})]})})})}))]})})},ve=function(e){var t,n,a,i,c,r,o,l,s=e.installedPackage,u=je();return Object(M.jsx)(M.Fragment,{children:s&&Object(M.jsxs)(j.a,{className:u.installedPackageDetailList,component:"nav","aria-labelledby":"nested-list-subheader",children:[Object(M.jsx)(fe,{title:"ContextTypes",icon:function(){return Object(M.jsx)(Y.a,{})},list:s.contextTypes,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name}}),Object(M.jsx)(fe,{title:"ContextSimulations",icon:function(){return Object(M.jsx)(E.a,{})},list:null===(t=s.customCollections)||void 0===t||null===(n=t.find((function(e){return"NimflowContextSimulations"===e.name})))||void 0===n?void 0:n.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(M.jsx)(fe,{title:"Localizations",icon:function(){return Object(M.jsx)(de.a,{})},list:null===(a=s.customCollections)||void 0===a||null===(i=a.find((function(e){return"NimflowLocalizations"===e.name})))||void 0===i?void 0:i.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.id)}}),Object(M.jsx)(fe,{title:"Widgets",icon:function(){return Object(M.jsx)(Z.a,{})},list:null===(c=s.customCollections)||void 0===c||null===(r=c.find((function(e){return"NimflowDashboardWidgets"===e.name})))||void 0===r?void 0:r.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(M.jsx)(fe,{title:"Dashboards",icon:function(){return Object(M.jsx)(X.a,{})},list:null===(o=s.customCollections)||void 0===o||null===(l=o.find((function(e){return"NimflowDashboards"===e.name})))||void 0===l?void 0:l.items,itemText:function(e){var t,n;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name)}}),Object(M.jsx)(fe,{title:"UdFunctions",icon:function(){return Object(M.jsx)(K.a,{})},list:s.userDefinedFunctions,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.name}}),Object(M.jsx)(fe,{title:"Automation",icon:function(){return Object(M.jsx)(Q.a,{})},list:s.eventListeners,itemText:function(e){var t,n,a,i,c;return"".concat(null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.event," => ").concat(null===(a=null!==(c=e.oldValue)&&void 0!==c?c:e.newValue)||void 0===a||null===(i=a.call)||void 0===i?void 0:i.functionName)}}),Object(M.jsx)(fe,{title:"CollectionDefinitions",icon:function(){return Object(M.jsx)(K.a,{})},list:s.collectionDefinitions,itemText:function(e){var t,n;return null===(t=null!==(n=e.oldValue)&&void 0!==n?n:e.newValue)||void 0===t?void 0:t.collectionName}})]})})},Oe=function(){var e=Object(S.useContext)(J),t=e.isBusy,n=e.pck,i=e.setPck,c=e.installedPackageSimulation,o=e.setInstalledPackageSimulation,l=e.simulateInstallation,s=e.install,u=Object(I.h)(),d=Object(D.a)().t,j=je(),h=Object(S.useRef)(null),x=Object(S.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(c=null===(n=t.target)||void 0===n||null===(a=n.files)||void 0===a?void 0:a[0])||void 0===c||!c.type.match(/.+\/json/)){e.next=6;break}return e.next=4,Object(R.c)(c);case 4:(l=e.sent)&&(i(l),o(void 0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,i]);Object(S.useEffect)((function(){n||null!==h&&void 0!==h&&h.current&&h.current.click()}),[h,n]),Object(S.useEffect)((function(){return n&&l(),function(){}}),[l,n]);var m=Object(S.useCallback)((function(){u(-1)}),[u]),g=!t&&n,w=!t&&n;return Object(M.jsx)(z,{children:Object(M.jsx)(V.a,{children:Object(M.jsxs)(P.a,{container:!0,spacing:0,children:[Object(M.jsx)(P.a,{item:!0,xs:12,children:Object(M.jsx)(y.a,{variant:"h6",className:j.title,children:d("ImportingPackage")})}),Object(M.jsx)(P.a,{item:!0,xs:12,children:Object(M.jsxs)(f.a,{children:[Object(M.jsx)(b.a,{title:d("GoBack"),children:Object(M.jsx)(O.a,{onClick:m,disabled:t,size:"large",children:Object(M.jsx)(k.a,{})})}),Object(M.jsx)(b.a,{title:d("Upload"),children:Object(M.jsxs)(O.a,{children:[Object(M.jsx)(v.a,{type:"file",title:"",inputProps:{accept:".nfpck.json"},onChange:x,className:j.fileInput,ref:h,id:"upload-package-file"}),Object(M.jsx)(p.a,{})]})}),Object(M.jsx)(b.a,{title:d("ReviewChanges"),children:Object(M.jsx)(O.a,{onClick:l,disabled:!g,size:"large",children:Object(M.jsx)(E.a,{})})}),Object(M.jsx)(b.a,{title:d("Install"),children:Object(M.jsx)(O.a,{onClick:s,disabled:!w,size:"large",children:Object(M.jsx)(C.a,{})})})]})}),n&&!c&&Object(M.jsx)(P.a,{item:!0,xs:6,children:Object(M.jsx)(N.b,{data:n})}),Object(M.jsx)(ve,{installedPackage:c})]})})})},he=function(){return Object(M.jsx)(z,{children:Object(M.jsx)(Oe,{})})};t.default=he},497:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(2),i=n(1),c=n(12),r=n(15),o=n(6),l=n(2344),s=n(2997),u=n(2059),d=n(794),j=n(796),b=n(795),f=n(568),v=n.n(f),O=n(124),h=Object(s.a)((function(e){return Object(l.a)({errorDetails:{overflow:"auto"}})})),x=function(e){var t=e.error,n=e.stack,a=h();return Object(O.jsxs)(d.a,{children:[Object(O.jsx)(b.a,{expandIcon:Object(O.jsx)(v.a,{}),children:Object(O.jsx)(u.a,{variant:"h5",color:"error",children:t})}),Object(O.jsx)(j.a,{className:a.errorDetails,children:Object(O.jsx)("pre",{children:n})})]})},m=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,a=n.hasError,i=n.error,c=n.errorInfo;return a?Object(O.jsx)(x,{error:null!==(e=null===i||void 0===i?void 0:i.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(o.Component)},502:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={selectOnLineNumbers:!0,automaticLayout:!0,minimap:{enabled:!1},fixedOverflowWidgets:!0}},523:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(6),i=n(2275),c=n(540),r=n(3013),o=n(470),l=n(505),s=n(677),u=n(124),d=function(){var e=Object(r.a)().t,t=Object(c.b)().enqueueSnackbar,n=Object(o.b)();return Object(a.useCallback)((function(a,c,r){var o=null!==r&&void 0!==r?r:{},d=o.variant,j=void 0===d?"error":d,b=o.dialogTitle,f=void 0===b?e("Error"):b,v=o.dialogProps;if(Object(s.b)(c)&&"string"===typeof a){var O,h=!1===(null===(O=window.navigator)||void 0===O?void 0:O.onLine);a=e(h?"BrowserOfflineMessage":"NetworkErrorMessage",{message:a})}t(a,{variant:j,action:Object(u.jsx)(i.a,{onClick:function(){n({dialogProps:v,title:f,description:Object(u.jsx)(l.a,{error:c})}).catch((function(){}))},children:e("ShowDetails")})})}),[n,t,e])}},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);i(n,t,"application/json")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,a=new Blob([e]);c(a,t,n)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var a=URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download=t,n&&(i.type=n),document.body.appendChild(i);try{i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(i),setTimeout((function(){return URL.revokeObjectURL(i.href)}),0)}}},r=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){var a,i=null===(a=e.target)||void 0===a?void 0:a.result;if("string"===typeof i){var c=JSON.parse(i);t(c)}n("Invalid data type in blob ".concat(typeof i))},a.onerror=function(e){n("Error reading blob")},a.readAsText(e)}))}},642:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),i=(n(6),n(793)),c=n(686),r=n(124),o={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},l=function(e){var t=Object(c.a)(),n=Object(a.a)({theme:o,hideRoot:!0,invertTheme:"light"===t.palette.mode},e);return Object(r.jsx)(i.a,Object(a.a)({},n))};t.b=l}}]);
//# sourceMappingURL=77.16de87c3.chunk.js.map