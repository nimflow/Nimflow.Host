(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[20],{2846:function(e,t,a){"use strict";a.r(t),a.d(t,"TaskTypeEditorDialog",(function(){return Xe}));var n=a(58),r=a(1),l=a(4),s=a(6),i=a.n(s),o=a(2614),c=a(2989),d=a(2548),u=a(2925),j=a(3020),b=a(3019),p=a(2932),h=a(9),m=a(857),O=a(1502),v=a(17),f=a(3008),x=a(1604),g=a(917),k=a(19),C=a(98),S=a(8),T=a.n(S),y=a(459),D=a(2438),w=a(2403),R=a(3021),E=a(3022),N=a(3032),V=a(2437),I=a(2416),W=a(733),J=a.n(W),A=a(2248),P=a.n(A),F=a(591),B=a.n(F),H=a(569),M=a.n(H),K=a(3002),q=a(2417),z=a(1988),L=a(2377),G=a(1503),Y=a(127),Q=a(1872),U=a(1299),X=a(902),Z=a(123),$=Object(c.a)((function(e){return Object(o.a)({textField:{width:"40ch"},toolbar:{minHeight:"48px"}})})),_=g.i.key,ee=g.i.value,te={Container:function(e){return Object(Z.jsx)("div",Object(r.a)({},e))}},ae=[Q.a.state],ne=function(e){var t=e.path,a=Object(m.f)().errors,r=$(),i=Object(G.b)().jsCommon,o=Object(X.c)({voteIdPrefix:"TaskTypeDataSettersEditor"}),c=Object(s.useCallback)((function(e){return Object(Y.b)(ee,e,{context:Object(n.a)({},g.l,i)})}),[i]),d=Object(s.useMemo)((function(){return[{title:v.a.t("Key"),width:"20ch"},{title:v.a.t("Expression"),width:"40ch",editComponent:function(e){var t=e.value,a=e.onChange,n=e.errorMessage;return Object(Z.jsx)(z.a,{defaultValue:t,onChange:a,className:r.textField,error:!!n,helperText:n,validator:c,freeVariables:ae})}}]}),[r.textField,c]),u=Object(l.a)(d,2),j=u[0],b=u[1],p=Object(s.useCallback)((function(e){o(!e)}),[o]);return Object(Z.jsx)(K.a,{container:!0,spacing:2,children:Object(Z.jsxs)(K.a,{item:!0,xs:12,children:[Object(Z.jsx)(L.a,{path:t,keyColumn:j,keySchema:_,valueColumn:b,valueSchema:ee,title:Object(Z.jsx)(q.a,{variant:"h6",children:v.a.t("DataSetters")}),components:te,onEditionStateChanged:p}),Object(Z.jsx)(U.a,{errors:a,names:t})]})})},re=a(2420),le=a(2457),se=a(2551),ie=a(2436),oe=a(1944),ce=a.n(oe),de=a(38),ue=a(2530),je=a(2992),be=a(3035),pe=a(683),he=a(777),me=a(2423),Oe=a(592),ve=a(2981),fe=a(901),xe=a(634),ge=Object(c.a)((function(e){return Object(o.a)({dialogPaper:{height:"80vh"},dialogContent:{},writeTab:{display:function(e){return 0===e.activeTab?"grid":"none"},gridTemplateColumns:"auto",gridTemplateRows:function(e){return e.showErrors?"auto ".concat(100,"px"):"auto"},rowGap:"5px",placeItems:"stretch",overflowY:"hidden",height:"calc(100% - 50px)"},previewTab:{height:"calc(100% - 50px)",overflowY:"auto"},editorContainer:{gridColumn:"1 / 2",gridRow:"1 / 2"},errorContainer:{gridColumn:"1 / 2",gridRow:"2 / 3",overflowY:"auto"}})})),ke=function(e){return{selectOnLineNumbers:!0,minimap:{enabled:!1}}},Ce=function(e){e.focus()},Se=function(e){var t=e.open,a=e.defaultValue,n=e.onChange,r=e.onClose,i=e.title,o=Object(f.a)().t,c=Object(he.a)(),h=Object(fe.a)(),m=Object(s.useState)([]),O=Object(l.a)(m,1)[0],v=Object(s.useState)(a),x=Object(l.a)(v,2),g=x[0],C=x[1],S=Object(s.useState)(0),y=Object(l.a)(S,2),D=y[0],w=y[1],R=ge({showErrors:O.length>0,activeTab:D}),E=Object(s.useCallback)((function(){null===n||void 0===n||n(g),r()}),[g,n,r]),N=Object(s.useCallback)(Object(k.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a!==g,!e.t0){e.next=5;break}return e.next=4,h();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:r();case 8:case"end":return e.stop()}}),e)}))),[g,a,h,r]),V=Object(s.useCallback)(function(){var e=Object(k.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a!==g,!e.t0){e.next=5;break}return e.next=4,h();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:"backdropClick"!==n&&(null===r||void 0===r||r());case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[g,a,h,r]);return Object(Z.jsxs)(u.a,{open:t,onClose:V,maxWidth:"md",fullWidth:!0,classes:{paper:R.dialogPaper},children:[Object(Z.jsx)(p.a,{children:null!==i&&void 0!==i?i:o("EditingMarkdown")}),Object(Z.jsxs)(b.a,{className:R.dialogContent,children:[Object(Z.jsxs)(je.a,{value:D,onChange:function(e,t){w(t)},variant:"scrollable",scrollButtons:!0,indicatorColor:"primary",textColor:"primary",allowScrollButtonsMobile:!0,children:[Object(Z.jsx)(be.a,{label:o("Write")}),Object(Z.jsx)(be.a,{label:o("Preview")})]}),Object(Z.jsxs)("div",{role:"tabpanel",hidden:0!==D,className:R.writeTab,children:[Object(Z.jsx)("div",{className:R.editorContainer,children:Object(Z.jsx)(Oe.a,{children:function(e){var t=e.height,a=e.width;return Object(Z.jsx)(pe.b,{width:a,height:t,language:"markdown",theme:"light"===c.palette.mode?"vs-light":"vs-dark",value:g,options:xe.a,onChange:C,editorWillMount:ke,editorDidMount:Ce})}})}),O.length>0&&Object(Z.jsx)("div",{className:R.errorContainer,children:Object(Z.jsx)(me.a,{component:"span",error:!0,children:O.map((function(e,t){return Object(Z.jsx)("p",{children:e},t)}))})})," "]}),Object(Z.jsx)("div",{role:"tabpanel",hidden:1!==D,className:R.previewTab,children:Object(Z.jsx)(ve.a,{children:null!==g&&void 0!==g?g:""})})]}),Object(Z.jsxs)(j.a,{children:[Object(Z.jsx)(d.a,{onClick:E,color:"primary",children:o("Accept")}),Object(Z.jsx)(d.a,{onClick:N,color:"primary",children:o("Cancel")})]})]})},Te=["defaultValue","value","onChange","variant"],ye=Object(s.forwardRef)((function(e,t){var a=e.defaultValue,n=e.value,i=e.onChange,o=e.variant,c=Object(C.a)(e,Te),d="value"in e,u=Object(s.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],h=Object(ue.a)(t),m=c,O=Object(s.useCallback)((function(e){!d&&h.current&&(h.current.value=null!==e&&void 0!==e?e:""),null===i||void 0===i||i(e)}),[i,d,h]);return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(re.a,Object(r.a)({inputRef:h,type:"text",defaultValue:a,value:d&&!Object(de.isPresent)(n)?"":n,onChange:function(e){return null===i||void 0===i?void 0:i(e.target.value)},InputProps:{endAdornment:Object(Z.jsx)(ie.a,{position:"end",children:Object(Z.jsx)(I.a,{onClick:function(){return p(!0)},size:"large",children:Object(Z.jsx)(ce.a,{})})})},multiline:!0,maxRows:3,variant:null!==o&&void 0!==o?o:"standard"},m)),b&&Object(Z.jsx)(Se,{open:b,onClose:function(){return p(!1)},defaultValue:null!==n&&void 0!==n?n:a,onChange:O})]})})),De=a(994),we=Object(c.a)((function(e){return Object(o.a)({textField:{width:"40ch"}})})),Re=[Q.a.state],Ee=[Q.a.state,Q.a.task],Ne=[Q.a.state,Q.a.task],Ve=[Q.a.state,Q.a.task],Ie=[Q.a.state,Q.a.task],We=[Q.a.state,Q.a.task],Je=[Q.a.state,Q.a.task],Ae=function(){var e,t,a,r,l,i,o,c,d,u,j,b,p,h,O,v,x,k,C,S,T,y,D=Object(f.a)().t,w=Object(s.useCallback)((function(e){return D(null!==e&&void 0!==e?e:"")}),[D]),R=we(),E=Object(De.c)().isFeatureSupported,N=Object(m.f)(),V=N.control,I=N.getValues,W=N.errors,J=Object(G.b)().jsCommon,A=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsCondition,e,{context:Object(n.a)({},g.l,J)})}),[J]),P=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsAssignedTo,e,{context:Object(n.a)({},g.l,J)})}),[J]),F=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsAssignedToRole,e,{context:Object(n.a)({},g.l,J)})}),[J]),B=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsStartDate,e,{context:Object(n.a)({},g.l,J)})}),[J]),H=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsStartBeforeDate,e,{context:Object(n.a)({},g.l,J)})}),[J]),M=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsDueDate,e,{context:Object(n.a)({},g.l,J)})}),[J]),L=Object(s.useCallback)((function(e){var t;return Object(Y.b)(null===(t=g.j.fields)||void 0===t?void 0:t.jsImportance,e,{context:Object(n.a)({},g.l,J)})}),[J]);return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(le.a,{children:Object(Z.jsx)(q.a,{variant:"h6",children:w("Task")})}),Object(Z.jsx)(se.a,{pl:3,pr:3,children:Object(Z.jsxs)(K.a,{container:!0,spacing:2,children:[Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:re.a,control:V,name:"name",label:w("Name"),className:R.textField,autoFocus:!0,InputLabelProps:{required:!0},variant:"standard",error:!!W.name,helperText:w(null===(e=W.name)||void 0===e?void 0:e.message)})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:re.a,control:V,name:"titleTemplate",defaultValue:null!==(t=I("titleTemplate"))&&void 0!==t?t:"",label:w("TitleTemplate"),fullWidth:!0,InputLabelProps:{required:!0},placeholder:w("EnterHandlebarsTemplate"),variant:"standard",error:!!W.titleTemplate,helperText:w(null===(a=W.titleTemplate)||void 0===a?void 0:a.message)})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:ye,control:V,name:"settings.taskDetailsTemplate",defaultValue:null!==(r=I("settings.taskDetailsTemplate"))&&void 0!==r?r:"",label:w("TaskDetailsTemplate"),fullWidth:!0,placeholder:w("EnterHandlebarsTemplate"),error:!(null===(l=W.settings)||void 0===l||!l.taskDetailsTemplate),helperText:w(null===(i=W.settings)||void 0===i||null===(o=i.taskDetailsTemplate)||void 0===o?void 0:o.message)})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsCondition",defaultValue:null!==(c=I("jsCondition"))&&void 0!==c?c:"",label:w("JsCondition"),fullWidth:!0,placeholder:w("EnterBooleanExpression"),error:!!W.jsCondition,helperText:w(null===(d=W.jsCondition)||void 0===d?void 0:d.message),validator:A,freeVariables:Re,returnType:"boolean"})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsAssignedTo",defaultValue:null!==(u=I("jsAssignedTo"))&&void 0!==u?u:"",label:w("JsAssignedTo"),fullWidth:!0,placeholder:w("EnterStringExpression"),error:!!W.jsAssignedTo,helperText:w(null===(j=W.jsAssignedTo)||void 0===j?void 0:j.message),validator:P,freeVariables:Ee,returnType:"string"})}),E(De.a.RoleBasedSecurity)&&Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsAssignedToRole",defaultValue:null!==(b=I("jsAssignedToRole"))&&void 0!==b?b:"",label:w("JsAssignedToRole"),fullWidth:!0,placeholder:w("EnterStringExpression"),error:!!W.jsAssignedToRole,helperText:w(null===(p=W.jsAssignedToRole)||void 0===p?void 0:p.message),validator:F,freeVariables:Ne,returnType:"string"})}),E(De.a.ContextTaskStartDate)&&Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsStartDate",defaultValue:null!==(h=I("jsStartDate"))&&void 0!==h?h:"",label:w("JsStartDate"),fullWidth:!0,placeholder:w("EnterDateExpression"),error:!!W.jsStartDate,helperText:w(null===(O=W.jsStartDate)||void 0===O?void 0:O.message),validator:B,freeVariables:Ve,returnType:"Date | string"})}),E(De.a.ContextTaskStartBeforeDate)&&Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsStartBeforeDate",defaultValue:null!==(v=I("jsStartBeforeDate"))&&void 0!==v?v:"",label:w("JsStartBeforeDate"),fullWidth:!0,placeholder:w("EnterDateExpression"),error:!!W.jsStartBeforeDate,helperText:w(null===(x=W.jsStartBeforeDate)||void 0===x?void 0:x.message),validator:H,freeVariables:Ie,returnType:"Date | string"})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsDueDate",defaultValue:null!==(k=I("jsDueDate"))&&void 0!==k?k:"",label:w("JsDueDate"),fullWidth:!0,placeholder:w("EnterDateExpression"),error:!!W.jsDueDate,helperText:w(null===(C=W.jsDueDate)||void 0===C?void 0:C.message),validator:M,freeVariables:We,returnType:"Date | string"})}),Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:z.a,control:V,name:"jsImportance",defaultValue:null!==(S=I("jsImportance"))&&void 0!==S?S:"",label:w("JsImportance"),fullWidth:!0,placeholder:w("EnterImportanceExpression"),error:!!W.jsImportance,helperText:w(null===(T=W.jsImportance)||void 0===T?void 0:T.message),validator:L,freeVariables:Je,returnType:"number | string"})}),E(De.a.EventsStorageKeysExclusion)&&Object(Z.jsx)(K.a,{item:!0,xs:12,children:Object(Z.jsx)(m.a,{as:re.a,control:V,name:"excludeTaskDataKeysFromEventsStorage",label:w("ExcludeTaskDataKeysFromEventsStorage"),fullWidth:!0,placeholder:w("ExcludeStringPlaceHolder"),variant:"standard",error:!!W.excludeTaskDataKeysFromEventsStorage,helperText:w(null===(y=W.excludeTaskDataKeysFromEventsStorage)||void 0===y?void 0:y.message)})})]})})]})},Pe=a(521),Fe=a(2541),Be=["children","visible"],He="240px",Me=Object(c.a)((function(e){return Object(o.a)({root:{flexGrow:1,backgroundColor:e.palette.background.default,display:"flex",height:"100%",width:"100%"},list:{width:"100%",maxWidth:He,backgroundColor:e.palette.background.paper,borderRight:"1px solid ".concat(e.palette.divider),minHeight:"500px"},panels:{width:"calc(100% - ".concat(He,")")},nested:{paddingLeft:e.spacing(4)},textField:{width:"40ch"},item:{border:"2px solid limegreen",borderRadius:2,paddingRight:48},listItemRoot:{overflow:"hidden"},actionHeading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},summaryTextContainer:{width:"100%",height:"100%",display:"flex",alignItems:"center"},divider:{height:5,background:"transparent"},grow:{flexGrow:1},toolbarButtons:{display:"flex"},paper:{padding:e.spacing(2),color:e.palette.text.secondary},selected:{fontWeight:"bold"},content:{backgroundColor:e.palette.background.default,minWidth:"100%"}})}));function Ke(e){var t=e.children,a=e.visible,n=Object(C.a)(e,Be);return Object(Z.jsx)("div",Object(r.a)(Object(r.a)({role:"tabpanel",hidden:!a},n),{},{style:{width:"100%"},children:t}))}var qe="header",ze="setters",Le="responses",Ge=function(e){var t=e.definitionJsonSchemas,a=e.onDefinitionJsonSchemasChange,o=Object(f.a)().t,c=Me(),d=i.a.useState(!0),u=Object(l.a)(d,2),j=u[0],b=u[1],p=function(e){var t=Object(s.useState)(null!==e&&void 0!==e?e:{main:qe}),a=Object(l.a)(t,2),n=a[0],r=a[1],i=Object(s.useCallback)((function(){r({main:qe})}),[r]),o=(null===n||void 0===n?void 0:n.main)===qe,c=Object(s.useCallback)((function(){r({main:ze})}),[r]),d=(null===n||void 0===n?void 0:n.main)===ze,u=Object(s.useCallback)((function(e){r({main:Le,responseIndex:e})}),[r]),j=(null===n||void 0===n?void 0:n.main)===Le,b=(null===n||void 0===n?void 0:n.main)===Le?null===n||void 0===n?void 0:n.responseIndex:void 0;return{headerSectionSelected:o,setHeaderSectionSelected:i,settersSectionSelected:d,setSettersSectionSelected:c,responsesSectionSelected:j,responseIndexSelected:b,isResponseSelected:function(e){return b===e},setResponseIndexSelected:u}}(),h=p.headerSectionSelected,O=p.setHeaderSectionSelected,v=p.settersSectionSelected,x=p.setSettersSectionSelected,g=p.responsesSectionSelected,C=p.isResponseSelected,S=p.setResponseIndexSelected,W=Object(m.f)(),A=W.control,F=W.errors,H=W.getValues,K=W.setValue,q=W.watch,z=W.clearErrors,L=Object(m.d)({control:A,name:"validResponses",keyName:"name"}),G=L.fields,Y=L.append,Q=L.remove,U=Object(Pe.c)(),X=Object(s.useCallback)((function(){b(!j)}),[j]),$=Object(s.useCallback)((function(e){for(var t=o("NewResponseDefaultName"),a=2,n=t;G.findIndex((function(e){return e.name===n}))>=0;)n=t+a++;Y({name:n,validators:[],jsSetters:{}}),S(G.length),z("validResponses"),e.stopPropagation()}),[Y,z,S,o,G]),_=Object(s.useCallback)(function(){var e=Object(k.a)(T.a.mark((function e(n){var l,s,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({description:o("ConfirmDeleteResponseType",{name:G[n].name})});case 2:e.sent&&((s=null===(l=G[n])||void 0===l?void 0:l.payloadSchemaDefinitionName)&&s in t&&(delete(i=Object(r.a)({},t))[s],null===a||void 0===a||a(i)),Q(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[U,t,a,Q,o,G]),ee=Object(s.useCallback)((function(){return F.name||F.titleTemplate?"error":void 0}),[F.name,F.titleTemplate]),te=Object(s.useCallback)((function(){return F.jsTaskDataSetters?"error":void 0}),[F.jsTaskDataSetters]),ae=Object(s.useCallback)((function(){return F.validResponses?"error":void 0}),[F.validResponses]),re=Object(s.useCallback)((function(e){var a=e.payloadSchemaDefinitionName;if(a)return t[a]}),[t]),le=Object(s.useCallback)((function(e,n,l,s){var i=Object(r.a)({},t);if(!s&&e.payloadSchemaDefinitionName)delete i[e.payloadSchemaDefinitionName];else{if(!s||!l)return;i[l]=s}var o="validResponses[".concat(n,"].payloadSchemaDefinitionName");H(o)!==l&&(K(o,l,{shouldDirty:!0}),e.payloadSchemaDefinitionName=l),null===a||void 0===a||a(i)}),[t,H,a,K]);return Object(Z.jsxs)("div",{className:c.root,children:[Object(Z.jsxs)(R.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:c.list,children:[Object(Z.jsx)(E.a,{button:!0,selected:h,onClick:O,children:Object(Z.jsx)(D.a,{classes:{root:c.listItemRoot},primary:o("Task"),primaryTypographyProps:{className:Object(y.default)(Object(n.a)({},c.selected,h)),color:ee()}})}),Object(Z.jsx)(E.a,{button:!0,selected:v,onClick:x,children:Object(Z.jsx)(D.a,{classes:{root:c.listItemRoot},primary:o("Setters"),primaryTypographyProps:{className:Object(y.default)(Object(n.a)({},c.selected,v)),color:te()}})}),Object(Z.jsxs)(E.a,{button:!0,onClick:X,children:[Object(Z.jsx)(D.a,{classes:{root:c.listItemRoot},primary:o("Responses"),primaryTypographyProps:{className:Object(y.default)(Object(n.a)({},c.selected,g)),color:ae()}}),j?Object(Z.jsx)(P.a,{}):Object(Z.jsx)(J.a,{}),Object(Z.jsx)(V.a,{title:o("NewResponseType"),children:Object(Z.jsx)(I.a,{onClick:$,size:"large",children:Object(Z.jsx)(B.a,{})})})]}),Object(Z.jsx)(w.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(Z.jsx)(R.a,{component:"div",disablePadding:!0,children:null===G||void 0===G?void 0:G.map((function(e,t){var a,r=C(t);return Object(Z.jsxs)(E.a,{button:!0,selected:r,onClick:function(){return S(t)},className:c.nested,children:[Object(Z.jsx)(D.a,{classes:{root:c.listItemRoot},primary:q("validResponses[".concat(t,"].name")),primaryTypographyProps:{variant:"subtitle1",className:Object(y.default)(Object(n.a)({},c.selected,r)),color:null!==F&&void 0!==F&&null!==(a=F.validResponses)&&void 0!==a&&a[t]?"error":"textSecondary"}}),Object(Z.jsx)(N.a,{children:Object(Z.jsx)(V.a,{title:o("Delete"),children:Object(Z.jsx)(I.a,{edge:"end","aria-label":"delete",onClick:function(){return _(t)},size:"large",children:Object(Z.jsx)(M.a,{})})})})]},e.name)}))})})]}),Object(Z.jsxs)("div",{className:c.panels,children:[Object(Z.jsx)(Ke,{visible:h,children:Object(Z.jsx)(Ae,{})}),Object(Z.jsx)(Ke,{visible:v,children:Object(Z.jsx)(ne,{path:"jsTaskDataSetters"})}),null===G||void 0===G?void 0:G.map((function(e,t){return Object(Z.jsx)(Ke,{visible:C(t),children:Object(Z.jsx)(Fe.a,{path:"validResponses[".concat(t,"]"),defaultValue:e,taskTypeName:H("name"),definitionJsonSchema:re(e),onDefinitionJsonSchemaChange:function(a,n){return le(e,t,n,a)}})},e.name)}))]})]})},Ye=a(13),Qe=a(2211),Ue=Object(c.a)((function(e){return Object(o.a)({paper:{backgroundColor:e.palette.background.default}})})),Xe=function(e){var t,a=e.open,i=e.defaultValue,o=e.definitionJsonSchemas,c=e.onChange,k=e.onClose,C=Ue(),S=Object(m.f)(),T=Object(s.useMemo)((function(){var e;return function(e){var t=g.g.shape({payloadSchemaDefinitionName:h.m()}),a=g.j.fields.name;return e&&e.length>0&&(a=a.concat(h.m().defined().test({message:function(e){var t=e.value;return v.a.t("TaskTypeNameAlreadyExists",{name:t})},test:function(t){return!e.includes(t)}}))),g.j.shape({name:a,validResponses:h.e().of(t.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return v.a.t("DuplicateResponseTypeNames",{names:t.join(", ")})}))})}(null===S||void 0===S||null===(e=S.getValues().tasks)||void 0===e?void 0:e.map((function(e){return e.name})).filter((function(e){return e!==(null===i||void 0===i?void 0:i.name)})))}),[S,i]),y=Object(s.useState)(o),D=Object(l.a)(y,2),w=D[0],R=D[1],E=Object(m.e)({mode:"onChange",reValidateMode:"onChange",defaultValues:null!==i&&void 0!==i?i:{},context:(t={},Object(n.a)(t,g.l,S.getValues("jsCommon")),Object(n.a)(t,g.m,(function(){var e=S.getValues("jsonSchema"),t=JSON.parse(null!==e&&void 0!==e?e:Qe.a);return w!==o&&(t.definitions=Object(r.a)(Object(r.a)({},t.definitions),Object(Ye.r)((function(e){return e?JSON.parse(e):void 0}),w))),t})),t),resolver:Object(O.a)(T,{strict:!0,abortEarly:!1})}),N=E.control,V=E.handleSubmit,I=Object(f.a)().t,W=Object(X.b)(),J=Object(s.useCallback)((function(e){null===c||void 0===c||c(e,w),null===k||void 0===k||k()}),[w,c,k]);return Object(Z.jsxs)(u.a,{open:a,fullWidth:!0,maxWidth:"xl",classes:{paper:C.paper},children:[Object(Z.jsx)(m.b,Object(r.a)(Object(r.a)({},E),{},{children:Object(Z.jsx)("form",{onSubmit:V(J),children:Object(Z.jsxs)(X.a,Object(r.a)(Object(r.a)({},W),{},{children:[Object(Z.jsx)(p.a,{children:I("EditingTaskType")}),Object(Z.jsx)(b.a,{children:Object(Z.jsx)(Ge,{definitionJsonSchemas:w,onDefinitionJsonSchemasChange:R})}),Object(Z.jsxs)(j.a,{children:[Object(Z.jsx)(d.a,{type:"submit",color:"primary",disabled:!W.canAccept,children:I("Accept")}),Object(Z.jsx)(d.a,{onClick:k,color:"primary",children:I("Cancel")})]})]}))})})),Object(Z.jsx)(x.DevTool,{control:N})]})};t.default=Xe}}]);
//# sourceMappingURL=20.4d852de5.chunk.js.map