(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[60],{1513:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(1),a=r(4),c=r(98),i=r(6),o=r(2546),u=r(495),l=r(2470),s=r(2423),b=r(123),d=["name","label","onChange","onBlur","helperText","error","disabled","controlValueAdapter","FormHelperTextProps","LabelProps"],j=function(e){var t,r=e.name,j=e.label,O=e.onChange,f=e.onBlur,v=e.helperText,p=(e.error,e.disabled),h=e.controlValueAdapter,x=e.FormHelperTextProps,m=e.LabelProps,g=Object(c.a)(e,d),k=Object(u.g)().isSubmitting,C=Object(u.f)({name:r}),w=Object(a.a)(C,3),S=w[0],y=w[1],F=w[2],E=y.error,D=y.touched&&!!E,W=Object(i.useCallback)((function(e,t){F.setValue(h?h(t):t),null===O||void 0===O||O(e,t)}),[h,F,O]),T=Object(i.useCallback)((function(e){S.onBlur(e),null===f||void 0===f||f(e)}),[S,f]),B=Object(b.jsx)(o.a,Object(n.a)(Object(n.a)({},S),{},{checked:null!==(t=S.checked)&&void 0!==t?t:S.value,onChange:W,onBlur:T,disabled:null!==p&&void 0!==p?p:k},g));return Object(b.jsxs)(b.Fragment,{children:[!!j&&Object(b.jsx)(l.a,Object(n.a)({control:B,label:j},m)),!j&&Object(b.jsx)(b.Fragment,{children:B}),v&&Object(b.jsx)(s.a,Object(n.a)(Object(n.a)({error:D},x),{},{children:D?E:v}))]})}},2202:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2452),a=r(2549),c=r(17),i=r(9),o=i.k().shape({name:i.m().required().identifier(),role:i.m(),roles:i.e().of(i.m()),expires:i.m().iso8601Formatted().test({message:"ExpirationDateMustBeAFutureDate",test:function(e){if(!e||"string"!==typeof e)return!0;var t=Object(n.default)(e);if(!Object(a.a)(t))return!0;var r=this.parent;return!(t<new Date&&!r.id)||this.createError({path:"expires",message:c.a.t("ExpirationDateMustBeAFutureDate")})}}),active:i.g()})},2378:function(e,t,r){"use strict";r.d(t,"a",(function(){return Q}));var n=r(1),a=r(19),c=r(8),i=r.n(c),o=r(6),u=r(2989),l=r(2614),s=r(3002),b=r(2457),d=r(2437),j=r(2416),O=r(736),f=r.n(O),v=r(764),p=r.n(v),h=r(780),x=r.n(h),m=r(495),g=r(3008),k=r(632),C=r(596),w=r(775),S=r(2473),y=r(564),F=r(2202),E=r(521),D=r(590),W=r(770),T=r(624),B=r(127),A=r(630),V=r(553),I=r(1513),M=r(2420),P=r(994),N=r(637),R=r(585),q=r(532),L=r(978),G=r(123),H=Object(u.a)((function(e){return Object(l.a)({textField:{width:"40ch"}})})),_=function(){var e=Object(q.c)().roleDefinitions_GetAll,t=Object(N.a)(e),r=Object(P.c)().isFeatureSupported,n=Object(R.a)(t,Object(a.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(P.a.RoleBasedSecurity)){t.next=2;break}return t.abrupt("return",["Worker","Maker","Owner","DigitalWorker"]);case 2:return t.next=4,e({});case 4:return a=t.sent,t.abrupt("return",null!==(n=null===a||void 0===a?void 0:a.map((function(e){return e.name})))&&void 0!==n?n:[]);case 6:case"end":return t.stop()}}),t)}))),{revalidateOnFocus:!1}),c=n.data,u=n.isValidating,l=n.mutate,s=n.error;return Object(o.useMemo)((function(){return{roleNames:c,isValidating:u,error:s,revalidate:l}}),[c,u,l,s])},z=function(e){var t=e.name,r=e.onChange,a=_(),c=a.roleNames,i=a.isValidating,u=H(),l=Object(g.a)().t,s=Object(o.useCallback)((function(e,t){null===r||void 0===r||r(null!==t&&void 0!==t?t:void 0)}),[r]);return Object(G.jsx)(L.a,{name:t,onChange:s,options:null!==c&&void 0!==c?c:[],loading:i,renderInput:function(e){return Object(G.jsx)(M.a,Object(n.a)(Object(n.a)({},e),{},{variant:"standard",className:u.textField,label:l("Role")}))}})},J=function(e){var t=e.name,r=e.onChange,a=_(),c=a.roleNames,i=a.isValidating,u=H(),l=Object(g.a)().t,s=Object(o.useCallback)((function(e,t){null===r||void 0===r||r(null!==t&&void 0!==t?t:void 0)}),[r]);return Object(G.jsx)(L.a,{name:t,onChange:s,options:null!==c&&void 0!==c?c:[],loading:i,multiple:!0,renderInput:function(e){return Object(G.jsx)(M.a,Object(n.a)(Object(n.a)({},e),{},{variant:"standard",className:u.textField,label:l("Roles")}))}})},K=Object(u.a)((function(e){return Object(l.a)({form:{height:"100%"},root:{flexGrow:1},toolbar:{minHeight:"48px",paddingLeft:0},paper:{padding:e.spacing(2),color:e.palette.text.secondary},grow:{flexGrow:1},actionToolbarButtons:{display:"flex"},textField:{width:"40ch"},button:{margin:e.spacing(1)},saveAsEllipsis:{position:"absolute",left:17,bottom:4,fontWeight:"bold"},booleanEditor:{marginTop:15}})})),U=function(e){var t,r=e.schema,c=void 0===r?F.a:r,u=e.onSave,l=Object(g.a)().t,O=K(),v=Object(C.h)(),h=Object(k.b)().enqueueSnackbar,y=Object(P.c)().isFeatureSupported,E=Object(m.g)(),D=E.isSubmitting,A=E.errors,N=E.validateForm,R=E.values,q=E.dirty,L=E.setFieldValue,H=!D,_=Object(T.a)(),U=Object(o.useMemo)((function(){return{description:l("ExitingDigitalWorkerEditorWithoutSavingWarning")}}),[l]);Object(W.a)(q,U);var Q=Object(w.a)(Object(o.useCallback)(Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return e.next=3,u();case 3:case"end":return e.stop()}}),e)}))),[u])),X=Object(o.useCallback)(Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.b)(c,R);case 2:return t=e.sent,e.next=5,N();case 5:t.length>0?_(l("DigitalWorkerHasValidationErrors"),t,{dialogProps:{maxWidth:"lg"}}):h(l("DigitalWorkerIsValid"),{variant:"success"});case 6:case"end":return e.stop()}}),e)}))),[c,R,N,_,l,h]),Y=Object(o.useCallback)((function(){v(-1)}),[v]),Z=Object(o.useCallback)((function(e){L("expires",e?e.toISOString():void 0)}),[L]);return Object(G.jsxs)(s.a,{container:!0,spacing:3,children:[Object(G.jsx)(s.a,{item:!0,xs:12,children:Object(G.jsxs)(b.a,{className:O.toolbar,children:[Object(G.jsx)(d.a,{title:l("GoBack"),children:Object(G.jsx)(j.a,{onClick:Y,disabled:D,size:"large",children:Object(G.jsx)(f.a,{})})}),Object(G.jsx)(d.a,{title:l("SaveChanges"),children:Object(G.jsx)(j.a,{onClick:Q,disabled:!H,size:"large",children:Object(G.jsx)(p.a,{})})}),Object(G.jsx)(d.a,{title:l("Validate"),children:Object(G.jsx)(j.a,{onClick:X,size:"large",children:Object(G.jsx)(x.a,{})})})]})}),Object(G.jsx)(s.a,{item:!0,xs:3,children:Object(G.jsx)(V.a,{name:"name",label:l("Name"),variant:"standard",fullWidth:!0,InputLabelProps:{required:!0},required:!0})}),Object(G.jsx)(s.a,{item:!0,xs:3,children:y(P.a.DigitalWorkersWithMultipleRoles)&&Object(G.jsx)(J,{name:"roles"})||Object(G.jsx)(z,{name:"role"})}),Object(G.jsx)(s.a,{item:!0,xs:6}),!!R.id&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(s.a,{item:!0,xs:6,children:Object(G.jsx)(V.a,{name:"apiKey",label:l("ApiKey"),variant:"standard",fullWidth:!0})}),Object(G.jsx)(s.a,{item:!0,xs:6})]}),Object(G.jsx)(s.a,{item:!0,xs:3,children:Object(G.jsx)(S.a,{label:l("Expires"),inputFormat:l("DATE_FORMAT"),renderInput:function(e){return Object(G.jsx)(M.a,Object(n.a)(Object(n.a)({},e),{},{variant:"standard",fullWidth:!0,error:!!A.expires,helperText:A.expires}))},value:null!==(t=R.expires)&&void 0!==t?t:null,onChange:Z})}),Object(G.jsx)(s.a,{item:!0,xs:3,children:!!R.id&&Object(G.jsx)(I.a,{name:"active",label:l("Active"),inputProps:{required:!0},required:!0,LabelProps:{className:O.booleanEditor}})}),Object(G.jsx)(s.a,{item:!0,xs:6})]})},Q=function(e){var t=e.value,r=e.schema,c=void 0===r?F.a:r,u=e.onSave,l=Object(g.a)().t,s=K(),b=Object(E.b)(),d=Object(k.b)().enqueueSnackbar,j=Object(o.useRef)();Object(o.useEffect)((function(){var e;null===(e=j.current)||void 0===e||e.resetForm({values:t})}),[t]);var O=Object(o.useRef)(),f=Object(o.useCallback)((function(){var e=j.current;return e&&u&&(O.current=function(){var e=Object(a.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r=Object(G.jsx)(D.a,{error:e.t0});case 11:if(!r){e.next=16;break}return e.next=14,b({title:l("ErrorSavingDigitalWorker"),description:r,mapCloseTo:"ok",actions:[{type:"ok",text:l("Ok")}]});case 14:e.next=17;break;case 16:d(l("DigitalWorkerSaved"),{variant:"success"});case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(A.a)(e)),Promise.resolve()}),[b,d,u,l]),v=Object(o.useCallback)(function(){var e=Object(a.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O.current){e.next=5;break}return e.next=4,O.current(t);case 4:O.current=void 0;case 5:return e.prev=5,r.setSubmitting(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})));return function(t,r){return e.apply(this,arguments)}}(),[]);return Object(G.jsx)(y.a,{children:Object(G.jsx)(m.d,{innerRef:function(e){return j.current=e},initialValues:t,onSubmit:v,validationSchema:c,validateOnChange:!0,validateOnBlur:!0,children:Object(G.jsx)(m.c,{autoComplete:"off",className:s.form,children:Object(G.jsx)(U,Object(n.a)(Object(n.a)({},e),{},{onSave:f}))})})})}},2963:function(e,t,r){"use strict";r.r(t),r.d(t,"DigitalWorkerUpdater",(function(){return p}));var n=r(19),a=r(12),c=r(4),i=r(8),o=r.n(i),u=r(6),l=r(9),s=r(596),b=r(3008),d=r(532),j=r(2378),O=r(2202),f=r(994),v=r(123),p=function(){var e=Object(s.i)().name,t=Object(b.a)().t,r=Object(u.useState)(),i=Object(c.a)(r,2),p=i[0],h=i[1],x=Object(d.c)(),m=x.digitalWorkers_Update,g=x.digitalWorkers_Search,k=Object(f.c)().isFeatureSupported;Object(u.useEffect)((function(){g({name:e}).then((function(e){if(e.length>0){var t=e[0];t.roles||(t.roles=[]),t.role&&t.roles.indexOf(t.role)<0&&(t.roles=[t.role].concat(Object(a.a)(t.roles)),t.role=void 0),h(t)}}))}),[g,e]);var C=Object(u.useCallback)(function(){var e=Object(n.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({id:t.id,name:t.name,expires:t.expires,active:t.active,role:k(f.a.DigitalWorkersWithMultipleRoles)?void 0:t.role,roles:t.roles});case 2:return h(t),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,k]),w=Object(u.useMemo)((function(){return O.a.shape({name:O.a.fields.name.concat(l.m().defined().test({message:function(e){var r=e.value;return t("DashboardDefinitionNameAlreadyExists",{name:r})},test:function(){var e=Object(n.a)(o.a.mark((function e(t){var r,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,g({name:t});case 4:return r=e.sent,e.abrupt("return",r.every((function(e){return e.id===n.parent.id})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))})}),[g,t]);return p?Object(v.jsx)(j.a,{value:p,schema:w,onSave:C}):null};t.default=p},553:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(1),a=r(4),c=r(98),i=r(6),o=r(2420),u=r(495),l=r(38),s=r(123),b=["name","debounce","onChange","onBlur","helperText","error","disabled","controlValueAdapter"],d=function(e){var t=e.name,r=e.debounce,d=e.onChange,j=e.onBlur,O=e.helperText,f=(e.error,e.disabled),v=e.controlValueAdapter,p=Object(c.a)(e,b),h=Object(u.g)().isSubmitting,x=Object(u.f)({name:t}),m=Object(a.a)(x,3),g=m[0],k=m[1],C=m[2],w=k.error,S=k.touched&&!!w,y=Object(i.useState)(g.value),F=Object(a.a)(y,2),E=F[0],D=F[1],W=Object(i.useState)(),T=Object(a.a)(W,2),B=T[0],A=T[1];Object(i.useEffect)((function(){D(g.value)}),[g.value]);var V=Object(i.useCallback)((function(e){var t=e.target.value;C.setValue(v?v(t):t),null===d||void 0===d||d(e)}),[v,C,d]),I=Object(i.useCallback)((function(e){D((function(t){var r=e.target.value;return r||t})),Object(l.isPresent)(r)?(e.persist(),B&&clearTimeout(B),A(setTimeout((function(){return V(e)}),r))):V(e)}),[V,r,B]),M=Object(i.useCallback)((function(e){g.onBlur(e),null===j||void 0===j||j(e)}),[g,j]);return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(o.a,Object(n.a)(Object(n.a)({},g),{},{variant:"standard",value:null!==E&&void 0!==E?E:"",onChange:I,onBlur:M,error:S,helperText:S?w:O,disabled:null!==f&&void 0!==f?f:h},p))})}},564:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(2),a=r(3),c=r(14),i=r(15),o=r(6),u=r(2614),l=r(2989),s=r(2417),b=r(1264),d=r(1266),j=r(1265),O=r(733),f=r.n(O),v=r(123),p=Object(l.a)((function(e){return Object(u.a)({errorDetails:{overflow:"auto"}})})),h=function(e){var t=e.error,r=e.stack,n=p();return Object(v.jsxs)(b.a,{children:[Object(v.jsx)(j.a,{expandIcon:Object(v.jsx)(f.a,{}),children:Object(v.jsx)(s.a,{variant:"h5",color:"error",children:t})}),Object(v.jsx)(d.a,{className:n.errorDetails,children:Object(v.jsx)("pre",{children:r})})]})},x=function(e){Object(c.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(a.a)(r,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,r=this.state,n=r.hasError,a=r.error,c=r.errorInfo;return n?Object(v.jsx)(h,{error:null!==(e=null===a||void 0===a?void 0:a.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),r}(o.Component)},624:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(6),a=r(2548),c=r(632),i=r(3008),o=r(521),u=r(590),l=r(915),s=r(123),b=function(){var e=Object(i.a)().t,t=Object(c.b)().enqueueSnackbar,r=Object(o.b)();return Object(n.useCallback)((function(n,c,i){var o=null!==i&&void 0!==i?i:{},b=o.variant,d=void 0===b?"error":b,j=o.dialogTitle,O=void 0===j?e("Error"):j,f=o.dialogProps;if(Object(l.b)(c)&&"string"===typeof n){var v,p=!1===(null===(v=window.navigator)||void 0===v?void 0:v.onLine);n=e(p?"BrowserOfflineMessage":"NetworkErrorMessage",{message:n})}t(n,{variant:d,action:Object(s.jsx)(a.a,{onClick:function(){r({dialogProps:f,title:O,description:Object(s.jsx)(u.a,{error:c})}).catch((function(){}))},children:e("ShowDetails")})})}),[r,t,e])}},630:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return i}));var n=r(38),a=function e(t){var r={};if(t)for(var a=function(){var a=i[c];Array.isArray(t[a])?t[a].forEach((function(t,c){var i=r[a];Object(n.isPresent)(i)||(r[a]=i=[]),i[c]=e(t)})):"object"===typeof t[a]&&null!==t[a]?r[a]=e(t[a]):r[a]=!0},c=0,i=Object.keys(t);c<i.length;c++)a();return r},c=function(e){return e.validateForm().then((function(t){return Object.keys(t).length>0&&e.setTouched(a(t)),t}))},i=function(e){return e.validateForm().then((function(t){Object.keys(t).length>0?e.setTouched(a(t)):e.handleSubmit()}))}},770:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(19),a=r(1),c=r(8),i=r.n(c),o=r(6),u=r(3008),l=r(596),s=r(521),b=function(e,t){var r=Object(s.c)(),c=Object(u.a)().t,b=Object(o.useMemo)((function(){return Object(a.a)({description:c("ExitingWithoutSavingWarning"),confirmationText:c("Continue")},t)}),[t,c]),d=Object(o.useCallback)(function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(b);case 2:e.sent&&t.retry();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,b]);Object(l.e)(d,e)}},978:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(1),a=r(4),c=r(98),i=r(6),o=r(1303),u=r(495),l=r(123),s=["name","controlValueAdapter","onChange","onBlur","renderInput","multiple","loading","disabled"],b=function(e){var t=e.name,r=e.controlValueAdapter,b=e.onChange,d=e.onBlur,j=e.renderInput,O=e.multiple,f=e.loading,v=e.disabled,p=Object(c.a)(e,s),h=Object(u.g)(),x=h.isSubmitting,m=h.setFieldTouched,g=Object(u.f)({name:t}),k=Object(a.a)(g,3),C=k[0],w=k[1],S=k[2],y=w.error,F=w.touched&&!!y,E=Object(i.useCallback)((function(e,t,n,a){var c=r?r(t):t;S.setValue(null!==c&&void 0!==c?c:void 0),null===b||void 0===b||b(e,t,n,a)}),[r,S,b]),D=Object(i.useCallback)((function(e){m(C.name),C.onBlur(e),null===d||void 0===d||d(e)}),[C,d,m]),W=Object(i.useCallback)((function(e){return j?j(Object(n.a)(Object(n.a)({},e),{},{error:F,helperText:F?y:void 0})):null}),[y,j,F]),T=Object(i.useMemo)((function(){var t=void 0;return void 0===(t=r?e.options.find((function(e){return r(e)===C.value})):C.value)&&(t=O?[]:null),t}),[r,C.value,O,e.options]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(o.a,Object(n.a)(Object(n.a)({},C),{},{value:null!==T&&void 0!==T?T:null,onChange:E,onBlur:D,renderInput:W,disabled:null!==v&&void 0!==v?v:x,loading:f||x,multiple:O},p))})}}}]);
//# sourceMappingURL=60.ed95d989.chunk.js.map