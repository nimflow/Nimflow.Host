(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[80],{3127:function(e,t,n){"use strict";n.r(t),n.d(t,"importCollectionDefinitionFromJson",(function(){return k})),n.d(t,"CollectionDefinitionImporter",(function(){return C}));var r=n(3),o=n(22),c=n(8),i=n.n(c),a=n(6),u=n(444),s=n(658),l=n.n(s),b=n(3161),f=n(537),d=n(64),p=n(33),v=n(138),j=n(499),O=n(923),h=n(590),m=n(569),x=n(2028),g=n(1285),y=n(2138),w=n(136),k=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(p.e)(t),!Object(p.b)(n)){e.next=3;break}return e.abrupt("return",Object(d.a)(Object(d.c)(n.errors)));case 3:return"object"===typeof(r=Object(u.a)(t)).itemSchema&&(r.itemSchema=JSON.stringify(r.itemSchema,void 0,2)),e.next=7,Object(v.b)(x.a,r);case 7:if(!((o=e.sent).length>0)){e.next=10;break}return e.abrupt("return",Object(d.a)(o));case 10:return e.abrupt("return",Object(d.b)(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)().t,t=Object(f.i)().blobUrl,n=Object(f.h)(),c=Object(O.a)(),u=Object(g.a)(),s=u.searchCollectionDefinitions,d=u.updateCollectionDefinition,p=u.addCollectionDefinition,v=Object(a.useState)(),x=Object(r.a)(v,2),C=x[0],S=x[1],N=Object(m.a)(),R=Object(j.c)();Object(a.useEffect)((function(){if(t){var r=atob(t);r&&l.a.get(r,{responseType:"blob"}).then(function(){var t=Object(o.a)(i.a.mark((function t(r){var o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)(r.data);case 2:return o=t.sent,t.next=5,k(o);case 5:if("success"!==(c=t.sent).type){t.next=11;break}return S(c.result),t.abrupt("return");case 11:N(e("FileIsNotAValidCollectionDefinition"),c.errors,{dialogProps:{maxWidth:"lg"}}),n("../..");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){n("../..")})).finally((function(){URL.revokeObjectURL(r)}))}}),[t,n,c,e,N]);var U=Object(a.useCallback)(function(){var t=Object(o.a)(i.a.mark((function t(r){var o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({collectionName:r.collectionName});case 2:if(!((o=t.sent).length>0)){t.next=15;break}return t.next=6,R({description:e("ConfirmOverwrite",{name:r.collectionName})});case 6:if(t.sent){t.next=9;break}return t.abrupt("return",!1);case 9:return r.id=o[0].id,t.next=12,d(r);case 12:c=t.sent,t.next=18;break;case 15:return t.next=17,p(r);case 17:c=t.sent;case 18:return S(c),setTimeout((function(){n("../../edit/".concat(c.id),{replace:!0})}),0),t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[s,R,e,d,p,n]);return C?Object(w.jsx)(y.a,{value:C,onSave:U}):null};t.default=C},590:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);o(n,t,"application/json")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,r=new Blob([e]);c(r,t,n)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=t,n&&(o.type=n),document.body.appendChild(o);try{o.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(o),setTimeout((function(){return URL.revokeObjectURL(o.href)}),0)}}},i=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){var r,o=null===(r=e.target)||void 0===r?void 0:r.result;if("string"===typeof o){var c=JSON.parse(o);t(c)}n("Invalid data type in blob ".concat(typeof o))},r.onerror=function(e){n("Error reading blob")},r.readAsText(e)}))}},923:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),o=n(499),c=n(3161),i=n(540),a=n(136),u=function(){var e=Object(o.b)(),t=Object(c.a)().t;return Object(r.useCallback)((function(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e({title:o.title,description:Object(a.jsx)("span",{style:{display:"block",maxHeight:"200px"},children:Object(a.jsx)(i.a,{error:n})}),dialogProps:o.dialogProps,mapCloseTo:"close",actions:[{type:"close",text:null!==(r=o.closeText)&&void 0!==r?r:t("Close"),buttonProps:o.closeButtonProps}]}).then((function(){})).catch((function(){}))}),[e,t])}}}]);
//# sourceMappingURL=80.0b37cd62.chunk.js.map