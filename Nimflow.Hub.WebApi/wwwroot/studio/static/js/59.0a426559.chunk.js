(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[59],{1008:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return i}));var n=r(52),a=function e(t){var r={};if(t)for(var a=function(){var a=i[c];Array.isArray(t[a])?t[a].forEach((function(t,c){var i=r[a];Object(n.isPresent)(i)||(r[a]=i=[]),i[c]=e(t)})):"object"===typeof t[a]&&null!==t[a]?r[a]=e(t[a]):r[a]=!0},c=0,i=Object.keys(t);c<i.length;c++)a();return r},c=function(e){return e.validateForm().then((function(t){return Object.keys(t).length>0&&e.setTouched(a(t)),t}))},i=function(e){return e.validateForm().then((function(t){Object.keys(t).length>0?e.setTouched(a(t)):e.handleSubmit()}))}},1010:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(3),a=r(911),c=r(1027),i=r(3232),o=r(595),s=r(845),u=r(1226),l=r(133),b=function(){var e=Object(i.a)().t,t=Object(c.b)().enqueueSnackbar,r=Object(o.b)();return Object(n.useCallback)((function(n,c,i){var o=null!==i&&void 0!==i?i:{},b=o.variant,j=void 0===b?"error":b,d=o.dialogTitle,f=void 0===d?e("Error"):d,O=o.dialogProps;if(Object(u.b)(c)&&"string"===typeof n){var v,p=!1===(null===(v=window.navigator)||void 0===v?void 0:v.onLine);n=e(p?"BrowserOfflineMessage":"NetworkErrorMessage",{message:n})}t(n,{variant:j,action:Object(l.jsx)(a.a,{onClick:function(){r({dialogProps:O,title:f,description:Object(l.jsx)(s.a,{error:c})}).catch((function(){}))},children:e("ShowDetails")})})}),[r,t,e])}},1144:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(5),a=r.n(n),c=r(21),i=r(4),o=r(3),s=r(3232),u=r(830),l=r(595),b=function(e,t){var r=Object(l.c)(),n=Object(s.a)().t,b=Object(o.useMemo)((function(){return Object(i.a)({description:n("ExitingWithoutSavingWarning"),confirmationText:n("Continue")},t)}),[t,n]),j=Object(o.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(b);case 2:e.sent&&t.retry();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,b]);Object(u.e)(j,e)}},1409:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(4),a=r(1),c=r(73),i=r(3),o=r(888),s=r(514),u=r(930),l=r(909),b=r(133),j=["name","label","onChange","onBlur","helperText","error","disabled","controlValueAdapter","FormHelperTextProps","LabelProps"],d=function(e){var t,r=e.name,d=e.label,f=e.onChange,O=e.onBlur,v=e.helperText,p=(e.error,e.disabled),h=e.controlValueAdapter,x=e.FormHelperTextProps,m=e.LabelProps,g=Object(c.a)(e,j),k=Object(s.f)().isSubmitting,C=Object(s.e)({name:r}),w=Object(a.a)(C,3),S=w[0],y=w[1],E=w[2],D=y.error,T=y.touched&&!!D,W=Object(i.useCallback)((function(e,t){E.setValue(h?h(t):t),null===f||void 0===f||f(e,t)}),[h,E,f]),F=Object(i.useCallback)((function(e){S.onBlur(e),null===O||void 0===O||O(e)}),[S,O]),A=Object(b.jsx)(o.a,Object(n.a)(Object(n.a)({},S),{},{checked:null!==(t=S.checked)&&void 0!==t?t:S.value,onChange:W,onBlur:F,disabled:null!==p&&void 0!==p?p:k},g));return Object(b.jsxs)(b.Fragment,{children:[!!d&&Object(b.jsx)(u.a,Object(n.a)({control:A,label:d},m)),!d&&Object(b.jsx)(b.Fragment,{children:A}),v&&Object(b.jsx)(l.a,Object(n.a)(Object(n.a)({error:T},x),{},{children:T?D:v}))]})}},1923:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2677),a=r(2404),c=r(18),i=r(7),o=i.k().shape({name:i.m().required().identifier(),role:i.m().required(),expires:i.m().iso8601Formatted().test({message:"ExpirationDateMustBeAFutureDate",test:function(e){if(!e||"string"!==typeof e)return!0;var t=Object(n.a)(e);if(!Object(a.a)(t))return!0;var r=this.parent;return!(t<new Date&&!r.id)||this.createError({path:"expires",message:c.a.t("ExpirationDateMustBeAFutureDate")})}}),active:i.g()})},2364:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(4),a=r(5),c=r.n(a),i=r(21),o=r(3),s=r(3227),u=r(3157),l=r(957),b=r(921),j=r(914),d=r(894),f=r(1175),O=r.n(f),v=r(1200),p=r.n(v),h=r(1194),x=r.n(h),m=r(514),g=r(3232),k=r(1027),C=r(830),w=r(1220),S=r(3185),y=r(814),E=r(1923),D=r(595),T=r(845),W=r(1144),F=r(1010),A=r(138),B=r(1008),P=r(733),q=r(1409),V=r(902),I=r(133),M=Object(s.a)((function(e){return Object(u.a)({form:{height:"100%"},root:{flexGrow:1},toolbar:{minHeight:"48px",paddingLeft:0},paper:{padding:e.spacing(2),color:e.palette.text.secondary},grow:{flexGrow:1},actionToolbarButtons:{display:"flex"},textField:{width:"40ch"},button:{margin:e.spacing(1)},saveAsEllipsis:{position:"absolute",left:17,bottom:4,fontWeight:"bold"},booleanEditor:{marginTop:15}})})),L=function(e){var t,r=e.schema,a=void 0===r?E.a:r,s=e.onSave,u=Object(g.a)().t,f=M(),v=Object(C.h)(),h=Object(k.b)().enqueueSnackbar,y=Object(m.f)(),D=y.isSubmitting,T=y.errors,B=y.validateForm,L=y.values,N=y.dirty,R=y.setFieldValue,H=!D,z=Object(F.a)(),G=Object(o.useMemo)((function(){return{description:u("ExitingDigitalWorkerEditorWithoutSavingWarning")}}),[u]);Object(W.a)(N,G);var _=Object(w.a)(Object(o.useCallback)(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=3;break}return e.next=3,s();case 3:case"end":return e.stop()}}),e)}))),[s])),J=Object(o.useCallback)(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.b)(a,L);case 2:return t=e.sent,e.next=5,B();case 5:t.length>0?z(u("DigitalWorkerHasValidationErrors"),t,{dialogProps:{maxWidth:"lg"}}):h(u("DigitalWorkerIsValid"),{variant:"success"});case 6:case"end":return e.stop()}}),e)}))),[a,L,B,z,u,h]),K=Object(o.useCallback)((function(){v(-1)}),[v]),Q=Object(o.useCallback)((function(e){R("expires",e?e.toISOString():void 0)}),[R]);return Object(I.jsxs)(l.a,{container:!0,spacing:3,children:[Object(I.jsx)(l.a,{item:!0,xs:12,children:Object(I.jsxs)(b.a,{className:f.toolbar,children:[Object(I.jsx)(j.a,{title:u("GoBack"),children:Object(I.jsx)(d.a,{onClick:K,disabled:D,size:"large",children:Object(I.jsx)(O.a,{})})}),Object(I.jsx)(j.a,{title:u("SaveChanges"),children:Object(I.jsx)(d.a,{onClick:_,disabled:!H,size:"large",children:Object(I.jsx)(p.a,{})})}),Object(I.jsx)(j.a,{title:u("Validate"),children:Object(I.jsx)(d.a,{onClick:J,size:"large",children:Object(I.jsx)(x.a,{})})})]})}),Object(I.jsx)(l.a,{item:!0,xs:3,children:Object(I.jsx)(P.a,{name:"name",label:u("Name"),variant:"standard",fullWidth:!0,InputLabelProps:{required:!0},required:!0})}),Object(I.jsx)(l.a,{item:!0,xs:3,children:Object(I.jsx)(P.a,{name:"role",label:u("Role"),variant:"standard",fullWidth:!0,InputLabelProps:{required:!0},required:!0,disabled:!!L.id})}),Object(I.jsx)(l.a,{item:!0,xs:6}),!!L.id&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(l.a,{item:!0,xs:6,children:Object(I.jsx)(P.a,{name:"apiKey",label:u("ApiKey"),variant:"standard",fullWidth:!0})}),Object(I.jsx)(l.a,{item:!0,xs:6})]}),Object(I.jsx)(l.a,{item:!0,xs:3,children:Object(I.jsx)(S.a,{label:u("Expires"),inputFormat:u("DATE_FORMAT"),renderInput:function(e){return Object(I.jsx)(V.a,Object(n.a)(Object(n.a)({},e),{},{variant:"standard",fullWidth:!0,error:!!T.expires,helperText:T.expires}))},value:null!==(t=L.expires)&&void 0!==t?t:null,onChange:Q})}),Object(I.jsx)(l.a,{item:!0,xs:3,children:!!L.id&&Object(I.jsx)(q.a,{name:"active",label:u("Active"),inputProps:{required:!0},required:!0,LabelProps:{className:f.booleanEditor}})}),Object(I.jsx)(l.a,{item:!0,xs:6})]})},N=function(e){var t=e.value,r=e.schema,a=void 0===r?E.a:r,s=e.onSave,u=Object(g.a)().t,l=M(),b=Object(D.b)(),j=Object(k.b)().enqueueSnackbar,d=Object(o.useRef)();Object(o.useEffect)((function(){var e;null===(e=d.current)||void 0===e||e.resetForm({values:t})}),[t]);var f=Object(o.useRef)(),O=Object(o.useCallback)((function(){var e=d.current;return e&&s&&(f.current=function(){var e=Object(i.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r=Object(I.jsx)(T.a,{error:e.t0});case 11:if(!r){e.next=16;break}return e.next=14,b({title:u("ErrorSavingDigitalWorker"),description:r,mapCloseTo:"ok",actions:[{type:"ok",text:u("Ok")}]});case 14:e.next=17;break;case 16:j(u("DigitalWorkerSaved"),{variant:"success"});case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(B.a)(e)),Promise.resolve()}),[b,j,s,u]),v=Object(o.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f.current){e.next=5;break}return e.next=4,f.current(t);case 4:f.current=void 0;case 5:return e.prev=5,r.setSubmitting(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})));return function(t,r){return e.apply(this,arguments)}}(),[]);return Object(I.jsx)(y.a,{children:Object(I.jsx)(m.c,{innerRef:function(e){return d.current=e},initialValues:t,onSubmit:v,validationSchema:a,validateOnChange:!0,validateOnBlur:!0,children:Object(I.jsx)(m.b,{autoComplete:"off",className:l.form,children:Object(I.jsx)(L,Object(n.a)(Object(n.a)({},e),{},{onSave:O}))})})})}},3206:function(e,t,r){"use strict";r.r(t),r.d(t,"DigitalWorkerCreator",(function(){return h}));var n=r(5),a=r.n(n),c=r(21),i=r(1),o=r(3),s=r(2404),u=r(2692),l=r(2677),b=r(830),j=r(7),d=r(3232),f=r(735),O=r(2364),v=r(1923),p=r(133),h=function(){var e=Object(b.h)(),t=Object(d.a)().t,r=Object(f.c)(),n=r.digitalWorkers_Add,h=r.digitalWorkers_Search,x=Object(o.useState)((function(){return{id:"",name:"",active:!0}})),m=Object(i.a)(x,2),g=m[0],k=m[1],C=Object(o.useCallback)(function(){var t=Object(c.a)(a.a.mark((function t(r){var c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=void 0,r.expires&&(i=Object(l.a)(r.expires),Object(s.a)(i)&&(c=Object(u.a)(i,new Date))),t.next=4,n({name:r.name,role:r.role,expiresInDays:c});case 4:return k(r),setTimeout((function(){return e("../edit/".concat(r.name),{replace:!0})}),0),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,e]),w=Object(o.useMemo)((function(){return v.a.shape({name:v.a.fields.name.concat(j.m().defined().test({message:function(e){var r=e.value;return t("DigitalWorkerNameAlreadyExists",{name:r})},test:function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,h({name:t});case 4:return r=e.sent,e.abrupt("return",0===r.length);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))})}),[h,t]);return Object(p.jsx)(O.a,{value:g,schema:w,onSave:C})};t.default=h},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(4),a=r(1),c=r(73),i=r(3),o=r(902),s=r(514),u=r(52),l=r(133),b=["name","debounce","onChange","onBlur","helperText","error","disabled","controlValueAdapter"],j=function(e){var t=e.name,r=e.debounce,j=e.onChange,d=e.onBlur,f=e.helperText,O=(e.error,e.disabled),v=e.controlValueAdapter,p=Object(c.a)(e,b),h=Object(s.f)().isSubmitting,x=Object(s.e)({name:t}),m=Object(a.a)(x,3),g=m[0],k=m[1],C=m[2],w=k.error,S=k.touched&&!!w,y=Object(i.useState)(g.value),E=Object(a.a)(y,2),D=E[0],T=E[1],W=Object(i.useState)(),F=Object(a.a)(W,2),A=F[0],B=F[1];Object(i.useEffect)((function(){T(g.value)}),[g.value]);var P=Object(i.useCallback)((function(e){var t=e.target.value;C.setValue(v?v(t):t),null===j||void 0===j||j(e)}),[v,C,j]),q=Object(i.useCallback)((function(e){T((function(t){var r=e.target.value;return r||t})),Object(u.isPresent)(r)?(e.persist(),A&&clearTimeout(A),B(setTimeout((function(){return P(e)}),r))):P(e)}),[P,r,A]),V=Object(i.useCallback)((function(e){g.onBlur(e),null===d||void 0===d||d(e)}),[g,d]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(o.a,Object(n.a)(Object(n.a)({},g),{},{variant:"standard",value:null!==D&&void 0!==D?D:"",onChange:q,onBlur:V,error:S,helperText:S?w:f,disabled:null!==O&&void 0!==O?O:h},p))})}},814:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(2),a=r(9),c=r(15),i=r(16),o=r(3),s=r(3157),u=r(3227),l=r(896),b=r(818),j=r(819),d=r(820),f=r(1072),O=r.n(f),v=r(133),p=Object(u.a)((function(e){return Object(s.a)({errorDetails:{overflow:"auto"}})})),h=function(e){var t=e.error,r=e.stack,n=p();return Object(v.jsxs)(b.a,{children:[Object(v.jsx)(d.a,{expandIcon:Object(v.jsx)(O.a,{}),children:Object(v.jsx)(l.a,{variant:"h5",color:"error",children:t})}),Object(v.jsx)(j.a,{className:n.errorDetails,children:Object(v.jsx)("pre",{children:r})})]})},x=function(e){Object(c.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(a.a)(r,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,r=this.state,n=r.hasError,a=r.error,c=r.errorInfo;return n?Object(v.jsx)(h,{error:null!==(e=null===a||void 0===a?void 0:a.message)&&void 0!==e?e:"",stack:null!==(t=null===c||void 0===c?void 0:c.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),r}(o.Component)}}]);
//# sourceMappingURL=59.0a426559.chunk.js.map