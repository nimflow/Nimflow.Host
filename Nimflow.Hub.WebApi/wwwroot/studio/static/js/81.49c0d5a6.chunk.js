(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[81],{1876:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(21),a=n(0),c=n(19),i=n(8),o=n.n(i),s=n(14),u=n(60),l=n(549),d=n(30),h=n(125),b=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,c,i,b,j,f,m,p,O,g,v,x,C,w,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete t.jsInitializers,i=Object(d.g)(t),!Object(d.c)(i)){e.next=4;break}return e.abrupt("return",Object(u.a)(Object(u.c)(i.errors)));case 4:delete(b=Object(s.c)(t)).$schema,"object"===typeof b.jsonSchema&&(b.jsonSchema=JSON.stringify(b.jsonSchema,void 0,2)),"object"===typeof(null===(n=b.settings)||void 0===n?void 0:n.uiSchemaCommon)&&(b.settings.uiSchemaCommon=JSON.stringify(b.settings.uiSchemaCommon,void 0,2)),j=Object(a.a)(b.actions);try{for(j.s();!(f=j.n()).done;)m=f.value,p=m.settings,"object"===typeof(O=null===p||void 0===p?void 0:p.uiSchema)&&(p.uiSchema=JSON.stringify(O,void 0,2))}catch(o){j.e(o)}finally{j.f()}g=Object(a.a)(b.tasks.flatMap((function(e){return e.validResponses})));try{for(g.s();!(v=g.n()).done;)x=v.value,C=x.settings,"object"===typeof(w=null===C||void 0===C?void 0:C.uiSchema)&&(C.uiSchema=JSON.stringify(w,void 0,2))}catch(o){g.e(o)}finally{g.f()}return e.next=14,Object(h.b)(l.c,b,{context:(c={},Object(r.a)(c,l.j,b.jsCommon),Object(r.a)(c,l.k,b.jsonSchema),c)});case 14:if(!((y=e.sent).length>0)){e.next=17;break}return e.abrupt("return",Object(u.a)(y));case 17:return e.abrupt("return",Object(u.b)(b));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2913:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextTypeJsonEditorModal",(function(){return W}));var r=n(19),a=n(4),c=n(8),i=n.n(c),o=n(6),s=n(669),u=n(2925),l=n(2276),d=n(2861),h=n(2953),b=n(2952),j=n(2868),f=n(2210),m=n(2941),p=n(560),O=n(2003),g=n(510),v=n(500),x=n(559),C=n(1876),w=n(1174),y=n(71),k=n(69),S=n(70),N=n(123),J=Object(u.a)((function(e){return Object(l.a)({dialogPaper:{height:"90vh"},dialogContent:{display:"grid",gridTemplateColumns:"auto",gridTemplateRows:function(e){return e.showErrors?"auto ".concat(100,"px"):"auto"},rowGap:"5px",placeItems:"stretch",height:"100%",overflowY:"hidden"},editorContainer:{gridColumn:"1 / 2",gridRow:"1 / 2"},errorContainer:{gridColumn:"1 / 2",gridRow:"2 / 3",overflowY:"auto"}})})),M=function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"http://nimflow.com/schemas/ui-schema.schema.json",schema:k},{uri:"http://nimflow.com/schemas/ui-schema-library.schema.json",schema:S},{uri:"http://nimflow.com/schemas/context-type.schema.json",fileMatch:["inmemory://model/*"],schema:y}]});return{selectOnLineNumbers:!0,minimap:{enabled:!1}}},T=function(e){e.focus()},W=function(e){var t=e.open,n=e.defaultValue,c=e.onChange,u=e.onClose,l=Object(m.a)().t,y=Object(s.a)(),k=Object(x.a)(),S=Object(o.useState)([]),W=Object(a.a)(S,2),E=W[0],L=W[1],R=J({showErrors:E.length>0}),D=Object(o.useMemo)((function(){var e=Object(w.a)(n);return JSON.stringify(e,void 0,4)}),[n]),P=Object(o.useState)(D),A=Object(a.a)(P,2),I=A[0],Y=A[1],z=Object(o.useCallback)(Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(E.length>0)){e.next=2;break}return e.abrupt("return");case 2:return t=JSON.parse(I),e.next=5,Object(C.a)(t);case 5:"success"===(n=e.sent).type?(null===c||void 0===c||c(n.result),u()):L(n.errors.map((function(e){return e.message})));case 7:case"end":return e.stop()}}),e)}))),[I,E.length,c,u]),B=Object(o.useCallback)(Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=D!==I,!e.t0){e.next=5;break}return e.next=4,k();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:u();case 8:case"end":return e.stop()}}),e)}))),[I,D,k,u]),G=Object(o.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=D!==I,!e.t0){e.next=5;break}return e.next=4,k();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:"backdropClick"!==n&&(null===u||void 0===u||u());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[I,D,k,u]);return Object(N.jsxs)(d.a,{open:t,onClose:G,maxWidth:"xl",fullWidth:!0,classes:{paper:R.dialogPaper},children:[Object(N.jsx)(j.a,{children:l("EditingContextType")}),Object(N.jsxs)(b.a,{className:R.dialogContent,children:[Object(N.jsx)("div",{className:R.editorContainer,children:Object(N.jsx)(g.a,{children:function(e){var t=e.height,n=e.width;return Object(N.jsx)(p.b,{width:n,height:t,language:"json",theme:"light"===y.palette.mode?"vs-light":"vs-dark",value:I,options:v.a,onChange:Y,editorWillMount:M,editorDidMount:T})}})}),E.length>0&&Object(N.jsx)("div",{className:R.errorContainer,children:Object(N.jsx)(O.a,{component:"span",error:!0,children:E.map((function(e,t){return Object(N.jsx)("p",{children:e},t)}))})})]}),Object(N.jsxs)(h.a,{children:[Object(N.jsx)(f.a,{onClick:z,color:"primary",children:l("Accept")}),Object(N.jsx)(f.a,{onClick:B,color:"primary",children:l("Cancel")})]})]})};t.default=W},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={selectOnLineNumbers:!0,automaticLayout:!0,minimap:{enabled:!1},fixedOverflowWidgets:!0}},559:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(2941),c=n(6),i=n(467),o=function(){var e=Object(a.a)().t,t=Object(i.c)();return Object(c.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(r.a)({title:e("ThereArePendingChanges"),description:e("ChangesWillBeLost_Continue")},n);return t(a)}),[t,e])}}}]);
//# sourceMappingURL=81.49c0d5a6.chunk.js.map