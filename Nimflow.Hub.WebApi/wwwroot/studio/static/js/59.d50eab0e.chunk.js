(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[59],{3369:function(t,e,n){"use strict";n.r(e),n.d(e,"ContextSimulationGeneratorFromContext",(function(){return y}));var r=n(4),c=n.n(r),a=n(21),u=n(1),o=n(9),s=n(532),i=n(845),b=n(3399),f=n(636),p=n.n(f),l=n(499),j=n(678),O=n(1576),v=n(1204),d=n(2052),x=n(1248),h=n(792),g=n(659),m=n(129),y=function(){var t=Object(s.h)(),e=Object(s.i)().blobUrl,n=Object(o.useState)(),r=Object(u.a)(n,2),f=r[0],y=r[1],k=Object(o.useState)(),w=Object(u.a)(k,2),S=w[0],C=w[1],E=Object(l.c)().contextTypes_FindOne,N=Object(x.b)().simulations_InsertOne,R=Object(i.a)(Object(a.a)(c.a.mark((function n(){var r,a,u,o,s,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=atob(e)){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,p.a.get(r,{responseType:"blob"});case 6:return u=n.sent,n.next=9,Object(g.c)(u.data);case 9:a=n.sent,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),t("../..");case 15:return n.prev=15,URL.revokeObjectURL(r),n.finish(15);case 18:if(!a){n.next=28;break}return n.next=21,E({name:a.context.typeName});case 21:return o=n.sent,s={name:"".concat(a.context.typeName,"-").concat(a.context.id),contextTypeName:a.context.typeName,pendingEvents:a.pendingEvents,history:[]},n.next=25,Object(O.c)(o.name,(function(t){return E({name:t})}));case 25:i=n.sent,y(s),C(i);case 28:case"end":return n.stop()}}),n,null,[[3,12,15,18]])}))),[e,t]),T=R.loading,U=R.error,F=Object(o.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(n);case 3:r=e.sent,t("../../edit/".concat(r),{replace:!0}),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.toString(),h.a.isApiException(e.t0)&&(a=e.t0.message,"status"in e.t0&&(a+=" (status: ".concat(e.t0.status,")"))),e.abrupt("return",[{message:a}]);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[t,N]);return T?Object(m.jsx)(j.b,{}):U?Object(m.jsx)(b.a,{severity:"error",children:U.toString()}):S?Object(m.jsx)(v.a,{contextTypeProvider:S,simulation:f,children:Object(m.jsx)(d.a,{onSaveChanges:F})}):null};e.default=y},616:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)};Object.create;Object.create},618:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(616),c=n(9);function a(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={loading:!1});var a=Object(c.useRef)(0),u=function(){var t=Object(c.useRef)(!1),e=Object(c.useCallback)((function(){return t.current}),[]);return Object(c.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),e}(),o=Object(c.useState)(n),s=o[0],i=o[1],b=Object(c.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var c=++a.current;return s.loading||i((function(t){return Object(r.a)(Object(r.a)({},t),{loading:!0})})),t.apply(void 0,e).then((function(t){return u()&&c===a.current&&i({value:t,loading:!1}),t}),(function(t){return u()&&c===a.current&&i({error:t,loading:!1}),t}))}),e);return[s,b]}},845:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(9),c=n(618);function a(t,e){void 0===e&&(e=[]);var n=Object(c.a)(t,e,{loading:!0}),a=n[0],u=n[1];return Object(r.useEffect)((function(){u()}),[u]),a}}}]);
//# sourceMappingURL=59.d50eab0e.chunk.js.map