(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[55],{1028:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return D}));var a=n(0),r=n(4),i=n(13),c=n(3),o=n(98),s=n(6),u=n(541),l=n(35),d=n(1917),f=n.n(d),j=n(1918),b=n.n(j),v=n(18),h=n(1036),m=n(1037),p=n(3019),O=n(124),y=function(e){return Object(O.jsx)(p.a,Object(c.a)(Object(c.a)({viewBox:"0 0 512 512"},e),{},{children:Object(O.jsx)("path",{d:"M369,262.5H143a6.5,6.5,0,0,1,0-13H369a6.5,6.5,0,0,1,0,13Z"})}))},g=["taggingType"],x=["milestone","final","tag","metric"],k=function(e){var t=e.taggingType,n=Object(o.a)(e,g);return"milestone"===t?Object(O.jsx)(h.a,Object(c.a)({},n)):"final"===t?Object(O.jsx)(m.a,Object(c.a)({},n)):"tag"===t?Object(O.jsx)(f.a,Object(c.a)({},n)):"metric"===t?Object(O.jsx)(b.a,Object(c.a)({},n)):Object(O.jsx)(y,Object(c.a)({},n))},C=function(e){var t,n,a=null!==(t=null===(n=e.selectors)||void 0===n?void 0:n.map((function(e){return e.key})).filter(l.isDefined))&&void 0!==t?t:[],r=e.actions.flatMap((function(e){return Object.keys(e.jsSetters)})),c=e.tasks.flatMap((function(e){return e.validResponses})).flatMap((function(e){return Object.keys(e.jsSetters)})),o=[].concat(Object(i.a)(a),Object(i.a)(r),Object(i.a)(c));return[e.milestones.filter((function(e){return o.includes(e.name)})),e.tags?e.tags.filter((function(e){return o.includes(e.name)})):[],e.metrics?e.metrics.filter((function(e){return o.includes(e.name)})):[]]},S=function(e){return v.a.t("milestone"===e?"Milestone":"final"===e?"FinalMilestone":"tag"===e?"Tag":"metric"===e?"Metric":"Standard")},N="milestones",T="tags",w="metrics",D=function(){var e=Object(u.f)(),t=e.register,n=e.watch,c=e.getValues,o=e.setValue,l=e.control,d=n(N),f=n(T),j=n(w);Object(s.useEffect)((function(){l.fieldsRef.current.milestones||t(N),l.fieldsRef.current.tags||t(T),l.fieldsRef.current.metrics||t(w)}));var b=Object(s.useCallback)((function(e){if(0!==(e=Array.isArray(e)?e:[e]).length){var t=f.filter((function(t){return!e.includes(t.name)}));t.length<f.length&&o(T,t);var n=d.filter((function(t){return!e.includes(t.name)}));n.length<d.length&&o(N,n);var a=j.filter((function(t){return!e.includes(t.name)}));a.length<j.length&&o(w,a)}}),[d,f,j,o]),v=Object(s.useCallback)((function(e){if(f?f.find((function(t){return t.name===e})):void 0)return"tag";if(j?j.find((function(t){return t.name===e})):void 0)return"metric";var t=d.find((function(t){return t.name===e}));return t?t.final?"final":"milestone":void 0}),[d,f,j]),h=Object(s.useCallback)((function(e,t){var n=f?f.find((function(t){return t.name===e})):void 0,a=j?j.find((function(t){return t.name===e})):void 0,r=d.find((function(t){return t.name===e})),c="tag"===t?{name:e}:void 0,s="metric"===t?{name:e}:void 0,u="milestone"===t||"final"===t?{name:e,final:"final"===t}:void 0;if(!(n&&c||a&&s||r&&u&&r.final===u.final)){var l=f,b=j,v=d;n&&(l=f?f.filter((function(e){return e!==n})):[]),a&&(b=j?j.filter((function(e){return e!==a})):[]),r&&(v=d.filter((function(e){return e!==r}))),c&&(l=[].concat(Object(i.a)(l),[c])),s&&(b=[].concat(Object(i.a)(b),[s])),u&&(v=[].concat(Object(i.a)(v),[u])),l!==f&&o(T,l,{shouldDirty:!0}),b!==j&&o(w,b,{shouldDirty:!0}),v!==d&&o(N,v,{shouldDirty:!0})}}),[d,o,f,j]),m=Object(s.useCallback)((function(e){var t=v(e);switch(t){case"milestone":t="final";break;case"final":t="tag";break;case"tag":t="metric";break;case"metric":t=void 0;break;default:t="milestone"}h(e,t)}),[v,h]),p=Object(s.useCallback)((function(){var e=c(),t=C(e),n=Object(r.a)(t,3),a=n[0],i=n[1],s=n[2];a.length!==e.milestones.length&&o(N,a,{shouldDirty:!0}),e.tags&&i.length!==e.tags.length&&o(T,i,{shouldDirty:!0}),e.metrics&&s.length!==e.metrics.length&&o(w,s,{shouldDirty:!0})}),[c,o]);return{taggings:Object(s.useMemo)((function(){var e,t={},n=Object(a.a)(d);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.name]=r.final?"final":"milestone"}}catch(u){n.e(u)}finally{n.f()}if(f){var i,c=Object(a.a)(f);try{for(c.s();!(i=c.n()).done;){t[i.value.name]="tag"}}catch(u){c.e(u)}finally{c.f()}}if(j){var o,s=Object(a.a)(j);try{for(s.s();!(o=s.n()).done;){t[o.value.name]="metric"}}catch(u){s.e(u)}finally{s.f()}}return t}),[d,f,j]),getTaggingType:v,setTaggingType:h,toggleTagging:m,removeTaggings:b,removeInvalidTaggings:p}}},1036:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3019),i=n(124),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsx)("path",{d:"M19,14V4H6V3H5v18H4v1h3v-1H6v-7H19z M6,5h12v8H6V5z M14.6569214,6.5l0.7070312,0.7071533l-4.2426147,4.2426758   L9,9.3284912l0.7070923-0.7070923l1.4143066,1.4142456L14.6569214,6.5z"})}))}},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3019),i=n(124),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsxs)("g",{children:[Object(i.jsx)("path",{d:"M15,6V4H6V3H5v19h1v-8h5v2h8V6H15z M18,11h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v-2H8v2H6v-2h2V9H6V7h2V5h2v2h2V5h2v2h2v2h2V11z"}),Object(i.jsx)("rect",{x:"8",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"10",y:"9",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"11",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"14",y:"9",width:"2",height:"2"})]})}))}},1078:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3019),i=n(124),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 16 16",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.414"},e),{},{children:Object(i.jsx)("path",{d:"M8.017 16c.32-.003.636-.02.952-.062.72-.092 1.43-.29 2.1-.576.94-.402 1.8-.982 2.53-1.698.67-.66 1.23-1.436 1.63-2.287.34-.732.58-1.518.68-2.32.1-.774.09-1.565-.03-2.335-.1-.64-.28-1.265-.53-1.86-.16-.374-.35-.735-.57-1.08C14 2.556 12.87 1.57 11.57.912c-.463-.237-.95-.43-1.45-.58h-.003c.08.042.16.088.23.134.08.05.16.098.234.15.38.257.73.552 1.04.888.71.763 1.2 1.7 1.48 2.696.19.656.29 1.334.33 2.014.03.496.03.995-.03 1.488-.1.847-.37 1.675-.82 2.4-.33.535-.76 1.013-1.27 1.39-.83.62-1.92.99-2.96.744-.17-.04-.34-.098-.5-.172-.18-.083-.36-.185-.52-.3-.31-.207-.59-.457-.83-.738-.29-.347-.53-.742-.7-1.166-.21-.538-.32-1.116-.33-1.695-.02-.85.15-1.704.57-2.45.28-.496.66-.932 1.11-1.28.15-.118.31-.222.47-.32l.01-.004c-.31-.07-.64-.1-.96-.08-.28.02-.55.07-.82.16-.24.08-.47.18-.68.3-.17.1-.34.21-.49.33-.14.12-.28.24-.41.37-.75.77-1.18 1.79-1.35 2.84-.1.65-.1 1.31-.06 1.97.07.93.26 1.86.63 2.71.23.53.53 1.02.9 1.45.57.66 1.29 1.17 2.09 1.49.45.18.93.31 1.41.36.05.01.1.01.14.01zm-1.958-.265c-.11-.047-.21-.1-.3-.152-.1-.055-.2-.113-.3-.173-.39-.242-.74-.525-1.06-.852-.73-.758-1.22-1.712-1.5-2.723-.19-.69-.29-1.402-.33-2.116-.03-.47-.02-.93.03-1.39.09-.84.33-1.67.75-2.39.3-.53.71-1 1.19-1.37.33-.25.7-.46 1.09-.6.55-.2 1.14-.26 1.71-.18.22.03.44.08.64.15.02 0 .02 0 .03.02.01.01.03.01.04.02.03.01.07.03.11.05.16.08.32.18.47.28.6.42 1.09 1 1.4 1.67.28.61.41 1.29.42 1.96.01.72-.12 1.44-.43 2.1-.37.79-1 1.46-1.76 1.89.06.02.12.03.18.05.15.03.3.05.46.05.98.03 1.93-.44 2.63-1.1.13-.12.25-.25.36-.39.15-.18.29-.36.41-.55.16-.25.29-.5.41-.77.15-.36.27-.73.34-1.11.13-.67.14-1.35.1-2.02-.09-1.35-.45-2.7-1.23-3.82-.12-.17-.24-.33-.37-.48-.22-.25-.46-.48-.71-.69-.28-.23-.59-.44-.91-.61C9.6.34 9.21.19 8.8.09L8.6.05C8.46.03 8.32.02 8.177.01 7.96 0 7.73.003 7.5.02c-.47.03-.943.106-1.41.224-2.24.578-4.2 2.14-5.243 4.21-.334.66-.57 1.366-.708 2.09-.16.83-.18 1.684-.07 2.52.08.68.25 1.35.52 1.987.15.38.34.75.55 1.1.73 1.19 1.79 2.16 3.01 2.83.46.26.94.46 1.44.63.15.05.3.1.46.14z"})}))}},1079:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3019),i=n(124),c=function(e){return Object(i.jsxs)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 150 100"},e),{},{children:[Object(i.jsxs)("g",{transform:"translate(0.000000,95.000000) scale(0.100000,-0.100000)",stroke:"none",id:"g6",children:[Object(i.jsx)("path",{d:"M161 937 c-49 -24 -62 -65 -70 -221 -7 -156 -15 -177 -67 -190 -18 -5 -24 -13 -24 -35 0 -22 7 -31 30 -41 48 -20 57 -50 62 -212 4 -121 8 -152 24 -180 25 -42 91 -67 131 -49 36 16 28 52 -14 63 -18 5 -36 14 -40 21 -4 6 -10 75 -13 152 -6 151 -22 208 -69 231 l-22 11 25 17 c47 30 59 70 65 219 6 146 10 157 58 157 28 0 37 14 29 46 -5 20 -12 24 -44 24 -20 0 -48 -6 -61 -13z",id:"path8"}),Object(i.jsx)("path",{d:"M1204 936 c-11 -29 1 -51 28 -54 49 -6 58 -33 58 -172 0 -141 13 -185 64 -209 l29 -14 -25 -13 c-46 -24 -61 -75 -68 -229 -3 -77 -9 -146 -13 -152 -4 -7 -22 -16 -40 -21 -22 -6 -33 -15 -35 -30 -5 -32 33 -47 86 -32 66 17 74 38 83 210 8 162 23 214 66 231 36 13 32 64 -6 77 -46 16 -54 44 -60 202 -7 158 -17 191 -67 210 -38 15 -94 12 -100 -4z",id:"path10"}),Object(i.jsx)("path",{d:"M467 923 c-15 -2 -43 -20 -62 -38 -45 -45 -47 -71 -43 -450 4 -430 -23 -400 368 -400 395 0 365 -37 365 445 0 479 27 444 -345 446 -140 1 -268 0 -283 -3z m553 -73 c19 -19 20 -33 20 -372 0 -313 -2 -353 -17 -370 -15 -17 -37 -18 -290 -18 -260 0 -274 1 -293 20 -19 19 -20 33 -20 370 0 337 1 351 20 370 19 19 33 20 290 20 257 0 271 -1 290 -20z",id:"path12"}),Object(i.jsx)("path",{d:"M500 740 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path14"}),Object(i.jsx)("path",{d:"M500 590 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path16"}),Object(i.jsx)("path",{d:"M500 410 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path18"}),Object(i.jsx)("path",{d:"M500 240 c0 -19 7 -20 235 -20 228 0 235 1 235 20 0 19 -7 20 -235 20 -228 0 -235 -1 -235 -20z",id:"path20"})]})," "]}))}},1178:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(2),r=n(1),i=n(12),c=n(15),o=n(1004),s=n(1183),u=10,l=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var c;return Object(a.a)(this,n),(c=t.call(this,e,r,i)).height=u,c.width=u,c}return Object(r.a)(n,[{key:"createLinkModel",value:function(){return new s.a}}]),n}(o.DefaultPortModel)},1183:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(3),r=n(2),i=n(1),c=n(17),o=n(9),s=n(12),u=n(15),l=n(1004),d=n(809),f=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,n),t.call(this,{type:"contextTypeLink",width:2,selectedOutgoingColor:e.selectedOutgoingColor||"lime"})}return Object(i.a)(n,[{key:"getInstanceId",value:function(){var e,t,n=null===(e=this.sourcePort)||void 0===e?void 0:e.getNode(),a=null===(t=this.sourcePort)||void 0===t?void 0:t.getNode();return n instanceof d.a&&a instanceof d.a?"edge:".concat(n.instanceId,"->").concat(a.instanceId):"UnknownEdge"}},{key:"getSelectedOutgoingColor",value:function(){return this.options.selectedOutgoingColor}},{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{selectedOutgoingColor:this.getSelectedOutgoingColor()})}},{key:"deserialize",value:function(e){Object(c.a)(Object(o.a)(n.prototype),"deserialize",this).call(this,e),this.options.selectedOutgoingColor=e.data.selectedOutgoingColor}}]),n}(l.DefaultLinkModel)},1225:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n(3),i=n(14),c=function(e){var t,n=Object(r.a)({$schema:"http://nimflow.com/schemas/context-type.schema.json",name:e.name},Object(i.c)(e));e.jsonSchema&&(n.jsonSchema=JSON.parse(e.jsonSchema)),null!==(t=e.settings)&&void 0!==t&&t.uiSchemaCommon&&(n.settings.uiSchemaCommon=JSON.parse(e.settings.uiSchemaCommon));var c,o=Object(a.a)(n.actions);try{for(o.s();!(c=o.n()).done;){var s=c.value.settings,u=null===s||void 0===s?void 0:s.uiSchema;"string"===typeof u&&(s.uiSchema=JSON.parse(u))}}catch(b){o.e(b)}finally{o.f()}var l,d=Object(a.a)(n.tasks.flatMap((function(e){return e.validResponses})));try{for(d.s();!(l=d.n()).done;){var f=l.value.settings,j=null===f||void 0===f?void 0:f.uiSchema;"string"===typeof j&&(f.uiSchema=JSON.parse(j))}}catch(b){d.e(b)}finally{d.f()}return n}},1230:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(1),c=n(17),o=n(9),s=n(12),u=n(15),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(r.a)(this,n),(a=t.call(this,"actionType",i,c,null!==(e=i.name)&&void 0!==e?e:"")).isInitialAction=o,a}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{isInitialAction:this.isInitialAction})}},{key:"hasInPort",value:function(){return!1}}]),n}(n(809).a)},1231:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n(2),i=n(1),c=n(12),o=n(15),s=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e,i){var c,o;if(Object(r.a)(this,n),o=t.call(this,"taskType",e,i,null!==(c=e.name)&&void 0!==c?c:""),e.validResponses){var s,u=Object(a.a)(e.validResponses.filter((function(e){return e.name})));try{for(u.s();!(s=u.n()).done;){var l=s.value;o.addContextTypePort(!1,"response-".concat(l.name))}}catch(d){u.e(d)}finally{u.f()}}return o}return Object(i.a)(n,[{key:"getResponsePort",value:function(e){var t;return null!==(t=this.getPort("response-".concat(e.name)))&&void 0!==t?t:void 0}},{key:"hasOutPort",value:function(){return!1}}]),n}(n(809).a)},1232:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(1),c=n(17),o=n(9),s=n(12),u=n(15),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return Object(r.a)(this,n),(a=t.call(this,"selector",i,c,null!==(e=i.key)&&void 0!==e?e:"")).taggingType=o,a}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{taggingType:this.taggingType})}}]),n}(n(809).a)},1233:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=/(?:^|[^a-zA-Z0-9_.]|\.\.\.)state\.([a-zA-Z_][a-zA-Z0-9_]*)/g,i=function(e){var t,n=[];if(!e)return n;Array.isArray(e)||(e=[e]);var i,c=Object(a.a)(e);try{for(c.s();!(i=c.n()).done;)for(var o=i.value;null!==(t=r.exec(o));)n.includes(t[1])||n.push(t[1])}catch(s){c.e(s)}finally{c.f()}return n}},1373:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return g}));var a=n(4),r=n(0),i=n(3),c=n(2),o=n(1),s=n(12),u=n(15),l=n(1178),d=n(1183),f=n(1004),j=n(14),b=n(1230),v=n(1231),h=n(1390),m=n(1232),p=n(1233),O=["actionTypes","states","selectors","taskTypes"];Object.freeze(O);var y=function(e){return"string"===typeof e?"state-".concat(e):"key"in e?"selector-".concat(e.key):"validResponses"in e?"task-".concat(e.name):"jsSetters"in e?"action-".concat(e.name):"UNKNOWN"};Object.freeze(["pinned","fixed"]);var g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),(e=t.call(this,a)).pinStatuses={},e}return Object(o.a)(n,[{key:"addContextTypeNode",value:function(e){var t=this;this.addNode(e);var n={selectionChanged:function(n){t.fireEvent(Object(i.a)(Object(i.a)({},n),{},{node:e}),"nodeSelectionChanged")},commandInvoked:function(e){t.fireEvent(e,"contextTypeNodeCommandInvoked")}};e.registerListener(n)}},{key:"removeContextTypeNode",value:function(e){e.clearListeners(),this.removeNode(e)}},{key:"reconcileNodeList",value:function(e,t,n){var a,i=this,c=new Map,o=Object(r.a)(t);try{var s=function(){var t=a.value,r=e.findIndex((function(e){return e.instance===t}));if(r>=0)c.set(t,e[r]),e.splice(r,1);else{var o=n(t);c.set(t,o),i.addContextTypeNode(o)}};for(o.s();!(a=o.n()).done;)s()}catch(f){o.e(f)}finally{o.f()}var u,l=Object(r.a)(e);try{for(l.s();!(u=l.n()).done;){var d=u.value;this.removeContextTypeNode(d)}}catch(f){l.e(f)}finally{l.f()}return c}},{key:"inferReferencedState",value:function(e,t,n){var a={};function i(e){return e in a||(a[e]={actionTypes:new Set,taskTypes:new Set,responses:new Map,selectors:new Set}),a[e]}var c,o=Object(r.a)(e);try{for(o.s();!(c=o.n()).done;){var s=c.value;if(s.jsSetters)for(var u=0,l=Object.keys(s.jsSetters);u<l.length;u++){i(l[u]).actionTypes.add(s)}}}catch(E){o.e(E)}finally{o.f()}var d,f=Object(r.a)(t);try{for(f.s();!(d=f.n()).done;){var j=d.value,b=[];j.jsCondition&&b.push(j.jsCondition);var v,h=Object(r.a)(Object(p.a)(b));try{for(h.s();!(v=h.n()).done;){i(v.value).taskTypes.add(j)}}catch(E){h.e(E)}finally{h.f()}if(j.validResponses){var m,O=Object(r.a)(j.validResponses);try{for(O.s();!(m=O.n()).done;)for(var y=m.value,g=0,x=Object.keys(y.jsSetters);g<x.length;g++){i(x[g]).responses.set(y,j)}}catch(E){O.e(E)}finally{O.f()}}}}catch(E){f.e(E)}finally{f.f()}if(n){var k,C=Object(r.a)(n);try{for(C.s();!(k=C.n()).done;){var S=k.value;if(S.dependencies){var N,T=Object(r.a)(S.dependencies);try{for(T.s();!(N=T.n()).done;){i(N.value).selectors.add(S)}}catch(E){T.e(E)}finally{T.f()}}var w,D=Object(r.a)(Object(p.a)(S.jsExpression));try{for(D.s();!(w=D.n()).done;){i(w.value).selectors.add(S)}}catch(E){D.e(E)}finally{D.f()}}}catch(E){C.e(E)}finally{C.f()}}return a}},{key:"classifyNodes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,i=t.map((function(){return[]})),c=Object(r.a)(this.getNodes());try{for(c.s();!(a=c.n()).done;)for(var o=a.value,s=0;s<i.length;s++)o instanceof t[s]&&i[s].push(o)}catch(u){c.e(u)}finally{c.f()}return i}},{key:"buildContextTypeGraph",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,u=[],l=[],d=this.inferReferencedState(e,t,i),f=[],j={},b=Object(r.a)(e);try{for(b.s();!(n=b.n()).done;){var v=n.value;if(v.name){var h={type:"actionTypes",actionType:v},m=!1!==(null===s||void 0===s?void 0:s.includes("actionTypes"))?u:f;m.push(h),j[v.name]=h}}}catch(_){b.e(_)}finally{b.f()}var p,O=Object.keys(d).filter((function(e){return-1===i.findIndex((function(t){return t.key===e}))})),y={},g=Object(r.a)(O);try{for(g.s();!(p=g.n()).done;){var x=p.value,k={type:"states",name:x,tagging:c[x]},C=!1!==(null===s||void 0===s?void 0:s.includes("states"))?u:f;C.push(k),y[x]=k}}catch(_){g.e(_)}finally{g.f()}var S,N={},T=Object(r.a)(i);try{for(T.s();!(S=T.n()).done;){var w=S.value;if(w.key){var D={type:"selectors",selector:w,tagging:c[w.key]},E=!1!==(null===s||void 0===s?void 0:s.includes("selectors"))?u:f;E.push(D),N[w.key]=D}}}catch(_){T.e(_)}finally{T.f()}var P,M={},A=Object(r.a)(t);try{for(A.s();!(P=A.n()).done;){var z=P.value;if(z.name){var I={type:"taskTypes",taskType:z},V=!1!==(null===s||void 0===s?void 0:s.includes("taskTypes"))?u:f;V.push(I),M[z.name]=I}}}catch(_){A.e(_)}finally{A.f()}for(var J=function(){var e,t=Object(a.a)(q[R],2),n=t[0],r=t[1],i=null!==(e=y[n])&&void 0!==e?e:N[n];if(!i)return"continue";Array.from(r.actionTypes).forEach((function(e){null!==e&&void 0!==e&&e.name&&l.push({fromNode:j[e.name],toNode:i})})),Array.from(r.responses).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];null!==r&&void 0!==r&&r.name&&n.name&&l.push({fromNode:M[r.name],fromPort:n.name,toNode:i})})),Array.from(r.taskTypes).forEach((function(e){null!==e&&void 0!==e&&e.name&&l.push({fromNode:i,toNode:M[e.name]})})),Array.from(r.selectors).forEach((function(e){null!==e&&void 0!==e&&e.key&&l.push({fromNode:i,toNode:N[e.key]})}))},R=0,q=Object.entries(d);R<q.length;R++)J();var K=function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){for(var a=t.value,i=[],c=[],o=l.length-1;o>=0;o--){var s=l[o],d=void 0;s.fromNode===a?d=i:s.toNode===a&&(d=c),d&&(d.push(s),l.splice(o,1))}for(var f=0,b=i;f<b.length;f++){var v,h=b[f],m=Object(r.a)(c);try{var p=function(){var e=v.value,t={fromNode:e.fromNode,fromPort:e.fromPort,toNode:h.toNode};t.fromNode!==t.toNode&&-1===l.findIndex((function(e){return e.fromNode===t.fromNode&&e.fromPort===t.fromPort&&e.toNode===t.toNode}))&&l.push(t)};for(m.s();!(v=m.n()).done;)p()}catch(_){m.e(_)}finally{m.f()}}var O=u.indexOf(a);switch(O>=0&&u.splice(O,1),a.type){case"actionTypes":delete j[a.actionType.name];break;case"selectors":delete N[a.selector.key];break;case"states":delete y[a.name];break;case"taskTypes":delete M[a.taskType.name]}}}catch(_){n.e(_)}finally{n.f()}},L={},H=[];do{K(H=Object.values(N).filter((function(e){return"final"===e.tagging||l.findIndex((function(t){return t.fromNode===e&&("selectors"!==t.toNode.type||!o.includes(t.toNode.selector.key))}))>-1?(L[e.selector.key]="fixed",!1):o.includes(e.selector.key)?(L[e.selector.key]="pinned",!1):(delete L[e.selector.key],!0)})))}while(H.length>0);var B=Object.values(y).filter((function(e){return"final"===e.tagging||l.findIndex((function(t){return t.fromNode===e&&("selectors"!==t.toNode.type||!o.includes(t.toNode.selector.key))}))>-1?(L[e.name]="fixed",!1):o.includes(e.name)?(L[e.name]="pinned",!1):(delete L[e.name],!0)}));K(B),K(f);var F={nodes:u,links:l};return[F,L]}},{key:"updateData",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6?arguments[6]:void 0,f=this.classifyNodes(b.a,v.a,h.a,m.a),p=Object(a.a)(f,4),O=p[0],g=p[1],x=p[2],k=p[3],C=!1,S=this.buildContextTypeGraph(e,t,i,c,s,u),N=Object(a.a)(S,2),T=N[0],w=N[1];Object(j.h)(this.pinStatuses,w)||(this.pinStatuses=w);var D,E=[],P=[],M=[],A=[],z=Object(r.a)(T.nodes);try{for(z.s();!(D=z.n()).done;){var I=D.value;switch(I.type){case"actionTypes":E.push(I.actionType);break;case"selectors":A.push(I.selector);break;case"states":M.push(I.name);break;case"taskTypes":P.push(I.taskType)}}}catch(be){z.e(be)}finally{z.f()}for(var V=this.reconcileNodeList(O,E,(function(e){var t;return C=!0,new b.a(e,y(e),o.includes(null!==(t=e.name)&&void 0!==t?t:""))})),J=0,R=Array.from(V.values());J<R.length;J++){var q,K=R[J];K.isInitialAction=o.includes(null!==(q=K.instance.name)&&void 0!==q?q:"")}var L,H=this.reconcileNodeList(g,P,(function(e){return C=!0,new v.a(e,y(e))})),B=new Map,F=Object(r.a)(P.filter((function(e){return!!e.validResponses})));try{for(F.s();!(L=F.n()).done;){var _,W=L.value,U=Object(r.a)(W.validResponses);try{for(U.s();!(_=U.n()).done;){var G=_.value;B.set(G,W)}}catch(be){U.e(be)}finally{U.f()}}}catch(be){F.e(be)}finally{F.f()}for(var Z=this.reconcileNodeList(k,A,(function(e){return C=!0,new m.a(e,y(e),e.key?c[e.key]:void 0)})),$=0,Q=Array.from(Z.values());$<Q.length;$++){var X=Q[$];X.taggingType=c[X.instance.key]}for(var Y=this.reconcileNodeList(x,M,(function(e){return C=!0,new h.a(e,y(e),c[e])})),ee=0,te=Array.from(Y.values());ee<te.length;ee++){var ne=te[ee];ne.taggingType=c[ne.instance]}var ae,re=this.getLinks().filter((function(e){return e instanceof d.a})),ie=function(e,t){var a=e instanceof l.a?e:e.outPort,r=t instanceof l.a?t:t.inPort,i=re.findIndex((function(e){return e.getSourcePort()===a&&e.getTargetPort()===r}));if(-1===i&&a&&r){var c=a.link(r);n.addLink(c)}else i>=0&&re.splice(i,1)},ce=function(e,t){var n;switch(e.type){case"actionTypes":return V.get(e.actionType);case"selectors":return Z.get(e.selector);case"states":return Y.get(e.name);case"taskTypes":var a=H.get(e.taskType);if(!t)return a;var r=null===(n=e.taskType.validResponses)||void 0===n?void 0:n.find((function(e){return e.name===t}));return r?null===a||void 0===a?void 0:a.getResponsePort(r):void 0}},oe=Object(r.a)(T.links);try{for(oe.s();!(ae=oe.n()).done;){var se=ae.value,ue=ce(se.fromNode,se.fromPort),le=ce(se.toNode);ue&&le&&ue!==le&&ie(ue,le)}}catch(be){oe.e(be)}finally{oe.f()}var de,fe=Object(r.a)(re);try{for(fe.s();!(de=fe.n()).done;){var je=de.value;je.remove(),this.removeLink(je)}}catch(be){fe.e(be)}finally{fe.f()}return C}}]),n}(f.DiagramModel)},1390:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n(2),i=n(1),c=n(17),o=n(9),s=n(12),u=n(15),l=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,a,i){var c;return Object(r.a)(this,n),(c=t.call(this,"state",e,a,e)).taggingType=i,c}return Object(i.a)(n,[{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{taggingType:this.taggingType})}}]),n}(n(809).a)},1753:function(e,t,n){"use strict";n.d(t,"a",(function(){return lt}));var a=n(126),r=n(534),i=n(551),c=n(463),o=n(100),s=n(897),u=n(531),l=n.n(u),d=n(6),f=n.n(d),j=n(457),b=n(3011),v=n(2274),h=n(2098),m=n(2057),p=n(510),O=n.n(p),y=n(601),g=n.n(y),x=n(669),k=n.n(x),C=n(2058),S=n(580),N=n.n(S),T=n(1936),w=n.n(T),D=n(1039),E=n.n(D),P=n(3006),M=n(2944),A=n(2078),z=n(1935),I=n.n(z),V=n(549),J=n.n(V),R=n(541),q=n(1055),K=n(135),L=n(987),H=n(542),B=n(503),F=n(623),_=n(14),W=n(35),U=n(559),G=n(553),Z=n(825),$=n(618),Q=n(684),X=n(906),Y=n(3),ee=n(3019),te=n(124),ne=function(e){return Object(te.jsx)(ee.a,Object(Y.a)(Object(Y.a)({viewBox:"0 0 50 50"},e),{},{children:Object(te.jsx)("path",{d:"M6.668 4A2.684 2.684 0 004 6.668v36.664A2.684 2.684 0 006.668 46h36.664A2.682 2.682 0 0046 43.332V6.668A2.682 2.682 0 0043.332 4zm0 2h36.664c.371 0 .668.297.668.668v36.664a.665.665 0 01-.668.668H6.668A.665.665 0 016 43.332V6.668C6 6.297 6.297 6 6.668 6zM23 23v12.574c0 1.93-.73 2.426-2 2.426-1.328 0-2.25-.828-2.86-1.902L15 38c.91 1.926 3.14 4 6.234 4C24.656 42 27 40.18 27 36.184V23zm12.453 0c-3.406 0-5.59 2.18-5.59 5.043 0 3.105 1.832 4.574 4.586 5.746l.953.41c1.739.762 2.598 1.227 2.598 2.535 0 1.09-.828 1.88-2.41 1.88-1.883 0-2.774-1.278-3.59-2.614l-3 2c1.121 2.215 3.133 4 6.676 4C39.3 42 42 40.117 42 36.684c0-3.188-1.828-4.606-5.074-5.996l-.953-.407c-1.637-.71-2.348-1.172-2.348-2.316 0-.926.71-1.637 1.828-1.637 1.098 0 1.8.465 2.453 1.637l2.973-1.906c-1.254-2.215-3-3.059-5.426-3.059z"})}))},ae=n(693),re=n(543),ie=n(470),ce=n(127),oe=n(505),se=n(482),ue=n(1791),le=n(497),de=n(1497),fe=n(1225),je=n(19),be=n(4),ve=n(8),he=n.n(ve),me=n(2342),pe=n(2995),Oe=n(2930),ye=n(3023),ge=n(3022),xe=n(2937),ke=n(2061),Ce=n(10),Se=Object(pe.a)((function(e){return Object(me.a)({paper:{backgroundColor:e.palette.background.default},content:{minWidth:"500px"}})})),Ne=function(e){var t=e.open,n=e.defaultValue,a=e.onChange,r=e.onClose,i=Object(b.a)().t,c=Se(),o=Object(se.c)().contextTypes_FindOne,s=Object(d.useState)(),u=Object(be.a)(s,2),l=u[0],f=u[1],j=Object(d.useState)(n),h=Object(be.a)(j,2),m=h[0],p=h[1],O=Object(d.useMemo)((function(){var e;return null===(e=G.c.fields)||void 0===e?void 0:e.name.concat(Ce.m().required().test({message:function(e){var t=e.value;return i("ContextTypeNameAlreadyExists",{name:t})},test:function(){var e=Object(je.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({name:t});case 2:return n=e.sent,e.abrupt("return",null==n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}),[o,i]),y=Object(d.useCallback)(Object(je.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.b)(O,m);case 2:if(!((t=e.sent).length>0)){e.next=6;break}return f(t[0].message),e.abrupt("return");case 6:m&&(a(m),r());case 7:case"end":return e.stop()}}),e)}))),[m,a,r,O]),g=Object(d.useCallback)(function(){var e=Object(je.a)(he.a.mark((function e(t,n){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===r||void 0===r||r());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r]);return Object(te.jsxs)(Oe.a,{open:t,onClose:g,fullWidth:!0,maxWidth:"md",classes:{paper:c.paper},children:[Object(te.jsx)(xe.a,{children:i("SaveAs")}),Object(te.jsx)(ge.a,{className:c.content,children:Object(te.jsx)(ke.a,{type:"text",defaultValue:m,onChange:function(e){return p(e.target.value)},label:i("NewName"),fullWidth:!0,required:!0,variant:"standard",error:!!l,helperText:l})}),Object(te.jsxs)(ye.a,{children:[Object(te.jsx)(v.a,{onClick:y,color:"primary",children:i("Accept")}),Object(te.jsx)(v.a,{onClick:r,color:"primary",children:i("Cancel")})]})]})},Te=n(1028),we=n(523),De=n(1078),Ee=n(1079),Pe=n(1373),Me=n(3041),Ae=n(3007),ze=n(3037),Ie=n(1512),Ve=n.n(Ie),Je=n(1513),Re=n.n(Je),qe=n(1817),Ke=n.n(qe),Le=Object(pe.a)((function(e){return Object(me.a)({group:{marginLeft:5},fixHeight:{height:24}})})),He=Object(Me.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(Ae.a),Be=function(e){var t=e.value,n=e.onChange,a=Object(b.a)().t,r=Le(),i=Object(d.useCallback)((function(e,t){null===n||void 0===n||n(t)}),[n]);return Object(te.jsxs)(He,{value:t,onChange:i,size:"small",className:r.group,children:[Object(te.jsx)(ze.a,{value:"actionTypes",children:Object(te.jsx)(A.a,{title:a("ActionTypes"),children:Object(te.jsx)("div",{className:r.fixHeight,children:Object(te.jsx)(Ve.a,{})})})}),Object(te.jsx)(ze.a,{value:"states",children:Object(te.jsx)(A.a,{title:a("States"),children:Object(te.jsx)("div",{className:r.fixHeight,children:Object(te.jsx)(Ke.a,{})})})}),Object(te.jsx)(ze.a,{value:"selectors",children:Object(te.jsx)(A.a,{title:a("Selectors"),children:Object(te.jsx)("div",{className:r.fixHeight,children:Object(te.jsx)(Re.a,{})})})}),Object(te.jsx)(ze.a,{value:"taskTypes",children:Object(te.jsx)(A.a,{title:a("TaskTypes"),children:Object(te.jsx)("div",{className:r.fixHeight,children:Object(te.jsx)(k.a,{})})})})]})},Fe=n(105),_e=n(691),We=["title"],Ue=Object(d.lazy)((function(){return Promise.all([n.e(3),n.e(8),n.e(15),n.e(75)]).then(n.bind(null,2981))})),Ge=Object(d.lazy)((function(){return Promise.all([n.e(3),n.e(80)]).then(n.bind(null,894))})),Ze=Object(d.lazy)((function(){return Promise.all([n.e(3),n.e(81)]).then(n.bind(null,2982))})),$e=Object(d.lazy)((function(){return Promise.all([n.e(3),n.e(82)]).then(n.bind(null,2983))})),Qe=Object(d.lazy)((function(){return n.e(88).then(n.bind(null,2984))})),Xe=Object(d.lazy)((function(){return Promise.all([n.e(79),n.e(83)]).then(n.bind(null,2985))})),Ye=function(e){var t=e.title,n=Object(s.a)(e,We);return Object(te.jsx)(A.a,{title:null!==t&&void 0!==t?t:"",children:Object(te.jsx)(m.a,Object(o.a)({size:"large"},n))})},et=Object(j.a)(v.a)((function(e){return{margin:e.theme.spacing(1),whiteSpace:"nowrap"}})),tt=function(e){return Object(te.jsx)(et,Object(o.a)({variant:"outlined",color:"inherit",size:"small"},e))},nt=Object(j.a)(C.a)({position:"absolute",left:17,bottom:4,fontWeight:"bold"}),at=function(e){var t=e.name,n=e.canSave,a=e.onSaveAs,r=Object(b.a)().t,o=Object(R.f)().trigger,s=Object(d.useState)(!1),u=Object(c.a)(s,2),f=u[0],j=u[1],v=Object(d.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:j(!0);case 6:case"end":return e.stop()}}),e)}))),[o]),h=Object(d.useCallback)((function(e){null===a||void 0===a||a(e)}),[a]),m=Object(d.useCallback)((function(){j(!1)}),[]);return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)(Ye,{title:r("SaveAs"),onClick:v,disabled:!n,children:[Object(te.jsx)(g.a,{}),Object(te.jsx)(nt,{children:"..."})]}),f&&Object(te.jsx)(Ne,{open:f,defaultValue:t,onChange:h,onClose:m})]})},rt=Object(j.a)("form")({height:"100%"}),it=Object(j.a)(h.a)({minHeight:"48px",paddingLeft:0}),ct=Object(j.a)(M.a)((function(e){return{margin:e.theme.spacing(1,.5)}})),ot=Object(j.a)("div")({flexGrow:1}),st=Object(j.a)(Xe)({marginTop:20,marginBottom:20,height:"calc(100% - 40px)"}),ut=Object(j.a)("div")({height:"max(calc(100vh - 150px), 600px)"}),lt=function(e){var t=e.value,n=e.schema,s=void 0===n?G.c:n,u=e.onApplyChanges,j=e.onSaveAs,v=e.isPersistent,h=void 0!==v&&v,m=Object(b.a)().t,p=Object(B.h)(),y=Object(d.useState)(!1),x=Object(c.a)(y,2),C=x[0],S=x[1],T=Object(d.useState)(!1),D=Object(c.a)(T,2),M=D[0],A=D[1],z=Object(d.useState)(!1),V=Object(c.a)(z,2),Y=V[0],ee=V[1],je=Object(d.useState)(!1),be=Object(c.a)(je,2),ve=be[0],he=be[1],me=Object(d.useState)(!1),pe=Object(c.a)(me,2),Oe=pe[0],ye=pe[1],ge=f.a.useState((function(){return Object(r.a)(Pe.b)})),xe=Object(c.a)(ge,2),ke=xe[0],Ce=xe[1],Se=Object(H.b)().enqueueSnackbar,Ne=Object(d.useState)(!1),Me=Object(c.a)(Ne,2),Ae=Me[0],ze=Me[1],Ie=!Ae,Ve=Object(ue.b)().jobAdded,Je=Object(se.c)().contexts_BeginActiveContextRecalculation,Re=Object(K.f)(de.b),qe=Object(c.a)(Re,2),Ke=qe[0],Le=qe[1],He=Object(we.a)(),We=Object(ie.b)(),Xe=Object(ie.c)(),et=Object(d.useMemo)((function(){var e,n;return Object(o.a)(Object(o.a)({},t),{},{version:null!==(e=t.version)&&void 0!==e?e:0,description:null!==(n=t.description)&&void 0!==n?n:""})}),[t]),nt=Object(R.e)({mode:"onChange",reValidateMode:"onChange",defaultValues:et,resolver:Object(Z.a)((function(){return Object(L.a)(s,{strict:!0,abortEarly:!1})}),(function(e){var t;return t={},Object(a.a)(t,G.j,e.jsCommon),Object(a.a)(t,G.k,e.jsonSchema),t}))}),lt=nt.control,dt=nt.handleSubmit,ft=nt.getValues,jt=nt.setValue,bt=nt.errors,vt=nt.trigger,ht=nt.register,mt=nt.formState,pt=nt.reset,Ot=Object(d.useMemo)((function(){return{description:m("ExitingContextTypeEditorWithoutSavingWarning")}}),[m]);Object($.a)(mt.isDirty,Ot),Object(d.useEffect)((function(){pt(et)}),[et,pt]),Object(d.useMemo)((function(){ht("jsCommon"),ht("jsonSchema"),ht("version"),ht("initialActions"),ht("actions"),ht("tasks"),ht("selectors"),ht("settings")}),[ht]),Object(d.useEffect)((function(){var e=ft("selectors");if(e)for(var t=0;t<e.length;t++);}),[ft]);var yt=Object(d.useCallback)((function(){var e=ft(),t=Object(Te.c)(e),n=Object(c.a)(t,2),a=n[0],r=n[1];a.length!==e.milestones.length&&jt("milestones",a,{shouldDirty:!0}),e.tags&&r.length!==e.tags.length&&jt("tags",r,{shouldDirty:!0})}),[ft,jt]),gt=Object(F.a)(Object(d.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yt(),e.next=3,vt();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:dt(function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=22;break}return ze(!0),e.prev=2,e.next=5,u(t);case 5:if(e.sent){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n=Object(te.jsx)(oe.a,{error:e.t0});case 13:return e.prev=13,ze(!1),e.finish(13);case 16:if(!n){e.next=21;break}return e.next=19,We({title:m("ErrorSavingContextType"),description:n,mapCloseTo:"ok",actions:[{type:"ok",text:m("Ok")}]});case 19:e.next=22;break;case 21:Se(m("ContextTypeSaved"),{variant:"success"});case 22:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}())();case 7:case"end":return e.stop()}}),e)}))),[We,Se,dt,u,yt,m,vt])),xt=Object(d.useCallback)(function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dt(function(){var e=Object(i.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=22;break}return ze(!0),e.prev=2,e.next=5,j(n,t);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a=Object(te.jsx)(oe.a,{error:e.t0});case 13:return e.prev=13,ze(!1),e.finish(13);case 16:if(!a){e.next=21;break}return e.next=19,We({title:m("ErrorSavingContextType"),description:a,mapCloseTo:"ok",actions:[{type:"ok",text:m("Ok")}]});case 19:e.next=22;break;case 21:Se(m("ContextTypeSaved"),{variant:"success"});case 22:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}())();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[dt,j,We,m,Se]),kt=Object(d.useCallback)((function(){var e=ft();Object(U.a)(Object(fe.a)(e),"".concat(e.name,".context.json"))}),[ft]),Ct=Object(d.useCallback)(Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yt(),n=ft(),e.next=4,Object(ce.b)(s,n,{context:(t={},Object(a.a)(t,G.j,n.jsCommon),Object(a.a)(t,G.k,n.jsonSchema),t)});case 4:return r=e.sent,e.next=7,vt();case 7:r.length>0?He(m("ContextTypeHasValidationErrors"),r,{dialogProps:{maxWidth:"lg"}}):Se(m("ContextTypeIsValid"),{variant:"success"});case 8:case"end":return e.stop()}}),e)}))),[yt,ft,s,vt,He,m,Se]),St=Object(d.useCallback)(Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Le(!Ke);case 1:case"end":return e.stop()}}),e)}))),[Ke,Le]),Nt=Object(d.useCallback)((function(){A(!0)}),[]),Tt=Object(d.useCallback)((function(){ee(!0)}),[]),wt=Object(d.useCallback)((function(){he(!0)}),[]),Dt=Object(d.useCallback)((function(){p(-1)}),[p]),Et=Object(d.useCallback)(Object(i.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe({description:m("ConfirmContextRecalculation")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Je({contextTypeName:t.name,ignoreMilestones:!1,allVersions:!0,continueOnError:!0});case 7:n=e.sent,a=n.backgroundJobId,Ve(a);case 10:case"end":return e.stop()}}),e)}))),[Je,Ve,Xe,m,t.name]),Pt=Object(d.useMemo)((function(){return function(e){return{state:function(){var t,n=e("actions"),a=e("tasks"),r=e("selectors"),i=Object(_.I)(Object(_.e)(Object(_.e)(n.flatMap((function(e){return Object.keys(e.jsSetters)})),a.flatMap((function(e){return e.validResponses})).flatMap((function(e){return Object.keys(e.jsSetters)}))),null!==(t=null===r||void 0===r?void 0:r.map((function(e){return e.key})).filter(W.isPresent))&&void 0!==t?t:[]));return"declare const state: {\n                ".concat(i.map((function(e){return e+": any;"})).join("\n"),"\n            }")},task:function(){return"\n            interface ContextTask {\n                id: string;\n                contextId: string;\n                contextTypeName: string;\n                contextReference?: string | undefined;\n                typeName: string;\n                title: string;\n                data: { [key: string]: any; };\n                props?: { [key: string]: any; } | undefined;\n                dateCreated: string;\n                dateUpdated: string;\n                assignedTo?: string | undefined;\n                status?: string | undefined;\n                archived: boolean;\n                dueDate?: string | undefined;\n                /** 1 = high, 0 = normal, -1 = low */\n                importance: 1 | 0 | -1;\n                focused: boolean;\n            }\n\n            declare const task: ContextTask;"},responseData:function(){return"\n            interface ResponseData {\n                sentBy?: string | undefined;\n                startedOn?: string | undefined;\n                sentOn?: string | undefined;\n            }\n\n            declare const responseData: ResponseData;"}}}(ft)}),[ft]),Mt=Object(d.useMemo)((function(){return function(e){return function(){var t;return null!==(t=e("jsCommon"))&&void 0!==t?t:""}}(ft)}),[ft]),At=Object(d.useCallback)((function(e){var t;return Object(ce.b)(null===(t=G.c.fields)||void 0===t?void 0:t.jsCommon,e)}),[]),zt=Object(d.useCallback)((function(){ye(!0)}),[]),It=Object(d.useCallback)((function(e){var t=lt.fieldsRef.current;if(t)for(var n=0,a=Object.keys(t);n<a.length;n++){var r=a[n],i=ft(r),c=Object(Z.b)(e,r);Object(_.h)(i,c)||jt(r,c,{shouldDirty:!0,shouldValidate:!0})}}),[lt.fieldsRef,ft,jt]),Vt=Object(d.useCallback)((function(e){Ce(e)}),[]);return Object(te.jsx)(le.a,{children:Object(te.jsxs)(re.a,{freeVariableTypingProviders:Pt,jsCommonTypingProvider:Mt,children:[Object(te.jsx)(R.b,Object(o.a)(Object(o.a)({},nt),{},{children:Object(te.jsx)(rt,{children:Object(te.jsxs)(Q.a,{control:lt,children:[Object(te.jsxs)(P.a,{container:!0,spacing:1,children:[Object(te.jsx)(P.a,{item:!0,xs:12,children:Object(te.jsxs)(it,{children:[Object(te.jsx)(Ye,{title:m("GoBack"),onClick:Dt,disabled:Ae,children:Object(te.jsx)(N.a,{})}),Object(te.jsx)(Ye,{title:m("SaveChanges"),onClick:gt,disabled:!Ie,children:Object(te.jsx)(g.a,{})}),h&&Object(te.jsx)(at,{name:ft("name"),canSave:Ie,onSaveAs:xt}),Object(te.jsx)(Ye,{title:m("Export"),onClick:kt,children:Object(te.jsx)(O.a,{})}),Object(te.jsx)(Ye,{title:m("Validate"),onClick:Ct,children:Object(te.jsx)(k.a,{})}),Fe.f&&Object(te.jsx)(te.Fragment,{children:Ke?Object(te.jsx)(Ye,{title:m("StandardView"),onClick:St,children:Object(te.jsx)(J.a,{})}):Object(te.jsx)(Ye,{title:m("DiagramView"),onClick:St,children:Object(te.jsx)(I.a,{})})}),Object(te.jsx)(Ye,{title:m("EditContextTypeAsJson"),onClick:zt,children:Object(te.jsx)(De.a,{})}),Ke&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ct,{flexItem:!0,orientation:"vertical"}),Object(te.jsx)(Be,{value:ke,onChange:Vt})]}),Object(te.jsx)(ot,{}),h&&Fe.g&&Object(te.jsx)(tt,{onClick:Et,startIcon:Object(te.jsx)(w.a,{}),children:m("Recalculate")}),h&&Object(te.jsx)(tt,{onClick:function(){return p("/simulator?contextTypeName=".concat(t.name))},startIcon:Object(te.jsx)(E.a,{}),children:m("Simulate")}),Object(te.jsx)(tt,{onClick:Nt,startIcon:Object(te.jsx)(ne,{}),children:m("EditJsCommon")}),Object(te.jsx)(tt,{onClick:Tt,startIcon:Object(te.jsx)(X.a,{}),children:m("EditJsonSchema")}),Object(te.jsx)(tt,{onClick:wt,startIcon:Object(te.jsx)(Ee.a,{}),children:m("EditUiSchemaCommon")})]})}),!Ke&&Object(te.jsx)(d.Suspense,{fallback:Object(te.jsx)(P.a,{item:!0,xs:12,children:Object(te.jsx)(_e.a,{})}),children:Object(te.jsx)(Qe,{onDialogVisibilityChanged:S})})]}),Object(te.jsx)(ae.a,{errors:bt,names:["jsCommon","jsonSchema"]}),Ke&&Object(te.jsx)(ut,{children:Object(te.jsx)(d.Suspense,{fallback:Object(te.jsx)(_e.a,{}),children:Object(te.jsx)(st,{visibleElementTypes:ke,onEditJsCommon:Nt,onEditJsonSchema:Tt})})})]})})})),!C&&Object(te.jsx)(q.DevTool,{control:lt}),M&&Object(te.jsx)(d.Suspense,{fallback:null,children:Object(te.jsx)(Ue,{open:M,onClose:function(){return A(!1)},defaultValue:ft("jsCommon"),onChange:function(e){return jt("jsCommon",null!==e&&void 0!==e?e:void 0,{shouldDirty:!0})},validator:At})}),Y&&Object(te.jsx)(d.Suspense,{fallback:null,children:Object(te.jsx)(Ge,{open:Y,onClose:function(){return ee(!1)},defaultValue:ft("jsonSchema"),onChange:function(e){return jt("jsonSchema",null!==e&&void 0!==e?e:void 0,{shouldDirty:!0})}})}),ve&&Object(te.jsx)(d.Suspense,{fallback:null,children:Object(te.jsx)(Ze,{open:ve,onClose:function(){return he(!1)},defaultValue:function(){var e=ft("settings");return null===e||void 0===e?void 0:e.uiSchemaCommon}(),onChange:function(e){return function(e){var t,n=null!==(t=ft("settings"))&&void 0!==t?t:{};jt("settings",Object(o.a)(Object(o.a)({},n),{},{uiSchemaCommon:e}),{shouldDirty:!0})}(null!==e&&void 0!==e?e:void 0)}})}),Oe&&Object(te.jsx)(d.Suspense,{fallback:null,children:Object(te.jsx)($e,{open:Oe,onClose:function(){return ye(!1)},defaultValue:ft(),onChange:It})})]})})}},2953:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextTypeCreator",(function(){return v}));var a=n(19),r=n(4),i=n(8),c=n.n(i),o=n(6),s=n(503),u=n(10),l=n(3011),d=n(1753),f=n(482),j=n(553),b=n(124),v=function(){var e=Object(s.h)(),t=Object(l.a)().t,n=Object(f.c)(),i=n.contextTypes_Add,v=n.contextTypes_FindOne,h=Object(o.useState)((function(){return{name:"",version:0,actions:[],tasks:[],initialActions:[],milestones:[],tags:[],metrics:[]}})),m=Object(r.a)(h,2),p=m[0],O=m[1],y=Object(o.useCallback)(function(){var t=Object(a.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(n);case 2:return a=t.sent,O(a),e("../edit/".concat(a.name),{replace:!0}),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[O,e,i]),g=Object(o.useMemo)((function(){return j.c.shape({name:j.c.fields.name.concat(u.m().defined().test({message:function(e){var n=e.value;return t("ContextTypeNameAlreadyExists",{name:n})},test:function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,v({name:t});case 4:return n=e.sent,e.abrupt("return",null==n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))})}),[v,t]);return Object(b.jsx)(d.a,{value:p,schema:g,onApplyChanges:y})};t.default=v},497:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(2),r=n(1),i=n(12),c=n(15),o=n(6),s=n(2342),u=n(2995),l=n(2058),d=n(798),f=n(800),j=n(799),b=n(571),v=n.n(b),h=n(124),m=Object(u.a)((function(e){return Object(s.a)({errorDetails:{overflow:"auto"}})})),p=function(e){var t=e.error,n=e.stack,a=m();return Object(h.jsxs)(d.a,{children:[Object(h.jsx)(j.a,{expandIcon:Object(h.jsx)(v.a,{}),children:Object(h.jsx)(l.a,{variant:"h5",color:"error",children:t})}),Object(h.jsx)(f.a,{className:a.errorDetails,children:Object(h.jsx)("pre",{children:n})})]})},O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(r.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t}),this.setState({errorInfo:t})}},{key:"render",value:function(){var e,t,n=this.state,a=n.hasError,r=n.error,i=n.errorInfo;return a?Object(h.jsx)(p,{error:null!==(e=null===r||void 0===r?void 0:r.message)&&void 0!==e?e:"",stack:null!==(t=null===i||void 0===i?void 0:i.componentStack)&&void 0!==t?t:""}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(o.Component)},523:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(6),r=n(2274),i=n(542),c=n(3011),o=n(470),s=n(505),u=n(681),l=n(124),d=function(){var e=Object(c.a)().t,t=Object(i.b)().enqueueSnackbar,n=Object(o.b)();return Object(a.useCallback)((function(a,i,c){var o=null!==c&&void 0!==c?c:{},d=o.variant,f=void 0===d?"error":d,j=o.dialogTitle,b=void 0===j?e("Error"):j,v=o.dialogProps;if(Object(u.b)(i)&&"string"===typeof a){var h,m=!1===(null===(h=window.navigator)||void 0===h?void 0:h.onLine);a=e(m?"BrowserOfflineMessage":"NetworkErrorMessage",{message:a})}t(a,{variant:f,action:Object(l.jsx)(r.a,{onClick:function(){n({dialogProps:v,title:b,description:Object(l.jsx)(s.a,{error:i})}).catch((function(){}))},children:e("ShowDetails")})})}),[n,t,e])}},543:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(6),r=n(124),i={freeVariableTypingProviders:{},getTypingForFreeVariable:function(){return""},getJsCommonTypings:function(){return""}},c=Object(a.createContext)(i),o=function(){return Object(a.useContext)(c)},s=function(e){var t=e.freeVariableTypingProviders,n=e.jsCommonTypingProvider,s=e.children,u=o(),l=u!==i?u:void 0,d=Object(a.useCallback)((function(){return n?n():l?l.getJsCommonTypings():void 0}),[n,l]),f=Object(a.useCallback)((function(e){return t&&e in t?t[e]():l?l.getTypingForFreeVariable(e):void 0}),[t,l]),j=Object(a.useMemo)((function(){return{parentContext:l,freeVariableTypingProviders:t,jsCommonTypingProvider:n,getTypingForFreeVariable:f,getJsCommonTypings:d}}),[l,t,n,f,d]);return Object(r.jsx)(c.Provider,{value:j,children:s})}},553:function(e,t,n){"use strict";n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"i",(function(){return S})),n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return P})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return z})),n.d(t,"f",(function(){return q})),n.d(t,"c",(function(){return K}));var a=n(687),r=n(534),i=n(126),c=n(100),o=n(643),s=n(644),u=n(898),l=n(674),d=n(746),f=n(747),j=n(10),b=n(18),v=n(14),h=n(683),m=n(143),p=n(764),O=n(506),y="jsCommon",g="jsonSchema",x="uiSchemaJsonSchema",k=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,a,r){var i;return Object(o.a)(this,n),(i=t.call(this)).definitionNameKey=e,i.contextKey=a,i.jsonSchemaKey=r,i}return Object(s.a)(n,[{key:"_validate",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=a,s=null===(t=o.context)||void 0===t?void 0:t[this.jsonSchemaKey],d=e[this.definitionNameKey];if(s&&"string"===typeof d){var f;"function"===typeof s&&(s=s()),"string"===typeof s&&(s=JSON.parse(s));var j=Object(p.a)(s,d),b=Object(c.a)(Object(c.a)({},null===(f=o)||void 0===f?void 0:f.context),{},Object(i.a)({},this.contextKey,j));o=Object(c.a)(Object(c.a)({},o),{},{context:b})}return Object(u.a)(Object(l.a)(n.prototype),"_validate",this).call(this,e,o,r)}},{key:"clone",value:function(e){var t=Object(u.a)(Object(l.a)(n.prototype),"clone",this).call(this,e);return t.definitionNameKey=this.definitionNameKey,t.contextKey=this.contextKey,t.jsonSchemaKey=this.jsonSchemaKey,t}}]),n}(j.b),C=function(e,t,n){return new k(e,t,n)},S=j.k().shape({jsValidator:j.m().required().jsExpression({paramNames:["state","payload","task"],scriptContextKey:y}),errorMessageTemplate:j.m(),jsMessageTemplate:j.m()}),N=j.k().shape({uiSchema:j.m().uiSchema(x)}),T=Object(h.a)(j.m().required().identifier(),j.m().required().jsExpression({paramNames:["state","payload"],scriptContextKey:y})),w=C("payloadSchemaDefinitionName",x,g).shape({name:j.m().required().identifier().min(3).max(50),payloadSchemaDefinitionName:j.m().jsonSchemaDefinitionName(g),validators:j.e().of(S.required()),jsSetters:T,settings:N,excludePayloadKeysFromEventStorage:j.m()}),D=(j.k().shape({name:j.m().required(),family:j.m()}),j.k().shape({uiSchema:j.m().uiSchema(x),commandText:j.m(),actionInProgressText:j.m(),actionCompletedText:j.m(),icon:j.i(),contextDataLocation:j.m().oneOf(Object(r.a)(O.j))})),E=Object(h.a)(j.m().required().identifier(),j.m().required().jsExpression({paramNames:["state","payload","task","responseData"],scriptContextKey:y})).required(),P=C("payloadSchemaDefinitionName",x,g).shape({name:j.m().required().identifier().min(3),payloadSchemaDefinitionName:j.m().jsonSchemaDefinitionName(g),validators:j.e().of(S.required()),jsSetters:E,settings:D,jsInitialPayloadBuilder:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsContextDataBuilder:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y})}),M=j.k(),A=Object(h.a)(j.m().required().identifier(),j.m().required().jsExpression({paramNames:["state"],scriptContextKey:y})).required(),z=j.k().shape({name:j.m().required().identifier().min(3),titleTemplate:j.m().required(),jsCondition:j.m().jsExpression({paramNames:["state"],scriptContextKey:y}),jsTaskDataSetters:A,jsAssignedTo:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsAssignedToRole:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsStartDate:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsStartBeforeDate:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsDueDate:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),jsImportance:j.m().jsExpression({paramNames:["state","task"],scriptContextKey:y}),validResponses:j.e().of(P.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return b.a.t("DuplicateResponseTypeNames",{names:t.join(", ")})})),excludeTaskDataKeysFromEventsStorage:j.m(),settings:M}),I=j.k().shape({name:j.m().required(),final:j.g()}),V=j.k().shape({name:j.m().required()}),J=j.k().shape({name:j.m().required()}),R=j.k().shape({uiSchemaCommon:j.m().uiSchema("uiSchemaCommon")}),q=j.k().shape({key:j.m().required().identifier(),jsExpression:j.m().required().jsExpression({paramNames:["state"],scriptContextKey:y}),dependencies:j.e().of(j.m())}),K=j.k().shape({version:j.j(),name:j.m().required().identifier().min(3).max(50),description:j.m(),actions:j.e().of(w.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return b.a.t("DuplicateActionNames",{names:t.join(", ")})})),jsInitializers:Object(h.a)(j.m().required().identifier(),j.m().required()),selectors:j.e().of(q).test({message:function(){return b.a.t("SelectorCircularDependencyFound")},test:function(e){var t=e;if(!t||0===t.length)return!0;for(var n=Object(v.r)((function(e){return Object(v.I)(e.flatMap((function(e){var t;return null!==(t=e.dependencies)&&void 0!==t?t:[]})))}),Object(v.j)((function(e){return e.key}),t.filter((function(e){return e.key})))),a=0,r=Object.keys(n);a<r.length;a++){var i=r[a],c=Object(m.b)(i,{getNeighbors:function(e){var t;return null!==(t=n[e])&&void 0!==t?t:[]}});if(c)return this.createError({path:this.path,message:b.a.t("SelectorCircularDependencyFound",{cycle:c.join(" -> ")})})}return!0}}),tasks:j.e().of(z.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return b.a.t("DuplicateTaskTypeNames",{names:t.join(", ")})})),initialActions:j.e().of(j.m().required()).defined().test({message:function(){return b.a.t("InvalidInitialActions")},test:function(e){var t,n=this,r=e,i=null===(t=this.parent)||void 0===t?void 0:t.actions;if(Array.isArray(i)){var c,o=Object(a.a)(r);try{var s=function(){var e=c.value;if(!i.find((function(t){return t.name===e})))return{v:n.createError({path:n.path,message:b.a.t("InvalidActionName",{actionName:r})})}};for(o.s();!(c=o.n()).done;){var u=s();if("object"===typeof u)return u.v}}catch(l){o.e(l)}finally{o.f()}}return!0}}),milestones:j.e().of(I.required()),tags:j.e().of(V),metrics:j.e().of(J),jsCommon:j.m().jsModule(),jsonSchema:j.m().jsonSchema(),settings:R,excludeNewContextStateKeysFromEventsStorage:j.m()})},559:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);r(n,t,"application/json")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,a=new Blob([e]);i(a,t,n)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,n&&(r.type=n),document.body.appendChild(r);try{r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(r),setTimeout((function(){return URL.revokeObjectURL(r.href)}),0)}}},c=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){var a,r=null===(a=e.target)||void 0===a?void 0:a.result;if("string"===typeof r){var i=JSON.parse(r);t(i)}n("Invalid data type in blob ".concat(typeof r))},a.onerror=function(e){n("Error reading blob")},a.readAsText(e)}))}},618:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(19),r=n(3),i=n(8),c=n.n(i),o=n(6),s=n(3011),u=n(503),l=n(470),d=function(e,t){var n=Object(l.c)(),i=Object(s.a)().t,d=Object(o.useMemo)((function(){return Object(r.a)({description:i("ExitingWithoutSavingWarning"),confirmationText:i("Continue")},t)}),[t,i]),f=Object(o.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(d);case 2:e.sent&&t.retry();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,d]);Object(u.e)(f,e)}},683:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(3),r=n(4),i=n(2),c=n(1),o=n(17),s=n(9),u=n(12),l=n(15),d=n(10),f=n(807),j=n.n(f);function b(e,t){return new v(e,t)}var v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.m(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.i();return Object(i.a)(this,n),(e=t.call(this,{type:"map"})).key=a,e.value=r,e}return Object(c.a)(n,[{key:"_typeCheck",value:function(e){return e&&"object"===typeof e}},{key:"_cast",value:function(e,t){var a=this,i=Object(o.a)(Object(s.a)(n.prototype),"_cast",this).call(this,e,t),c={};return Object.entries(i).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];c[a.key.cast(n)]=a.value.cast(i)})),c}},{key:"_validate",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,u=[],l=i.abortEarly,f=i.sync,b=i.path,v=void 0===b?"":b,h=null!=i.originalValue?i.originalValue:e,m=this.key,p=this.value;Object(o.a)(Object(s.a)(n.prototype),"_validate",this).call(this,e,i,(function(e,n){var o;if(e){if(!d.c.isError(e)||l)return c(e,n);u.push(e)}if(!t._typeCheck(n))return u.length&&c(u[0]),void c(null,n);h=null!==(o=h)&&void 0!==o?o:n;for(var s=[],b=function(){var e=Object(r.a)(y[O],2),t=e[0],c=e[1],o=Object(a.a)(Object(a.a)({},i),{},{strict:!0,parent:n,path:v?"".concat(v,".").concat(t):t,originalValue:h[t]});s.push((function(e,n){m.validate(t,o).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))})),s.push((function(e,t){p.validate(c,o).then((function(e){return t(null,e)})).catch((function(e){return t(e)}))}))},O=0,y=Object.entries(n);O<y.length;O++)b();return j()({sync:f,path:v,value:n,errors:u,tests:s,endEarly:l},c)}))}},{key:"clone",value:function(e){var t,a,r=Object(o.a)(Object(s.a)(n.prototype),"clone",this).call(this,e);return r.key=null===(t=this.key)||void 0===t?void 0:t.clone(),r.value=null===(a=this.value)||void 0===a?void 0:a.clone(),r}}]),n}(d.a);function h(e,t){return b(e,t)}b.prototype=v.prototype},684:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j}));var a=n(21),r=n(4),i=n(0),c=n(6),o=n.n(c),s=n(506),u=n(124),l=function(){throw new Error("Forgot to wrap component in `ContextTypeContextProvider`")},d=Object(c.createContext)({getJsonSchemaDefinition:l,getJsonSchemaDefinitions:l,setJsonSchemaDefinition:l,setJsonSchemaDefinitions:l,updateTaskJsonSchemaDefinitions:l,updateActionJsonSchemaDefinition:l,updateResponseJsonSchemaDefinition:l}),f=function(e){var t=e.control,n=t.watchInternal,o=t.setValue,l=e.children,f=n("jsCommon"),j=n("jsonSchema"),b=n("settings"),v=Object(c.useMemo)((function(){var e=null===b||void 0===b?void 0:b.uiSchemaCommon;return"string"===typeof e?JSON.parse(e):e}),[b]),h=Object(c.useCallback)((function(e){var t;if(j){var n=null===(t=JSON.parse(j).definitions)||void 0===t?void 0:t[e];return n?JSON.stringify(n,void 0,4):void 0}}),[j]),m=Object(c.useCallback)((function(e){if(!j)return{};var t,n=JSON.parse(j),a={},r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var c,o=t.value,s=null===(c=n.definitions)||void 0===c?void 0:c[o];a[o]=s?JSON.stringify(s,void 0,4):void 0}}catch(u){r.e(u)}finally{r.f()}return a}),[j]),p=Object(c.useCallback)((function(e,t){var n=j?JSON.parse(j):{},a=n.definitions;a||(n.definitions=a={}),t?a[e]=JSON.parse(t):(delete a[e],0===Object.keys(a).length&&delete n.definitions),o("jsonSchema",Object.keys(n).length>0?JSON.stringify(n,void 0,4):void 0)}),[j,o]),O=Object(c.useCallback)((function(e){var t=j?JSON.parse(j):{},n=t.definitions;n||(t.definitions=n={});for(var a=0,i=Object.entries(e);a<i.length;a++){var c=Object(r.a)(i[a],2),s=c[0],u=c[1];u?n[s]=JSON.parse(u):(delete n[s],0===Object.keys(n).length&&delete t.definitions)}o("jsonSchema",Object.keys(t).length>0?JSON.stringify(t,void 0,4):void 0)}),[j,o]),y=Object(c.useCallback)((function(e,t){if(e.validResponses){var n,a=Object(i.a)(e.validResponses.filter((function(e){return e.payloadSchemaDefinitionName})));try{for(a.s();!(n=a.n()).done;){var r=n.value,c=Object(s.z)(e.name,r.name);c!==r.payloadSchemaDefinitionName&&(r.payloadSchemaDefinitionName in t?t[c]=t[r.payloadSchemaDefinitionName]:t[c]=h(r.payloadSchemaDefinitionName),t[r.payloadSchemaDefinitionName]=void 0,r.payloadSchemaDefinitionName=c)}}catch(o){a.e(o)}finally{a.f()}}O(t)}),[h,O]),g=Object(c.useCallback)((function(e,t){if(e.payloadSchemaDefinitionName){var n,r=Object(s.w)(e.name);if(e.payloadSchemaDefinitionName!==r)O((n={},Object(a.a)(n,e.payloadSchemaDefinitionName,void 0),Object(a.a)(n,r,t),n)),e.payloadSchemaDefinitionName=r;else p(e.payloadSchemaDefinitionName,t)}}),[p,O]),x=Object(c.useCallback)((function(e,t,n){var r,i=Object(s.z)(t,e.name);e.payloadSchemaDefinitionName!==i?(O((r={},Object(a.a)(r,e.payloadSchemaDefinitionName,void 0),Object(a.a)(r,i,n),r)),e.payloadSchemaDefinitionName=i):p(e.payloadSchemaDefinitionName,n)}),[p,O]),k=Object(c.useMemo)((function(){return{jsCommon:f,jsonSchema:j?JSON.parse(j):void 0,uiSchemaCommon:v,getJsonSchemaDefinition:h,getJsonSchemaDefinitions:m,setJsonSchemaDefinition:p,setJsonSchemaDefinitions:O,updateActionJsonSchemaDefinition:g,updateResponseJsonSchemaDefinition:x,updateTaskJsonSchemaDefinitions:y}}),[h,m,f,j,v,p,O,g,x,y]);return Object(u.jsx)(d.Provider,{value:k,children:l})},j=function(){return o.a.useContext(d)}},693:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2064),r=n(124),i=function e(t,n,a){var r,i;if("object"===typeof(i=t)&&"type"in i&&"message"in i)a.push({dataPath:n,message:t.type?"".concat(t.type,": ").concat(t.message):null!==(r=t.message)&&void 0!==r?r:"Error"});else if(Array.isArray(t))t.forEach((function(t,r){e(t,"".concat(n,"[").concat(r,"]"),a)}));else if("object"===typeof t){n.length>0&&(n+=".");for(var c=0,o=Object.keys(t);c<o.length;c++){var s=o[c];e(t[s],n+s,a)}}},c=function(e){var t=e.errors,n=e.names,c=[];if(i(t,"",c),n){var o=Array.isArray(n)?n:[n];c=c.filter((function(e){return o.some((function(t){return e.dataPath&&(e.dataPath===t||e.dataPath.startsWith(t+".")||e.dataPath.startsWith(t+"["))}))}))}return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(a.a,{component:"span",error:!0,children:c.map((function(e){return Object(r.jsx)("p",{children:"".concat(e.dataPath,": ").concat(e.message)},e.dataPath)}))})})}},764:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(3),r=n(35),i=n(14),c=function(e,t){var n,c=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(r.isPresent)(c))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof c)throw new Error("Invalid definition ".concat(t));var o=Object(i.c)(c);return delete o.definitions,e=Object(a.a)(Object(a.a)({},e),o)},o=function(e,t,n){if(e.jsonSchema){var a=JSON.parse(e.jsonSchema),r=e.tasks.find((function(e){return e.name===t})),i=null===r||void 0===r?void 0:r.validResponses.find((function(e){return e.name===n})),o=null===i||void 0===i?void 0:i.payloadSchemaDefinitionName;if(o)return c(a,o)}},s=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),a=e.actions.find((function(e){return e.name===t})),r=null===a||void 0===a?void 0:a.payloadSchemaDefinitionName;if(r)return c(n,r)}}},809:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return j}));var a=n(3),r=n(2),i=n(1),c=n(17),o=n(9),s=n(12),u=n(15),l=n(1004),d=n(1178),f=function(e){return"responseName"in e},j=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,a,i,c){var o;return Object(r.a)(this,n),(o=t.call(this,{type:e})).instance=a,o.instanceId=i,o.title=c,o.inPort=void 0,o.outPort=void 0,o.hasInPort()&&(o.inPort=o.addContextTypePort(!0,"in")),o.hasOutPort()&&(o.outPort=o.addContextTypePort(!1,"out")),o}return Object(i.a)(n,[{key:"addContextTypePort",value:function(e,t,n){var a=new d.a(e,t,n);return this.addPort(a),a.setLocked(!0),a}},{key:"hasInPort",value:function(){return!0}},{key:"hasOutPort",value:function(){return!0}},{key:"serialize",value:function(){return Object(a.a)(Object(a.a)({},Object(c.a)(Object(o.a)(n.prototype),"serialize",this).call(this)),{},{instance:this.instance,instanceId:this.instanceId})}},{key:"deserialize",value:function(e){Object(c.a)(Object(o.a)(n.prototype),"deserialize",this).call(this,e),this.instance=e.data.instance}},{key:"dispatchCommand",value:function(e){this.fireEvent({command:e,node:this},"commandInvoked")}}]),n}(l.NodeModel)},825:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(19),r=n(8),i=n.n(r),c=n(35),o=function(e,t){return t.split(/[,[\].]+?/).filter((function(e){return!!e})).reduce((function(e,t){return Object(c.isPresent)(e)?e[t]:e}),e)},s=function(e,t){return Array.from(e).some((function(e){return function(e,t){return RegExp("^".concat(t,"[\\d+]").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)}(t,e)}))},u=function(e,t){return o(e,t)},l=function(e,t){return function(){var n=Object(a.a)(i.a.mark((function n(a,r){var c,o,s,u=arguments;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=u.length>2&&void 0!==u[2]&&u[2],o=e(a),s=t(a),n.abrupt("return",o(a,Object.assign({},r,s),c));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},906:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),r=n(3019),i=n(124),c=function(e){return Object(i.jsxs)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 200 200"},e),{},{children:[Object(i.jsx)("path",{d:"M136 12.9V20h3.3c5.2 0 11.9 3.9 14 8.2 1.8 3.7 1.8 4.1-.3 18-4 26.1-2 38.7 8.1 50.2l4.1 4.6-4.2 4.6c-10 10.8-12.1 23.8-8.1 50 2.4 15.6 2.2 17.5-2.8 21.7-3.3 2.7-4.3 3.1-10.3 4.2l-3.8.6v6.9c0 3.9.4 7 .8 7 3.5 0 13.6-2.6 17.8-4.6 5.9-2.8 12.8-9.7 15.2-15.2 2.3-5.3 1.9-19.3-.8-32.1-2.9-13.9-3.1-24.5-.4-29.1 2.5-4.4 7.6-7 13.7-7h4.7V94.1l-6.1-.7c-14.4-1.6-17.2-10.8-11.5-37.9 2.4-11.7 2.9-18.9 1.6-24.9-2.7-13.2-13.9-22.2-30.2-24.3l-4.8-.6v7.2zM51 8.4c-10.6 3-20.4 11.3-22.8 19.4-1.9 6.2-1.4 17.6 1.3 31.2 3 15.1 3.1 22.1.6 27.7-2.4 5.1-4.9 6.6-12.6 7.3l-6 .5-.3 7.1-.3 7.2 6.1.4c6.9.5 10.6 2.7 13.2 7.9 2.5 4.7 2.3 12.4-.7 27.3-2.8 13.9-3.2 26-1.1 31.9 3.9 10.8 14.3 17.7 30.4 20.2l4.3.7-.3-7.4-.3-7.3-5.3-.6c-5.8-.8-9.3-2.7-11.8-6.4-1.9-2.8-1.7-5.7 1.1-27.4 1.5-10.7 1.6-14.7.8-20.2-1.4-8.5-4.8-16.1-10.1-22l-4.1-4.6 3.5-3.4c10.9-10.5 13.4-25.1 8.9-51-2.2-12.5-2-16.2 1.2-20 3.2-3.7 7.8-5.9 12.8-5.9H63V7l-3.7.1c-2.1 0-5.8.6-8.3 1.3z"}),Object(i.jsx)("path",{d:"M112 27.2c-3.3 1.7-5.7 4.1-9.2 9.3-4.9 7.3-15.9 31-19.7 42.7-1.3 3.8-2.6 6.8-2.9 6.8-.4 0-2-2.3-3.7-5.1C72 73.2 66.9 69 62 69c-4.2 0-9 1.7-9 3.3 0 .5 2.2 3.4 5 6.4 5 5.4 14.8 19.8 20.9 30.6 1.8 3.2 3.5 5.7 3.6 5.5.2-.2 3.1-7.9 6.5-17.3 13.6-37.1 19.8-48.8 33.1-62.9 8.7-9.2 8.7-9.6-.5-9.6-3.4 0-6.7.8-9.6 2.2zM141.5 92c-.4.6-2 .8-3.9.5-3-.6-3.5-.2-12.5 10.4-5.2 6.1-9.8 11.1-10.2 11.1-.4 0-2.8-4.3-5.4-9.6-4.1-8.5-4.9-9.5-6.8-9-1.2.3-3.4.6-4.9.6-4.6 0-4.4 3.2 1 18.5l4.9 13.9-10.8 14.2c-13.5 17.9-16.9 23.6-16.9 29 0 5.7 2.8 9.2 6.9 8.6 2.6-.4 3.9-1.8 9.2-10.6C100 156.8 110 142 110.9 142c.3.1 3.8 4.9 7.6 10.8 8.1 12.4 9.6 13.1 13.3 6.2l2.4-4.5-6.1-13.3c-3.4-7.3-6.1-13.7-6.1-14.2 0-.4 5.2-7.5 11.5-15.7 6.3-8.1 11.4-15.5 11.5-16.4 0-2.2-2.6-4.4-3.5-2.9z"})]}))}}}]);
//# sourceMappingURL=55.797a09d1.chunk.js.map