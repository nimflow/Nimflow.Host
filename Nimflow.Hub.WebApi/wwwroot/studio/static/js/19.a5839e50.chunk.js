(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[19],{2841:function(e,n,t){"use strict";t.r(n),t.d(n,"ResponseTypeEditorDialog",(function(){return V}));var a=t(1),i=t(58),o=t(4),c=t(6),l=t(2614),s=t(2989),r=t(2548),u=t(2925),d=t(3020),b=t(3019),j=t(2932),m=t(9),f=t(857),p=t(1502),O=t(17),h=t(3008),v=t(1604),g=t(917),x=t(2541),y=t(902),S=t(2211),C=t(123),k=Object(s.a)((function(e){return Object(l.a)({paper:{backgroundColor:e.palette.background.default}})})),V=function(e){var n,t=e.open,l=e.defaultValue,s=e.taskTypeName,V=e.definitionJsonSchema,N=e.onChange,D=e.onClose,J=k(),T=Object(f.f)(),w=Object(c.useState)(""),E=Object(o.a)(w,2),R=E[0],A=E[1],M=Object(c.useState)(V),W=Object(o.a)(M,2),q=W[0],z=W[1],B=Object(c.useMemo)((function(){var e,n,t=null===T||void 0===T||null===(e=T.getValues().tasks)||void 0===e?void 0:e.find((function(e){return e.name===s})),a=null===t||void 0===t?void 0:t.validResponses.map((function(e){return e.name})).filter((function(e){return e!==(null===l||void 0===l?void 0:l.name)}));return(n=a)&&0!==n.length?g.g.shape({name:g.g.fields.name.concat(m.m().defined().test({message:function(e){var n=e.value;return O.a.t("ResponseTypeNameAlreadyExists",{name:n})},test:function(e){return!n.includes(e)}})),payloadSchemaDefinitionName:m.m()}):g.g}),[T,s,null===l||void 0===l?void 0:l.name]),F=Object(f.e)({mode:"onChange",reValidateMode:"onChange",defaultValues:null!==l&&void 0!==l?l:{},context:(n={},Object(i.a)(n,g.l,(function(){return T.getValues("jsCommon")})),Object(i.a)(n,g.m,(function(){var e=T.getValues("jsonSchema"),n=JSON.parse(null!==e&&void 0!==e?e:S.a);return q!==V&&(q?n.definitions[R]=JSON.parse(q):delete n.definitions[R]),n})),n),resolver:Object(p.a)(B,{strict:!0,abortEarly:!1})}),G=F.setValue,H=F.getValues,I=F.control,K=F.handleSubmit,L=Object(h.a)().t,P=Object(y.b)(),Q=Object(c.useCallback)((function(e){null===N||void 0===N||N(e,q),null===D||void 0===D||D()}),[q,N,D]),U=Object(c.useCallback)((function(e,n){var t=e?n:void 0;H("payloadSchemaDefinitionName")!==t&&G("payloadSchemaDefinitionName",t,{shouldDirty:!0}),z(e),A(null!==t&&void 0!==t?t:"")}),[H,G]);return Object(C.jsxs)(u.a,{open:t,fullWidth:!0,maxWidth:"lg",classes:{paper:J.paper},children:[Object(C.jsx)(f.b,Object(a.a)(Object(a.a)({},F),{},{children:Object(C.jsx)("form",{onSubmit:K(Q),children:Object(C.jsxs)(y.a,Object(a.a)(Object(a.a)({},P),{},{children:[Object(C.jsx)(j.a,{children:L("EditingResponseType")}),Object(C.jsx)(b.a,{children:Object(C.jsx)(x.a,{defaultValue:l,taskTypeName:s,definitionJsonSchema:q,onDefinitionJsonSchemaChange:U})}),Object(C.jsxs)(d.a,{children:[Object(C.jsx)(r.a,{type:"submit",color:"primary",disabled:!P.canAccept,children:L("Accept")}),Object(C.jsx)(r.a,{onClick:D,color:"primary",children:L("Cancel")})]})]}))})})),Object(C.jsx)(v.DevTool,{control:I})]})};n.default=V}}]);
//# sourceMappingURL=19.a5839e50.chunk.js.map