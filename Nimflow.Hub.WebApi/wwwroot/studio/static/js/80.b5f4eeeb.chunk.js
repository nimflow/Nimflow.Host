(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[80],{2839:function(e,t,n){"use strict";n.r(t),n.d(t,"UiSchemaLibraryEditorModal",(function(){return Y}));var r=n(21),a=n(19),c=n(4),i=n(0),o=n(8),s=n.n(o),u=n(5),l=n(454),d=n(2852),b=n(2203),f=n(2788),j=n(2880),p=n(2879),O=n(2795),h=n(2142),m=n(2868),v=n(557),g=n(687),x=n(1942),k=n(10),w=n(14),C=n(508),S=n(127),y=n(72),M=n(556),N=n(546),R=n(497),W=n(979),D=n(125),P=Object(d.a)((function(e){return Object(b.a)({dialogPaper:{height:"90vh"}})})),E=Object(l.a)(p.a)({display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto",rowGap:"5px",height:"100%",overflowY:"hidden"}),J=Object(l.a)("div")({gridColumn:"1 / 2",gridRow:"1 / 99",alignSelf:"stretch"}),L=Object(l.a)("div")({gridColumn:"1 / 2",gridRow:"99 / 100",overflowY:"auto"}),T=function(e){e.focus()},U=k.m().uiSchema(N.k),Y=function(e){var t=e.open,n=e.defaultValue,o=e.jsonSchema,l=e.onChange,d=e.onClose,b=Object(m.a)().t,p=Object(g.a)(),k=P(),Y=Object(M.a)(),A=Object(u.useState)(),$=Object(c.a)(A,2),q=$[0],F=$[1],G=Object(u.useRef)(),V=Object(W.b)(),B=Object(u.useMemo)((function(){return n?n.includes("\n")?n:JSON.stringify(JSON.parse(n),void 0,2):""}),[n]),_=Object(u.useState)(B),z=Object(c.a)(_,2),H=z[0],I=z[1];Object(u.useEffect)((function(){var e=G.current;e&&V&&function(e,t){t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:e.$id,fileMatch:["inmemory://model/*"],schema:e},{uri:y.$id,fileMatch:["inmemory://model/*"],schema:y}]});var n,r=Object(i.a)(t.editor.getModels());try{for(r.s();!(n=r.n()).done;){var a=n.value;console.log(a)}}catch(c){r.e(c)}finally{r.f()}}(V,e)}),[V]);var K=Object(u.useCallback)(Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==H.trim().length){e.next=4;break}return null===l||void 0===l||l(void 0),d(),e.abrupt("return");case 4:return e.t0=w.k,e.next=7,Object(S.b)(U,H,{context:Object(r.a)({},N.k,o)});case 7:if(e.t1=e.sent,!(t=(0,e.t0)(e.t1))){e.next=12;break}return F(t.message),e.abrupt("return");case 12:null===l||void 0===l||l(H),d();case 14:case"end":return e.stop()}}),e)}))),[H,l,d,o]),Q=Object(u.useCallback)(Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=B!==H,!e.t0){e.next=5;break}return e.next=4,Y();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:d();case 8:case"end":return e.stop()}}),e)}))),[H,B,Y,d]),X=Object(u.useCallback)(function(){var e=Object(a.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=B!==H,!e.t0){e.next=5;break}return e.next=4,Y();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:"backdropClick"!==n&&(null===d||void 0===d||d());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[H,B,Y,d]),Z=Object(u.useCallback)((function(e){G.current=e}),[]);return Object(D.jsxs)(f.a,{open:t,onClose:X,maxWidth:"xl",fullWidth:!0,classes:{paper:k.dialogPaper},children:[Object(D.jsx)(O.a,{children:b("EditingUiSchemaLibrary")}),Object(D.jsxs)(E,{children:[Object(D.jsx)(J,{children:Object(D.jsx)(C.a,{children:function(e){var t=e.height,n=e.width;return Object(D.jsx)(v.b,{width:n,height:t-50,language:"json",theme:"light"===p.palette.mode?"vs-light":"vs-dark",value:H,options:R.a,onChange:I,editorWillMount:Z,editorDidMount:T})}})}),Object(D.jsx)(L,{children:Object(D.jsx)(x.a,{component:"span",error:!0,children:q})})]}),Object(D.jsxs)(j.a,{children:[Object(D.jsx)(h.a,{onClick:K,color:"primary",children:b("Accept")}),Object(D.jsx)(h.a,{onClick:Q,color:"primary",children:b("Cancel")})]})]})};t.default=Y},497:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={selectOnLineNumbers:!0,automaticLayout:!0,minimap:{enabled:!1},fixedOverflowWidgets:!0}},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(2868),c=n(5),i=n(466),o=function(){var e=Object(a.a)().t,t=Object(i.c)();return Object(c.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(r.a)({title:e("ThereArePendingChanges"),description:e("ChangesWillBeLost_Continue")},n);return t(a)}),[t,e])}},979:function(e,t,n){"use strict";n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return q}));var r=n(21),a=n(4),c=n(19),i=n(8),o=n.n(i),s=n(5),u=n(454),l=n(2852),d=n(2203),b=n(2788),f=n(2880),j=n(2879),p=n(2795),O=n(2142),h=n(2868),m=n(557),v=n(687),g=n(1942),x=n(10),k=n(14),w=n(508),C=n(35),S=n(499),y=n(127),M=n(71),N=n(556),R=n(546),W=n(497),D=n(585),P=n(529),E=n(125),J=Object(l.a)((function(e){return Object(d.a)({dialogPaper:{height:"90vh"}})})),L=Object(u.a)(j.a)({display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto",rowGap:"5px",height:"100%",overflowY:"hidden"}),T=Object(u.a)("div")({gridColumn:"1 / 2",gridRow:"1 / 99",alignSelf:"stretch"}),U=Object(u.a)("div")({gridColumn:"1 / 2",gridRow:"99 / 100",overflowY:"auto"}),Y=function(e){var t=Object(D.b)().getModules,n=Object(P.a)(t),r=Object(S.a)(n,Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{revalidateOnFocus:!1}).data;return Object(s.useMemo)((function(){if(!r&&!e)return M;var t=Object(k.c)(M);e&&(t.definitions.UseElement.properties.name.enum=Object.keys(e));if(r){var n={properties:{moduleName:{enum:r.map((function(e){return e.name})).filter(C.isPresent)}},allOf:r.map((function(e){var t,n;return{if:{properties:{moduleName:{const:e.name}},required:["moduleName"]},then:{properties:{functionName:{enum:null!==(t=null===(n=e.functions)||void 0===n?void 0:n.map((function(e){return e.name})).filter(C.isPresent))&&void 0!==t?t:[]}},required:["moduleName","functionName"]}}}))},a=t.definitions.OptionsSource;a.properties=n.properties,a.allOf=n.allOf;var c=t.definitions.DocumentSchemasSource;c.properties=n.properties,c.allOf=n.allOf;var i=t.definitions.OcrFunction;i.properties=n.properties,i.allOf=n.allOf}return t}),[r,e])},A=function(e){e.focus()},$=x.m().uiSchema(R.k),q=function(e){var t=e.open,n=e.defaultValue,i=e.jsonSchema,u=e.uiSchemaLibrary,l=e.onChange,d=e.onClose,j=Object(h.a)().t,x=Object(v.a)(),C=J(),S=Object(N.a)(),M=Object(s.useState)(),D=Object(a.a)(M,2),P=D[0],q=D[1],F=Object(s.useRef)(),G=Y(u),V=Object(s.useMemo)((function(){return n?n.includes("\n")?n:JSON.stringify(JSON.parse(n),void 0,2):""}),[n]),B=Object(s.useState)(V),_=Object(a.a)(B,2),z=_[0],H=_[1];Object(s.useEffect)((function(){var e=F.current;e&&G&&function(e,t){t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:e.$id,fileMatch:["inmemory://model/*"],schema:e}]})}(G,e)}),[G]);var I=Object(s.useCallback)(Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==z.trim().length){e.next=4;break}return null===l||void 0===l||l(void 0),d(),e.abrupt("return");case 4:return e.t0=k.k,e.next=7,Object(y.b)($,z,{context:Object(r.a)({},R.k,i)});case 7:if(e.t1=e.sent,!(t=(0,e.t0)(e.t1))){e.next=12;break}return q(t.message),e.abrupt("return");case 12:null===l||void 0===l||l(z),d();case 14:case"end":return e.stop()}}),e)}))),[z,l,d,i]),K=Object(s.useCallback)(Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=V!==z,!e.t0){e.next=5;break}return e.next=4,S();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:d();case 8:case"end":return e.stop()}}),e)}))),[z,V,S,d]),Q=Object(s.useCallback)(function(){var e=Object(c.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=V!==z,!e.t0){e.next=5;break}return e.next=4,S();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:"backdropClick"!==n&&(null===d||void 0===d||d());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[z,V,S,d]),X=Object(s.useCallback)((function(e){F.current=e}),[]);return Object(E.jsxs)(b.a,{open:t,onClose:Q,maxWidth:"xl",fullWidth:!0,classes:{paper:C.dialogPaper},children:[Object(E.jsx)(p.a,{children:j("EditingUiSchema")}),Object(E.jsxs)(L,{children:[Object(E.jsx)(T,{children:Object(E.jsx)(w.a,{children:function(e){var t=e.height,n=e.width;return Object(E.jsx)(m.b,{width:n,height:t-50,language:"json",theme:"light"===x.palette.mode?"vs-light":"vs-dark",value:z,options:W.a,onChange:H,editorWillMount:X,editorDidMount:A})}})}),Object(E.jsx)(U,{children:Object(E.jsx)(g.a,{component:"span",error:!0,children:P})})]}),Object(E.jsxs)(f.a,{children:[Object(E.jsx)(O.a,{onClick:I,color:"primary",children:j("Accept")}),Object(E.jsx)(O.a,{onClick:K,color:"primary",children:j("Cancel")})]})]})}}}]);
//# sourceMappingURL=80.b5f4eeeb.chunk.js.map