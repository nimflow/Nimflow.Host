(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[77],{3196:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextSimulationUpdater",(function(){return h}));var a=n(5),r=n.n(a),c=n(21),s=n(1),u=n(3),i=n(830),o=n(432),b=n(52),p=n(3232),f=n(735),j=n(1133),l=n(1875),O=n(1606),m=n(2281),x=n(1788),d=n(1132),v=n(133),h=function(e){var t=Object(i.i)().id,n=Object(i.h)(),a=Object(p.a)().t,h=Object(u.useState)(),k=Object(s.a)(h,2),w=k[0],y=k[1],S=Object(u.useState)(),_=Object(s.a)(S,2),g=_[0],C=_[1],T=Object(f.c)().contextTypes_FindOne,F=Object(x.b)(),A=F.simulations_FindOne,I=F.simulations_Replace,N=F.simulations_InsertOne,P=F.simulations_FindIdFromName;Object(u.useEffect)((function(){t&&A(t).then(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t).contextType){e.next=5;break}e.t0=Object(l.b)(n.contextType),e.next=8;break;case 5:return e.next=7,Object(l.c)(n.contextTypeName,(function(e){return T({name:e})}));case 7:e.t0=e.sent;case 8:a=e.t0,y(n),C(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,A,T]);var E=Object(u.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.name);case 2:if(n=e.sent,!Object(b.isPresent)(n)){e.next=5;break}return e.abrupt("return",[{message:a("ContextSimulationNameAlreadyInUse",{name:t.name})}]);case 5:return e.prev=5,e.next=8,I(t);case 8:y(t),e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(5),c=e.t0.toString(),d.a.isApiException(e.t0)&&(c=e.t0.message,"status"in e.t0&&(c+=" (status: ".concat(e.t0.status,")"))),e.abrupt("return",[{message:c}]);case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[P,I,a]),J=Object(u.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t,a){var c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=Object(o.a)(t)).name=a,delete c.id,delete c._id,e.next=6,N(c);case 6:s=e.sent,y(void 0),n("../".concat(s),{replace:!0});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,N]);return w&&g?Object(v.jsx)(O.a,{contextTypeProvider:g,simulation:w,children:Object(v.jsx)(m.a,{onSaveChanges:E,onSaveAs:J,isPersistent:!0})}):Object(v.jsx)(j.b,{})};t.default=h}}]);
//# sourceMappingURL=77.5878000e.chunk.js.map