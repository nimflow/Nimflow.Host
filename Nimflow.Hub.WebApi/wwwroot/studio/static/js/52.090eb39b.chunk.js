(this["webpackJsonpnimflow-studio"]=this["webpackJsonpnimflow-studio"]||[]).push([[52],{1180:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return P}));var a,r=n(464),i=n(25),c=n(485),s=n(518),o=n(484),u=n.n(o),l=n(5),d=n.n(l),j=n(14),b=n(158),p=n(38),m=n(1505),v=n(150),f=n(763),h=n(540),O=n(1786),x=n(1558),g=n(922),y=n(576),k=n(128),E=function(){throw new Error("You forgot to wrap your component in <ContextSimulationContextProvider>.")},C={getState:E,resetSimulation:E,setSimulation:E,executeNextPendingEvent:E,executeAllPendingEvents:E,updateSimulation:E,sendResponse:E,deleteEvent:E,updateEventData:E,validate:E,errors:{},options:{shouldExecuteAllPendingEvents:!0},setOptions:E},S=Object(l.createContext)(C),N=function(e,t){var n,a,r=null!==(n=e.contextTypeName)&&void 0!==n?n:null===(a=e.contextType)||void 0===a?void 0:a.name;if(t.name!==r){var i="Simulation context type name ("+r+") is different from context type provided ("+t.name+")";throw new Error(i)}},T=function(e,t){return N(e,t),(e=Object(j.c)(e)).contextType&&!Object(y.J)(t)&&(e.contextType=t),e},w=function(e){return Object(b.a)(e,(function(e){var t;(t=e.pendingEvents).splice.apply(t,[0,0].concat(Object(s.a)(e.history.map((function(e){return e.event}))))),e.history=[],delete e.initialState}))},A=function(){var e=Object(c.a)(u.a.mark((function e(t,n,a,r,c){var o,l,d,b,p,m,v,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=Array.isArray(r)?r.length:1;return Object(i.a)(Object(i.a)({},a),{},{pendingEvents:a.pendingEvents.slice(t),history:[].concat(Object(s.a)(a.history),Object(s.a)(e.states))})},Array.isArray(r)||(r=[r]),l=t.configureSimulationRequest({events:r}),(d="number"===typeof c?a.history[c]:Object(j.q)(a.history))&&(l.currentState={context:d.context,tasks:d.tasks}),e.prev=5,e.next=8,n(l);case 8:if(b=e.sent,!((p=t.analyzeSimulationResponse(b))>=O.a.UnrecognizedExecutionStatus)){e.next=12;break}throw new Error("Unexpected result from simulation: ".concat(O.a[b.status]," (").concat(b.status,")"));case 12:if(p!==O.a.ReexecuteFromInitialState){e.next=17;break}return m=w(a),v="number"===typeof c?a.history.slice(0,c):a.history,h=[].concat(Object(s.a)(v.map((function(e){return e.event}))),Object(s.a)(r)),e.abrupt("return",A(t,n,m,h));case 17:return e.abrupt("return",o(b));case 20:return e.prev=20,e.t0=e.catch(5),e.abrupt("return",o({status:f.f.Completed,states:r.map((function(n){return{event:n,context:{id:"",typeName:t.contextType.name,state:{},dateCreated:"",dateModified:""},tasks:[],errors:[Object(g.a)(e.t0)?e.t0.message+"\n"+e.t0.response:""]}}))}));case 23:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),R=Object(v.b)({key:"simulator:shouldExecuteAllPendingEvents",default:null===(a=C.options.shouldExecuteAllPendingEvents)||void 0===a||a}),q=function(e){var t=e.contextTypeProvider,n=e.simulation,a=e.options,i=e.schema,o=void 0===i?x.a:i,d=e.children,j=Object(h.c)().simulation_Simulate,f=Object(v.f)(R),O=Object(r.a)(f,2),g=O[0],y=O[1],E=Object(l.useState)(t),C=Object(r.a)(E,2),q=C[0],P=C[1],D=Object(l.useState)((function(){return n?T(n,q.contextType):{contextTypeName:q.contextType.name,pendingEvents:[],history:[]}})),I=Object(r.a)(D,2),F=I[0],_=I[1],B=Object(l.useState)({}),M=Object(r.a)(B,2),z=M[0],K=M[1],H=Object(l.useCallback)((function(){return{simulation:F,contextType:q.contextType,contextTypeProvider:q}}),[q,F]),V=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;e=T(e,t.contextType),t!==q&&P(t),_(e)}),[P,_,q]),L=Object(l.useCallback)((function(){_(w(F))}),[F]),U=Object(l.useCallback)((function(e,t,n){return A(q,j,e,t,n)}),[j,q]),W=Object(l.useCallback)(function(){var e=Object(c.a)(u.a.mark((function e(t,n,a){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(b.a)(t,n),N(i,q.contextType),!((null!==(r=null===a||void 0===a?void 0:a.executeAllPendingEvents)&&void 0!==r?r:g)&&i.pendingEvents.length>0)){e.next=6;break}return e.next=5,U(i,i.pendingEvents);case 5:i=e.sent;case 6:_(i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[_,q,U,g]),G=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==F.pendingEvents.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,U(F,F.pendingEvents[0]);case 4:t=e.sent,_(t);case 6:case"end":return e.stop()}}),e)}))),[F,_,U]),J=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==F.pendingEvents.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,U(F,F.pendingEvents);case 4:t=e.sent,_(t);case 6:case"end":return e.stop()}}),e)}))),[F,_,U]),$=Object(l.useCallback)(function(){var e=Object(c.a)(u.a.mark((function e(t,n,a){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.history[t]){e.next=3;break}throw new Error("Invalid stateIndex: ".concat(t));case 3:return r=Object(b.a)(F,(function(e){var r,i=e.history.length-t+1,c=e.history.splice(t+1,i);null===(r=null===a||void 0===a?void 0:a.clearFollowingEvents)||void 0===r||r?e.pendingEvents=[n]:e.pendingEvents=[n].concat(Object(s.a)(c.map((function(e){return e.event}))),Object(s.a)(e.pendingEvents))})),e.next=6,U(r,null!==a&&void 0!==a&&a.executeAllPendingEvents?n:r.pendingEvents,t);case 6:i=e.sent,_(i);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[F,_,U]),Y=Object(l.useCallback)((function(e,t){var n;return null===(n=null===t||void 0===t?void 0:t.deleteFollowingEvents)||void 0===n||n?W(F,(function(t){e>=t.history.length?t.pendingEvents=t.pendingEvents.splice(0,e-t.history.length):(t.pendingEvents=[],t.history=t.history.slice(0,e))}),{executeAllPendingEvents:null===t||void 0===t?void 0:t.executeAllPendingEvents}):W(F,(function(t){if(e>=t.history.length)t.pendingEvents.splice(e-t.history.length,1);else{if(e<t.history.length-1){var n=t.history.slice(e+1).map((function(e){return e.event}));t.pendingEvents=[].concat(Object(s.a)(n),Object(s.a)(t.pendingEvents))}t.history=t.history.slice(0,e)}}),{executeAllPendingEvents:null===t||void 0===t?void 0:t.executeAllPendingEvents})}),[W,F]),Q=Object(l.useCallback)((function(e,t,n){return W(F,(function(n){if(e<n.history.length){var a=n.history.slice(e).map((function(e){return e.event}));n.pendingEvents=[].concat(Object(s.a)(a),Object(s.a)(n.pendingEvents)),n.history=n.history.slice(0,e)}var r=e-n.history.length;n.pendingEvents[r]=t}),n)}),[W,F]),X=Object(l.useMemo)((function(){return{shouldExecuteAllPendingEvents:g}}),[g]),Z=Object(l.useCallback)((function(e){Object(p.isPresent)(e.shouldExecuteAllPendingEvents)&&e.shouldExecuteAllPendingEvents!==g&&(y(e.shouldExecuteAllPendingEvents),e.shouldExecuteAllPendingEvents&&J())}),[y,g,J]),ee=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(o)(F,{},!0);case 2:return t=e.sent,n=t.errors,K(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),[o,F]);Object(l.useEffect)((function(){n&&null!==a&&void 0!==a&&a.shouldExecuteAllPendingEvents&&n.pendingEvents.length>0&&U(n,n.pendingEvents).then((function(e){_(e)}))}),[a,n,U]);var te={getState:H,resetSimulation:L,setSimulation:V,executeNextPendingEvent:G,executeAllPendingEvents:J,updateSimulation:Object(l.useCallback)((function(e,t){return W(F,e,t)}),[W,F]),sendResponse:$,deleteEvent:Y,updateEventData:Q,validate:ee,errors:z,options:X,setOptions:Z};return Object(k.jsx)(S.Provider,{value:te,children:d})},P=function(){return d.a.useContext(S)}},1181:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(7),r=n(103),i=n(2304),c=n(2986),s=n(2617),o=n(128),u=["children","className"],l=Object(c.a)((function(e){return Object(s.a)({paper:{padding:e.spacing(2),color:e.palette.text.secondary}})})),d=function(e){var t=e.children,n=e.className,c=Object(r.a)(e,u),s=l();return Object(o.jsx)(i.a,Object(a.a)(Object(a.a)({className:"".concat(s.paper," ").concat(n),elevation:3},c),{},{children:t}))}},1245:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(7),r=n(103),i=n(2617),c=n(2986),s=n(2458),o=n(1514),u=n(128),l=["title","actions"],d=Object(c.a)((function(e){return Object(i.a)({grow:{flexGrow:1},actionToolbarButtons:{display:"flex"}})})),j=function(e){var t=e.title,n=e.actions,i=Object(r.a)(e,l),c=d();return Object(u.jsxs)(s.a,Object(a.a)(Object(a.a)({variant:"dense"},i),{},{children:[t&&Object(u.jsx)(o.a,{children:t}),Object(u.jsx)("div",{className:c.grow}),n&&Object(u.jsx)("div",{className:c.actionToolbarButtons,children:n})]}))}},1260:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n(25),r=n(38),i=n(14),c=function(e,t){var n,c=null===(n=e.definitions)||void 0===n?void 0:n[t];if(!Object(r.isPresent)(c))throw new Error("Invalid definition ".concat(t));if("boolean"===typeof c)throw new Error("Invalid definition ".concat(t));var s=Object(i.c)(c);return delete s.definitions,e=Object(a.a)(Object(a.a)(Object(a.a)({},e),s),{},{$schema:"http://json-schema.org/draft-07/schema#"})},s=function(e,t,n){if(e.jsonSchema){var a=JSON.parse(e.jsonSchema),r=e.tasks.find((function(e){return e.name===t})),i=(null===r||void 0===r?void 0:r.validResponses).find((function(e){return e.name===n})),s=null===i||void 0===i?void 0:i.payloadSchemaDefinitionName;if(s)return c(a,s)}},o=function(e,t){if(e.jsonSchema){var n=JSON.parse(e.jsonSchema),a=e.actions.find((function(e){return e.name===t})),r=null===a||void 0===a?void 0:a.payloadSchemaDefinitionName;if(r)return c(n,r)}}},1304:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=n(529),i=n(3006),c=n(595),s=n(128),o=function(){var e=Object(r.b)(),t=Object(i.a)().t;return Object(a.useCallback)((function(n){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e({title:r.title,description:Object(s.jsx)("span",{style:{display:"block",maxHeight:"200px"},children:Object(s.jsx)(c.a,{error:n})}),dialogProps:r.dialogProps,mapCloseTo:"close",actions:[{type:"close",text:null!==(a=r.closeText)&&void 0!==a?a:t("Close"),buttonProps:r.closeButtonProps}]}).then((function(){})).catch((function(){}))}),[e,t])}},1317:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(9),r=function(e){var t=a.m();return e&&(t=t.required()),t.identifier()},i=function(e){return a.k().shape({moduleName:r(e),functionName:r(e),jsParametersBinding:a.m().jsScript()})}},1514:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(7),r=n(103),i=n(2418),c=n(128),s=["children"],o=function(e){var t=e.children,n=Object(r.a)(e,s);return Object(c.jsx)(i.a,Object(a.a)(Object(a.a)({variant:"h5"},n),{},{children:t}))}},1515:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),r=n(782),i=n(1946),c=n(128),s={LOG_COLOR:"#000000",LOG_ERROR_BACKGROUND:"#FF9999",LOG_ERROR_BORDER:"#FF6666",LOG_ERROR_COLOR:"#4d0000",LOG_WARN_COLOR:"#664100",LOG_WARN_BORDER:"#ffe666",LOG_WARN_BACKGROUND:"#fff099"},o={},u=function(e){var t=e.entries,n=Object(r.a)(),u=Object(a.useMemo)((function(){return t.map((function(e,t){var n;return{id:t.toString(),method:e.type,data:null!==(n=e.values)&&void 0!==n?n:[]}}))}),[t]);if(!u||0===u.length)return null;var l=n.palette.mode;return Object(c.jsx)(i.Console,{logs:u,variant:l,styles:"light"===l?s:o})}},1552:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(7),r=n(3014),i=n(128),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsx)("path",{d:"M19,14V4H6V3H5v18H4v1h3v-1H6v-7H19z M6,5h12v8H6V5z M14.6569214,6.5l0.7070312,0.7071533l-4.2426147,4.2426758   L9,9.3284912l0.7070923-0.7070923l1.4143066,1.4142456L14.6569214,6.5z"})}))}},1553:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(7),r=n(3014),i=n(128),c=function(e){return Object(i.jsx)(r.a,Object(a.a)(Object(a.a)({viewBox:"0 0 24 24"},e),{},{children:Object(i.jsxs)("g",{children:[Object(i.jsx)("path",{d:"M15,6V4H6V3H5v19h1v-8h5v2h8V6H15z M18,11h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v-2H8v2H6v-2h2V9H6V7h2V5h2v2h2V5h2v2h2v2h2V11z"}),Object(i.jsx)("rect",{x:"8",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"10",y:"9",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"7",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"12",y:"11",width:"2",height:"2"}),Object(i.jsx)("rect",{x:"14",y:"9",width:"2",height:"2"})]})}))}},1558:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return S}));var a=n(464),r=n(518),i=n(9),c=n(17),s=n(38),o=n(14),u=n(993),l=n(31),d=n(763),j=n(576),b=n(1260),p="contextTypeKey",m=i.k().shape({action:i.m().required(),reference:i.m(),payload:Object(u.a)(i.m().required(),i.i())}),v=i.k().shape({taskTypeName:i.m().required(),typeName:i.m().required(),payload:Object(u.a)(i.m().required(),i.i())}),f=i.k().shape({reference:i.m(),initialState:Object(u.a)(i.m().required(),i.i()).required(),payload:Object(u.a)(i.m().required(),i.i())}),h=i.h((function(e){return Object(j.E)(e)?m.required():Object(j.L)(e)?f.required():v.required()})),O=i.k().shape({id:i.m().required(),contextId:i.m().required(),contextTypeName:i.m().required(),contextReference:i.m(),itemKey:i.m(),typeName:i.m().required(),title:i.m(),data:Object(u.a)(i.m().required(),i.i()),labels:i.e().of(i.m().required()),dateCreated:i.m().iso8601Formatted(),dateUpdated:i.m().iso8601Formatted(),assignedTo:i.m(),assignedToRole:i.m(),status:i.m(),archived:i.f(),startDate:i.m().iso8601Formatted(),startBeforeDate:i.m().iso8601Formatted(),dueDate:i.m().iso8601Formatted(),importance:i.i().oneOf(Object.values(d.e).filter((function(e){return"number"===typeof e}))),focused:i.g().required()}),x=i.k().shape({name:i.m(),lastReached:i.m()}),g=i.k().shape({name:i.m(),value:i.m()}),y=i.k().shape({name:i.m(),value:i.j()}),k=i.k().shape({id:i.m(),name:i.m(),typeName:i.m().required(),reference:i.m().required(),state:Object(u.a)(i.m().required(),i.i()),dateCreated:i.m().iso8601Formatted(),dateModified:i.m().iso8601Formatted(),version:i.m(),contextTypeVersion:i.j(),milestones:i.e().of(x),tags:i.e().of(g),metrics:i.e().of(y)}),E=i.k().shape({type:i.m().required(),values:i.e()}),C=i.k().shape({event:h,context:k.required(),tasks:i.e().of(O.required()).defined(),reachedMilestones:i.e().of(i.m().required()),errors:i.e().of(i.m().required()),consoleEntries:i.e().of(E.required())}),S=i.k().shape({id:i.m(),name:i.m().required().identifier(),description:i.m(),contextTypeName:i.m(),contextType:i.i(),history:i.e().of(C.required()),initialState:i.i(),pendingEvents:i.e().of(h).test({message:"ReferenceUnique",test:function(e){var t=null===e||void 0===e?void 0:e.filter(j.E);if(!t||0===t.length)return!0;var n=Object(o.I)(t.map((function(e){return e.reference})).filter(s.isPresent));return 0===n.length?this.createError({path:"pendingEvents",message:c.a.t("ReferenceFieldIsNotDefined")}):1===n.length||this.createError({path:"pendingEvents",message:c.a.t("ReferenceUnique")})}})}).test({message:"PendingActionNamesValid",test:function(e){var t,n=e,a=null===(t=this.options.context)||void 0===t?void 0:t[p];if(!a)return!0;var r=a.actions.map((function(e){return e.name})),i=n.pendingEvents.filter(j.E).map((function(e){return e.action})).filter((function(e){return!r.includes(e)}));return!(i.length>0)||this.createError({path:"pendingEvents",message:c.a.t("InvalidActionNames",{actionNames:i.join(", ")})})}}).test({message:"PendingResponseNamesValid",test:function(e){var t,n=e,a=null===(t=this.options.context)||void 0===t?void 0:t[p];if(!a)return!0;var r=a.tasks.flatMap((function(e){return e.validResponses.map((function(t){return e.name+"."+t.name}))})),i=n.pendingEvents.filter(j.N).map((function(e){return e.taskTypeName+"."+e.typeName})).filter((function(e){return!r.includes(e)}));return!(i.length>0)||this.createError({path:"pendingEvents",message:c.a.t("InvalidResponseNames",{responseNames:i.join(", ")})})}}).test({message:function(){return c.a.t("InitialPendingEventMustBeAnInitialActionWithReference")},test:function(e){var t,n=e,a=null===(t=this.options.context)||void 0===t?void 0:t[p];if(!a)return!0;if(n.history&&n.history.length>0||0===n.pendingEvents.length)return!0;var r=n.pendingEvents[0];return!!(Object(j.E)(r)&&Object(s.isPresent)(r.reference)&&a.initialActions.includes(r.action))||this.createError({path:"pendingEvents[0]",message:c.a.t("InitialPendingEventMustBeAnInitialActionWithReference")})}}).test({message:function(){return c.a.t("SimulationStateMustProvideEitherHistoryOrPendingInitialAction")},test:function(e){var t=e;return!!(t.history.length>0||t.pendingEvents.length>0&&(Object(j.E)(t.pendingEvents[0])||Object(j.L)(t.pendingEvents[0])))||this.createError({path:"pendingEvents",message:c.a.t("SimulationStateMustProvideEitherHistoryOrPendingInitialAction")})}}).test({message:"EventPayloadsAreValid",test:function(e){var t,n=this,i=e;if(0===i.pendingEvents.length)return!0;var c=null===(t=this.options.context)||void 0===t?void 0:t[p];if(!c||!c.jsonSchema)return!0;var s=JSON.parse(c.jsonSchema),o=[];if(i.pendingEvents.forEach((function(e,t){var i=function(e,t){if(Object(j.E)(e)){var n=t.actions.find((function(t){return t.name===e.action}));return null===n||void 0===n?void 0:n.payloadSchemaDefinitionName}if(Object(j.N)(e)){var a=t.tasks.find((function(t){return t.name===e.taskTypeName})),r=(null===a||void 0===a?void 0:a.validResponses).find((function(t){return t.name===e.typeName}));return null===r||void 0===r?void 0:r.payloadSchemaDefinitionName}return}(e,c);if(i){var u=Object(b.a)(s,i);if(u){var d=Object(l.e)(u,e.payload);Object(l.c)(d)&&o.push.apply(o,Object(r.a)(d.errors.map((function(e){var r=Object.entries(e.params).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join("; ");return n.createError({path:"pendingEvents[".concat(t,"].payload").concat(e.instancePath),message:"".concat(e.message," (").concat(r,")")})}))))}}})),o.length>0){var u=this.createError({});return u.inner=o,u}return!0}}).atLeastOneRequired(["contextTypeName","contextType"])},1786:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m}));var a,r=n(485),i=n(25),c=n(134),s=n(135),o=n(484),u=n.n(o),l=n(763),d=n(38);!function(e){e[e.ProceedNormally=0]="ProceedNormally",e[e.ReexecuteFromInitialState=1]="ReexecuteFromInitialState",e[e.UnrecognizedExecutionStatus=1e3]="UnrecognizedExecutionStatus",e[e.UnexpectedNewContextType=1001]="UnexpectedNewContextType",e[e.MissingContextType=1002]="MissingContextType"}(a||(a={}));var j=function(){function e(t){Object(c.a)(this,e),this.contextType=t}return Object(s.a)(e,[{key:"configureSimulationRequest",value:function(e){var t=Object(i.a)(Object(i.a)({},e),{},{contextType:this.contextType});return delete t.contextTypeName,delete t.contextTypeClientVersion,t}},{key:"analyzeSimulationResponse",value:function(e){return e.status===l.f.Completed?a.ProceedNormally:e.status===l.f.NewerContextTypeFound?a.UnexpectedNewContextType:a.UnrecognizedExecutionStatus}}]),e}(),b=function(){function e(t,n){Object(c.a)(this,e),this.contextType=t,this.contextTypeName=n}return Object(s.a)(e,[{key:"configureSimulationRequest",value:function(e){var t=Object(i.a)(Object(i.a)({},e),{},{contextTypeName:this.contextTypeName,contextTypeClientVersion:this.contextType.version});return delete t.contextType,t}},{key:"analyzeSimulationResponse",value:function(e){if(e.status===l.f.Completed)return a.ProceedNormally;if(e.status===l.f.NewerContextTypeFound){if(!e.contextType)return a.MissingContextType;var t=e.contextType.version,n=this.contextType.version;return!Object(d.isPresent)(t)||Object(d.isPresent)(n)&&n>=t?a.UnexpectedNewContextType:(this.contextType=e.contextType,a.ReexecuteFromInitialState)}return a.UnrecognizedExecutionStatus}}]),e}(),p=function(e){return new j(e)},m=function(){var e=Object(r.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a){e.next=4;break}e.t0=a,e.next=7;break;case 4:return e.next=6,n(t);case 6:e.t0=e.sent;case 7:return r=e.t0,e.abrupt("return",new b(r,t));case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},1855:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),r=n(103),i=n(463),c=n(2341),s=n(128),o=["family","className"],u=function(e){switch(e){case"Outlined":return"material-icons-outlined";case"Rounded":return"material-icons-round";case"Sharp":return"material-icons-sharp";case"Two tone":return"material-icons-two-tone";default:return}},l=function(e){var t=e.family,n=e.className,l=Object(r.a)(e,o);return Object(s.jsx)(c.a,Object(a.a)({className:Object(i.default)(u(t),n)},l))}},1870:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(25),r=n(14),i=n(576),c=function(e,t,n){var c=Object(r.c)(e);delete c.id,!0!==(null===n||void 0===n?void 0:n.inlineContextType)||Object(i.J)(t)?(c.contextTypeName=t.name,delete c.contextType):!0===(null===n||void 0===n?void 0:n.inlineContextType)&&!c.contextType&&c.contextTypeName&&(c.contextType=t,delete c.contextTypeName),null!==n&&void 0!==n&&n.exportOnlyActions&&(c.pendingEvents=c.history.map((function(e){return e.event})),delete c.history);var s={$schema:"http://nimflow.com/schemas/simulation-state.schema.json"};return c.contextTypeName&&(s.contextTypeName=c.contextTypeName),Object(a.a)(Object(a.a)({},s),c)}},1871:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(464),r=n(485),i=n(484),c=n.n(i),s=n(5),o=n(763),u=n(540),l=n(999),d=function(){var e=Object(l.c)().isFeatureSupported,t=Object(u.c)(),n=t.contextTypes_FindOne,i=t.contextTypes_GetContextTypeInfo,d=Object(s.useCallback)(function(){var t=Object(r.a)(c.a.mark((function t(r){var s,u,d,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e(l.a.ContextTypeComponents)){t.next=14;break}return t.next=3,Promise.all([n({name:r}),i({name:r})]);case 3:if(s=t.sent,u=Object(a.a)(s,2),d=u[0],(j=u[1]).contextTypeClass===o.c.Standard){t.next=11;break}return t.abrupt("return",j);case 11:return t.abrupt("return",d);case 12:t.next=17;break;case 14:return t.next=16,n({name:r});case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,i,e]);return d}},1991:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ct}));var a=n(25),r=n(485),i=n(464),c=n(484),s=n.n(c),o=n(5),u=n(2986),l=n(2617),d=n(2999),j=n(2421),b=n(2438),p=n(2458),m=n(2417),v=n(3031),f=n(2418),h=n(742),O=n.n(h),x=n(769),g=n.n(x),y=n(1556),k=n.n(y),E=n(737),C=n.n(E),S=n(2274),N=n.n(S),T=n(3006),w=n(601),A=n(780),R=n(3019),q=n(3020),P=n(2439),D=n(2934),I=n(1180),F=n(2385),_=n(1269),B=n(1270),M=n(1271),z=n(739),K=n.n(z),H=n(1966),V=n(1856),L=n.n(V),U=n(2978),W=n(2545),G=n(2453),J=n(38),$=n(878),Y=n(576),Q=n(888),X=n(1855),Z=n(128),ee=Object(u.a)((function(e){return Object(l.a)({inline:{display:"inline"},actionHeading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},summaryTextContainer:{width:"100%",height:"100%",display:"flex",paddingTop:5,overflow:"auto",marginRight:10},taskDivider:{margin:"10px -16px"},responses:{marginTop:16,display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}})})),te=Object(F.a)({root:{backgroundColor:"transparent",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{border:"1px solid rgba(0, 0, 0, .125)",margin:"auto"}},expanded:{}})(_.a),ne=Object(F.a)({root:{marginBottom:-1,height:32,minHeight:32,papdding:0,"&$expanded":{borderBottom:"1px solid rgba(0, 0, 0, .125)",minHeight:56}},content:{margin:0,height:"100%",alignItems:"center","&$expanded":{margin:0}},expandIcon:{paddingRight:"16px"},expanded:{}})(B.a),ae=Object(F.a)((function(e){return{root:{padding:e.spacing(2),flexDirection:"column"}}}))(M.a),re=function(e){var t,n,a,r,i=e.taskType,c=e.task,s=e.onAddResponse,u=Object(T.a)().t,l=ee(),d=null!==(t=null===i||void 0===i?void 0:i.validResponses)&&void 0!==t?t:[];if(i){var j,b=null===(j=Object(Y.A)(i))||void 0===j?void 0:j.taskDetailsTemplate;b&&(r=Object(Q.a)(b,{task:c}))}var p=Object(o.useMemo)((function(){var e=Object(Y.y)(c.importance);return Object(J.isPresent)(e)?u("Importance.".concat(e)):""}),[u,c.importance]);return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(te,{children:[Object(Z.jsxs)(ne,{expandIcon:Object(Z.jsx)(K.a,{}),children:[Object(Z.jsx)("div",{className:l.summaryTextContainer,children:Object(Z.jsx)(f.a,{className:l.actionHeading,children:c.title})}),Object(Z.jsx)(H.a,{label:c.typeName,variant:"outlined",title:c.typeName,style:{maxWidth:150,textOverflow:"ellipsis"}})]}),Object(Z.jsxs)(ae,{children:[Object(Z.jsx)("div",{style:{width:"100%"},children:Object(Z.jsx)(U.a,{children:null!==(n=r)&&void 0!==n?n:""})}),Object(Z.jsx)(D.a,{className:l.taskDivider}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("AssignedTo_value",{value:c.assignedTo})}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("AssignedToRole_value",{value:c.assignedToRole})}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("StartDate_value",{value:c.startDate?Object(W.default)(Object(G.default)(c.startDate),u("DATETIME_FORMAT")):void 0})}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("StartBeforeDate_value",{value:c.startBeforeDate?Object(W.default)(Object(G.default)(c.startBeforeDate),u("DATETIME_FORMAT")):void 0})}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("DueDate_value",{value:c.dueDate?Object(W.default)(Object(G.default)(c.dueDate),u("DATETIME_FORMAT")):void 0})}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("Priority_value",{value:p})}),!!c.data&&Object.keys(c.data).length>0&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(D.a,{className:l.taskDivider}),Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:u("Data")}),Object(Z.jsx)("div",{style:{width:"100%"},children:Object(Z.jsx)($.b,{data:null!==(a=c.data)&&void 0!==a?a:{}})})]}),d.length>0&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(D.a,{className:l.taskDivider}),Object(Z.jsx)("div",{className:l.responses,children:d.map((function(e,t){var n,a=null===(n=Object(Y.A)(e))||void 0===n?void 0:n.icon;return Object(Z.jsx)(H.a,{icon:a?Object(Z.jsx)(X.a,{family:a.family,children:a.name}):Object(Z.jsx)(L.a,{}),label:Object(Y.x)(e),onClick:function(){return null===s||void 0===s?void 0:s(c,e)}},t)}))})]})]})]})})},ie=Object(o.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(4),n.e(5),n.e(38)]).then(n.bind(null,2975))})),ce=Object(u.a)((function(e){return Object(l.a)({root:{width:"100%",backgroundColor:e.palette.background.paper},item:{border:"2px solid ".concat(e.palette.common.task),borderRadius:2},divider:{height:5,background:"transparent"}})})),se=function(e){var t=e.stateIndex,n=ce(),a=(0,Object(I.b)().getState)(),r=a.contextType,c=a.simulation,s=Object(o.useState)(),u=Object(i.a)(s,2),l=u[0],d=u[1],j=Object(o.useCallback)((function(e,t){d({task:e,responseType:t})}),[d]),b=Object(o.useCallback)((function(){d(void 0)}),[d]),p=c.history[t];return p?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(R.a,{className:n.root,children:p.tasks.map((function(e,t){var a,i=null===(a=r.tasks)||void 0===a?void 0:a.find((function(t){return t.name===e.typeName}));return Object(Z.jsxs)(o.Fragment,{children:[Object(Z.jsx)(q.a,{className:n.item,children:Object(Z.jsx)(P.a,{primary:Object(Z.jsx)(re,{task:e,taskType:i,onAddResponse:j})})}),Object(Z.jsx)(D.a,{className:n.divider})]},t)}))}),!!l&&Object(Z.jsx)(o.Suspense,{fallback:null,children:Object(Z.jsx)(ie,{open:!!l,onClose:b,stateIndex:t,task:l.task,responseType:l.responseType})})]}):null},oe=n(1181),ue=n(1245),le=n(690),de=n(1870),je=n(13),be=n(1515),pe=n(2006),me=n(3),ve=n(162),fe=function(e){return"object"===typeof e&&null!==e&&"type"in e&&("string"===typeof e.type||void 0===e.type)&&"message"in e&&("string"===typeof e.type||void 0===e.type)},he=function(e){var t=[],n=[],a=[];return Object(ve.a)(["",e],{getNeighbors:function(e){var t=e[1];return fe(t)?[]:Array.isArray(t)?t.map((function(e,t){return[t,e]})):"object"===typeof t&&null!==t?Object.entries(t):[]},enterVertex:function(e){var a=Object(me.a)(e.currentVertex,2),r=a[0],i=a[1];if(n.push(r),fe(i)){var c=n.map((function(e){return"number"===typeof e?"[".concat(e,"]"):e.length>0?".".concat(e):""})).join("");if(i.types)for(var s=0,o=Object.entries(i.types);s<o.length;s++){var u=Object(me.a)(o[s],2)[1];"string"===typeof u&&t.push({dataPath:c,message:u})}else if(Object(J.isPresent)(i.message)){var l;t.push({dataPath:c,message:null!==(l=i.message)&&void 0!==l?l:""})}}},leaveVertex:function(){n.pop()},allowTraversal:function(e){var t=Object(me.a)(e.nextVertex,2)[1];return!a.includes(t)&&(a.push(t),!0)}}),t},Oe=n(1304),xe=n(19),ge=n(8),ye=n.n(ge),ke=n(596),Ee=n.n(ke),Ce=n(1265),Se=n.n(Ce),Ne=n(2273),Te=n.n(Ne),we=n(637),Ae=n(7),Re=n(2936),qe=n(2271),Pe=n.n(qe),De=n(2272),Ie=n.n(De),Fe=n(1847),_e=n.n(Fe),Be=n(1974),Me=n.n(Be),ze=n(575),Ke=n.n(ze),He=n(3029),Ve=n(643),Le=n.n(Ve),Ue=n(14),We=n(529),Ge=Object(o.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(4),n.e(5),n.e(36)]).then(n.bind(null,2976))})),Je={position:"relative",fontSize:12,left:-10},$e=Object(u.a)((function(e){return Object(l.a)({root:{width:"100%",backgroundColor:e.palette.background.paper},item:{border:"2px solid ".concat(e.palette.common.action),borderRadius:2,paddingRight:96},divider:{height:5,background:"transparent"},inline:{display:"inline"},completed:Object(Ae.a)(Object(Ae.a)({},Je),{},{color:e.palette.success.main}),failed:Object(Ae.a)(Object(Ae.a)({},Je),{},{color:e.palette.error.main}),actionHeading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},summaryTextContainer:{width:"100%",height:"100%",display:"flex",paddingTop:5,overflow:"auto",marginRight:10}})})),Ye=Object(F.a)({root:{minWidth:40}})(Re.a),Qe=Object(F.a)({root:{backgroundColor:"transparent",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{border:"1px solid rgba(0, 0, 0, .125)",margin:"auto"}},expanded:{}})(_.a),Xe=Object(F.a)({root:{marginBottom:-1,height:32,minHeight:32,papdding:0,"&$expanded":{borderBottom:"1px solid rgba(0, 0, 0, .125)",minHeight:56}},content:{margin:0,height:"100%",alignItems:"center",cursor:"initial","&$expanded":{margin:0}},expandIcon:{cursor:"pointer",paddingRight:"16px"},expanded:{}})(B.a),Ze=Object(F.a)((function(e){return{root:{padding:e.spacing(2),flexDirection:"column"}}}))(M.a),et=function(e){var t=e.event,n=$e();return"pending"===t.status?Object(Y.E)(t.event)||Object(Y.L)(t.event)?Object(Z.jsx)(Pe.a,{}):Object(Z.jsx)(L.a,{}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Y.E)(t.event)||Object(Y.L)(t.event)?Object(Z.jsx)(Ie.a,{}):Object(Z.jsx)(L.a,{}),"completed"===t.status?Object(Z.jsx)(Me.a,{className:n.completed}):Object(Z.jsx)(_e.a,{className:n.failed})]})},tt=function(e){var t=e.event,n=e.onClick,a=$e(),r=Object(T.a)().t;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{className:a.summaryTextContainer,onClick:n,children:Object(Z.jsx)(f.a,{className:a.actionHeading,children:Object(Y.E)(t.event)?t.event.action:Object(Y.N)(t.event)?t.event.typeName:Object(Y.L)(t.event)?r("InitialState"):""})}),Object(Y.N)(t.event)&&Object(Z.jsx)(H.a,{label:t.event.taskTypeName,variant:"outlined",title:t.event.taskTypeName,style:{maxWidth:150,textOverflow:"ellipsis"}})]})},nt=function(e){var t=e.existingEvents,n=e.value,a=e.onChange,r=$e(),i=Object(T.a)().t,c=Object(We.b)(),s=Object(o.useState)(-1),u=Object(me.a)(s,2),l=u[0],d=u[1],j=Object(o.useState)(),p=Object(me.a)(j,2),v=p[0],h=p[1],O=Object(I.b)(),x=O.deleteEvent,g=O.updateEventData,y=Object(o.useCallback)((function(e,t){null===a||void 0===a||a(t)}),[a]),k=Object(o.useCallback)((function(e,t){null===a||void 0===a||a(t),e.stopPropagation()}),[a]),E=Object(o.useCallback)((function(e,n){var a=t[n].event;h({index:n,event:Object(Ue.c)(a)})}),[t]),C=Object(o.useCallback)((function(e,n){var a=t[n].event,r=Object(Y.E)(a)?a.action:Object(Y.N)(a)?a.typeName:"";c({description:Object(Z.jsx)(U.a,{children:i("ConfirmDeleteSimulationEvent",{name:r})}),mapCloseTo:"cancel",actions:[{type:"deleteAll",text:i("DeleteAll")},{type:"deleteCurrent",text:i("DeleteOnlyCurrent")},{type:"cancel",text:i("Cancel")}]}).then((function(e){x(n,{deleteFollowingEvents:"deleteAll"===e})}))}),[c,i,t,x]),S=Object(o.useCallback)((function(e,t){d(t?e:-1)}),[]),N=Object(o.useCallback)((function(){h(void 0)}),[h]),w=Object(o.useCallback)((function(e){v&&g(v.index,e)}),[g,v]);return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(R.a,{className:r.root,children:t.map((function(e,t){var a;return Object(Z.jsxs)(o.Fragment,{children:[Object(Z.jsxs)(q.a,{selected:n===t,onClick:function(e){return y(e,t)},className:r.item,children:[Object(Z.jsx)(Ye,{children:Object(Z.jsx)(et,{event:e})}),Object(Z.jsx)(P.a,{primary:Object(Z.jsxs)(Qe,{expanded:l===t,onChange:function(e,n){return S(t,n)},children:[Object(Z.jsx)(Xe,{expandIcon:Object(Z.jsx)(K.a,{}),children:Object(Z.jsx)(tt,{event:e,onClick:function(e){return k(e,t)}})}),Object(Z.jsxs)(Ze,{children:[Object(Z.jsx)(f.a,{variant:"body1",component:"div",children:"Payload"}),Object(Z.jsx)("div",{style:{width:"100%"},children:Object(Z.jsx)($.b,{data:null!==(a=e.event.payload)&&void 0!==a?a:{}})})]})]})}),Object(Z.jsxs)(He.a,{children:[Object(Z.jsx)(b.a,{title:i("Edit"),children:Object(Z.jsx)("span",{children:Object(Z.jsx)(m.a,{"aria-label":"edit",disabled:Object(Y.L)(e.event),onClick:function(e){return E(e,t)},size:"large",children:Object(Z.jsx)(Le.a,{})})})}),Object(Z.jsx)(b.a,{title:i("Delete"),children:Object(Z.jsx)(m.a,{edge:"end","aria-label":"delete",onClick:function(e){return C(e,t)},size:"large",children:Object(Z.jsx)(Ke.a,{})})})]})]}),Object(Z.jsx)(D.a,{className:r.divider})]},t)}))}),!!v&&Object(Z.jsx)(o.Suspense,{fallback:null,children:Object(Z.jsx)(Ge,{event:v.event,open:!!v,onClose:N,onChange:w})})]})},at=Object(o.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(4),n.e(5),n.e(37)]).then(n.bind(null,2994))})),rt=function(e){var t=e.existingEvents,n=e.currentEventIndex,a=e.onCurrentEventIndexChange,r=Object(T.a)().t,i=Object(we.b)().enqueueSnackbar,c=Object(I.b)(),s=c.getState,u=c.executeNextPendingEvent,l=c.executeAllPendingEvents,d=c.updateSimulation,j=s(),p=j.simulation,v=j.contextType,f=Object(o.useState)(!1),h=Object(me.a)(f,2),O=h[0],x=h[1],g=Object(o.useCallback)((function(){x(!0)}),[x]),y=Object(o.useCallback)((function(){u().catch((function(e){i(r("ErrorSimulatingEvent",{error:e.toString()}),{variant:"error"})}))}),[u,i,r]),k=Object(o.useCallback)((function(){l().catch((function(e){i(r("ErrorSimulatingEvent",{error:e.toString()}),{variant:"error"})}))}),[l,i,r]),E=Object(o.useCallback)(function(){var e=Object(xe.a)(ye.a.mark((function e(t){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d((function(e){e.pendingEvents.push(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d]),C=Object(o.useCallback)((function(){x(!1)}),[x]);return Object(Z.jsxs)(oe.a,{children:[Object(Z.jsx)(ue.a,{title:r("Events"),actions:Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(b.a,{title:r("NewAction"),children:Object(Z.jsx)(m.a,{onClick:g,size:"large",children:Object(Z.jsx)(Ee.a,{})})}),Object(Z.jsx)(b.a,{title:r("DispatchNextPendingEvent"),children:Object(Z.jsx)("span",{children:Object(Z.jsx)(m.a,{onClick:y,disabled:0===p.pendingEvents.length,size:"large",children:Object(Z.jsx)(Se.a,{})})})}),Object(Z.jsx)(b.a,{title:r("DispatchAllPendingEvents"),children:Object(Z.jsx)("span",{children:Object(Z.jsx)(m.a,{onClick:k,disabled:0===p.pendingEvents.length,edge:"end",size:"large",children:Object(Z.jsx)(Te.a,{})})})})]})}),Object(Z.jsx)(nt,{existingEvents:t,value:n,onChange:a}),O&&Object(Z.jsx)(o.Suspense,{fallback:null,children:Object(Z.jsx)(at,{isInitialAction:0===p.pendingEvents.length&&0===p.history.length,contextType:v,open:!!O,onClose:C,onChange:E})})]})},it=n(1553),ct=n(1552),st=function(e){var t,n,a,r,i=e.simulation,c=e.contextType,s=e.currentEventIndex,o=Object(T.a)().t,u=i.history[s],l=null!==(t=null!==(n=null===u||void 0===u?void 0:u.context.state)&&void 0!==n?n:null===(a=Object(Ue.q)(i.history))||void 0===a?void 0:a.context.state)&&void 0!==t?t:{},d=null!==(r=null===u||void 0===u?void 0:u.reachedMilestones)&&void 0!==r?r:[],j=Object(Ue.l)((function(e,t){return e.name===t}),c.milestones,d).some((function(e){return e.final}));return Object(Z.jsxs)(oe.a,{children:[Object(Z.jsx)(ue.a,{title:o("CurrentState"),actions:d.length>0&&Object(Z.jsx)(b.a,{title:d.join(", "),children:Object(Z.jsx)(m.a,{disableRipple:!0,size:"large",children:j?Object(Z.jsx)(it.a,{}):Object(Z.jsx)(ct.a,{})})})}),l&&Object(Z.jsx)($.b,{data:l})]})},ot=n(2549),ut=n(2922),lt=n(3018),dt=n(3017),jt=n(2928),bt=n(9),pt=n(132),mt=n(1558),vt=n(1577),ft=Object(u.a)((function(e){return Object(l.a)({paper:{backgroundColor:e.palette.background.default},content:{minWidth:"500px"}})})),ht=function(e){var t=e.open,n=e.defaultValue,a=e.onChange,c=e.onClose,u=Object(T.a)().t,l=ft(),d=Object(vt.b)().simulations_GetInfos,b=Object(o.useState)(),p=Object(i.a)(b,2),m=p[0],v=p[1],f=Object(o.useState)(n),h=Object(i.a)(f,2),O=h[0],x=h[1],g=Object(o.useMemo)((function(){var e;return null===(e=mt.a.fields)||void 0===e?void 0:e.name.concat(bt.m().required().test({message:function(e){var t=e.value;return u("ContextSimulationNameAlreadyExists",{name:t})},test:function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return n=e.sent,e.abrupt("return",0===n.length||n.every((function(e){return e.name!==t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}),[d,u]),y=Object(o.useCallback)(Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pt.b)(g,O);case 2:if(!((t=e.sent).length>0)){e.next=6;break}return v(t[0].message),e.abrupt("return");case 6:O&&(a(O),c());case 7:case"end":return e.stop()}}),e)}))),[O,a,c,g]),k=Object(o.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"backdropClick"!==n&&(null===c||void 0===c||c());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c]);return Object(Z.jsxs)(ut.a,{open:t,onClose:k,fullWidth:!0,maxWidth:"md",classes:{paper:l.paper},children:[Object(Z.jsx)(jt.a,{children:u("SaveAs")}),Object(Z.jsx)(dt.a,{className:l.content,children:Object(Z.jsx)(j.a,{type:"text",defaultValue:O,onChange:function(e){return x(e.target.value)},label:u("NewName"),fullWidth:!0,required:!0,variant:"standard",error:!!m,helperText:m})}),Object(Z.jsxs)(lt.a,{children:[Object(Z.jsx)(ot.a,{onClick:y,color:"primary",children:u("Accept")}),Object(Z.jsx)(ot.a,{onClick:c,color:"primary",children:u("Cancel")})]})]})},Ot=n(595),xt=Object(u.a)((function(e){return Object(l.a)({toolbar:{minHeight:"48px",paddingLeft:0},fileInput:{opacity:0,position:"absolute",top:0,left:0,right:0,bottom:0},grow:{flexGrow:1},toggleButton:{border:"none",borderRadius:"50%"},console:{maxHeight:"200px",overflow:"auto"},saveAsEllipsis:{position:"absolute",left:17,bottom:4,fontWeight:"bold"}})})),gt=function(){var e=Object(w.h)(),t=Object(T.a)().t,n=Object(o.useCallback)((function(){e(-1)}),[e]);return Object(Z.jsx)(b.a,{title:t("GoBack"),children:Object(Z.jsx)(m.a,{onClick:n,size:"large",children:Object(Z.jsx)(O.a,{})})})},yt=function(e){var t=e.simulation,n=e.contextType,a=Object(T.a)().t,r=Object(o.useCallback)((function(){Object(le.a)(Object(de.a)(t,n),"".concat(n.name,".simulation-state.json"))}),[t,n]);return Object(Z.jsx)(b.a,{title:a("DownloadSimulation"),children:Object(Z.jsx)(m.a,{onClick:r,size:"large",children:Object(Z.jsx)(C.a,{})})})},kt=function(e){var t=e.simulation,n=e.onSaveChanges,a=Object(T.a)().t,c=Object(Oe.a)(),u=Object(o.useState)(!0),l=Object(i.a)(u,2),d=l[0],j=l[1],p=Object(pe.a)(),v=p.canUpdateSimulations,f=p.canInsertSimulations,h=t.id?v():f(),O=Object(A.a)(Object(o.useCallback)(Object(r.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return j(!1),e.prev=3,e.next=6,n(t);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r=[{message:e.t0.toString()}];case 12:return e.prev=12,j(!0),e.finish(12);case 15:if(!(r&&r.length>0)){e.next=18;break}return e.next=18,c(r,{title:a("ErrorSavingContextSimulation")});case 18:case"end":return e.stop()}}),e,null,[[3,9,12,15]])}))),[n,c,a,t]));return Object(Z.jsx)(b.a,{title:a("SaveChanges"),children:Object(Z.jsx)(m.a,{onClick:O,disabled:!h||!d,size:"large",children:Object(Z.jsx)(g.a,{})})})},Et=function(e){var t=e.name,n=e.canSave,a=e.onSaveAs,c=Object(T.a)().t,u=xt(),l=Object(We.b)(),d=Object(I.b)().validate,j=Object(pe.a)().canInsertSimulations,p=Object(o.useState)(!1),v=Object(i.a)(p,2),h=v[0],O=v[1],x=Object(o.useCallback)(Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(t=e.sent,!(Object.keys(t).length>0)){e.next=8;break}return n=he(t),e.next=7,l({title:c("ErrorSavingContextSimulation"),description:Object(Z.jsx)(Ot.a,{error:n}),mapCloseTo:"ok",actions:[{type:"ok",text:c("Ok")}]});case 7:return e.abrupt("return");case 8:O(!0);case 9:case"end":return e.stop()}}),e)}))),[l,c,d]),y=Object(o.useCallback)((function(e){null===a||void 0===a||a(e)}),[a]),k=Object(o.useCallback)((function(){O(!1)}),[]);return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(b.a,{title:c("SaveAs"),children:Object(Z.jsxs)(m.a,{onClick:x,disabled:!n||!j(),size:"large",children:[Object(Z.jsx)(g.a,{}),Object(Z.jsx)(f.a,{className:u.saveAsEllipsis,children:"..."})]})}),h&&Object(Z.jsx)(ht,{open:h,defaultValue:t,onChange:y,onClose:k})]})},Ct=function(e){var t,n,c,u,l,h=e.onSaveChanges,O=e.onSaveAs,x=e.isPersistent,g=void 0!==x&&x,y=xt(),E=Object(T.a)().t,C=Object(I.b)(),S=C.getState,w=C.resetSimulation,A=C.updateSimulation,R=C.validate,q=C.errors,P=C.options,D=C.setOptions,F=S(),_=F.simulation,B=F.contextType,M=Object(o.useMemo)((function(){return _?function(e){var t=e.history.map((function(e){return{event:e.event,status:e.errors&&0!==e.errors.length?"failed":"completed"}})),n=e.pendingEvents.map((function(e){return{event:e,status:"pending"}}));return[].concat(Object(je.a)(t),Object(je.a)(n))}(_):[]}),[_]),z=Object(o.useState)((function(){var e=M.findIndex((function(e){return"pending"===e.status}));return-1===e&&(e=M.length),Math.max(0,e-1)})),K=Object(i.a)(z,2),H=K[0],V=K[1],L=Object(o.useCallback)((function(){D(Object(a.a)(Object(a.a)({},P),{},{shouldExecuteAllPendingEvents:!P.shouldExecuteAllPendingEvents}))}),[P,D]),U=Object(o.useCallback)((function(e){A((function(t){t.name=e.target.value}))}),[A]),W=Object(o.useCallback)((function(e){A((function(t){t.description=e.target.value}))}),[A]),G=Object(o.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:if(a=e.sent,!(Object.keys(a).length>0)){e.next=5;break}return e.abrupt("return",he(a));case 5:return e.abrupt("return",null!==(n=null===h||void 0===h?void 0:h(t))&&void 0!==n?n:[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,R]),J=Object(o.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:if(n=e.sent,!(Object.keys(n).length>0)){e.next=5;break}return e.abrupt("return",he(n));case 5:null===O||void 0===O||O(_,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,_,R]),$=_.history[H];return Object(Z.jsxs)(d.a,{container:!0,spacing:3,children:[Object(Z.jsx)(d.a,{item:!0,xs:12,children:Object(Z.jsxs)(p.a,{className:y.toolbar,children:[Object(Z.jsx)(gt,{}),Object(Z.jsx)(kt,{simulation:_,onSaveChanges:G}),g&&Object(Z.jsx)(Et,{name:null!==(t=_.name)&&void 0!==t?t:"",canSave:!0,onSaveAs:J}),Object(Z.jsx)(yt,{simulation:_,contextType:B}),Object(Z.jsx)(b.a,{title:E("ResetSimulationHistory"),children:Object(Z.jsx)("span",{children:Object(Z.jsx)(m.a,{onClick:w,disabled:0===_.history.length,size:"large",children:Object(Z.jsx)(k.a,{})})})}),Object(Z.jsx)(b.a,{title:E("ExecuteAllPendingEventsAfterEveryUpdate"),children:Object(Z.jsx)(v.a,{value:"executeAllPendingEventsAfterEveryUpdate",selected:null===P||void 0===P?void 0:P.shouldExecuteAllPendingEvents,onClick:L,classes:{root:y.toggleButton},children:Object(Z.jsx)(N.a,{})})}),Object(Z.jsx)("div",{className:y.grow}),Object(Z.jsx)(f.a,{variant:"body1",noWrap:!0,children:E("SimulationContextTypeHeader",{name:B.name})})]})}),Object(Z.jsx)(d.a,{item:!0,xs:6,children:Object(Z.jsx)(j.a,{label:E("Name"),value:null!==(n=_.name)&&void 0!==n?n:"",onChange:U,fullWidth:!0,variant:"standard",error:!!q.name,helperText:null===(c=q.name)||void 0===c?void 0:c.message})}),Object(Z.jsx)(d.a,{item:!0,xs:6}),Object(Z.jsx)(d.a,{item:!0,xs:12,children:Object(Z.jsx)(j.a,{label:E("Description"),value:null!==(u=_.description)&&void 0!==u?u:"",onChange:W,multiline:!0,fullWidth:!0,maxRows:4,variant:"standard",error:!!q.description,helperText:null===(l=q.description)||void 0===l?void 0:l.message})}),Object(Z.jsx)(d.a,{item:!0,xs:4,children:Object(Z.jsx)(rt,{existingEvents:M,currentEventIndex:H,onCurrentEventIndexChange:V})}),Object(Z.jsx)(d.a,{item:!0,xs:4,children:Object(Z.jsxs)(d.a,{container:!0,spacing:3,children:[Object(Z.jsx)(d.a,{item:!0,xs:12,children:Object(Z.jsx)(st,{simulation:_,contextType:B,currentEventIndex:H})}),(null===$||void 0===$?void 0:$.errors)&&$.errors.length>0&&Object(Z.jsx)(d.a,{item:!0,xs:12,children:Object(Z.jsxs)(oe.a,{children:[Object(Z.jsx)(ue.a,{title:E("Errors")}),Object(Z.jsx)("div",{style:{overflow:"auto",maxHeight:"50vh"},children:$.errors.map((function(e,t){return Object(Z.jsx)("div",{children:e},t)}))})]})})]})}),Object(Z.jsx)(d.a,{item:!0,xs:4,children:Object(Z.jsxs)(oe.a,{children:[Object(Z.jsx)(ue.a,{title:E("Tasks")}),$&&Object(Z.jsx)(se,{stateIndex:H})]})}),!(null===$||void 0===$||!$.consoleEntries)&&$.consoleEntries.length>0&&Object(Z.jsx)(d.a,{item:!0,xs:12,children:Object(Z.jsxs)(oe.a,{children:[Object(Z.jsx)(ue.a,{title:E("Console")}),Object(Z.jsx)("div",{className:y.console,children:Object(Z.jsx)(be.a,{entries:$.consoleEntries})})]})})]})}},3007:function(e,t,n){"use strict";n.r(t),n.d(t,"ContextSimulationImporter",(function(){return I}));var a=n(485),r=n(464),i=n(484),c=n.n(i),s=n(5),o=n(2549),u=n(601),l=n(637),d=n(3006),j=n(876),b=n.n(j),p=n(38),m=n(1180),v=n(1991),f=n(771),h=n(690),O=n(130),x=n(576),g=n(1786),y=n(17),k=n(63),E=n(1558),C=n(31),S=n(132),N=n(924),T=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var a,r,i,s,o,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(C.j)(t),!Object(C.c)(s)){e.next=3;break}return e.abrupt("return",Object(k.a)(Object(k.c)(s.errors)));case 3:if(delete(o=t).$schema,!(u=o.contextType)){e.next=10;break}l=Object(g.b)(u),e.next=18;break;case 10:return e.next=12,n(o.contextTypeName);case 12:if(u=e.sent){e.next=15;break}return e.abrupt("return",Object(k.a)([y.a.t("InvalidContextTypeName",{contextTypeName:t.contextTypeName})]));case 15:return e.next=17,Object(g.c)(o.contextTypeName,n,u);case 17:l=e.sent;case 18:return o.history=null!==(a=o.history)&&void 0!==a?a:[],o.pendingEvents=null!==(r=o.pendingEvents)&&void 0!==r?r:[],e.next=22,Object(S.b)(E.a,o,{context:(i={},Object(O.a)(i,E.b,u),Object(O.a)(i,N.l,Object(x.J)(u)?void 0:u.jsCommon),Object(O.a)(i,N.m,u.jsonSchema),i)});case 22:if(!((d=e.sent).length>0)){e.next=25;break}return e.abrupt("return",Object(k.a)(d));case 25:return e.abrupt("return",Object(k.b)([o,l]));case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(1304),A=n(1577),R=n(763),q=n(529),P=n(1871),D=n(128),I=function(e){var t=Object(d.a)().t,n=Object(u.h)(),i=Object(u.i)().blobUrl,j=Object(l.b)().enqueueSnackbar,O=Object(w.a)(),x=Object(P.a)(),g=Object(A.b)(),y=g.simulations_InsertOne,k=g.simulations_FindIdFromName,E=g.simulations_Replace,C=Object(s.useState)(),S=Object(r.a)(C,2),N=S[0],I=S[1],F=Object(s.useState)(),_=Object(r.a)(F,2),B=_[0],M=_[1],z=Object(q.c)();Object(s.useEffect)((function(){if(i){var e=atob(i);e&&b.a.get(e,{responseType:"blob"}).then(function(){var e=Object(a.a)(c.a.mark((function e(r){var i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)(r.data);case 2:return i=e.sent,e.next=5,T(i,function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if("success"!==(s=e.sent).type){e.next=12;break}return I(s.result[0]),M(s.result[1]),e.abrupt("return");case 12:j(t("FileIsNotAValidContextSimulation"),{variant:"error",action:Object(D.jsx)(o.a,{onClick:function(){return O(s.errors,{title:t("ImportErrors")})},children:t("ShowDetails")})}),n("../..");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){n("../..")})).finally((function(){URL.revokeObjectURL(e)}))}}),[i,j,x,n,O,t]);var K=Object(s.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(a){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(a.name);case 3:if(r=e.sent,!Object(p.isPresent)(r)){e.next=15;break}return e.next=7,z({description:t("ConfirmOverwriteContextSimulation",{name:a.name})});case 7:if(e.sent){e.next=10;break}return e.abrupt("return",[]);case 10:return a.id=r,e.next=13,E(a);case 13:e.next=18;break;case 15:return e.next=17,y(a);case 17:r=e.sent;case 18:n("../../edit/".concat(r),{replace:!0}),e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(0),i=e.t0.toString(),R.a.isApiException(e.t0)&&(i=e.t0.message,"status"in e.t0&&(i+=" (status: ".concat(e.t0.status,")"))),e.abrupt("return",[{message:i}]);case 26:return e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),[z,n,k,y,E,t]);return N&&B?Object(D.jsx)(m.a,{contextTypeProvider:B,simulation:N,children:Object(D.jsx)(v.a,{onSaveChanges:K})}):Object(D.jsx)(f.b,{})};t.default=I},690:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=JSON.stringify(e,void 0,4);r(n,t,"application/json")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0,a=new Blob([e]);i(a,t,n)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",n=arguments.length>2?arguments[2]:void 0;if("msSaveBlob"in navigator)navigator.msSaveBlob(e,t);else{var a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,n&&(r.type=n),document.body.appendChild(r);try{r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}finally{document.body.removeChild(r),setTimeout((function(){return URL.revokeObjectURL(r.href)}),0)}}},c=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){var a,r=null===(a=e.target)||void 0===a?void 0:a.result;if("string"===typeof r){var i=JSON.parse(r);t(i)}n("Invalid data type in blob ".concat(typeof r))},a.onerror=function(e){n("Error reading blob")},a.readAsText(e)}))}},878:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(7),r=(n(5),n(1247)),i=n(782),c=n(128),s={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},o=function(e){var t=Object(i.a)(),n=Object(a.a)({theme:s,hideRoot:!0,invertTheme:"light"===t.palette.mode},e);return Object(c.jsx)(r.a,Object(a.a)({},n))};t.b=o},888:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(7),r=n(17),i=n(1237),c=n.n(i),s=n(1524);c.a.registerHelper("translate",(function(e,t){var n={ns:s.b};return"object"===typeof t&&"hash"in t&&(n=Object(a.a)(Object(a.a)({},n),t.hash)),r.a.t(e,n)}));var o=function(e,t,n,a){var r=function(e,t){return c.a.compile(e,t)}(e,n);return r(t,a)}},924:function(e,t,n){"use strict";n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return y})),n.d(t,"k",(function(){return S})),n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return w})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return q})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return I})),n.d(t,"h",(function(){return z})),n.d(t,"d",(function(){return V})),n.d(t,"c",(function(){return L})),n.d(t,"e",(function(){return U}));var a=n(49),r=n(518),i=n(130),c=n(25),s=n(134),o=n(135),u=n(71),l=n(35),d=n(137),j=n(138),b=n(9),p=n(17),m=n(14),v=n(993),f=n(162),h=n(1260),O=n(576),x=n(1317),g="jsCommon",y="jsonSchema",k="uiSchemaJsonSchema",E=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e,a,r){var i;return Object(s.a)(this,n),(i=t.call(this)).definitionNameKey=e,i.contextKey=a,i.jsonSchemaKey=r,i}return Object(o.a)(n,[{key:"_validate",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=a,o=null===(t=s.context)||void 0===t?void 0:t[this.jsonSchemaKey],d=e[this.definitionNameKey];if(o&&"string"===typeof d){var j;"function"===typeof o&&(o=o()),"string"===typeof o&&(o=JSON.parse(o));var b=Object(h.a)(o,d),p=Object(c.a)(Object(c.a)({},null===(j=s)||void 0===j?void 0:j.context),{},Object(i.a)({},this.contextKey,b));s=Object(c.a)(Object(c.a)({},s),{},{context:p})}return Object(u.a)(Object(l.a)(n.prototype),"_validate",this).call(this,e,s,r)}},{key:"clone",value:function(e){var t=Object(u.a)(Object(l.a)(n.prototype),"clone",this).call(this,e);return t.definitionNameKey=this.definitionNameKey,t.contextKey=this.contextKey,t.jsonSchemaKey=this.jsonSchemaKey,t}}]),n}(b.b),C=function(e,t,n){return new E(e,t,n)},S=b.k().shape({jsValidator:b.m().required().jsExpression({paramNames:["state","payload","task"],scriptContextKey:g}),errorMessageTemplate:b.m(),jsMessageTemplate:b.m()}),N=b.k().shape({uiSchema:b.m().uiSchema(k)}),T=Object(v.a)(b.m().required().identifier(),b.m().required().jsExpression({paramNames:["state","payload"],scriptContextKey:g})),w=C("payloadSchemaDefinitionName",k,y).shape({name:b.m().required().identifier().min(3).max(50),payloadSchemaDefinitionName:b.m().jsonSchemaDefinitionName(y),validators:b.e().of(S.required()),jsSetters:T,settings:N,excludePayloadKeysFromEventStorage:b.m()}),A=(b.k().shape({name:b.m().required(),family:b.m()}),b.k().shape({uiSchema:b.m().uiSchema(k),uiSchemaFn:Object(x.a)(!1),commandText:b.m(),actionInProgressText:b.m(),actionCompletedText:b.m(),icon:b.i(),contextDataLocation:b.m().oneOf(Object(r.a)(O.j))})),R=Object(v.a)(b.m().required().identifier(),b.m().required().jsExpression({paramNames:["state","payload","task","responseData"],scriptContextKey:g})).required(),q=C("payloadSchemaDefinitionName",k,y).shape({name:b.m().required().identifier().min(3),payloadSchemaDefinitionName:b.m().jsonSchemaDefinitionName(y),validators:b.e().of(S.required()),jsSetters:R,settings:A,jsInitialPayloadBuilder:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsContextDataBuilder:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g})}),P=b.k(),D=Object(v.a)(b.m().required().identifier(),b.m().required().jsExpression({paramNames:["state"],scriptContextKey:g})).required(),I=b.k().shape({name:b.m().required().identifier().min(3),titleTemplate:b.m().required(),jsCondition:b.m().jsExpression({paramNames:["state"],scriptContextKey:g}),jsTaskDataSetters:D,jsAssignedTo:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsAssignedToRole:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsStartDate:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsStartBeforeDate:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsDueDate:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),jsImportance:b.m().jsExpression({paramNames:["state","task"],scriptContextKey:g}),validResponses:b.e().of(q.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return p.a.t("DuplicateResponseTypeNames",{names:t.join(", ")})})),excludeTaskDataKeysFromEventsStorage:b.m(),settings:P}),F=b.k().shape({name:b.m().required(),final:b.g()}),_=b.k().shape({name:b.m().required()}),B=b.k().shape({name:b.m().required()}),M=b.k().shape({uiSchemaCommon:b.m().uiSchema("uiSchemaCommon")}),z=b.k().shape({key:b.m().required().identifier(),jsExpression:b.m().required().jsExpression({paramNames:["state"],scriptContextKey:g}),dependencies:b.e().of(b.m())}),K=b.k().shape({module:b.m().required(),name:b.m().required(),settings:b.k(),refId:b.m().required().identifier()}),H=b.k().shape({version:b.j(),name:b.m().required().identifier().min(3).max(50),description:b.m(),initialActions:b.e().of(b.m().required()).defined().test({message:function(){return p.a.t("InvalidInitialActions")},test:function(e){var t,n=this,r=e,i=null===(t=this.parent)||void 0===t?void 0:t.actions;if(Array.isArray(i)){var c,s=Object(a.a)(r);try{var o=function(){var e=c.value;if(!i.find((function(t){return t.name===e})))return{v:n.createError({path:n.path,message:p.a.t("InvalidActionName",{actionName:r})})}};for(s.s();!(c=s.n()).done;){var u=o();if("object"===typeof u)return u.v}}catch(l){s.e(l)}finally{s.f()}}return!0}}),milestones:b.e().of(F.required()),tags:b.e().of(_),metrics:b.e().of(B),settings:M,excludeNewContextStateKeysFromEventsStorage:b.m(),extensionName:b.m()}),V=H.shape({extensionName:b.m().required(),components:b.e(),actions:b.e(),jsInitializers:b.i(),selectors:b.e(),tasks:b.e(),initialActions:b.e(),jsCommon:b.i(),jsonSchema:b.i()}),L=H.shape({components:b.e().of(K.required()).defined().uniqueBy((function(e){return e.refId}),(function(e){var t=e.duplicates;return p.a.t("DuplicateComponentNames",{names:t.join(", ")})})),actions:b.e(),jsInitializers:b.i(),selectors:b.e(),tasks:b.e(),initialActions:b.e(),jsCommon:b.i(),jsonSchema:b.i()}),U=H.shape({actions:b.e().of(w.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return p.a.t("DuplicateActionNames",{names:t.join(", ")})})),jsInitializers:Object(v.a)(b.m().required().identifier(),b.m().required()),selectors:b.e().of(z).test({message:function(){return p.a.t("SelectorCircularDependencyFound")},test:function(e){var t=e;if(!t||0===t.length)return!0;for(var n=Object(m.r)((function(e){return Object(m.I)(e.flatMap((function(e){var t;return null!==(t=e.dependencies)&&void 0!==t?t:[]})))}),Object(m.j)((function(e){return e.key}),t.filter((function(e){return e.key})))),a=0,r=Object.keys(n);a<r.length;a++){var i=r[a],c=Object(f.b)(i,{getNeighbors:function(e){var t;return null!==(t=n[e])&&void 0!==t?t:[]}});if(c)return this.createError({path:this.path,message:p.a.t("SelectorCircularDependencyFound",{cycle:c.join(" -> ")})})}return!0}}),tasks:b.e().of(I.required()).defined().uniqueBy((function(e){return e.name}),(function(e){var t=e.duplicates;return p.a.t("DuplicateTaskTypeNames",{names:t.join(", ")})})),jsCommon:b.m().jsModule(),jsonSchema:b.m().jsonSchema(),components:b.e()})},993:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(7),r=n(3),i=n(2),c=n(1),s=n(18),o=n(11),u=n(12),l=n(15),d=n(9),j=n(1202),b=n.n(j);function p(e,t){return new m(e,t)}var m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.m(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.i();return Object(i.a)(this,n),(e=t.call(this,{type:"map"})).key=a,e.value=r,e}return Object(c.a)(n,[{key:"_typeCheck",value:function(e){return e&&"object"===typeof e}},{key:"_cast",value:function(e,t){var a=this,i=Object(s.a)(Object(o.a)(n.prototype),"_cast",this).call(this,e,t),c={};return Object.entries(i).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];c[a.key.cast(n)]=a.value.cast(i)})),c}},{key:"_validate",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,u=[],l=i.abortEarly,j=i.sync,p=i.path,m=void 0===p?"":p,v=null!=i.originalValue?i.originalValue:e,f=this.key,h=this.value;Object(s.a)(Object(o.a)(n.prototype),"_validate",this).call(this,e,i,(function(e,n){var s;if(e){if(!d.c.isError(e)||l)return c(e,n);u.push(e)}if(!t._typeCheck(n))return u.length&&c(u[0]),void c(null,n);v=null!==(s=v)&&void 0!==s?s:n;for(var o=[],p=function(){var e=Object(r.a)(x[O],2),t=e[0],c=e[1],s=Object(a.a)(Object(a.a)({},i),{},{strict:!0,parent:n,path:m?"".concat(m,".").concat(t):t,originalValue:v[t]});o.push((function(e,n){f.validate(t,s).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))})),o.push((function(e,t){h.validate(c,s).then((function(e){return t(null,e)})).catch((function(e){return t(e)}))}))},O=0,x=Object.entries(n);O<x.length;O++)p();return b()({sync:j,path:m,value:n,errors:u,tests:o,endEarly:l},c)}))}},{key:"clone",value:function(e){var t,a,r=Object(s.a)(Object(o.a)(n.prototype),"clone",this).call(this,e);return r.key=null===(t=this.key)||void 0===t?void 0:t.clone(),r.value=null===(a=this.value)||void 0===a?void 0:a.clone(),r}}]),n}(d.a);function v(e,t){return p(e,t)}p.prototype=m.prototype}}]);
//# sourceMappingURL=52.090eb39b.chunk.js.map